(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ea(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const wt={},tr=[],ke=()=>{},Qd=()=>!1,Pi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ta=e=>e.startsWith("onUpdate:"),le=Object.assign,wa=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Yd=Object.prototype.hasOwnProperty,vt=(e,t)=>Yd.call(e,t),rt=Array.isArray,er=e=>ms(e)==="[object Map]",Di=e=>ms(e)==="[object Set]",eu=e=>ms(e)==="[object Date]",lt=e=>typeof e=="function",Mt=e=>typeof e=="string",Se=e=>typeof e=="symbol",bt=e=>e!==null&&typeof e=="object",Qc=e=>(bt(e)||lt(e))&&lt(e.then)&&lt(e.catch),Yc=Object.prototype.toString,ms=e=>Yc.call(e),Xd=e=>ms(e).slice(8,-1),Xc=e=>ms(e)==="[object Object]",Ia=e=>Mt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Kr=Ea(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Vi=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Jd=/-(\w)/g,mn=Vi(e=>e.replace(Jd,(t,n)=>n?n.toUpperCase():"")),Zd=/\B([A-Z])/g,jn=Vi(e=>e.replace(Zd,"-$1").toLowerCase()),Jc=Vi(e=>e.charAt(0).toUpperCase()+e.slice(1)),go=Vi(e=>e?`on${Jc(e)}`:""),hn=(e,t)=>!Object.is(e,t),Xs=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Zc=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},oi=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let nu;const xi=()=>nu||(nu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Aa(e){if(rt(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=Mt(r)?rp(r):Aa(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Mt(e)||bt(e))return e}const tp=/;(?![^(]*\))/g,ep=/:([^]+)/,np=/\/\*[^]*?\*\//g;function rp(e){const t={};return e.replace(np,"").split(tp).forEach(n=>{if(n){const r=n.split(ep);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function ba(e){let t="";if(Mt(e))t=e;else if(rt(e))for(let n=0;n<e.length;n++){const r=ba(e[n]);r&&(t+=r+" ")}else if(bt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const sp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ip=Ea(sp);function th(e){return!!e||e===""}function op(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Oi(e[r],t[r]);return n}function Oi(e,t){if(e===t)return!0;let n=eu(e),r=eu(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=Se(e),r=Se(t),n||r)return e===t;if(n=rt(e),r=rt(t),n||r)return n&&r?op(e,t):!1;if(n=bt(e),r=bt(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const a in e){const l=e.hasOwnProperty(a),c=t.hasOwnProperty(a);if(l&&!c||!l&&c||!Oi(e[a],t[a]))return!1}}return String(e)===String(t)}function ap(e,t){return e.findIndex(n=>Oi(n,t))}const eh=e=>!!(e&&e.__v_isRef===!0),kt=e=>Mt(e)?e:e==null?"":rt(e)||bt(e)&&(e.toString===Yc||!lt(e.toString))?eh(e)?kt(e.value):JSON.stringify(e,nh,2):String(e),nh=(e,t)=>eh(t)?nh(e,t.value):er(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[_o(r,i)+" =>"]=s,n),{})}:Di(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>_o(n))}:Se(t)?_o(t):bt(t)&&!rt(t)&&!Xc(t)?String(t):t,_o=(e,t="")=>{var n;return Se(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ce;class lp{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ce,!t&&ce&&(this.index=(ce.scopes||(ce.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=ce;try{return ce=this,t()}finally{ce=n}}}on(){++this._on===1&&(this.prevScope=ce,ce=this)}off(){this._on>0&&--this._on===0&&(ce=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function up(){return ce}let It;const yo=new WeakSet;class rh{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ce&&ce.active&&ce.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,yo.has(this)&&(yo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ih(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ru(this),oh(this);const t=It,n=Ce;It=this,Ce=!0;try{return this.fn()}finally{ah(this),It=t,Ce=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ra(t);this.deps=this.depsTail=void 0,ru(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?yo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Fo(this)&&this.run()}get dirty(){return Fo(this)}}let sh=0,Gr,Qr;function ih(e,t=!1){if(e.flags|=8,t){e.next=Qr,Qr=e;return}e.next=Gr,Gr=e}function Ca(){sh++}function Sa(){if(--sh>0)return;if(Qr){let t=Qr;for(Qr=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Gr;){let t=Gr;for(Gr=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function oh(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function ah(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Ra(r),cp(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function Fo(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(lh(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function lh(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===rs)||(e.globalVersion=rs,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Fo(e))))return;e.flags|=2;const t=e.dep,n=It,r=Ce;It=e,Ce=!0;try{oh(e);const s=e.fn(e._value);(t.version===0||hn(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{It=n,Ce=r,ah(e),e.flags&=-3}}function Ra(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Ra(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function cp(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Ce=!0;const uh=[];function Ge(){uh.push(Ce),Ce=!1}function Qe(){const e=uh.pop();Ce=e===void 0?!0:e}function ru(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=It;It=void 0;try{t()}finally{It=n}}}let rs=0;class hp{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Pa{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!It||!Ce||It===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==It)n=this.activeLink=new hp(It,this),It.deps?(n.prevDep=It.depsTail,It.depsTail.nextDep=n,It.depsTail=n):It.deps=It.depsTail=n,ch(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=It.depsTail,n.nextDep=void 0,It.depsTail.nextDep=n,It.depsTail=n,It.deps===n&&(It.deps=r)}return n}trigger(t){this.version++,rs++,this.notify(t)}notify(t){Ca();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Sa()}}}function ch(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)ch(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Bo=new WeakMap,Ln=Symbol(""),Uo=Symbol(""),ss=Symbol("");function Zt(e,t,n){if(Ce&&It){let r=Bo.get(e);r||Bo.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new Pa),s.map=r,s.key=n),s.track()}}function We(e,t,n,r,s,i){const a=Bo.get(e);if(!a){rs++;return}const l=c=>{c&&c.trigger()};if(Ca(),t==="clear")a.forEach(l);else{const c=rt(e),f=c&&Ia(n);if(c&&n==="length"){const d=Number(r);a.forEach((m,E)=>{(E==="length"||E===ss||!Se(E)&&E>=d)&&l(m)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),f&&l(a.get(ss)),t){case"add":c?f&&l(a.get("length")):(l(a.get(Ln)),er(e)&&l(a.get(Uo)));break;case"delete":c||(l(a.get(Ln)),er(e)&&l(a.get(Uo)));break;case"set":er(e)&&l(a.get(Ln));break}}Sa()}function Kn(e){const t=yt(e);return t===e?t:(Zt(t,"iterate",ss),we(e)?t:t.map(Ht))}function Ni(e){return Zt(e=yt(e),"iterate",ss),e}const fp={__proto__:null,[Symbol.iterator](){return vo(this,Symbol.iterator,Ht)},concat(...e){return Kn(this).concat(...e.map(t=>rt(t)?Kn(t):t))},entries(){return vo(this,"entries",e=>(e[1]=Ht(e[1]),e))},every(e,t){return He(this,"every",e,t,void 0,arguments)},filter(e,t){return He(this,"filter",e,t,n=>n.map(Ht),arguments)},find(e,t){return He(this,"find",e,t,Ht,arguments)},findIndex(e,t){return He(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return He(this,"findLast",e,t,Ht,arguments)},findLastIndex(e,t){return He(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return He(this,"forEach",e,t,void 0,arguments)},includes(...e){return Eo(this,"includes",e)},indexOf(...e){return Eo(this,"indexOf",e)},join(e){return Kn(this).join(e)},lastIndexOf(...e){return Eo(this,"lastIndexOf",e)},map(e,t){return He(this,"map",e,t,void 0,arguments)},pop(){return Br(this,"pop")},push(...e){return Br(this,"push",e)},reduce(e,...t){return su(this,"reduce",e,t)},reduceRight(e,...t){return su(this,"reduceRight",e,t)},shift(){return Br(this,"shift")},some(e,t){return He(this,"some",e,t,void 0,arguments)},splice(...e){return Br(this,"splice",e)},toReversed(){return Kn(this).toReversed()},toSorted(e){return Kn(this).toSorted(e)},toSpliced(...e){return Kn(this).toSpliced(...e)},unshift(...e){return Br(this,"unshift",e)},values(){return vo(this,"values",Ht)}};function vo(e,t,n){const r=Ni(e),s=r[t]();return r!==e&&!we(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const dp=Array.prototype;function He(e,t,n,r,s,i){const a=Ni(e),l=a!==e&&!we(e),c=a[t];if(c!==dp[t]){const m=c.apply(e,i);return l?Ht(m):m}let f=n;a!==e&&(l?f=function(m,E){return n.call(this,Ht(m),E,e)}:n.length>2&&(f=function(m,E){return n.call(this,m,E,e)}));const d=c.call(a,f,r);return l&&s?s(d):d}function su(e,t,n,r){const s=Ni(e);let i=n;return s!==e&&(we(e)?n.length>3&&(i=function(a,l,c){return n.call(this,a,l,c,e)}):i=function(a,l,c){return n.call(this,a,Ht(l),c,e)}),s[t](i,...r)}function Eo(e,t,n){const r=yt(e);Zt(r,"iterate",ss);const s=r[t](...n);return(s===-1||s===!1)&&Oa(n[0])?(n[0]=yt(n[0]),r[t](...n)):s}function Br(e,t,n=[]){Ge(),Ca();const r=yt(e)[t].apply(e,n);return Sa(),Qe(),r}const pp=Ea("__proto__,__v_isRef,__isVue"),hh=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Se));function mp(e){Se(e)||(e=String(e));const t=yt(this);return Zt(t,"has",e),t.hasOwnProperty(e)}class fh{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?bp:gh:i?mh:ph).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=rt(t);if(!s){let c;if(a&&(c=fp[n]))return c;if(n==="hasOwnProperty")return mp}const l=Reflect.get(t,n,ne(t)?t:r);return(Se(n)?hh.has(n):pp(n))||(s||Zt(t,"get",n),i)?l:ne(l)?a&&Ia(n)?l:l.value:bt(l)?s?_h(l):Va(l):l}}class dh extends fh{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const c=gn(i);if(!we(r)&&!gn(r)&&(i=yt(i),r=yt(r)),!rt(t)&&ne(i)&&!ne(r))return c?!1:(i.value=r,!0)}const a=rt(t)&&Ia(n)?Number(n)<t.length:vt(t,n),l=Reflect.set(t,n,r,ne(t)?t:s);return t===yt(s)&&(a?hn(r,i)&&We(t,"set",n,r):We(t,"add",n,r)),l}deleteProperty(t,n){const r=vt(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&We(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!Se(n)||!hh.has(n))&&Zt(t,"has",n),r}ownKeys(t){return Zt(t,"iterate",rt(t)?"length":Ln),Reflect.ownKeys(t)}}class gp extends fh{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const _p=new dh,yp=new gp,vp=new dh(!0);const jo=e=>e,Bs=e=>Reflect.getPrototypeOf(e);function Ep(e,t,n){return function(...r){const s=this.__v_raw,i=yt(s),a=er(i),l=e==="entries"||e===Symbol.iterator&&a,c=e==="keys"&&a,f=s[e](...r),d=n?jo:t?ai:Ht;return!t&&Zt(i,"iterate",c?Uo:Ln),{next(){const{value:m,done:E}=f.next();return E?{value:m,done:E}:{value:l?[d(m[0]),d(m[1])]:d(m),done:E}},[Symbol.iterator](){return this}}}}function Us(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Tp(e,t){const n={get(s){const i=this.__v_raw,a=yt(i),l=yt(s);e||(hn(s,l)&&Zt(a,"get",s),Zt(a,"get",l));const{has:c}=Bs(a),f=t?jo:e?ai:Ht;if(c.call(a,s))return f(i.get(s));if(c.call(a,l))return f(i.get(l));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!e&&Zt(yt(s),"iterate",Ln),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,a=yt(i),l=yt(s);return e||(hn(s,l)&&Zt(a,"has",s),Zt(a,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const a=this,l=a.__v_raw,c=yt(l),f=t?jo:e?ai:Ht;return!e&&Zt(c,"iterate",Ln),l.forEach((d,m)=>s.call(i,f(d),f(m),a))}};return le(n,e?{add:Us("add"),set:Us("set"),delete:Us("delete"),clear:Us("clear")}:{add(s){!t&&!we(s)&&!gn(s)&&(s=yt(s));const i=yt(this);return Bs(i).has.call(i,s)||(i.add(s),We(i,"add",s,s)),this},set(s,i){!t&&!we(i)&&!gn(i)&&(i=yt(i));const a=yt(this),{has:l,get:c}=Bs(a);let f=l.call(a,s);f||(s=yt(s),f=l.call(a,s));const d=c.call(a,s);return a.set(s,i),f?hn(i,d)&&We(a,"set",s,i):We(a,"add",s,i),this},delete(s){const i=yt(this),{has:a,get:l}=Bs(i);let c=a.call(i,s);c||(s=yt(s),c=a.call(i,s)),l&&l.call(i,s);const f=i.delete(s);return c&&We(i,"delete",s,void 0),f},clear(){const s=yt(this),i=s.size!==0,a=s.clear();return i&&We(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Ep(s,e,t)}),n}function Da(e,t){const n=Tp(e,t);return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(vt(n,s)&&s in r?n:r,s,i)}const wp={get:Da(!1,!1)},Ip={get:Da(!1,!0)},Ap={get:Da(!0,!1)};const ph=new WeakMap,mh=new WeakMap,gh=new WeakMap,bp=new WeakMap;function Cp(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Sp(e){return e.__v_skip||!Object.isExtensible(e)?0:Cp(Xd(e))}function Va(e){return gn(e)?e:xa(e,!1,_p,wp,ph)}function Rp(e){return xa(e,!1,vp,Ip,mh)}function _h(e){return xa(e,!0,yp,Ap,gh)}function xa(e,t,n,r,s){if(!bt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=Sp(e);if(i===0)return e;const a=s.get(e);if(a)return a;const l=new Proxy(e,i===2?r:n);return s.set(e,l),l}function nr(e){return gn(e)?nr(e.__v_raw):!!(e&&e.__v_isReactive)}function gn(e){return!!(e&&e.__v_isReadonly)}function we(e){return!!(e&&e.__v_isShallow)}function Oa(e){return e?!!e.__v_raw:!1}function yt(e){const t=e&&e.__v_raw;return t?yt(t):e}function Pp(e){return!vt(e,"__v_skip")&&Object.isExtensible(e)&&Zc(e,"__v_skip",!0),e}const Ht=e=>bt(e)?Va(e):e,ai=e=>bt(e)?_h(e):e;function ne(e){return e?e.__v_isRef===!0:!1}function sn(e){return Dp(e,!1)}function Dp(e,t){return ne(e)?e:new Vp(e,t)}class Vp{constructor(t,n){this.dep=new Pa,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:yt(t),this._value=n?t:Ht(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||we(t)||gn(t);t=r?t:yt(t),hn(t,n)&&(this._rawValue=t,this._value=r?t:Ht(t),this.dep.trigger())}}function xp(e){return ne(e)?e.value:e}const Op={get:(e,t,n)=>t==="__v_raw"?e:xp(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return ne(s)&&!ne(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function yh(e){return nr(e)?e:new Proxy(e,Op)}class Np{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Pa(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=rs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&It!==this)return ih(this,!0),!0}get value(){const t=this.dep.track();return lh(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Mp(e,t,n=!1){let r,s;return lt(e)?r=e:(r=e.get,s=e.set),new Np(r,s,n)}const js={},li=new WeakMap;let xn;function kp(e,t=!1,n=xn){if(n){let r=li.get(n);r||li.set(n,r=[]),r.push(e)}}function Lp(e,t,n=wt){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:l,call:c}=n,f=D=>s?D:we(D)||s===!1||s===0?Ke(D,1):Ke(D);let d,m,E,S,V=!1,N=!1;if(ne(e)?(m=()=>e.value,V=we(e)):nr(e)?(m=()=>f(e),V=!0):rt(e)?(N=!0,V=e.some(D=>nr(D)||we(D)),m=()=>e.map(D=>{if(ne(D))return D.value;if(nr(D))return f(D);if(lt(D))return c?c(D,2):D()})):lt(e)?t?m=c?()=>c(e,2):e:m=()=>{if(E){Ge();try{E()}finally{Qe()}}const D=xn;xn=d;try{return c?c(e,3,[S]):e(S)}finally{xn=D}}:m=ke,t&&s){const D=m,J=s===!0?1/0:s;m=()=>Ke(D(),J)}const j=up(),Q=()=>{d.stop(),j&&j.active&&wa(j.effects,d)};if(i&&t){const D=t;t=(...J)=>{D(...J),Q()}}let U=N?new Array(e.length).fill(js):js;const F=D=>{if(!(!(d.flags&1)||!d.dirty&&!D))if(t){const J=d.run();if(s||V||(N?J.some((Z,I)=>hn(Z,U[I])):hn(J,U))){E&&E();const Z=xn;xn=d;try{const I=[J,U===js?void 0:N&&U[0]===js?[]:U,S];U=J,c?c(t,3,I):t(...I)}finally{xn=Z}}}else d.run()};return l&&l(F),d=new rh(m),d.scheduler=a?()=>a(F,!1):F,S=D=>kp(D,!1,d),E=d.onStop=()=>{const D=li.get(d);if(D){if(c)c(D,4);else for(const J of D)J();li.delete(d)}},t?r?F(!0):U=d.run():a?a(F.bind(null,!0),!0):d.run(),Q.pause=d.pause.bind(d),Q.resume=d.resume.bind(d),Q.stop=Q,Q}function Ke(e,t=1/0,n){if(t<=0||!bt(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,ne(e))Ke(e.value,t,n);else if(rt(e))for(let r=0;r<e.length;r++)Ke(e[r],t,n);else if(Di(e)||er(e))e.forEach(r=>{Ke(r,t,n)});else if(Xc(e)){for(const r in e)Ke(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Ke(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function gs(e,t,n,r){try{return r?e(...r):e()}catch(s){Mi(s,t,n)}}function Fe(e,t,n,r){if(lt(e)){const s=gs(e,t,n,r);return s&&Qc(s)&&s.catch(i=>{Mi(i,t,n)}),s}if(rt(e)){const s=[];for(let i=0;i<e.length;i++)s.push(Fe(e[i],t,n,r));return s}}function Mi(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||wt;if(t){let l=t.parent;const c=t.proxy,f=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let m=0;m<d.length;m++)if(d[m](e,c,f)===!1)return}l=l.parent}if(i){Ge(),gs(i,null,10,[e,c,f]),Qe();return}}Fp(e,n,s,r,a)}function Fp(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const ie=[];let Ve=-1;const rr=[];let an=null,Qn=0;const vh=Promise.resolve();let ui=null;function Eh(e){const t=ui||vh;return e?t.then(this?e.bind(this):e):t}function Bp(e){let t=Ve+1,n=ie.length;for(;t<n;){const r=t+n>>>1,s=ie[r],i=is(s);i<e||i===e&&s.flags&2?t=r+1:n=r}return t}function Na(e){if(!(e.flags&1)){const t=is(e),n=ie[ie.length-1];!n||!(e.flags&2)&&t>=is(n)?ie.push(e):ie.splice(Bp(t),0,e),e.flags|=1,Th()}}function Th(){ui||(ui=vh.then(Ih))}function Up(e){rt(e)?rr.push(...e):an&&e.id===-1?an.splice(Qn+1,0,e):e.flags&1||(rr.push(e),e.flags|=1),Th()}function iu(e,t,n=Ve+1){for(;n<ie.length;n++){const r=ie[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;ie.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function wh(e){if(rr.length){const t=[...new Set(rr)].sort((n,r)=>is(n)-is(r));if(rr.length=0,an){an.push(...t);return}for(an=t,Qn=0;Qn<an.length;Qn++){const n=an[Qn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}an=null,Qn=0}}const is=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Ih(e){try{for(Ve=0;Ve<ie.length;Ve++){const t=ie[Ve];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),gs(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ve<ie.length;Ve++){const t=ie[Ve];t&&(t.flags&=-2)}Ve=-1,ie.length=0,wh(),ui=null,(ie.length||rr.length)&&Ih()}}let ee=null,Ah=null;function ci(e){const t=ee;return ee=e,Ah=e&&e.type.__scopeId||null,t}function bh(e,t=ee,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&mu(-1);const i=ci(t);let a;try{a=e(...s)}finally{ci(i),r._d&&mu(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function To(e,t){if(ee===null)return e;const n=Bi(ee),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,a,l,c=wt]=t[s];i&&(lt(i)&&(i={mounted:i,updated:i}),i.deep&&Ke(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function Dn(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let a=0;a<s.length;a++){const l=s[a];i&&(l.oldValue=i[a].value);let c=l.dir[r];c&&(Ge(),Fe(c,n,8,[e.el,l,e,t]),Qe())}}const jp=Symbol("_vte"),$p=e=>e.__isTeleport;function Ma(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Ma(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ch(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function hi(e,t,n,r,s=!1){if(rt(e)){e.forEach((V,N)=>hi(V,t&&(rt(t)?t[N]:t),n,r,s));return}if(sr(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&hi(e,t,n,r.component.subTree);return}const i=r.shapeFlag&4?Bi(r.component):r.el,a=s?null:i,{i:l,r:c}=e,f=t&&t.r,d=l.refs===wt?l.refs={}:l.refs,m=l.setupState,E=yt(m),S=m===wt?()=>!1:V=>vt(E,V);if(f!=null&&f!==c&&(Mt(f)?(d[f]=null,S(f)&&(m[f]=null)):ne(f)&&(f.value=null)),lt(c))gs(c,l,12,[a,d]);else{const V=Mt(c),N=ne(c);if(V||N){const j=()=>{if(e.f){const Q=V?S(c)?m[c]:d[c]:c.value;s?rt(Q)&&wa(Q,i):rt(Q)?Q.includes(i)||Q.push(i):V?(d[c]=[i],S(c)&&(m[c]=d[c])):(c.value=[i],e.k&&(d[e.k]=c.value))}else V?(d[c]=a,S(c)&&(m[c]=a)):N&&(c.value=a,e.k&&(d[e.k]=a))};a?(j.id=-1,me(j,n)):j()}}}xi().requestIdleCallback;xi().cancelIdleCallback;const sr=e=>!!e.type.__asyncLoader,Sh=e=>e.type.__isKeepAlive;function qp(e,t){Rh(e,"a",t)}function Hp(e,t){Rh(e,"da",t)}function Rh(e,t,n=oe){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(ki(t,r,n),n){let s=n.parent;for(;s&&s.parent;)Sh(s.parent.vnode)&&zp(r,t,n,s),s=s.parent}}function zp(e,t,n,r){const s=ki(t,e,r,!0);Dh(()=>{wa(r[t],s)},n)}function ki(e,t,n=oe,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{Ge();const l=_s(n),c=Fe(t,n,e,a);return l(),Qe(),c});return r?s.unshift(i):s.push(i),i}}const Ze=e=>(t,n=oe)=>{(!as||e==="sp")&&ki(e,(...r)=>t(...r),n)},Wp=Ze("bm"),Ph=Ze("m"),Kp=Ze("bu"),Gp=Ze("u"),Qp=Ze("bum"),Dh=Ze("um"),Yp=Ze("sp"),Xp=Ze("rtg"),Jp=Ze("rtc");function Zp(e,t=oe){ki("ec",e,t)}const tm=Symbol.for("v-ndc");function ou(e,t,n,r){let s;const i=n,a=rt(e);if(a||Mt(e)){const l=a&&nr(e);let c=!1,f=!1;l&&(c=!we(e),f=gn(e),e=Ni(e)),s=new Array(e.length);for(let d=0,m=e.length;d<m;d++)s[d]=t(c?f?ai(Ht(e[d])):Ht(e[d]):e[d],d,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let l=0;l<e;l++)s[l]=t(l+1,l,void 0,i)}else if(bt(e))if(e[Symbol.iterator])s=Array.from(e,(l,c)=>t(l,c,void 0,i));else{const l=Object.keys(e);s=new Array(l.length);for(let c=0,f=l.length;c<f;c++){const d=l[c];s[c]=t(e[d],d,c,i)}}else s=[];return s}function em(e,t,n={},r,s){if(ee.ce||ee.parent&&sr(ee.parent)&&ee.parent.ce)return ge(),Wo(fe,null,[Ie("slot",n,r)],64);let i=e[t];i&&i._c&&(i._d=!1),ge();const a=i&&Vh(i(n)),l=n.key||a&&a.key,c=Wo(fe,{key:(l&&!Se(l)?l:`_${t}`)+""},a||[],a&&e._===1?64:-2);return i&&i._c&&(i._d=!0),c}function Vh(e){return e.some(t=>Fa(t)?!(t.type===Ye||t.type===fe&&!Vh(t.children)):!0)?e:null}const $o=e=>e?Jh(e)?Bi(e):$o(e.parent):null,Yr=le(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>$o(e.parent),$root:e=>$o(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Oh(e),$forceUpdate:e=>e.f||(e.f=()=>{Na(e.update)}),$nextTick:e=>e.n||(e.n=Eh.bind(e.proxy)),$watch:e=>Im.bind(e)}),wo=(e,t)=>e!==wt&&!e.__isScriptSetup&&vt(e,t),nm={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:l,appContext:c}=e;let f;if(t[0]!=="$"){const S=a[t];if(S!==void 0)switch(S){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(wo(r,t))return a[t]=1,r[t];if(s!==wt&&vt(s,t))return a[t]=2,s[t];if((f=e.propsOptions[0])&&vt(f,t))return a[t]=3,i[t];if(n!==wt&&vt(n,t))return a[t]=4,n[t];qo&&(a[t]=0)}}const d=Yr[t];let m,E;if(d)return t==="$attrs"&&Zt(e.attrs,"get",""),d(e);if((m=l.__cssModules)&&(m=m[t]))return m;if(n!==wt&&vt(n,t))return a[t]=4,n[t];if(E=c.config.globalProperties,vt(E,t))return E[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return wo(s,t)?(s[t]=n,!0):r!==wt&&vt(r,t)?(r[t]=n,!0):vt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},a){let l;return!!n[a]||e!==wt&&vt(e,a)||wo(t,a)||(l=i[0])&&vt(l,a)||vt(r,a)||vt(Yr,a)||vt(s.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:vt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function au(e){return rt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let qo=!0;function rm(e){const t=Oh(e),n=e.proxy,r=e.ctx;qo=!1,t.beforeCreate&&lu(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:a,watch:l,provide:c,inject:f,created:d,beforeMount:m,mounted:E,beforeUpdate:S,updated:V,activated:N,deactivated:j,beforeDestroy:Q,beforeUnmount:U,destroyed:F,unmounted:D,render:J,renderTracked:Z,renderTriggered:I,errorCaptured:g,serverPrefetch:_,expose:T,inheritAttrs:A,components:b,directives:y,filters:Wt}=t;if(f&&sm(f,r,null),a)for(const gt in a){const ct=a[gt];lt(ct)&&(r[gt]=ct.bind(n))}if(s){const gt=s.call(n,n);bt(gt)&&(e.data=Va(gt))}if(qo=!0,i)for(const gt in i){const ct=i[gt],ue=lt(ct)?ct.bind(n,n):lt(ct.get)?ct.get.bind(n,n):ke,ye=!lt(ct)&&lt(ct.set)?ct.set.bind(n):ke,ve=Go({get:ue,set:ye});Object.defineProperty(r,gt,{enumerable:!0,configurable:!0,get:()=>ve.value,set:St=>ve.value=St})}if(l)for(const gt in l)xh(l[gt],r,n,gt);if(c){const gt=lt(c)?c.call(n):c;Reflect.ownKeys(gt).forEach(ct=>{cm(ct,gt[ct])})}d&&lu(d,e,"c");function xt(gt,ct){rt(ct)?ct.forEach(ue=>gt(ue.bind(n))):ct&&gt(ct.bind(n))}if(xt(Wp,m),xt(Ph,E),xt(Kp,S),xt(Gp,V),xt(qp,N),xt(Hp,j),xt(Zp,g),xt(Jp,Z),xt(Xp,I),xt(Qp,U),xt(Dh,D),xt(Yp,_),rt(T))if(T.length){const gt=e.exposed||(e.exposed={});T.forEach(ct=>{Object.defineProperty(gt,ct,{get:()=>n[ct],set:ue=>n[ct]=ue})})}else e.exposed||(e.exposed={});J&&e.render===ke&&(e.render=J),A!=null&&(e.inheritAttrs=A),b&&(e.components=b),y&&(e.directives=y),_&&Ch(e)}function sm(e,t,n=ke){rt(e)&&(e=Ho(e));for(const r in e){const s=e[r];let i;bt(s)?"default"in s?i=Js(s.from||r,s.default,!0):i=Js(s.from||r):i=Js(s),ne(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[r]=i}}function lu(e,t,n){Fe(rt(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function xh(e,t,n,r){let s=r.includes(".")?Wh(n,r):()=>n[r];if(Mt(e)){const i=t[e];lt(i)&&Ao(s,i)}else if(lt(e))Ao(s,e.bind(n));else if(bt(e))if(rt(e))e.forEach(i=>xh(i,t,n,r));else{const i=lt(e.handler)?e.handler.bind(n):t[e.handler];lt(i)&&Ao(s,i,e)}}function Oh(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,l=i.get(t);let c;return l?c=l:!s.length&&!n&&!r?c=t:(c={},s.length&&s.forEach(f=>fi(c,f,a,!0)),fi(c,t,a)),bt(t)&&i.set(t,c),c}function fi(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&fi(e,i,n,!0),s&&s.forEach(a=>fi(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const l=im[a]||n&&n[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const im={data:uu,props:cu,emits:cu,methods:qr,computed:qr,beforeCreate:se,created:se,beforeMount:se,mounted:se,beforeUpdate:se,updated:se,beforeDestroy:se,beforeUnmount:se,destroyed:se,unmounted:se,activated:se,deactivated:se,errorCaptured:se,serverPrefetch:se,components:qr,directives:qr,watch:am,provide:uu,inject:om};function uu(e,t){return t?e?function(){return le(lt(e)?e.call(this,this):e,lt(t)?t.call(this,this):t)}:t:e}function om(e,t){return qr(Ho(e),Ho(t))}function Ho(e){if(rt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function se(e,t){return e?[...new Set([].concat(e,t))]:t}function qr(e,t){return e?le(Object.create(null),e,t):t}function cu(e,t){return e?rt(e)&&rt(t)?[...new Set([...e,...t])]:le(Object.create(null),au(e),au(t??{})):t}function am(e,t){if(!e)return t;if(!t)return e;const n=le(Object.create(null),e);for(const r in t)n[r]=se(e[r],t[r]);return n}function Nh(){return{app:null,config:{isNativeTag:Qd,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let lm=0;function um(e,t){return function(r,s=null){lt(r)||(r=le({},r)),s!=null&&!bt(s)&&(s=null);const i=Nh(),a=new WeakSet,l=[];let c=!1;const f=i.app={_uid:lm++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Hm,get config(){return i.config},set config(d){},use(d,...m){return a.has(d)||(d&&lt(d.install)?(a.add(d),d.install(f,...m)):lt(d)&&(a.add(d),d(f,...m))),f},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),f},component(d,m){return m?(i.components[d]=m,f):i.components[d]},directive(d,m){return m?(i.directives[d]=m,f):i.directives[d]},mount(d,m,E){if(!c){const S=f._ceVNode||Ie(r,s);return S.appContext=i,E===!0?E="svg":E===!1&&(E=void 0),e(S,d,E),c=!0,f._container=d,d.__vue_app__=f,Bi(S.component)}},onUnmount(d){l.push(d)},unmount(){c&&(Fe(l,f._instance,16),e(null,f._container),delete f._container.__vue_app__)},provide(d,m){return i.provides[d]=m,f},runWithContext(d){const m=ir;ir=f;try{return d()}finally{ir=m}}};return f}}let ir=null;function cm(e,t){if(oe){let n=oe.provides;const r=oe.parent&&oe.parent.provides;r===n&&(n=oe.provides=Object.create(r)),n[e]=t}}function Js(e,t,n=!1){const r=oe||ee;if(r||ir){let s=ir?ir._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&lt(t)?t.call(r&&r.proxy):t}}const Mh={},kh=()=>Object.create(Mh),Lh=e=>Object.getPrototypeOf(e)===Mh;function hm(e,t,n,r=!1){const s={},i=kh();e.propsDefaults=Object.create(null),Fh(e,t,s,i);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);n?e.props=r?s:Rp(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function fm(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=e,l=yt(s),[c]=e.propsOptions;let f=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let m=0;m<d.length;m++){let E=d[m];if(Li(e.emitsOptions,E))continue;const S=t[E];if(c)if(vt(i,E))S!==i[E]&&(i[E]=S,f=!0);else{const V=mn(E);s[V]=zo(c,l,V,S,e,!1)}else S!==i[E]&&(i[E]=S,f=!0)}}}else{Fh(e,t,s,i)&&(f=!0);let d;for(const m in l)(!t||!vt(t,m)&&((d=jn(m))===m||!vt(t,d)))&&(c?n&&(n[m]!==void 0||n[d]!==void 0)&&(s[m]=zo(c,l,m,void 0,e,!0)):delete s[m]);if(i!==l)for(const m in i)(!t||!vt(t,m))&&(delete i[m],f=!0)}f&&We(e.attrs,"set","")}function Fh(e,t,n,r){const[s,i]=e.propsOptions;let a=!1,l;if(t)for(let c in t){if(Kr(c))continue;const f=t[c];let d;s&&vt(s,d=mn(c))?!i||!i.includes(d)?n[d]=f:(l||(l={}))[d]=f:Li(e.emitsOptions,c)||(!(c in r)||f!==r[c])&&(r[c]=f,a=!0)}if(i){const c=yt(n),f=l||wt;for(let d=0;d<i.length;d++){const m=i[d];n[m]=zo(s,c,m,f[m],e,!vt(f,m))}}return a}function zo(e,t,n,r,s,i){const a=e[n];if(a!=null){const l=vt(a,"default");if(l&&r===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&lt(c)){const{propsDefaults:f}=s;if(n in f)r=f[n];else{const d=_s(s);r=f[n]=c.call(null,t),d()}}else r=c;s.ce&&s.ce._setProp(n,r)}a[0]&&(i&&!l?r=!1:a[1]&&(r===""||r===jn(n))&&(r=!0))}return r}const dm=new WeakMap;function Bh(e,t,n=!1){const r=n?dm:t.propsCache,s=r.get(e);if(s)return s;const i=e.props,a={},l=[];let c=!1;if(!lt(e)){const d=m=>{c=!0;const[E,S]=Bh(m,t,!0);le(a,E),S&&l.push(...S)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!i&&!c)return bt(e)&&r.set(e,tr),tr;if(rt(i))for(let d=0;d<i.length;d++){const m=mn(i[d]);hu(m)&&(a[m]=wt)}else if(i)for(const d in i){const m=mn(d);if(hu(m)){const E=i[d],S=a[m]=rt(E)||lt(E)?{type:E}:le({},E),V=S.type;let N=!1,j=!0;if(rt(V))for(let Q=0;Q<V.length;++Q){const U=V[Q],F=lt(U)&&U.name;if(F==="Boolean"){N=!0;break}else F==="String"&&(j=!1)}else N=lt(V)&&V.name==="Boolean";S[0]=N,S[1]=j,(N||vt(S,"default"))&&l.push(m)}}const f=[a,l];return bt(e)&&r.set(e,f),f}function hu(e){return e[0]!=="$"&&!Kr(e)}const ka=e=>e[0]==="_"||e==="$stable",La=e=>rt(e)?e.map(Ne):[Ne(e)],pm=(e,t,n)=>{if(t._n)return t;const r=bh((...s)=>La(t(...s)),n);return r._c=!1,r},Uh=(e,t,n)=>{const r=e._ctx;for(const s in e){if(ka(s))continue;const i=e[s];if(lt(i))t[s]=pm(s,i,r);else if(i!=null){const a=La(i);t[s]=()=>a}}},jh=(e,t)=>{const n=La(t);e.slots.default=()=>n},$h=(e,t,n)=>{for(const r in t)(n||!ka(r))&&(e[r]=t[r])},mm=(e,t,n)=>{const r=e.slots=kh();if(e.vnode.shapeFlag&32){const s=t._;s?($h(r,t,n),n&&Zc(r,"_",s,!0)):Uh(t,r)}else t&&jh(e,t)},gm=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,a=wt;if(r.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:$h(s,t,n):(i=!t.$stable,Uh(t,s)),a=t}else t&&(jh(e,t),a={default:1});if(i)for(const l in s)!ka(l)&&a[l]==null&&delete s[l]},me=Dm;function _m(e){return ym(e)}function ym(e,t){const n=xi();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:l,createComment:c,setText:f,setElementText:d,parentNode:m,nextSibling:E,setScopeId:S=ke,insertStaticContent:V}=e,N=(v,w,P,k=null,O=null,M=null,W=void 0,$=null,B=!!w.dynamicChildren)=>{if(v===w)return;v&&!Ur(v,w)&&(k=je(v),St(v,O,M,!0),v=null),w.patchFlag===-2&&(B=!1,w.dynamicChildren=null);const{type:L,ref:Y,shapeFlag:z}=w;switch(L){case Fi:j(v,w,P,k);break;case Ye:Q(v,w,P,k);break;case bo:v==null&&U(w,P,k,W);break;case fe:b(v,w,P,k,O,M,W,$,B);break;default:z&1?J(v,w,P,k,O,M,W,$,B):z&6?y(v,w,P,k,O,M,W,$,B):(z&64||z&128)&&L.process(v,w,P,k,O,M,W,$,B,Pe)}Y!=null&&O&&hi(Y,v&&v.ref,M,w||v,!w)},j=(v,w,P,k)=>{if(v==null)r(w.el=l(w.children),P,k);else{const O=w.el=v.el;w.children!==v.children&&f(O,w.children)}},Q=(v,w,P,k)=>{v==null?r(w.el=c(w.children||""),P,k):w.el=v.el},U=(v,w,P,k)=>{[v.el,v.anchor]=V(v.children,w,P,k,v.el,v.anchor)},F=({el:v,anchor:w},P,k)=>{let O;for(;v&&v!==w;)O=E(v),r(v,P,k),v=O;r(w,P,k)},D=({el:v,anchor:w})=>{let P;for(;v&&v!==w;)P=E(v),s(v),v=P;s(w)},J=(v,w,P,k,O,M,W,$,B)=>{w.type==="svg"?W="svg":w.type==="math"&&(W="mathml"),v==null?Z(w,P,k,O,M,W,$,B):_(v,w,O,M,W,$,B)},Z=(v,w,P,k,O,M,W,$)=>{let B,L;const{props:Y,shapeFlag:z,transition:G,dirs:nt}=v;if(B=v.el=a(v.type,M,Y&&Y.is,Y),z&8?d(B,v.children):z&16&&g(v.children,B,null,k,O,Io(v,M),W,$),nt&&Dn(v,null,k,"created"),I(B,v,v.scopeId,W,k),Y){for(const at in Y)at!=="value"&&!Kr(at)&&i(B,at,null,Y[at],M,k);"value"in Y&&i(B,"value",null,Y.value,M),(L=Y.onVnodeBeforeMount)&&De(L,k,v)}nt&&Dn(v,null,k,"beforeMount");const tt=vm(O,G);tt&&G.beforeEnter(B),r(B,w,P),((L=Y&&Y.onVnodeMounted)||tt||nt)&&me(()=>{L&&De(L,k,v),tt&&G.enter(B),nt&&Dn(v,null,k,"mounted")},O)},I=(v,w,P,k,O)=>{if(P&&S(v,P),k)for(let M=0;M<k.length;M++)S(v,k[M]);if(O){let M=O.subTree;if(w===M||Gh(M.type)&&(M.ssContent===w||M.ssFallback===w)){const W=O.vnode;I(v,W,W.scopeId,W.slotScopeIds,O.parent)}}},g=(v,w,P,k,O,M,W,$,B=0)=>{for(let L=B;L<v.length;L++){const Y=v[L]=$?ln(v[L]):Ne(v[L]);N(null,Y,w,P,k,O,M,W,$)}},_=(v,w,P,k,O,M,W)=>{const $=w.el=v.el;let{patchFlag:B,dynamicChildren:L,dirs:Y}=w;B|=v.patchFlag&16;const z=v.props||wt,G=w.props||wt;let nt;if(P&&Vn(P,!1),(nt=G.onVnodeBeforeUpdate)&&De(nt,P,w,v),Y&&Dn(w,v,P,"beforeUpdate"),P&&Vn(P,!0),(z.innerHTML&&G.innerHTML==null||z.textContent&&G.textContent==null)&&d($,""),L?T(v.dynamicChildren,L,$,P,k,Io(w,O),M):W||ct(v,w,$,null,P,k,Io(w,O),M,!1),B>0){if(B&16)A($,z,G,P,O);else if(B&2&&z.class!==G.class&&i($,"class",null,G.class,O),B&4&&i($,"style",z.style,G.style,O),B&8){const tt=w.dynamicProps;for(let at=0;at<tt.length;at++){const ht=tt[at],Kt=z[ht],Ut=G[ht];(Ut!==Kt||ht==="value")&&i($,ht,Kt,Ut,O,P)}}B&1&&v.children!==w.children&&d($,w.children)}else!W&&L==null&&A($,z,G,P,O);((nt=G.onVnodeUpdated)||Y)&&me(()=>{nt&&De(nt,P,w,v),Y&&Dn(w,v,P,"updated")},k)},T=(v,w,P,k,O,M,W)=>{for(let $=0;$<w.length;$++){const B=v[$],L=w[$],Y=B.el&&(B.type===fe||!Ur(B,L)||B.shapeFlag&198)?m(B.el):P;N(B,L,Y,null,k,O,M,W,!0)}},A=(v,w,P,k,O)=>{if(w!==P){if(w!==wt)for(const M in w)!Kr(M)&&!(M in P)&&i(v,M,w[M],null,O,k);for(const M in P){if(Kr(M))continue;const W=P[M],$=w[M];W!==$&&M!=="value"&&i(v,M,$,W,O,k)}"value"in P&&i(v,"value",w.value,P.value,O)}},b=(v,w,P,k,O,M,W,$,B)=>{const L=w.el=v?v.el:l(""),Y=w.anchor=v?v.anchor:l("");let{patchFlag:z,dynamicChildren:G,slotScopeIds:nt}=w;nt&&($=$?$.concat(nt):nt),v==null?(r(L,P,k),r(Y,P,k),g(w.children||[],P,Y,O,M,W,$,B)):z>0&&z&64&&G&&v.dynamicChildren?(T(v.dynamicChildren,G,P,O,M,W,$),(w.key!=null||O&&w===O.subTree)&&qh(v,w,!0)):ct(v,w,P,Y,O,M,W,$,B)},y=(v,w,P,k,O,M,W,$,B)=>{w.slotScopeIds=$,v==null?w.shapeFlag&512?O.ctx.activate(w,P,k,W,B):Wt(w,P,k,O,M,W,B):Ae(v,w,B)},Wt=(v,w,P,k,O,M,W)=>{const $=v.component=Fm(v,k,O);if(Sh(v)&&($.ctx.renderer=Pe),Bm($,!1,W),$.asyncDep){if(O&&O.registerDep($,xt,W),!v.el){const B=$.subTree=Ie(Ye);Q(null,B,w,P)}}else xt($,v,w,P,O,M,W)},Ae=(v,w,P)=>{const k=w.component=v.component;if(Rm(v,w,P))if(k.asyncDep&&!k.asyncResolved){gt(k,w,P);return}else k.next=w,k.update();else w.el=v.el,k.vnode=w},xt=(v,w,P,k,O,M,W)=>{const $=()=>{if(v.isMounted){let{next:z,bu:G,u:nt,parent:tt,vnode:at}=v;{const Gt=Hh(v);if(Gt){z&&(z.el=at.el,gt(v,z,W)),Gt.asyncDep.then(()=>{v.isUnmounted||$()});return}}let ht=z,Kt;Vn(v,!1),z?(z.el=at.el,gt(v,z,W)):z=at,G&&Xs(G),(Kt=z.props&&z.props.onVnodeBeforeUpdate)&&De(Kt,tt,z,at),Vn(v,!0);const Ut=du(v),Ee=v.subTree;v.subTree=Ut,N(Ee,Ut,m(Ee.el),je(Ee),v,O,M),z.el=Ut.el,ht===null&&Pm(v,Ut.el),nt&&me(nt,O),(Kt=z.props&&z.props.onVnodeUpdated)&&me(()=>De(Kt,tt,z,at),O)}else{let z;const{el:G,props:nt}=w,{bm:tt,m:at,parent:ht,root:Kt,type:Ut}=v,Ee=sr(w);Vn(v,!1),tt&&Xs(tt),!Ee&&(z=nt&&nt.onVnodeBeforeMount)&&De(z,ht,w),Vn(v,!0);{Kt.ce&&Kt.ce._injectChildStyle(Ut);const Gt=v.subTree=du(v);N(null,Gt,P,k,v,O,M),w.el=Gt.el}if(at&&me(at,O),!Ee&&(z=nt&&nt.onVnodeMounted)){const Gt=w;me(()=>De(z,ht,Gt),O)}(w.shapeFlag&256||ht&&sr(ht.vnode)&&ht.vnode.shapeFlag&256)&&v.a&&me(v.a,O),v.isMounted=!0,w=P=k=null}};v.scope.on();const B=v.effect=new rh($);v.scope.off();const L=v.update=B.run.bind(B),Y=v.job=B.runIfDirty.bind(B);Y.i=v,Y.id=v.uid,B.scheduler=()=>Na(Y),Vn(v,!0),L()},gt=(v,w,P)=>{w.component=v;const k=v.vnode.props;v.vnode=w,v.next=null,fm(v,w.props,k,P),gm(v,w.children,P),Ge(),iu(v),Qe()},ct=(v,w,P,k,O,M,W,$,B=!1)=>{const L=v&&v.children,Y=v?v.shapeFlag:0,z=w.children,{patchFlag:G,shapeFlag:nt}=w;if(G>0){if(G&128){ye(L,z,P,k,O,M,W,$,B);return}else if(G&256){ue(L,z,P,k,O,M,W,$,B);return}}nt&8?(Y&16&&bn(L,O,M),z!==L&&d(P,z)):Y&16?nt&16?ye(L,z,P,k,O,M,W,$,B):bn(L,O,M,!0):(Y&8&&d(P,""),nt&16&&g(z,P,k,O,M,W,$,B))},ue=(v,w,P,k,O,M,W,$,B)=>{v=v||tr,w=w||tr;const L=v.length,Y=w.length,z=Math.min(L,Y);let G;for(G=0;G<z;G++){const nt=w[G]=B?ln(w[G]):Ne(w[G]);N(v[G],nt,P,null,O,M,W,$,B)}L>Y?bn(v,O,M,!0,!1,z):g(w,P,k,O,M,W,$,B,z)},ye=(v,w,P,k,O,M,W,$,B)=>{let L=0;const Y=w.length;let z=v.length-1,G=Y-1;for(;L<=z&&L<=G;){const nt=v[L],tt=w[L]=B?ln(w[L]):Ne(w[L]);if(Ur(nt,tt))N(nt,tt,P,null,O,M,W,$,B);else break;L++}for(;L<=z&&L<=G;){const nt=v[z],tt=w[G]=B?ln(w[G]):Ne(w[G]);if(Ur(nt,tt))N(nt,tt,P,null,O,M,W,$,B);else break;z--,G--}if(L>z){if(L<=G){const nt=G+1,tt=nt<Y?w[nt].el:k;for(;L<=G;)N(null,w[L]=B?ln(w[L]):Ne(w[L]),P,tt,O,M,W,$,B),L++}}else if(L>G)for(;L<=z;)St(v[L],O,M,!0),L++;else{const nt=L,tt=L,at=new Map;for(L=tt;L<=G;L++){const jt=w[L]=B?ln(w[L]):Ne(w[L]);jt.key!=null&&at.set(jt.key,L)}let ht,Kt=0;const Ut=G-tt+1;let Ee=!1,Gt=0;const tn=new Array(Ut);for(L=0;L<Ut;L++)tn[L]=0;for(L=nt;L<=z;L++){const jt=v[L];if(Kt>=Ut){St(jt,O,M,!0);continue}let Te;if(jt.key!=null)Te=at.get(jt.key);else for(ht=tt;ht<=G;ht++)if(tn[ht-tt]===0&&Ur(jt,w[ht])){Te=ht;break}Te===void 0?St(jt,O,M,!0):(tn[Te-tt]=L+1,Te>=Gt?Gt=Te:Ee=!0,N(jt,w[Te],P,null,O,M,W,$,B),Kt++)}const Cr=Ee?Em(tn):tr;for(ht=Cr.length-1,L=Ut-1;L>=0;L--){const jt=tt+L,Te=w[jt],Is=jt+1<Y?w[jt+1].el:k;tn[L]===0?N(null,Te,P,Is,O,M,W,$,B):Ee&&(ht<0||L!==Cr[ht]?ve(Te,P,Is,2):ht--)}}},ve=(v,w,P,k,O=null)=>{const{el:M,type:W,transition:$,children:B,shapeFlag:L}=v;if(L&6){ve(v.component.subTree,w,P,k);return}if(L&128){v.suspense.move(w,P,k);return}if(L&64){W.move(v,w,P,Pe);return}if(W===fe){r(M,w,P);for(let z=0;z<B.length;z++)ve(B[z],w,P,k);r(v.anchor,w,P);return}if(W===bo){F(v,w,P);return}if(k!==2&&L&1&&$)if(k===0)$.beforeEnter(M),r(M,w,P),me(()=>$.enter(M),O);else{const{leave:z,delayLeave:G,afterLeave:nt}=$,tt=()=>{v.ctx.isUnmounted?s(M):r(M,w,P)},at=()=>{z(M,()=>{tt(),nt&&nt()})};G?G(M,tt,at):at()}else r(M,w,P)},St=(v,w,P,k=!1,O=!1)=>{const{type:M,props:W,ref:$,children:B,dynamicChildren:L,shapeFlag:Y,patchFlag:z,dirs:G,cacheIndex:nt}=v;if(z===-2&&(O=!1),$!=null&&(Ge(),hi($,null,P,v,!0),Qe()),nt!=null&&(w.renderCache[nt]=void 0),Y&256){w.ctx.deactivate(v);return}const tt=Y&1&&G,at=!sr(v);let ht;if(at&&(ht=W&&W.onVnodeBeforeUnmount)&&De(ht,w,v),Y&6)An(v.component,P,k);else{if(Y&128){v.suspense.unmount(P,k);return}tt&&Dn(v,null,w,"beforeUnmount"),Y&64?v.type.remove(v,w,P,Pe,k):L&&!L.hasOnce&&(M!==fe||z>0&&z&64)?bn(L,w,P,!1,!0):(M===fe&&z&384||!O&&Y&16)&&bn(B,w,P),k&&Ot(v)}(at&&(ht=W&&W.onVnodeUnmounted)||tt)&&me(()=>{ht&&De(ht,w,v),tt&&Dn(v,null,w,"unmounted")},P)},Ot=v=>{const{type:w,el:P,anchor:k,transition:O}=v;if(w===fe){Zi(P,k);return}if(w===bo){D(v);return}const M=()=>{s(P),O&&!O.persisted&&O.afterLeave&&O.afterLeave()};if(v.shapeFlag&1&&O&&!O.persisted){const{leave:W,delayLeave:$}=O,B=()=>W(P,M);$?$(v.el,M,B):B()}else M()},Zi=(v,w)=>{let P;for(;v!==w;)P=E(v),s(v),v=P;s(w)},An=(v,w,P)=>{const{bum:k,scope:O,job:M,subTree:W,um:$,m:B,a:L,parent:Y,slots:{__:z}}=v;fu(B),fu(L),k&&Xs(k),Y&&rt(z)&&z.forEach(G=>{Y.renderCache[G]=void 0}),O.stop(),M&&(M.flags|=8,St(W,v,w,P)),$&&me($,w),me(()=>{v.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&v.asyncDep&&!v.asyncResolved&&v.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},bn=(v,w,P,k=!1,O=!1,M=0)=>{for(let W=M;W<v.length;W++)St(v[W],w,P,k,O)},je=v=>{if(v.shapeFlag&6)return je(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const w=E(v.anchor||v.el),P=w&&w[jp];return P?E(P):w};let Ar=!1;const ws=(v,w,P)=>{v==null?w._vnode&&St(w._vnode,null,null,!0):N(w._vnode||null,v,w,null,null,null,P),w._vnode=v,Ar||(Ar=!0,iu(),wh(),Ar=!1)},Pe={p:N,um:St,m:ve,r:Ot,mt:Wt,mc:g,pc:ct,pbc:T,n:je,o:e};return{render:ws,hydrate:void 0,createApp:um(ws)}}function Io({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Vn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function vm(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function qh(e,t,n=!1){const r=e.children,s=t.children;if(rt(r)&&rt(s))for(let i=0;i<r.length;i++){const a=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=ln(s[i]),l.el=a.el),!n&&l.patchFlag!==-2&&qh(a,l)),l.type===Fi&&(l.el=a.el),l.type===Ye&&!l.el&&(l.el=a.el)}}function Em(e){const t=e.slice(),n=[0];let r,s,i,a,l;const c=e.length;for(r=0;r<c;r++){const f=e[r];if(f!==0){if(s=n[n.length-1],e[s]<f){t[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)l=i+a>>1,e[n[l]]<f?i=l+1:a=l;f<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}function Hh(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Hh(t)}function fu(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Tm=Symbol.for("v-scx"),wm=()=>Js(Tm);function Ao(e,t,n){return zh(e,t,n)}function zh(e,t,n=wt){const{immediate:r,deep:s,flush:i,once:a}=n,l=le({},n),c=t&&r||!t&&i!=="post";let f;if(as){if(i==="sync"){const S=wm();f=S.__watcherHandles||(S.__watcherHandles=[])}else if(!c){const S=()=>{};return S.stop=ke,S.resume=ke,S.pause=ke,S}}const d=oe;l.call=(S,V,N)=>Fe(S,d,V,N);let m=!1;i==="post"?l.scheduler=S=>{me(S,d&&d.suspense)}:i!=="sync"&&(m=!0,l.scheduler=(S,V)=>{V?S():Na(S)}),l.augmentJob=S=>{t&&(S.flags|=4),m&&(S.flags|=2,d&&(S.id=d.uid,S.i=d))};const E=Lp(e,t,l);return as&&(f?f.push(E):c&&E()),E}function Im(e,t,n){const r=this.proxy,s=Mt(e)?e.includes(".")?Wh(r,e):()=>r[e]:e.bind(r,r);let i;lt(t)?i=t:(i=t.handler,n=t);const a=_s(this),l=zh(s,i.bind(r),n);return a(),l}function Wh(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const Am=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${mn(t)}Modifiers`]||e[`${jn(t)}Modifiers`];function bm(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||wt;let s=n;const i=t.startsWith("update:"),a=i&&Am(r,t.slice(7));a&&(a.trim&&(s=n.map(d=>Mt(d)?d.trim():d)),a.number&&(s=n.map(oi)));let l,c=r[l=go(t)]||r[l=go(mn(t))];!c&&i&&(c=r[l=go(jn(t))]),c&&Fe(c,e,6,s);const f=r[l+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Fe(f,e,6,s)}}function Kh(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let a={},l=!1;if(!lt(e)){const c=f=>{const d=Kh(f,t,!0);d&&(l=!0,le(a,d))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!l?(bt(e)&&r.set(e,null),null):(rt(i)?i.forEach(c=>a[c]=null):le(a,i),bt(e)&&r.set(e,a),a)}function Li(e,t){return!e||!Pi(t)?!1:(t=t.slice(2).replace(/Once$/,""),vt(e,t[0].toLowerCase()+t.slice(1))||vt(e,jn(t))||vt(e,t))}function du(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:l,emit:c,render:f,renderCache:d,props:m,data:E,setupState:S,ctx:V,inheritAttrs:N}=e,j=ci(e);let Q,U;try{if(n.shapeFlag&4){const D=s||r,J=D;Q=Ne(f.call(J,D,d,m,S,E,V)),U=l}else{const D=t;Q=Ne(D.length>1?D(m,{attrs:l,slots:a,emit:c}):D(m,null)),U=t.props?l:Cm(l)}}catch(D){Xr.length=0,Mi(D,e,1),Q=Ie(Ye)}let F=Q;if(U&&N!==!1){const D=Object.keys(U),{shapeFlag:J}=F;D.length&&J&7&&(i&&D.some(Ta)&&(U=Sm(U,i)),F=hr(F,U,!1,!0))}return n.dirs&&(F=hr(F,null,!1,!0),F.dirs=F.dirs?F.dirs.concat(n.dirs):n.dirs),n.transition&&Ma(F,n.transition),Q=F,ci(j),Q}const Cm=e=>{let t;for(const n in e)(n==="class"||n==="style"||Pi(n))&&((t||(t={}))[n]=e[n]);return t},Sm=(e,t)=>{const n={};for(const r in e)(!Ta(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Rm(e,t,n){const{props:r,children:s,component:i}=e,{props:a,children:l,patchFlag:c}=t,f=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?pu(r,a,f):!!a;if(c&8){const d=t.dynamicProps;for(let m=0;m<d.length;m++){const E=d[m];if(a[E]!==r[E]&&!Li(f,E))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?pu(r,a,f):!0:!!a;return!1}function pu(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!Li(n,i))return!0}return!1}function Pm({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Gh=e=>e.__isSuspense;function Dm(e,t){t&&t.pendingBranch?rt(e)?t.effects.push(...e):t.effects.push(e):Up(e)}const fe=Symbol.for("v-fgt"),Fi=Symbol.for("v-txt"),Ye=Symbol.for("v-cmt"),bo=Symbol.for("v-stc"),Xr=[];let _e=null;function ge(e=!1){Xr.push(_e=e?null:[])}function Vm(){Xr.pop(),_e=Xr[Xr.length-1]||null}let os=1;function mu(e,t=!1){os+=e,e<0&&_e&&t&&(_e.hasOnce=!0)}function Qh(e){return e.dynamicChildren=os>0?_e||tr:null,Vm(),os>0&&_e&&_e.push(e),e}function xe(e,t,n,r,s,i){return Qh(X(e,t,n,r,s,i,!0))}function Wo(e,t,n,r,s){return Qh(Ie(e,t,n,r,s,!0))}function Fa(e){return e?e.__v_isVNode===!0:!1}function Ur(e,t){return e.type===t.type&&e.key===t.key}const Yh=({key:e})=>e??null,Zs=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Mt(e)||ne(e)||lt(e)?{i:ee,r:e,k:t,f:!!n}:e:null);function X(e,t=null,n=null,r=0,s=null,i=e===fe?0:1,a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Yh(t),ref:t&&Zs(t),scopeId:Ah,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:ee};return l?(Ba(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=Mt(n)?8:16),os>0&&!a&&_e&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&_e.push(c),c}const Ie=xm;function xm(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===tm)&&(e=Ye),Fa(e)){const l=hr(e,t,!0);return n&&Ba(l,n),os>0&&!i&&_e&&(l.shapeFlag&6?_e[_e.indexOf(e)]=l:_e.push(l)),l.patchFlag=-2,l}if(qm(e)&&(e=e.__vccOpts),t){t=Om(t);let{class:l,style:c}=t;l&&!Mt(l)&&(t.class=ba(l)),bt(c)&&(Oa(c)&&!rt(c)&&(c=le({},c)),t.style=Aa(c))}const a=Mt(e)?1:Gh(e)?128:$p(e)?64:bt(e)?4:lt(e)?2:0;return X(e,t,n,r,s,a,i,!0)}function Om(e){return e?Oa(e)||Lh(e)?le({},e):e:null}function hr(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:l,transition:c}=e,f=t?Mm(s||{},t):s,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&Yh(f),ref:t&&t.ref?n&&i?rt(i)?i.concat(Zs(t)):[i,Zs(t)]:Zs(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==fe?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&hr(e.ssContent),ssFallback:e.ssFallback&&hr(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&Ma(d,c.clone(d)),d}function Xh(e=" ",t=0){return Ie(Fi,null,e,t)}function Nm(e="",t=!1){return t?(ge(),Wo(Ye,null,e)):Ie(Ye,null,e)}function Ne(e){return e==null||typeof e=="boolean"?Ie(Ye):rt(e)?Ie(fe,null,e.slice()):Fa(e)?ln(e):Ie(Fi,null,String(e))}function ln(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:hr(e)}function Ba(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(rt(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),Ba(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!Lh(t)?t._ctx=ee:s===3&&ee&&(ee.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else lt(t)?(t={default:t,_ctx:ee},n=32):(t=String(t),r&64?(n=16,t=[Xh(t)]):n=8);e.children=t,e.shapeFlag|=n}function Mm(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=ba([t.class,r.class]));else if(s==="style")t.style=Aa([t.style,r.style]);else if(Pi(s)){const i=t[s],a=r[s];a&&i!==a&&!(rt(i)&&i.includes(a))&&(t[s]=i?[].concat(i,a):a)}else s!==""&&(t[s]=r[s])}return t}function De(e,t,n,r=null){Fe(e,t,7,[n,r])}const km=Nh();let Lm=0;function Fm(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||km,i={uid:Lm++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new lp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Bh(r,s),emitsOptions:Kh(r,s),emit:null,emitted:null,propsDefaults:wt,inheritAttrs:r.inheritAttrs,ctx:wt,data:wt,props:wt,attrs:wt,slots:wt,refs:wt,setupState:wt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=bm.bind(null,i),e.ce&&e.ce(i),i}let oe=null,di,Ko;{const e=xi(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};di=t("__VUE_INSTANCE_SETTERS__",n=>oe=n),Ko=t("__VUE_SSR_SETTERS__",n=>as=n)}const _s=e=>{const t=oe;return di(e),e.scope.on(),()=>{e.scope.off(),di(t)}},gu=()=>{oe&&oe.scope.off(),di(null)};function Jh(e){return e.vnode.shapeFlag&4}let as=!1;function Bm(e,t=!1,n=!1){t&&Ko(t);const{props:r,children:s}=e.vnode,i=Jh(e);hm(e,r,i,t),mm(e,s,n||t);const a=i?Um(e,t):void 0;return t&&Ko(!1),a}function Um(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,nm);const{setup:r}=n;if(r){Ge();const s=e.setupContext=r.length>1?$m(e):null,i=_s(e),a=gs(r,e,0,[e.props,s]),l=Qc(a);if(Qe(),i(),(l||e.sp)&&!sr(e)&&Ch(e),l){if(a.then(gu,gu),t)return a.then(c=>{_u(e,c)}).catch(c=>{Mi(c,e,0)});e.asyncDep=a}else _u(e,a)}else Zh(e)}function _u(e,t,n){lt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:bt(t)&&(e.setupState=yh(t)),Zh(e)}function Zh(e,t,n){const r=e.type;e.render||(e.render=r.render||ke);{const s=_s(e);Ge();try{rm(e)}finally{Qe(),s()}}}const jm={get(e,t){return Zt(e,"get",""),e[t]}};function $m(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,jm),slots:e.slots,emit:e.emit,expose:t}}function Bi(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(yh(Pp(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Yr)return Yr[n](e)},has(t,n){return n in t||n in Yr}})):e.proxy}function qm(e){return lt(e)&&"__vccOpts"in e}const Go=(e,t)=>Mp(e,t,as),Hm="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Qo;const yu=typeof window<"u"&&window.trustedTypes;if(yu)try{Qo=yu.createPolicy("vue",{createHTML:e=>e})}catch{}const tf=Qo?e=>Qo.createHTML(e):e=>e,zm="http://www.w3.org/2000/svg",Wm="http://www.w3.org/1998/Math/MathML",ze=typeof document<"u"?document:null,vu=ze&&ze.createElement("template"),Km={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?ze.createElementNS(zm,e):t==="mathml"?ze.createElementNS(Wm,e):n?ze.createElement(e,{is:n}):ze.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>ze.createTextNode(e),createComment:e=>ze.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ze.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const a=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{vu.innerHTML=tf(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const l=vu.content;if(r==="svg"||r==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Gm=Symbol("_vtc");function Qm(e,t,n){const r=e[Gm];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Eu=Symbol("_vod"),Ym=Symbol("_vsh"),Xm=Symbol(""),Jm=/(^|;)\s*display\s*:/;function Zm(e,t,n){const r=e.style,s=Mt(n);let i=!1;if(n&&!s){if(t)if(Mt(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&ti(r,l,"")}else for(const a in t)n[a]==null&&ti(r,a,"");for(const a in n)a==="display"&&(i=!0),ti(r,a,n[a])}else if(s){if(t!==n){const a=r[Xm];a&&(n+=";"+a),r.cssText=n,i=Jm.test(n)}}else t&&e.removeAttribute("style");Eu in e&&(e[Eu]=i?r.display:"",e[Ym]&&(r.display="none"))}const Tu=/\s*!important$/;function ti(e,t,n){if(rt(n))n.forEach(r=>ti(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=tg(e,t);Tu.test(n)?e.setProperty(jn(r),n.replace(Tu,""),"important"):e[r]=n}}const wu=["Webkit","Moz","ms"],Co={};function tg(e,t){const n=Co[t];if(n)return n;let r=mn(t);if(r!=="filter"&&r in e)return Co[t]=r;r=Jc(r);for(let s=0;s<wu.length;s++){const i=wu[s]+r;if(i in e)return Co[t]=i}return t}const Iu="http://www.w3.org/1999/xlink";function Au(e,t,n,r,s,i=ip(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Iu,t.slice(6,t.length)):e.setAttributeNS(Iu,t,n):n==null||i&&!th(n)?e.removeAttribute(t):e.setAttribute(t,i?"":Se(n)?String(n):n)}function bu(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?tf(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=th(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(s||t)}function Mn(e,t,n,r){e.addEventListener(t,n,r)}function eg(e,t,n,r){e.removeEventListener(t,n,r)}const Cu=Symbol("_vei");function ng(e,t,n,r,s=null){const i=e[Cu]||(e[Cu]={}),a=i[t];if(r&&a)a.value=r;else{const[l,c]=rg(t);if(r){const f=i[t]=og(r,s);Mn(e,l,f,c)}else a&&(eg(e,l,a,c),i[t]=void 0)}}const Su=/(?:Once|Passive|Capture)$/;function rg(e){let t;if(Su.test(e)){t={};let r;for(;r=e.match(Su);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):jn(e.slice(2)),t]}let So=0;const sg=Promise.resolve(),ig=()=>So||(sg.then(()=>So=0),So=Date.now());function og(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Fe(ag(r,n.value),t,5,[r])};return n.value=e,n.attached=ig(),n}function ag(e,t){if(rt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const Ru=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,lg=(e,t,n,r,s,i)=>{const a=s==="svg";t==="class"?Qm(e,r,a):t==="style"?Zm(e,n,r):Pi(t)?Ta(t)||ng(e,t,n,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):ug(e,t,r,a))?(bu(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Au(e,t,r,a,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Mt(r))?bu(e,mn(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Au(e,t,r,a))};function ug(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&Ru(t)&&lt(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Ru(t)&&Mt(n)?!1:t in e}const pi=e=>{const t=e.props["onUpdate:modelValue"]||!1;return rt(t)?n=>Xs(t,n):t};function cg(e){e.target.composing=!0}function Pu(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const or=Symbol("_assign"),Du={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[or]=pi(s);const i=r||s.props&&s.props.type==="number";Mn(e,t?"change":"input",a=>{if(a.target.composing)return;let l=e.value;n&&(l=l.trim()),i&&(l=oi(l)),e[or](l)}),n&&Mn(e,"change",()=>{e.value=e.value.trim()}),t||(Mn(e,"compositionstart",cg),Mn(e,"compositionend",Pu),Mn(e,"change",Pu))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},a){if(e[or]=pi(a),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?oi(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||s&&e.value.trim()===c)||(e.value=c))}},hg={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const s=Di(t);Mn(e,"change",()=>{const i=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>n?oi(mi(a)):mi(a));e[or](e.multiple?s?new Set(i):i:i[0]),e._assigning=!0,Eh(()=>{e._assigning=!1})}),e[or]=pi(r)},mounted(e,{value:t}){Vu(e,t)},beforeUpdate(e,t,n){e[or]=pi(n)},updated(e,{value:t}){e._assigning||Vu(e,t)}};function Vu(e,t){const n=e.multiple,r=rt(t);if(!(n&&!r&&!Di(t))){for(let s=0,i=e.options.length;s<i;s++){const a=e.options[s],l=mi(a);if(n)if(r){const c=typeof l;c==="string"||c==="number"?a.selected=t.some(f=>String(f)===String(l)):a.selected=ap(t,l)>-1}else a.selected=t.has(l);else if(Oi(mi(a),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function mi(e){return"_value"in e?e._value:e.value}const fg=["ctrl","shift","alt","meta"],dg={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>fg.some(n=>e[`${n}Key`]&&!t.includes(n))},pg=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(s,...i)=>{for(let a=0;a<t.length;a++){const l=dg[t[a]];if(l&&l(s,t))return}return e(s,...i)})},mg=le({patchProp:lg},Km);let xu;function gg(){return xu||(xu=_m(mg))}const _g=(...e)=>{const t=gg().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=vg(r);if(!s)return;const i=t._component;!lt(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,yg(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t};function yg(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function vg(e){return Mt(e)?document.querySelector(e):e}const Eg="/student-recycle-dashboard/assets/logo-DMlNQp5X.jpeg",Tg=()=>{};var Ou={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},wg=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],a=e[n++],l=e[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return t.join("")},nf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],a=s+1<e.length,l=a?e[s+1]:0,c=s+2<e.length,f=c?e[s+2]:0,d=i>>2,m=(i&3)<<4|l>>4;let E=(l&15)<<2|f>>6,S=f&63;c||(S=64,a||(E=64)),r.push(n[d],n[m],n[E],n[S])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ef(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):wg(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const f=s<e.length?n[e.charAt(s)]:64;++s;const m=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||l==null||f==null||m==null)throw new Ig;const E=i<<2|l>>4;if(r.push(E),f!==64){const S=l<<4&240|f>>2;if(r.push(S),m!==64){const V=f<<6&192|m;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ig extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ag=function(e){const t=ef(e);return nf.encodeByteArray(t,!0)},gi=function(e){return Ag(e).replace(/\./g,"")},bg=function(e){try{return nf.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg=()=>Cg().__FIREBASE_DEFAULTS__,Rg=()=>{if(typeof process>"u"||typeof Ou>"u")return;const e=Ou.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Pg=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&bg(e[1]);return t&&JSON.parse(t)},Ua=()=>{try{return Tg()||Sg()||Rg()||Pg()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Dg=e=>{var t,n;return(n=(t=Ua())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Vg=e=>{const t=Dg(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},rf=()=>{var e;return(e=Ua())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(e){return e.endsWith(".cloudworkstations.dev")}async function Og(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[gi(JSON.stringify(n)),gi(JSON.stringify(a)),""].join(".")}const Jr={};function Mg(){const e={prod:[],emulator:[]};for(const t of Object.keys(Jr))Jr[t]?e.emulator.push(t):e.prod.push(t);return e}function kg(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let Nu=!1;function Lg(e,t){if(typeof window>"u"||typeof document>"u"||!ja(window.location.host)||Jr[e]===t||Jr[e]||Nu)return;Jr[e]=t;function n(E){return`__firebase__banner__${E}`}const r="__firebase__banner",i=Mg().prod.length>0;function a(){const E=document.getElementById(r);E&&E.remove()}function l(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function c(E,S){E.setAttribute("width","24"),E.setAttribute("id",S),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function f(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Nu=!0,a()},E}function d(E,S){E.setAttribute("id",S),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function m(){const E=kg(r),S=n("text"),V=document.getElementById(S)||document.createElement("span"),N=n("learnmore"),j=document.getElementById(N)||document.createElement("a"),Q=n("preprendIcon"),U=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const F=E.element;l(F),d(j,N);const D=f();c(U,Q),F.append(U,V,j,D),document.body.appendChild(F)}i?(V.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Bg(){var e;const t=(e=Ua())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ug(){return!Bg()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jg(){try{return typeof indexedDB=="object"}catch{return!1}}function $g(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="FirebaseError";class vr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=qg,Object.setPrototypeOf(this,vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sf.prototype.create)}}class sf{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],a=i?Hg(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new vr(s,l,r)}}function Hg(e,t){return e.replace(zg,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const zg=/\{\$([^}]+)}/g;function _i(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],a=t[s];if(Mu(i)&&Mu(a)){if(!_i(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Mu(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(e){return e&&e._delegate?e._delegate:e}class ls{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new xg;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Qg(t))try{this.getOrInitializeService({instanceIdentifier:On})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=On){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=On){return this.instances.has(t)}getOptions(t=On){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&t(a,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Gg(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=On){return this.component?this.component.multipleInstances?t:On:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Gg(e){return e===On?void 0:e}function Qg(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Kg(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(dt||(dt={}));const Xg={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},Jg=dt.INFO,Zg={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},t_=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=Zg[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class of{constructor(t){this.name=t,this._logLevel=Jg,this._logHandler=t_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in dt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Xg[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...t),this._logHandler(this,dt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...t),this._logHandler(this,dt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...t),this._logHandler(this,dt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...t),this._logHandler(this,dt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...t),this._logHandler(this,dt.ERROR,...t)}}const e_=(e,t)=>t.some(n=>e instanceof n);let ku,Lu;function n_(){return ku||(ku=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function r_(){return Lu||(Lu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const af=new WeakMap,Yo=new WeakMap,lf=new WeakMap,Ro=new WeakMap,$a=new WeakMap;function s_(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{n(fn(e.result)),s()},a=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&af.set(n,e)}).catch(()=>{}),$a.set(t,e),t}function i_(e){if(Yo.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});Yo.set(e,t)}let Xo={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Yo.get(e);if(t==="objectStoreNames")return e.objectStoreNames||lf.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function o_(e){Xo=e(Xo)}function a_(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Po(this),t,...n);return lf.set(r,t.sort?t.sort():[t]),fn(r)}:r_().includes(e)?function(...t){return e.apply(Po(this),t),fn(af.get(this))}:function(...t){return fn(e.apply(Po(this),t))}}function l_(e){return typeof e=="function"?a_(e):(e instanceof IDBTransaction&&i_(e),e_(e,n_())?new Proxy(e,Xo):e)}function fn(e){if(e instanceof IDBRequest)return s_(e);if(Ro.has(e))return Ro.get(e);const t=l_(e);return t!==e&&(Ro.set(e,t),$a.set(t,e)),t}const Po=e=>$a.get(e);function u_(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(e,t),l=fn(a);return r&&a.addEventListener("upgradeneeded",c=>{r(fn(a.result),c.oldVersion,c.newVersion,fn(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const c_=["get","getKey","getAll","getAllKeys","count"],h_=["put","add","delete","clear"],Do=new Map;function Fu(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Do.get(t))return Do.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=h_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||c_.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),s&&c.done]))[0]};return Do.set(t,i),i}o_(e=>({...e,get:(t,n,r)=>Fu(t,n)||e.get(t,n,r),has:(t,n)=>!!Fu(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(d_(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function d_(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Jo="@firebase/app",Bu="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xe=new of("@firebase/app"),p_="@firebase/app-compat",m_="@firebase/analytics-compat",g_="@firebase/analytics",__="@firebase/app-check-compat",y_="@firebase/app-check",v_="@firebase/auth",E_="@firebase/auth-compat",T_="@firebase/database",w_="@firebase/data-connect",I_="@firebase/database-compat",A_="@firebase/functions",b_="@firebase/functions-compat",C_="@firebase/installations",S_="@firebase/installations-compat",R_="@firebase/messaging",P_="@firebase/messaging-compat",D_="@firebase/performance",V_="@firebase/performance-compat",x_="@firebase/remote-config",O_="@firebase/remote-config-compat",N_="@firebase/storage",M_="@firebase/storage-compat",k_="@firebase/firestore",L_="@firebase/ai",F_="@firebase/firestore-compat",B_="firebase",U_="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="[DEFAULT]",j_={[Jo]:"fire-core",[p_]:"fire-core-compat",[g_]:"fire-analytics",[m_]:"fire-analytics-compat",[y_]:"fire-app-check",[__]:"fire-app-check-compat",[v_]:"fire-auth",[E_]:"fire-auth-compat",[T_]:"fire-rtdb",[w_]:"fire-data-connect",[I_]:"fire-rtdb-compat",[A_]:"fire-fn",[b_]:"fire-fn-compat",[C_]:"fire-iid",[S_]:"fire-iid-compat",[R_]:"fire-fcm",[P_]:"fire-fcm-compat",[D_]:"fire-perf",[V_]:"fire-perf-compat",[x_]:"fire-rc",[O_]:"fire-rc-compat",[N_]:"fire-gcs",[M_]:"fire-gcs-compat",[k_]:"fire-fst",[F_]:"fire-fst-compat",[L_]:"fire-vertex","fire-js":"fire-js",[B_]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=new Map,$_=new Map,ta=new Map;function Uu(e,t){try{e.container.addComponent(t)}catch(n){Xe.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function vi(e){const t=e.name;if(ta.has(t))return Xe.debug(`There were multiple attempts to register component ${t}.`),!1;ta.set(t,e);for(const n of yi.values())Uu(n,e);for(const n of $_.values())Uu(n,e);return!0}function q_(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function H_(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},dn=new sf("app","Firebase",z_);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw dn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_=U_;function uf(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Zo,automaticDataCollectionEnabled:!0},t),s=r.name;if(typeof s!="string"||!s)throw dn.create("bad-app-name",{appName:String(s)});if(n||(n=rf()),!n)throw dn.create("no-options");const i=yi.get(s);if(i){if(_i(n,i.options)&&_i(r,i.config))return i;throw dn.create("duplicate-app",{appName:s})}const a=new Yg(s);for(const c of ta.values())a.addComponent(c);const l=new W_(n,r,a);return yi.set(s,l),l}function G_(e=Zo){const t=yi.get(e);if(!t&&e===Zo&&rf())return uf();if(!t)throw dn.create("no-app",{appName:e});return t}function ar(e,t,n){var r;let s=(r=j_[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${t}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Xe.warn(l.join(" "));return}vi(new ls(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="firebase-heartbeat-database",Y_=1,us="firebase-heartbeat-store";let Vo=null;function cf(){return Vo||(Vo=u_(Q_,Y_,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(us)}catch(n){console.warn(n)}}}}).catch(e=>{throw dn.create("idb-open",{originalErrorMessage:e.message})})),Vo}async function X_(e){try{const n=(await cf()).transaction(us),r=await n.objectStore(us).get(hf(e));return await n.done,r}catch(t){if(t instanceof vr)Xe.warn(t.message);else{const n=dn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Xe.warn(n.message)}}}async function ju(e,t){try{const r=(await cf()).transaction(us,"readwrite");await r.objectStore(us).put(t,hf(e)),await r.done}catch(n){if(n instanceof vr)Xe.warn(n.message);else{const r=dn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xe.warn(r.message)}}}function hf(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_=1024,Z_=30;class ty{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ny(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=$u();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Z_){const a=ry(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Xe.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$u(),{heartbeatsToSend:r,unsentEntries:s}=ey(this._heartbeatsCache.heartbeats),i=gi(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Xe.warn(n),""}}}function $u(){return new Date().toISOString().substring(0,10)}function ey(e,t=J_){const n=[];let r=e.slice();for(const s of e){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),qu(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),qu(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ny{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jg()?$g().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await X_(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ju(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ju(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function qu(e){return gi(JSON.stringify({version:2,heartbeats:e})).length}function ry(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(e){vi(new ls("platform-logger",t=>new f_(t),"PRIVATE")),vi(new ls("heartbeat",t=>new ty(t),"PRIVATE")),ar(Jo,Bu,e),ar(Jo,Bu,"esm2017"),ar("fire-js","")}sy("");var iy="firebase",oy="11.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ar(iy,oy,"app");var Hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pn,ff;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,g){function _(){}_.prototype=g.prototype,I.D=g.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(T,A,b){for(var y=Array(arguments.length-2),Wt=2;Wt<arguments.length;Wt++)y[Wt-2]=arguments[Wt];return g.prototype[A].apply(T,y)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,g,_){_||(_=0);var T=Array(16);if(typeof g=="string")for(var A=0;16>A;++A)T[A]=g.charCodeAt(_++)|g.charCodeAt(_++)<<8|g.charCodeAt(_++)<<16|g.charCodeAt(_++)<<24;else for(A=0;16>A;++A)T[A]=g[_++]|g[_++]<<8|g[_++]<<16|g[_++]<<24;g=I.g[0],_=I.g[1],A=I.g[2];var b=I.g[3],y=g+(b^_&(A^b))+T[0]+3614090360&4294967295;g=_+(y<<7&4294967295|y>>>25),y=b+(A^g&(_^A))+T[1]+3905402710&4294967295,b=g+(y<<12&4294967295|y>>>20),y=A+(_^b&(g^_))+T[2]+606105819&4294967295,A=b+(y<<17&4294967295|y>>>15),y=_+(g^A&(b^g))+T[3]+3250441966&4294967295,_=A+(y<<22&4294967295|y>>>10),y=g+(b^_&(A^b))+T[4]+4118548399&4294967295,g=_+(y<<7&4294967295|y>>>25),y=b+(A^g&(_^A))+T[5]+1200080426&4294967295,b=g+(y<<12&4294967295|y>>>20),y=A+(_^b&(g^_))+T[6]+2821735955&4294967295,A=b+(y<<17&4294967295|y>>>15),y=_+(g^A&(b^g))+T[7]+4249261313&4294967295,_=A+(y<<22&4294967295|y>>>10),y=g+(b^_&(A^b))+T[8]+1770035416&4294967295,g=_+(y<<7&4294967295|y>>>25),y=b+(A^g&(_^A))+T[9]+2336552879&4294967295,b=g+(y<<12&4294967295|y>>>20),y=A+(_^b&(g^_))+T[10]+4294925233&4294967295,A=b+(y<<17&4294967295|y>>>15),y=_+(g^A&(b^g))+T[11]+2304563134&4294967295,_=A+(y<<22&4294967295|y>>>10),y=g+(b^_&(A^b))+T[12]+1804603682&4294967295,g=_+(y<<7&4294967295|y>>>25),y=b+(A^g&(_^A))+T[13]+4254626195&4294967295,b=g+(y<<12&4294967295|y>>>20),y=A+(_^b&(g^_))+T[14]+2792965006&4294967295,A=b+(y<<17&4294967295|y>>>15),y=_+(g^A&(b^g))+T[15]+1236535329&4294967295,_=A+(y<<22&4294967295|y>>>10),y=g+(A^b&(_^A))+T[1]+4129170786&4294967295,g=_+(y<<5&4294967295|y>>>27),y=b+(_^A&(g^_))+T[6]+3225465664&4294967295,b=g+(y<<9&4294967295|y>>>23),y=A+(g^_&(b^g))+T[11]+643717713&4294967295,A=b+(y<<14&4294967295|y>>>18),y=_+(b^g&(A^b))+T[0]+3921069994&4294967295,_=A+(y<<20&4294967295|y>>>12),y=g+(A^b&(_^A))+T[5]+3593408605&4294967295,g=_+(y<<5&4294967295|y>>>27),y=b+(_^A&(g^_))+T[10]+38016083&4294967295,b=g+(y<<9&4294967295|y>>>23),y=A+(g^_&(b^g))+T[15]+3634488961&4294967295,A=b+(y<<14&4294967295|y>>>18),y=_+(b^g&(A^b))+T[4]+3889429448&4294967295,_=A+(y<<20&4294967295|y>>>12),y=g+(A^b&(_^A))+T[9]+568446438&4294967295,g=_+(y<<5&4294967295|y>>>27),y=b+(_^A&(g^_))+T[14]+3275163606&4294967295,b=g+(y<<9&4294967295|y>>>23),y=A+(g^_&(b^g))+T[3]+4107603335&4294967295,A=b+(y<<14&4294967295|y>>>18),y=_+(b^g&(A^b))+T[8]+1163531501&4294967295,_=A+(y<<20&4294967295|y>>>12),y=g+(A^b&(_^A))+T[13]+2850285829&4294967295,g=_+(y<<5&4294967295|y>>>27),y=b+(_^A&(g^_))+T[2]+4243563512&4294967295,b=g+(y<<9&4294967295|y>>>23),y=A+(g^_&(b^g))+T[7]+1735328473&4294967295,A=b+(y<<14&4294967295|y>>>18),y=_+(b^g&(A^b))+T[12]+2368359562&4294967295,_=A+(y<<20&4294967295|y>>>12),y=g+(_^A^b)+T[5]+4294588738&4294967295,g=_+(y<<4&4294967295|y>>>28),y=b+(g^_^A)+T[8]+2272392833&4294967295,b=g+(y<<11&4294967295|y>>>21),y=A+(b^g^_)+T[11]+1839030562&4294967295,A=b+(y<<16&4294967295|y>>>16),y=_+(A^b^g)+T[14]+4259657740&4294967295,_=A+(y<<23&4294967295|y>>>9),y=g+(_^A^b)+T[1]+2763975236&4294967295,g=_+(y<<4&4294967295|y>>>28),y=b+(g^_^A)+T[4]+1272893353&4294967295,b=g+(y<<11&4294967295|y>>>21),y=A+(b^g^_)+T[7]+4139469664&4294967295,A=b+(y<<16&4294967295|y>>>16),y=_+(A^b^g)+T[10]+3200236656&4294967295,_=A+(y<<23&4294967295|y>>>9),y=g+(_^A^b)+T[13]+681279174&4294967295,g=_+(y<<4&4294967295|y>>>28),y=b+(g^_^A)+T[0]+3936430074&4294967295,b=g+(y<<11&4294967295|y>>>21),y=A+(b^g^_)+T[3]+3572445317&4294967295,A=b+(y<<16&4294967295|y>>>16),y=_+(A^b^g)+T[6]+76029189&4294967295,_=A+(y<<23&4294967295|y>>>9),y=g+(_^A^b)+T[9]+3654602809&4294967295,g=_+(y<<4&4294967295|y>>>28),y=b+(g^_^A)+T[12]+3873151461&4294967295,b=g+(y<<11&4294967295|y>>>21),y=A+(b^g^_)+T[15]+530742520&4294967295,A=b+(y<<16&4294967295|y>>>16),y=_+(A^b^g)+T[2]+3299628645&4294967295,_=A+(y<<23&4294967295|y>>>9),y=g+(A^(_|~b))+T[0]+4096336452&4294967295,g=_+(y<<6&4294967295|y>>>26),y=b+(_^(g|~A))+T[7]+1126891415&4294967295,b=g+(y<<10&4294967295|y>>>22),y=A+(g^(b|~_))+T[14]+2878612391&4294967295,A=b+(y<<15&4294967295|y>>>17),y=_+(b^(A|~g))+T[5]+4237533241&4294967295,_=A+(y<<21&4294967295|y>>>11),y=g+(A^(_|~b))+T[12]+1700485571&4294967295,g=_+(y<<6&4294967295|y>>>26),y=b+(_^(g|~A))+T[3]+2399980690&4294967295,b=g+(y<<10&4294967295|y>>>22),y=A+(g^(b|~_))+T[10]+4293915773&4294967295,A=b+(y<<15&4294967295|y>>>17),y=_+(b^(A|~g))+T[1]+2240044497&4294967295,_=A+(y<<21&4294967295|y>>>11),y=g+(A^(_|~b))+T[8]+1873313359&4294967295,g=_+(y<<6&4294967295|y>>>26),y=b+(_^(g|~A))+T[15]+4264355552&4294967295,b=g+(y<<10&4294967295|y>>>22),y=A+(g^(b|~_))+T[6]+2734768916&4294967295,A=b+(y<<15&4294967295|y>>>17),y=_+(b^(A|~g))+T[13]+1309151649&4294967295,_=A+(y<<21&4294967295|y>>>11),y=g+(A^(_|~b))+T[4]+4149444226&4294967295,g=_+(y<<6&4294967295|y>>>26),y=b+(_^(g|~A))+T[11]+3174756917&4294967295,b=g+(y<<10&4294967295|y>>>22),y=A+(g^(b|~_))+T[2]+718787259&4294967295,A=b+(y<<15&4294967295|y>>>17),y=_+(b^(A|~g))+T[9]+3951481745&4294967295,I.g[0]=I.g[0]+g&4294967295,I.g[1]=I.g[1]+(A+(y<<21&4294967295|y>>>11))&4294967295,I.g[2]=I.g[2]+A&4294967295,I.g[3]=I.g[3]+b&4294967295}r.prototype.u=function(I,g){g===void 0&&(g=I.length);for(var _=g-this.blockSize,T=this.B,A=this.h,b=0;b<g;){if(A==0)for(;b<=_;)s(this,I,b),b+=this.blockSize;if(typeof I=="string"){for(;b<g;)if(T[A++]=I.charCodeAt(b++),A==this.blockSize){s(this,T),A=0;break}}else for(;b<g;)if(T[A++]=I[b++],A==this.blockSize){s(this,T),A=0;break}}this.h=A,this.o+=g},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var g=1;g<I.length-8;++g)I[g]=0;var _=8*this.o;for(g=I.length-8;g<I.length;++g)I[g]=_&255,_/=256;for(this.u(I),I=Array(16),g=_=0;4>g;++g)for(var T=0;32>T;T+=8)I[_++]=this.g[g]>>>T&255;return I};function i(I,g){var _=l;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=g(I)}function a(I,g){this.h=g;for(var _=[],T=!0,A=I.length-1;0<=A;A--){var b=I[A]|0;T&&b==g||(_[A]=b,T=!1)}this.g=_}var l={};function c(I){return-128<=I&&128>I?i(I,function(g){return new a([g|0],0>g?-1:0)}):new a([I|0],0>I?-1:0)}function f(I){if(isNaN(I)||!isFinite(I))return m;if(0>I)return j(f(-I));for(var g=[],_=1,T=0;I>=_;T++)g[T]=I/_|0,_*=4294967296;return new a(g,0)}function d(I,g){if(I.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(I.charAt(0)=="-")return j(d(I.substring(1),g));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=f(Math.pow(g,8)),T=m,A=0;A<I.length;A+=8){var b=Math.min(8,I.length-A),y=parseInt(I.substring(A,A+b),g);8>b?(b=f(Math.pow(g,b)),T=T.j(b).add(f(y))):(T=T.j(_),T=T.add(f(y)))}return T}var m=c(0),E=c(1),S=c(16777216);e=a.prototype,e.m=function(){if(N(this))return-j(this).m();for(var I=0,g=1,_=0;_<this.g.length;_++){var T=this.i(_);I+=(0<=T?T:4294967296+T)*g,g*=4294967296}return I},e.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(V(this))return"0";if(N(this))return"-"+j(this).toString(I);for(var g=f(Math.pow(I,6)),_=this,T="";;){var A=D(_,g).g;_=Q(_,A.j(g));var b=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=A,V(_))return b+T;for(;6>b.length;)b="0"+b;T=b+T}},e.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function V(I){if(I.h!=0)return!1;for(var g=0;g<I.g.length;g++)if(I.g[g]!=0)return!1;return!0}function N(I){return I.h==-1}e.l=function(I){return I=Q(this,I),N(I)?-1:V(I)?0:1};function j(I){for(var g=I.g.length,_=[],T=0;T<g;T++)_[T]=~I.g[T];return new a(_,~I.h).add(E)}e.abs=function(){return N(this)?j(this):this},e.add=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],T=0,A=0;A<=g;A++){var b=T+(this.i(A)&65535)+(I.i(A)&65535),y=(b>>>16)+(this.i(A)>>>16)+(I.i(A)>>>16);T=y>>>16,b&=65535,y&=65535,_[A]=y<<16|b}return new a(_,_[_.length-1]&-2147483648?-1:0)};function Q(I,g){return I.add(j(g))}e.j=function(I){if(V(this)||V(I))return m;if(N(this))return N(I)?j(this).j(j(I)):j(j(this).j(I));if(N(I))return j(this.j(j(I)));if(0>this.l(S)&&0>I.l(S))return f(this.m()*I.m());for(var g=this.g.length+I.g.length,_=[],T=0;T<2*g;T++)_[T]=0;for(T=0;T<this.g.length;T++)for(var A=0;A<I.g.length;A++){var b=this.i(T)>>>16,y=this.i(T)&65535,Wt=I.i(A)>>>16,Ae=I.i(A)&65535;_[2*T+2*A]+=y*Ae,U(_,2*T+2*A),_[2*T+2*A+1]+=b*Ae,U(_,2*T+2*A+1),_[2*T+2*A+1]+=y*Wt,U(_,2*T+2*A+1),_[2*T+2*A+2]+=b*Wt,U(_,2*T+2*A+2)}for(T=0;T<g;T++)_[T]=_[2*T+1]<<16|_[2*T];for(T=g;T<2*g;T++)_[T]=0;return new a(_,0)};function U(I,g){for(;(I[g]&65535)!=I[g];)I[g+1]+=I[g]>>>16,I[g]&=65535,g++}function F(I,g){this.g=I,this.h=g}function D(I,g){if(V(g))throw Error("division by zero");if(V(I))return new F(m,m);if(N(I))return g=D(j(I),g),new F(j(g.g),j(g.h));if(N(g))return g=D(I,j(g)),new F(j(g.g),g.h);if(30<I.g.length){if(N(I)||N(g))throw Error("slowDivide_ only works with positive integers.");for(var _=E,T=g;0>=T.l(I);)_=J(_),T=J(T);var A=Z(_,1),b=Z(T,1);for(T=Z(T,2),_=Z(_,2);!V(T);){var y=b.add(T);0>=y.l(I)&&(A=A.add(_),b=y),T=Z(T,1),_=Z(_,1)}return g=Q(I,A.j(g)),new F(A,g)}for(A=m;0<=I.l(g);){for(_=Math.max(1,Math.floor(I.m()/g.m())),T=Math.ceil(Math.log(_)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),b=f(_),y=b.j(g);N(y)||0<y.l(I);)_-=T,b=f(_),y=b.j(g);V(b)&&(b=E),A=A.add(b),I=Q(I,y)}return new F(A,I)}e.A=function(I){return D(this,I).h},e.and=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],T=0;T<g;T++)_[T]=this.i(T)&I.i(T);return new a(_,this.h&I.h)},e.or=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],T=0;T<g;T++)_[T]=this.i(T)|I.i(T);return new a(_,this.h|I.h)},e.xor=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],T=0;T<g;T++)_[T]=this.i(T)^I.i(T);return new a(_,this.h^I.h)};function J(I){for(var g=I.g.length+1,_=[],T=0;T<g;T++)_[T]=I.i(T)<<1|I.i(T-1)>>>31;return new a(_,I.h)}function Z(I,g){var _=g>>5;g%=32;for(var T=I.g.length-_,A=[],b=0;b<T;b++)A[b]=0<g?I.i(b+_)>>>g|I.i(b+_+1)<<32-g:I.i(b+_);return new a(A,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ff=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=d,pn=a}).apply(typeof Hu<"u"?Hu:typeof self<"u"?self:typeof window<"u"?window:{});var $s=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var df,Hr,pf,ei,ea,mf,gf,_f;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,h){return o==Array.prototype||o==Object.prototype||(o[u]=h.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof $s=="object"&&$s];for(var u=0;u<o.length;++u){var h=o[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function s(o,u){if(u)t:{var h=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var C=o[p];if(!(C in h))break t;h=h[C]}o=o[o.length-1],p=h[o],u=u(p),u!=p&&u!=null&&t(h,o,{configurable:!0,writable:!0,value:u})}}function i(o,u){o instanceof String&&(o+="");var h=0,p=!1,C={next:function(){if(!p&&h<o.length){var R=h++;return{value:u(R,o[R]),done:!1}}return p=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}s("Array.prototype.values",function(o){return o||function(){return i(this,function(u,h){return h})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function f(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function d(o,u,h){return o.call.apply(o.bind,arguments)}function m(o,u,h){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,p),o.apply(u,C)}}return function(){return o.apply(u,arguments)}}function E(o,u,h){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,E.apply(null,arguments)}function S(o,u){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function V(o,u){function h(){}h.prototype=u.prototype,o.aa=u.prototype,o.prototype=new h,o.prototype.constructor=o,o.Qb=function(p,C,R){for(var q=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)q[Tt-2]=arguments[Tt];return u.prototype[C].apply(p,q)}}function N(o){const u=o.length;if(0<u){const h=Array(u);for(let p=0;p<u;p++)h[p]=o[p];return h}return[]}function j(o,u){for(let h=1;h<arguments.length;h++){const p=arguments[h];if(c(p)){const C=o.length||0,R=p.length||0;o.length=C+R;for(let q=0;q<R;q++)o[C+q]=p[q]}else o.push(p)}}class Q{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function U(o){return/^[\s\xa0]*$/.test(o)}function F(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function D(o){return D[" "](o),o}D[" "]=function(){};var J=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function Z(o,u,h){for(const p in o)u.call(h,o[p],p,o)}function I(o,u){for(const h in o)u.call(void 0,o[h],h,o)}function g(o){const u={};for(const h in o)u[h]=o[h];return u}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(o,u){let h,p;for(let C=1;C<arguments.length;C++){p=arguments[C];for(h in p)o[h]=p[h];for(let R=0;R<_.length;R++)h=_[R],Object.prototype.hasOwnProperty.call(p,h)&&(o[h]=p[h])}}function A(o){var u=1;o=o.split(":");const h=[];for(;0<u&&o.length;)h.push(o.shift()),u--;return o.length&&h.push(o.join(":")),h}function b(o){l.setTimeout(()=>{throw o},0)}function y(){var o=ue;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class Wt{constructor(){this.h=this.g=null}add(u,h){const p=Ae.get();p.set(u,h),this.h?this.h.next=p:this.g=p,this.h=p}}var Ae=new Q(()=>new xt,o=>o.reset());class xt{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let gt,ct=!1,ue=new Wt,ye=()=>{const o=l.Promise.resolve(void 0);gt=()=>{o.then(ve)}};var ve=()=>{for(var o;o=y();){try{o.h.call(o.g)}catch(h){b(h)}var u=Ae;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}ct=!1};function St(){this.s=this.s,this.C=this.C}St.prototype.s=!1,St.prototype.ma=function(){this.s||(this.s=!0,this.N())},St.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ot(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Ot.prototype.h=function(){this.defaultPrevented=!0};var Zi=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const h=()=>{};l.addEventListener("test",h,u),l.removeEventListener("test",h,u)}catch{}return o}();function An(o,u){if(Ot.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var h=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(J){t:{try{D(u.nodeName);var C=!0;break t}catch{}C=!1}C||(u=null)}}else h=="mouseover"?u=o.fromElement:h=="mouseout"&&(u=o.toElement);this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:bn[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&An.aa.h.call(this)}}V(An,Ot);var bn={2:"touch",3:"pen",4:"mouse"};An.prototype.h=function(){An.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),Ar=0;function ws(o,u,h,p,C){this.listener=o,this.proxy=null,this.src=u,this.type=h,this.capture=!!p,this.ha=C,this.key=++Ar,this.da=this.fa=!1}function Pe(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function br(o){this.src=o,this.g={},this.h=0}br.prototype.add=function(o,u,h,p,C){var R=o.toString();o=this.g[R],o||(o=this.g[R]=[],this.h++);var q=w(o,u,p,C);return-1<q?(u=o[q],h||(u.fa=!1)):(u=new ws(u,this.src,R,!!p,C),u.fa=h,o.push(u)),u};function v(o,u){var h=u.type;if(h in o.g){var p=o.g[h],C=Array.prototype.indexOf.call(p,u,void 0),R;(R=0<=C)&&Array.prototype.splice.call(p,C,1),R&&(Pe(u),o.g[h].length==0&&(delete o.g[h],o.h--))}}function w(o,u,h,p){for(var C=0;C<o.length;++C){var R=o[C];if(!R.da&&R.listener==u&&R.capture==!!h&&R.ha==p)return C}return-1}var P="closure_lm_"+(1e6*Math.random()|0),k={};function O(o,u,h,p,C){if(Array.isArray(u)){for(var R=0;R<u.length;R++)O(o,u[R],h,p,C);return null}return h=nt(h),o&&o[je]?o.K(u,h,f(p)?!!p.capture:!1,C):M(o,u,h,!1,p,C)}function M(o,u,h,p,C,R){if(!u)throw Error("Invalid event type");var q=f(C)?!!C.capture:!!C,Tt=z(o);if(Tt||(o[P]=Tt=new br(o)),h=Tt.add(u,h,p,q,R),h.proxy)return h;if(p=W(),h.proxy=p,p.src=o,p.listener=h,o.addEventListener)Zi||(C=q),C===void 0&&(C=!1),o.addEventListener(u.toString(),p,C);else if(o.attachEvent)o.attachEvent(L(u.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function W(){function o(h){return u.call(o.src,o.listener,h)}const u=Y;return o}function $(o,u,h,p,C){if(Array.isArray(u))for(var R=0;R<u.length;R++)$(o,u[R],h,p,C);else p=f(p)?!!p.capture:!!p,h=nt(h),o&&o[je]?(o=o.i,u=String(u).toString(),u in o.g&&(R=o.g[u],h=w(R,h,p,C),-1<h&&(Pe(R[h]),Array.prototype.splice.call(R,h,1),R.length==0&&(delete o.g[u],o.h--)))):o&&(o=z(o))&&(u=o.g[u.toString()],o=-1,u&&(o=w(u,h,p,C)),(h=-1<o?u[o]:null)&&B(h))}function B(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[je])v(u.i,o);else{var h=o.type,p=o.proxy;u.removeEventListener?u.removeEventListener(h,p,o.capture):u.detachEvent?u.detachEvent(L(h),p):u.addListener&&u.removeListener&&u.removeListener(p),(h=z(u))?(v(h,o),h.h==0&&(h.src=null,u[P]=null)):Pe(o)}}}function L(o){return o in k?k[o]:k[o]="on"+o}function Y(o,u){if(o.da)o=!0;else{u=new An(u,this);var h=o.listener,p=o.ha||o.src;o.fa&&B(o),o=h.call(p,u)}return o}function z(o){return o=o[P],o instanceof br?o:null}var G="__closure_events_fn_"+(1e9*Math.random()>>>0);function nt(o){return typeof o=="function"?o:(o[G]||(o[G]=function(u){return o.handleEvent(u)}),o[G])}function tt(){St.call(this),this.i=new br(this),this.M=this,this.F=null}V(tt,St),tt.prototype[je]=!0,tt.prototype.removeEventListener=function(o,u,h,p){$(this,o,u,h,p)};function at(o,u){var h,p=o.F;if(p)for(h=[];p;p=p.F)h.push(p);if(o=o.M,p=u.type||u,typeof u=="string")u=new Ot(u,o);else if(u instanceof Ot)u.target=u.target||o;else{var C=u;u=new Ot(p,o),T(u,C)}if(C=!0,h)for(var R=h.length-1;0<=R;R--){var q=u.g=h[R];C=ht(q,p,!0,u)&&C}if(q=u.g=o,C=ht(q,p,!0,u)&&C,C=ht(q,p,!1,u)&&C,h)for(R=0;R<h.length;R++)q=u.g=h[R],C=ht(q,p,!1,u)&&C}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var h=o.g[u],p=0;p<h.length;p++)Pe(h[p]);delete o.g[u],o.h--}}this.F=null},tt.prototype.K=function(o,u,h,p){return this.i.add(String(o),u,!1,h,p)},tt.prototype.L=function(o,u,h,p){return this.i.add(String(o),u,!0,h,p)};function ht(o,u,h,p){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var C=!0,R=0;R<u.length;++R){var q=u[R];if(q&&!q.da&&q.capture==h){var Tt=q.listener,$t=q.ha||q.src;q.fa&&v(o.i,q),C=Tt.call($t,p)!==!1&&C}}return C&&!p.defaultPrevented}function Kt(o,u,h){if(typeof o=="function")h&&(o=E(o,h));else if(o&&typeof o.handleEvent=="function")o=E(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function Ut(o){o.g=Kt(()=>{o.g=null,o.i&&(o.i=!1,Ut(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class Ee extends St{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Ut(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gt(o){St.call(this),this.h=o,this.g={}}V(Gt,St);var tn=[];function Cr(o){Z(o.g,function(u,h){this.g.hasOwnProperty(h)&&B(u)},o),o.g={}}Gt.prototype.N=function(){Gt.aa.N.call(this),Cr(this)},Gt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jt=l.JSON.stringify,Te=l.JSON.parse,Is=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function to(){}to.prototype.h=null;function cl(o){return o.h||(o.h=o.i())}function hl(){}var Sr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function eo(){Ot.call(this,"d")}V(eo,Ot);function no(){Ot.call(this,"c")}V(no,Ot);var Cn={},fl=null;function As(){return fl=fl||new tt}Cn.La="serverreachability";function dl(o){Ot.call(this,Cn.La,o)}V(dl,Ot);function Rr(o){const u=As();at(u,new dl(u))}Cn.STAT_EVENT="statevent";function pl(o,u){Ot.call(this,Cn.STAT_EVENT,o),this.stat=u}V(pl,Ot);function re(o){const u=As();at(u,new pl(u,o))}Cn.Ma="timingevent";function ml(o,u){Ot.call(this,Cn.Ma,o),this.size=u}V(ml,Ot);function Pr(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},u)}function Dr(){this.g=!0}Dr.prototype.xa=function(){this.g=!1};function Cd(o,u,h,p,C,R){o.info(function(){if(o.g)if(R)for(var q="",Tt=R.split("&"),$t=0;$t<Tt.length;$t++){var _t=Tt[$t].split("=");if(1<_t.length){var Qt=_t[0];_t=_t[1];var Yt=Qt.split("_");q=2<=Yt.length&&Yt[1]=="type"?q+(Qt+"="+_t+"&"):q+(Qt+"=redacted&")}}else q=null;else q=R;return"XMLHTTP REQ ("+p+") [attempt "+C+"]: "+u+`
`+h+`
`+q})}function Sd(o,u,h,p,C,R,q){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+C+"]: "+u+`
`+h+`
`+R+" "+q})}function qn(o,u,h,p){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+Pd(o,h)+(p?" "+p:"")})}function Rd(o,u){o.info(function(){return"TIMEOUT: "+u})}Dr.prototype.info=function(){};function Pd(o,u){if(!o.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(o=0;o<h.length;o++)if(Array.isArray(h[o])){var p=h[o];if(!(2>p.length)){var C=p[1];if(Array.isArray(C)&&!(1>C.length)){var R=C[0];if(R!="noop"&&R!="stop"&&R!="close")for(var q=1;q<C.length;q++)C[q]=""}}}}return jt(h)}catch{return u}}var bs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ro;function Cs(){}V(Cs,to),Cs.prototype.g=function(){return new XMLHttpRequest},Cs.prototype.i=function(){return{}},ro=new Cs;function en(o,u,h,p){this.j=o,this.i=u,this.l=h,this.R=p||1,this.U=new Gt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _l}function _l(){this.i=null,this.g="",this.h=!1}var yl={},so={};function io(o,u,h){o.L=1,o.v=Ds($e(u)),o.m=h,o.P=!0,vl(o,null)}function vl(o,u){o.F=Date.now(),Ss(o),o.A=$e(o.v);var h=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),Ol(h.i,"t",p),o.C=0,h=o.j.J,o.h=new _l,o.g=Xl(o.j,h?u:null,!o.m),0<o.O&&(o.M=new Ee(E(o.Y,o,o.g),o.O)),u=o.U,h=o.g,p=o.ca;var C="readystatechange";Array.isArray(C)||(C&&(tn[0]=C.toString()),C=tn);for(var R=0;R<C.length;R++){var q=O(h,C[R],p||u.handleEvent,!1,u.h||u);if(!q)break;u.g[q.key]=q}u=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),Rr(),Cd(o.i,o.u,o.A,o.l,o.R,o.m)}en.prototype.ca=function(o){o=o.target;const u=this.M;u&&qe(o)==3?u.j():this.Y(o)},en.prototype.Y=function(o){try{if(o==this.g)t:{const Yt=qe(this.g);var u=this.g.Ba();const Wn=this.g.Z();if(!(3>Yt)&&(Yt!=3||this.g&&(this.h.h||this.g.oa()||Ul(this.g)))){this.J||Yt!=4||u==7||(u==8||0>=Wn?Rr(3):Rr(2)),oo(this);var h=this.g.Z();this.X=h;e:if(El(this)){var p=Ul(this.g);o="";var C=p.length,R=qe(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sn(this),Vr(this);var q="";break e}this.h.i=new l.TextDecoder}for(u=0;u<C;u++)this.h.h=!0,o+=this.h.i.decode(p[u],{stream:!(R&&u==C-1)});p.length=0,this.h.g+=o,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=h==200,Sd(this.i,this.u,this.A,this.l,this.R,Yt,h),this.o){if(this.T&&!this.K){e:{if(this.g){var Tt,$t=this.g;if((Tt=$t.g?$t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(Tt)){var _t=Tt;break e}}_t=null}if(h=_t)qn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ao(this,h);else{this.o=!1,this.s=3,re(12),Sn(this),Vr(this);break t}}if(this.P){h=!0;let be;for(;!this.J&&this.C<q.length;)if(be=Dd(this,q),be==so){Yt==4&&(this.s=4,re(14),h=!1),qn(this.i,this.l,null,"[Incomplete Response]");break}else if(be==yl){this.s=4,re(15),qn(this.i,this.l,q,"[Invalid Chunk]"),h=!1;break}else qn(this.i,this.l,be,null),ao(this,be);if(El(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Yt!=4||q.length!=0||this.h.h||(this.s=1,re(16),h=!1),this.o=this.o&&h,!h)qn(this.i,this.l,q,"[Invalid Chunked Response]"),Sn(this),Vr(this);else if(0<q.length&&!this.W){this.W=!0;var Qt=this.j;Qt.g==this&&Qt.ba&&!Qt.M&&(Qt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),po(Qt),Qt.M=!0,re(11))}}else qn(this.i,this.l,q,null),ao(this,q);Yt==4&&Sn(this),this.o&&!this.J&&(Yt==4?Kl(this.j,this):(this.o=!1,Ss(this)))}else Kd(this.g),h==400&&0<q.indexOf("Unknown SID")?(this.s=3,re(12)):(this.s=0,re(13)),Sn(this),Vr(this)}}}catch{}finally{}};function El(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Dd(o,u){var h=o.C,p=u.indexOf(`
`,h);return p==-1?so:(h=Number(u.substring(h,p)),isNaN(h)?yl:(p+=1,p+h>u.length?so:(u=u.slice(p,p+h),o.C=p+h,u)))}en.prototype.cancel=function(){this.J=!0,Sn(this)};function Ss(o){o.S=Date.now()+o.I,Tl(o,o.I)}function Tl(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Pr(E(o.ba,o),u)}function oo(o){o.B&&(l.clearTimeout(o.B),o.B=null)}en.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Rd(this.i,this.A),this.L!=2&&(Rr(),re(17)),Sn(this),this.s=2,Vr(this)):Tl(this,this.S-o)};function Vr(o){o.j.G==0||o.J||Kl(o.j,o)}function Sn(o){oo(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,Cr(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function ao(o,u){try{var h=o.j;if(h.G!=0&&(h.g==o||lo(h.h,o))){if(!o.K&&lo(h.h,o)&&h.G==3){try{var p=h.Da.g.parse(u)}catch{p=null}if(Array.isArray(p)&&p.length==3){var C=p;if(C[0]==0){t:if(!h.u){if(h.g)if(h.g.F+3e3<o.F)ks(h),Ns(h);else break t;fo(h),re(18)}}else h.za=C[1],0<h.za-h.T&&37500>C[2]&&h.F&&h.v==0&&!h.C&&(h.C=Pr(E(h.Za,h),6e3));if(1>=Al(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Pn(h,11)}else if((o.K||h.g==o)&&ks(h),!U(u))for(C=h.Da.g.parse(u),u=0;u<C.length;u++){let _t=C[u];if(h.T=_t[0],_t=_t[1],h.G==2)if(_t[0]=="c"){h.K=_t[1],h.ia=_t[2];const Qt=_t[3];Qt!=null&&(h.la=Qt,h.j.info("VER="+h.la));const Yt=_t[4];Yt!=null&&(h.Aa=Yt,h.j.info("SVER="+h.Aa));const Wn=_t[5];Wn!=null&&typeof Wn=="number"&&0<Wn&&(p=1.5*Wn,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;const be=o.g;if(be){const Fs=be.g?be.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fs){var R=p.h;R.g||Fs.indexOf("spdy")==-1&&Fs.indexOf("quic")==-1&&Fs.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(uo(R,R.h),R.h=null))}if(p.D){const mo=be.g?be.g.getResponseHeader("X-HTTP-Session-Id"):null;mo&&(p.ya=mo,At(p.I,p.D,mo))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-o.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var q=o;if(p.qa=Yl(p,p.J?p.ia:null,p.W),q.K){bl(p.h,q);var Tt=q,$t=p.L;$t&&(Tt.I=$t),Tt.B&&(oo(Tt),Ss(Tt)),p.g=q}else zl(p);0<h.i.length&&Ms(h)}else _t[0]!="stop"&&_t[0]!="close"||Pn(h,7);else h.G==3&&(_t[0]=="stop"||_t[0]=="close"?_t[0]=="stop"?Pn(h,7):ho(h):_t[0]!="noop"&&h.l&&h.l.ta(_t),h.v=0)}}Rr(4)}catch{}}var Vd=class{constructor(o,u){this.g=o,this.map=u}};function wl(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Il(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Al(o){return o.h?1:o.g?o.g.size:0}function lo(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function uo(o,u){o.g?o.g.add(u):o.h=u}function bl(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}wl.prototype.cancel=function(){if(this.i=Cl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Cl(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const h of o.g.values())u=u.concat(h.D);return u}return N(o.i)}function xd(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(c(o)){for(var u=[],h=o.length,p=0;p<h;p++)u.push(o[p]);return u}u=[],h=0;for(p in o)u[h++]=o[p];return u}function Od(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(c(o)||typeof o=="string"){var u=[];o=o.length;for(var h=0;h<o;h++)u.push(h);return u}u=[],h=0;for(const p in o)u[h++]=p;return u}}}function Sl(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(c(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var h=Od(o),p=xd(o),C=p.length,R=0;R<C;R++)u.call(void 0,p[R],h&&h[R],o)}var Rl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nd(o,u){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var p=o[h].indexOf("="),C=null;if(0<=p){var R=o[h].substring(0,p);C=o[h].substring(p+1)}else R=o[h];u(R,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Rn(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Rn){this.h=o.h,Rs(this,o.j),this.o=o.o,this.g=o.g,Ps(this,o.s),this.l=o.l;var u=o.i,h=new Nr;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),Pl(this,h),this.m=o.m}else o&&(u=String(o).match(Rl))?(this.h=!1,Rs(this,u[1]||"",!0),this.o=xr(u[2]||""),this.g=xr(u[3]||"",!0),Ps(this,u[4]),this.l=xr(u[5]||"",!0),Pl(this,u[6]||"",!0),this.m=xr(u[7]||"")):(this.h=!1,this.i=new Nr(null,this.h))}Rn.prototype.toString=function(){var o=[],u=this.j;u&&o.push(Or(u,Dl,!0),":");var h=this.g;return(h||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Or(u,Dl,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&o.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(Or(h,h.charAt(0)=="/"?Ld:kd,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",Or(h,Bd)),o.join("")};function $e(o){return new Rn(o)}function Rs(o,u,h){o.j=h?xr(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function Ps(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function Pl(o,u,h){u instanceof Nr?(o.i=u,Ud(o.i,o.h)):(h||(u=Or(u,Fd)),o.i=new Nr(u,o.h))}function At(o,u,h){o.i.set(u,h)}function Ds(o){return At(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function xr(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Or(o,u,h){return typeof o=="string"?(o=encodeURI(o).replace(u,Md),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Md(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Dl=/[#\/\?@]/g,kd=/[#\?:]/g,Ld=/[#\?]/g,Fd=/[#\?@]/g,Bd=/#/g;function Nr(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function nn(o){o.g||(o.g=new Map,o.h=0,o.i&&Nd(o.i,function(u,h){o.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}e=Nr.prototype,e.add=function(o,u){nn(this),this.i=null,o=Hn(this,o);var h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(u),this.h+=1,this};function Vl(o,u){nn(o),u=Hn(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function xl(o,u){return nn(o),u=Hn(o,u),o.g.has(u)}e.forEach=function(o,u){nn(this),this.g.forEach(function(h,p){h.forEach(function(C){o.call(u,C,p,this)},this)},this)},e.na=function(){nn(this);const o=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let p=0;p<u.length;p++){const C=o[p];for(let R=0;R<C.length;R++)h.push(u[p])}return h},e.V=function(o){nn(this);let u=[];if(typeof o=="string")xl(this,o)&&(u=u.concat(this.g.get(Hn(this,o))));else{o=Array.from(this.g.values());for(let h=0;h<o.length;h++)u=u.concat(o[h])}return u},e.set=function(o,u){return nn(this),this.i=null,o=Hn(this,o),xl(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},e.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function Ol(o,u,h){Vl(o,u),0<h.length&&(o.i=null,o.g.set(Hn(o,u),N(h)),o.h+=h.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var p=u[h];const R=encodeURIComponent(String(p)),q=this.V(p);for(p=0;p<q.length;p++){var C=R;q[p]!==""&&(C+="="+encodeURIComponent(String(q[p]))),o.push(C)}}return this.i=o.join("&")};function Hn(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function Ud(o,u){u&&!o.j&&(nn(o),o.i=null,o.g.forEach(function(h,p){var C=p.toLowerCase();p!=C&&(Vl(this,p),Ol(this,C,h))},o)),o.j=u}function jd(o,u){const h=new Dr;if(l.Image){const p=new Image;p.onload=S(rn,h,"TestLoadImage: loaded",!0,u,p),p.onerror=S(rn,h,"TestLoadImage: error",!1,u,p),p.onabort=S(rn,h,"TestLoadImage: abort",!1,u,p),p.ontimeout=S(rn,h,"TestLoadImage: timeout",!1,u,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else u(!1)}function $d(o,u){const h=new Dr,p=new AbortController,C=setTimeout(()=>{p.abort(),rn(h,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:p.signal}).then(R=>{clearTimeout(C),R.ok?rn(h,"TestPingServer: ok",!0,u):rn(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(C),rn(h,"TestPingServer: error",!1,u)})}function rn(o,u,h,p,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),p(h)}catch{}}function qd(){this.g=new Is}function Hd(o,u,h){const p=h||"";try{Sl(o,function(C,R){let q=C;f(C)&&(q=jt(C)),u.push(p+R+"="+encodeURIComponent(q))})}catch(C){throw u.push(p+"type="+encodeURIComponent("_badmap")),C}}function Vs(o){this.l=o.Ub||null,this.j=o.eb||!1}V(Vs,to),Vs.prototype.g=function(){return new xs(this.l,this.j)},Vs.prototype.i=function(o){return function(){return o}}({});function xs(o,u){tt.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(xs,tt),e=xs.prototype,e.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,kr(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||l).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mr(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,kr(this)),this.g&&(this.readyState=3,kr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nl(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Nl(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?Mr(this):kr(this),this.readyState==3&&Nl(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,Mr(this))},e.Qa=function(o){this.g&&(this.response=o,Mr(this))},e.ga=function(){this.g&&Mr(this)};function Mr(o){o.readyState=4,o.l=null,o.j=null,o.v=null,kr(o)}e.setRequestHeader=function(o,u){this.u.append(o,u)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=u.next();return o.join(`\r
`)};function kr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(xs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Ml(o){let u="";return Z(o,function(h,p){u+=p,u+=":",u+=h,u+=`\r
`}),u}function co(o,u,h){t:{for(p in h){var p=!1;break t}p=!0}p||(h=Ml(h),typeof o=="string"?h!=null&&encodeURIComponent(String(h)):At(o,u,h))}function Rt(o){tt.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(Rt,tt);var zd=/^https?$/i,Wd=["POST","PUT"];e=Rt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,u,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ro.g(),this.v=this.o?cl(this.o):cl(ro),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(R){kl(this,R);return}if(o=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var C in p)h.set(C,p[C]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const R of p.keys())h.set(R,p.get(R));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(R=>R.toLowerCase()=="content-type"),C=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Wd,u,void 0))||p||C||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[R,q]of h)this.g.setRequestHeader(R,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bl(this),this.u=!0,this.g.send(o),this.u=!1}catch(R){kl(this,R)}};function kl(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,Ll(o),Os(o)}function Ll(o){o.A||(o.A=!0,at(o,"complete"),at(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,at(this,"complete"),at(this,"abort"),Os(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Os(this,!0)),Rt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Fl(this):this.bb())},e.bb=function(){Fl(this)};function Fl(o){if(o.h&&typeof a<"u"&&(!o.v[1]||qe(o)!=4||o.Z()!=2)){if(o.u&&qe(o)==4)Kt(o.Ea,0,o);else if(at(o,"readystatechange"),qe(o)==4){o.h=!1;try{const q=o.Z();t:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break t;default:u=!1}var h;if(!(h=u)){var p;if(p=q===0){var C=String(o.D).match(Rl)[1]||null;!C&&l.self&&l.self.location&&(C=l.self.location.protocol.slice(0,-1)),p=!zd.test(C?C.toLowerCase():"")}h=p}if(h)at(o,"complete"),at(o,"success");else{o.m=6;try{var R=2<qe(o)?o.g.statusText:""}catch{R=""}o.l=R+" ["+o.Z()+"]",Ll(o)}}finally{Os(o)}}}}function Os(o,u){if(o.g){Bl(o);const h=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||at(o,"ready");try{h.onreadystatechange=p}catch{}}}function Bl(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function qe(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<qe(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),Te(u)}};function Ul(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Kd(o){const u={};o=(o.g&&2<=qe(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(U(o[p]))continue;var h=A(o[p]);const C=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const R=u[C]||[];u[C]=R,R.push(h)}I(u,function(p){return p.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Lr(o,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||u}function jl(o){this.Aa=0,this.i=[],this.j=new Dr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Lr("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Lr("baseRetryDelayMs",5e3,o),this.cb=Lr("retryDelaySeedMs",1e4,o),this.Wa=Lr("forwardChannelMaxRetries",2,o),this.wa=Lr("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new wl(o&&o.concurrentRequestLimit),this.Da=new qd,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=jl.prototype,e.la=8,e.G=1,e.connect=function(o,u,h,p){re(0),this.W=o,this.H=u||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=Yl(this,null,this.W),Ms(this)};function ho(o){if($l(o),o.G==3){var u=o.U++,h=$e(o.I);if(At(h,"SID",o.K),At(h,"RID",u),At(h,"TYPE","terminate"),Fr(o,h),u=new en(o,o.j,u),u.L=2,u.v=Ds($e(h)),h=!1,l.navigator&&l.navigator.sendBeacon)try{h=l.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&l.Image&&(new Image().src=u.v,h=!0),h||(u.g=Xl(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Ss(u)}Ql(o)}function Ns(o){o.g&&(po(o),o.g.cancel(),o.g=null)}function $l(o){Ns(o),o.u&&(l.clearTimeout(o.u),o.u=null),ks(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Ms(o){if(!Il(o.h)&&!o.s){o.s=!0;var u=o.Ga;gt||ye(),ct||(gt(),ct=!0),ue.add(u,o),o.B=0}}function Gd(o,u){return Al(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Pr(E(o.Ga,o,u),Gl(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const C=new en(this,this.j,o);let R=this.o;if(this.S&&(R?(R=g(R),T(R,this.S)):R=this.S),this.m!==null||this.O||(C.H=R,R=null),this.P)t:{for(var u=0,h=0;h<this.i.length;h++){e:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(u+=p,4096<u){u=h;break t}if(u===4096||h===this.i.length-1){u=h+1;break t}}u=1e3}else u=1e3;u=Hl(this,C,u),h=$e(this.I),At(h,"RID",o),At(h,"CVER",22),this.D&&At(h,"X-HTTP-Session-Id",this.D),Fr(this,h),R&&(this.O?u="headers="+encodeURIComponent(String(Ml(R)))+"&"+u:this.m&&co(h,this.m,R)),uo(this.h,C),this.Ua&&At(h,"TYPE","init"),this.P?(At(h,"$req",u),At(h,"SID","null"),C.T=!0,io(C,h,null)):io(C,h,u),this.G=2}}else this.G==3&&(o?ql(this,o):this.i.length==0||Il(this.h)||ql(this))};function ql(o,u){var h;u?h=u.l:h=o.U++;const p=$e(o.I);At(p,"SID",o.K),At(p,"RID",h),At(p,"AID",o.T),Fr(o,p),o.m&&o.o&&co(p,o.m,o.o),h=new en(o,o.j,h,o.B+1),o.m===null&&(h.H=o.o),u&&(o.i=u.D.concat(o.i)),u=Hl(o,h,1e3),h.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),uo(o.h,h),io(h,p,u)}function Fr(o,u){o.H&&Z(o.H,function(h,p){At(u,p,h)}),o.l&&Sl({},function(h,p){At(u,p,h)})}function Hl(o,u,h){h=Math.min(o.i.length,h);var p=o.l?E(o.l.Na,o.l,o):null;t:{var C=o.i;let R=-1;for(;;){const q=["count="+h];R==-1?0<h?(R=C[0].g,q.push("ofs="+R)):R=0:q.push("ofs="+R);let Tt=!0;for(let $t=0;$t<h;$t++){let _t=C[$t].g;const Qt=C[$t].map;if(_t-=R,0>_t)R=Math.max(0,C[$t].g-100),Tt=!1;else try{Hd(Qt,q,"req"+_t+"_")}catch{p&&p(Qt)}}if(Tt){p=q.join("&");break t}}}return o=o.i.splice(0,h),u.D=o,p}function zl(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;gt||ye(),ct||(gt(),ct=!0),ue.add(u,o),o.v=0}}function fo(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Pr(E(o.Fa,o),Gl(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Wl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Pr(E(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,re(10),Ns(this),Wl(this))};function po(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Wl(o){o.g=new en(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=$e(o.qa);At(u,"RID","rpc"),At(u,"SID",o.K),At(u,"AID",o.T),At(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&At(u,"TO",o.ja),At(u,"TYPE","xmlhttp"),Fr(o,u),o.m&&o.o&&co(u,o.m,o.o),o.L&&(o.g.I=o.L);var h=o.g;o=o.ia,h.L=1,h.v=Ds($e(u)),h.m=null,h.P=!0,vl(h,o)}e.Za=function(){this.C!=null&&(this.C=null,Ns(this),fo(this),re(19))};function ks(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Kl(o,u){var h=null;if(o.g==u){ks(o),po(o),o.g=null;var p=2}else if(lo(o.h,u))h=u.D,bl(o.h,u),p=1;else return;if(o.G!=0){if(u.o)if(p==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var C=o.B;p=As(),at(p,new ml(p,h)),Ms(o)}else zl(o);else if(C=u.s,C==3||C==0&&0<u.X||!(p==1&&Gd(o,u)||p==2&&fo(o)))switch(h&&0<h.length&&(u=o.h,u.i=u.i.concat(h)),C){case 1:Pn(o,5);break;case 4:Pn(o,10);break;case 3:Pn(o,6);break;default:Pn(o,2)}}}function Gl(o,u){let h=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(h*=2),h*u}function Pn(o,u){if(o.j.info("Error code "+u),u==2){var h=E(o.fb,o),p=o.Xa;const C=!p;p=new Rn(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Rs(p,"https"),Ds(p),C?jd(p.toString(),h):$d(p.toString(),h)}else re(2);o.G=0,o.l&&o.l.sa(u),Ql(o),$l(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),re(2)):(this.j.info("Failed to ping google.com"),re(1))};function Ql(o){if(o.G=0,o.ka=[],o.l){const u=Cl(o.h);(u.length!=0||o.i.length!=0)&&(j(o.ka,u),j(o.ka,o.i),o.h.i.length=0,N(o.i),o.i.length=0),o.l.ra()}}function Yl(o,u,h){var p=h instanceof Rn?$e(h):new Rn(h);if(p.g!="")u&&(p.g=u+"."+p.g),Ps(p,p.s);else{var C=l.location;p=C.protocol,u=u?u+"."+C.hostname:C.hostname,C=+C.port;var R=new Rn(null);p&&Rs(R,p),u&&(R.g=u),C&&Ps(R,C),h&&(R.l=h),p=R}return h=o.D,u=o.ya,h&&u&&At(p,h,u),At(p,"VER",o.la),Fr(o,p),p}function Xl(o,u,h){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new Rt(new Vs({eb:h})):new Rt(o.pa),u.Ha(o.J),u}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jl(){}e=Jl.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Ls(){}Ls.prototype.g=function(o,u){return new pe(o,u)};function pe(o,u){tt.call(this),this.g=new jl(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!U(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!U(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new zn(this)}V(pe,tt),pe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pe.prototype.close=function(){ho(this.g)},pe.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.u&&(h={},h.__data__=jt(o),o=h);u.i.push(new Vd(u.Ya++,o)),u.G==3&&Ms(u)},pe.prototype.N=function(){this.g.l=null,delete this.j,ho(this.g),delete this.g,pe.aa.N.call(this)};function Zl(o){eo.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){t:{for(const h in u){o=h;break t}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}V(Zl,eo);function tu(){no.call(this),this.status=1}V(tu,no);function zn(o){this.g=o}V(zn,Jl),zn.prototype.ua=function(){at(this.g,"a")},zn.prototype.ta=function(o){at(this.g,new Zl(o))},zn.prototype.sa=function(o){at(this.g,new tu)},zn.prototype.ra=function(){at(this.g,"b")},Ls.prototype.createWebChannel=Ls.prototype.g,pe.prototype.send=pe.prototype.o,pe.prototype.open=pe.prototype.m,pe.prototype.close=pe.prototype.close,_f=function(){return new Ls},gf=function(){return As()},mf=Cn,ea={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bs.NO_ERROR=0,bs.TIMEOUT=8,bs.HTTP_ERROR=6,ei=bs,gl.COMPLETE="complete",pf=gl,hl.EventType=Sr,Sr.OPEN="a",Sr.CLOSE="b",Sr.ERROR="c",Sr.MESSAGE="d",tt.prototype.listen=tt.prototype.K,Hr=hl,Rt.prototype.listenOnce=Rt.prototype.L,Rt.prototype.getLastError=Rt.prototype.Ka,Rt.prototype.getLastErrorCode=Rt.prototype.Ba,Rt.prototype.getStatus=Rt.prototype.Z,Rt.prototype.getResponseJson=Rt.prototype.Oa,Rt.prototype.getResponseText=Rt.prototype.oa,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Ha,df=Rt}).apply(typeof $s<"u"?$s:typeof self<"u"?self:typeof window<"u"?window:{});const zu="@firebase/firestore",Wu="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Er="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un=new of("@firebase/firestore");function Yn(){return Un.logLevel}function K(e,...t){if(Un.logLevel<=dt.DEBUG){const n=t.map(qa);Un.debug(`Firestore (${Er}): ${e}`,...n)}}function Je(e,...t){if(Un.logLevel<=dt.ERROR){const n=t.map(qa);Un.error(`Firestore (${Er}): ${e}`,...n)}}function fr(e,...t){if(Un.logLevel<=dt.WARN){const n=t.map(qa);Un.warn(`Firestore (${Er}): ${e}`,...n)}}function qa(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,yf(e,r,n)}function yf(e,t,n){let r=`FIRESTORE (${Er}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Je(r),new Error(r)}function Ct(e,t,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,e||yf(t,s,r)}function pt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class et extends vr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class ay{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Jt.UNAUTHENTICATED))}shutdown(){}}class ly{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class uy{constructor(t){this.t=t,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ct(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Fn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Fn,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;t.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Fn)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct(typeof r.accessToken=="string",31837,{l:r}),new vf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ct(t===null||typeof t=="string",2055,{h:t}),new Jt(t)}}class cy{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class hy{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new cy(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ku{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fy{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,H_(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Ct(this.o===void 0,3512);const r=i=>{i.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,K("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>r(i))};const s=i=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ku(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Ct(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ku(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=dy(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%62))}return r}}function ut(e,t){return e<t?-1:e>t?1:0}function na(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return ut(r,s);{const i=Ef(),a=my(i.encode(Gu(e,n)),i.encode(Gu(t,n)));return a!==0?a:ut(r,s)}}n+=r>65535?2:1}return ut(e.length,t.length)}function Gu(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function my(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return ut(e[n],t[n]);return ut(e.length,t.length)}function dr(e,t,n){return e.length===t.length&&e.every((r,s)=>n(r,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=-62135596800,Yu=1e6;class de{static now(){return de.fromMillis(Date.now())}static fromDate(t){return de.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*Yu);return new de(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new et(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new et(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Qu)throw new et(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new et(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Yu}_compareTo(t){return this.seconds===t.seconds?ut(this.nanoseconds,t.nanoseconds):ut(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-Qu;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{static fromTimestamp(t){return new it(t)}static min(){return new it(new de(0,0))}static max(){return new it(new de(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu="__name__";class Oe{constructor(t,n,r){n===void 0?n=0:n>t.length&&ot(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&ot(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Oe.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Oe?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=Oe.compareSegments(t.get(s),n.get(s));if(i!==0)return i}return ut(t.length,n.length)}static compareSegments(t,n){const r=Oe.isNumericId(t),s=Oe.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Oe.extractNumericId(t).compare(Oe.extractNumericId(n)):na(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return pn.fromString(t.substring(4,t.length-2))}}class Pt extends Oe{construct(t,n,r){return new Pt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new et(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Pt(n)}static emptyPath(){return new Pt([])}}const gy=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ae extends Oe{construct(t,n,r){return new ae(t,n,r)}static isValidIdentifier(t){return gy.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ae.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Xu}static keyField(){return new ae([Xu])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new et(H.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new et(H.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new et(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new et(H.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ae(n)}static emptyPath(){return new ae([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(t){this.path=t}static fromPath(t){return new st(Pt.fromString(t))}static fromName(t){return new st(Pt.fromString(t).popFirst(5))}static empty(){return new st(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Pt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Pt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new st(new Pt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs=-1;function _y(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=it.fromTimestamp(r===1e9?new de(n+1,0):new de(n,r));return new _n(s,st.empty(),t)}function yy(e){return new _n(e.readTime,e.key,cs)}class _n{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new _n(it.min(),st.empty(),cs)}static max(){return new _n(it.max(),st.empty(),cs)}}function vy(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=st.comparator(e.documentKey,t.documentKey),n!==0?n:ut(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ty{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ui(e){if(e.code!==H.FAILED_PRECONDITION||e.message!==Ey)throw e;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&ot(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new x((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof x?n:x.resolve(n)}catch(n){return x.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):x.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):x.reject(n)}static resolve(t){return new x((n,r)=>{n(t)})}static reject(t){return new x((n,r)=>{r(t)})}static waitFor(t){return new x((n,r)=>{let s=0,i=0,a=!1;t.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(t){let n=x.resolve(!1);for(const r of t)n=n.next(s=>s?x.resolve(s):r());return n}static forEach(t,n){const r=[];return t.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(t,n){return new x((r,s)=>{const i=t.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const f=c;n(t[f]).next(d=>{a[f]=d,++l,l===i&&r(a)},d=>s(d))}})}static doWhile(t,n){return new x((r,s)=>{const i=()=>{t()===!0?n().next(()=>{i()},s):r()};i()})}}function wy(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Tr(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}ji.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy=-1;function $i(e){return e==null}function ra(e){return e===0&&1/e==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="";function Ay(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ju(t)),t=by(e.get(n),t);return Ju(t)}function by(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const i=e.charAt(s);switch(i){case"\0":n+="";break;case Tf:n+="";break;default:n+=i}}return n}function Ju(e){return e+Tf+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ys(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Cy(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(t,n){this.comparator=t,this.root=n||qt.EMPTY}insert(t,n){return new Vt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(t){return new Vt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,qt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new qs(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new qs(this.root,t,this.comparator,!1)}getReverseIterator(){return new qs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new qs(this.root,t,this.comparator,!0)}}class qs{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class qt{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??qt.RED,this.left=s??qt.EMPTY,this.right=i??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new qt(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return qt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ot(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ot(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw ot(27949);return t+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw ot(57766)}get value(){throw ot(16141)}get color(){throw ot(16727)}get left(){throw ot(29726)}get right(){throw ot(36894)}copy(t,n,r,s,i){return this}insert(t,n,r){return new qt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(t){this.comparator=t,this.data=new Vt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new tc(this.data.getIterator())}getIteratorFrom(t){return new tc(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Ft)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ft(this.comparator);return n.data=t,n}}class tc{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(t){this.fields=t,t.sort(ae.comparator)}static empty(){return new un([])}unionWith(t){let n=new Ft(ae.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new un(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return dr(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new wf("Invalid base64 string: "+i):i}}(t);return new zt(n)}static fromUint8Array(t){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(t);return new zt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ut(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}zt.EMPTY_BYTE_STRING=new zt("");const Sy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yn(e){if(Ct(!!e,39018),typeof e=="string"){let t=0;const n=Sy.exec(e);if(Ct(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Dt(e.seconds),nanos:Dt(e.nanos)}}function Dt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function vn(e){return typeof e=="string"?zt.fromBase64String(e):zt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If="server_timestamp",Af="__type__",bf="__previous_value__",Cf="__local_write_time__";function Ha(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Af])===null||n===void 0?void 0:n.stringValue)===If}function qi(e){const t=e.mapValue.fields[bf];return Ha(t)?qi(t):t}function hs(e){const t=yn(e.mapValue.fields[Cf].timestampValue);return new de(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(t,n,r,s,i,a,l,c,f,d){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=d}}const Ei="(default)";class fs{constructor(t,n){this.projectId=t,this.database=n||Ei}static empty(){return new fs("","")}get isDefaultDatabase(){return this.database===Ei}isEqual(t){return t instanceof fs&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="__type__",Dy="__max__",Hs={mapValue:{}},Vy="__vector__",sa="value";function En(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ha(e)?4:Oy(e)?9007199254740991:xy(e)?10:11:ot(28295,{value:e})}function Be(e,t){if(e===t)return!0;const n=En(e);if(n!==En(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return hs(e).isEqual(hs(t));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=yn(s.timestampValue),l=yn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,i){return vn(s.bytesValue).isEqual(vn(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,i){return Dt(s.geoPointValue.latitude)===Dt(i.geoPointValue.latitude)&&Dt(s.geoPointValue.longitude)===Dt(i.geoPointValue.longitude)}(e,t);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Dt(s.integerValue)===Dt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Dt(s.doubleValue),l=Dt(i.doubleValue);return a===l?ra(a)===ra(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return dr(e.arrayValue.values||[],t.arrayValue.values||[],Be);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Zu(a)!==Zu(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!Be(a[c],l[c])))return!1;return!0}(e,t);default:return ot(52216,{left:e})}}function ds(e,t){return(e.values||[]).find(n=>Be(n,t))!==void 0}function pr(e,t){if(e===t)return 0;const n=En(e),r=En(t);if(n!==r)return ut(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ut(e.booleanValue,t.booleanValue);case 2:return function(i,a){const l=Dt(i.integerValue||i.doubleValue),c=Dt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(e,t);case 3:return ec(e.timestampValue,t.timestampValue);case 4:return ec(hs(e),hs(t));case 5:return na(e.stringValue,t.stringValue);case 6:return function(i,a){const l=vn(i),c=vn(a);return l.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let f=0;f<l.length&&f<c.length;f++){const d=ut(l[f],c[f]);if(d!==0)return d}return ut(l.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,a){const l=ut(Dt(i.latitude),Dt(a.latitude));return l!==0?l:ut(Dt(i.longitude),Dt(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return nc(e.arrayValue,t.arrayValue);case 10:return function(i,a){var l,c,f,d;const m=i.fields||{},E=a.fields||{},S=(l=m[sa])===null||l===void 0?void 0:l.arrayValue,V=(c=E[sa])===null||c===void 0?void 0:c.arrayValue,N=ut(((f=S==null?void 0:S.values)===null||f===void 0?void 0:f.length)||0,((d=V==null?void 0:V.values)===null||d===void 0?void 0:d.length)||0);return N!==0?N:nc(S,V)}(e.mapValue,t.mapValue);case 11:return function(i,a){if(i===Hs.mapValue&&a===Hs.mapValue)return 0;if(i===Hs.mapValue)return 1;if(a===Hs.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),f=a.fields||{},d=Object.keys(f);c.sort(),d.sort();for(let m=0;m<c.length&&m<d.length;++m){const E=na(c[m],d[m]);if(E!==0)return E;const S=pr(l[c[m]],f[d[m]]);if(S!==0)return S}return ut(c.length,d.length)}(e.mapValue,t.mapValue);default:throw ot(23264,{Pe:n})}}function ec(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ut(e,t);const n=yn(e),r=yn(t),s=ut(n.seconds,r.seconds);return s!==0?s:ut(n.nanos,r.nanos)}function nc(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=pr(n[s],r[s]);if(i)return i}return ut(n.length,r.length)}function mr(e){return ia(e)}function ia(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=yn(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return vn(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return st.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ia(i);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${ia(n.fields[a])}`;return s+"}"}(e.mapValue):ot(61005,{value:e})}function ni(e){switch(En(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=qi(e);return t?16+ni(t):16;case 5:return 2*e.stringValue.length;case 6:return vn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+ni(i),0)}(e.arrayValue);case 10:case 11:return function(r){let s=0;return ys(r.fields,(i,a)=>{s+=i.length+ni(a)}),s}(e.mapValue);default:throw ot(13486,{value:e})}}function oa(e){return!!e&&"integerValue"in e}function za(e){return!!e&&"arrayValue"in e}function rc(e){return!!e&&"nullValue"in e}function sc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function xo(e){return!!e&&"mapValue"in e}function xy(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Py])===null||n===void 0?void 0:n.stringValue)===Vy}function Zr(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ys(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Zr(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Zr(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Oy(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Dy}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t){this.value=t}static empty(){return new Me({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!xo(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Zr(n)}setAll(t){let n=ae.emptyPath(),r={},s=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Zr(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());xo(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Be(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];xo(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){ys(n,(s,i)=>t[s]=i);for(const s of r)delete t[s]}clone(){return new Me(Zr(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(t,n,r,s,i,a,l){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(t){return new te(t,0,it.min(),it.min(),it.min(),Me.empty(),0)}static newFoundDocument(t,n,r,s){return new te(t,1,n,it.min(),r,s,0)}static newNoDocument(t,n){return new te(t,2,n,it.min(),it.min(),Me.empty(),0)}static newUnknownDocument(t,n){return new te(t,3,n,it.min(),it.min(),Me.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(it.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Me.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Me.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=it.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof te&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new te(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(t,n){this.position=t,this.inclusive=n}}function ic(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(i.field.isKeyField()?r=st.comparator(st.fromName(a.referenceValue),n.key):r=pr(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function oc(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Be(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(t,n="asc"){this.field=t,this.dir=n}}function Ny(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{}class Lt extends Sf{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new ky(t,n,r):n==="array-contains"?new By(t,r):n==="in"?new Uy(t,r):n==="not-in"?new jy(t,r):n==="array-contains-any"?new $y(t,r):new Lt(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new Ly(t,r):new Fy(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(pr(n,this.value)):n!==null&&En(this.value)===En(n)&&this.matchesComparison(pr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ot(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ue extends Sf{constructor(t,n){super(),this.filters=t,this.op=n,this.Te=null}static create(t,n){return new Ue(t,n)}matches(t){return Rf(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Rf(e){return e.op==="and"}function Pf(e){return My(e)&&Rf(e)}function My(e){for(const t of e.filters)if(t instanceof Ue)return!1;return!0}function aa(e){if(e instanceof Lt)return e.field.canonicalString()+e.op.toString()+mr(e.value);if(Pf(e))return e.filters.map(t=>aa(t)).join(",");{const t=e.filters.map(n=>aa(n)).join(",");return`${e.op}(${t})`}}function Df(e,t){return e instanceof Lt?function(r,s){return s instanceof Lt&&r.op===s.op&&r.field.isEqual(s.field)&&Be(r.value,s.value)}(e,t):e instanceof Ue?function(r,s){return s instanceof Ue&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&Df(a,s.filters[l]),!0):!1}(e,t):void ot(19439)}function Vf(e){return e instanceof Lt?function(n){return`${n.field.canonicalString()} ${n.op} ${mr(n.value)}`}(e):e instanceof Ue?function(n){return n.op.toString()+" {"+n.getFilters().map(Vf).join(" ,")+"}"}(e):"Filter"}class ky extends Lt{constructor(t,n,r){super(t,n,r),this.key=st.fromName(r.referenceValue)}matches(t){const n=st.comparator(t.key,this.key);return this.matchesComparison(n)}}class Ly extends Lt{constructor(t,n){super(t,"in",n),this.keys=xf("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class Fy extends Lt{constructor(t,n){super(t,"not-in",n),this.keys=xf("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function xf(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>st.fromName(r.referenceValue))}class By extends Lt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return za(n)&&ds(n.arrayValue,this.value)}}class Uy extends Lt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&ds(this.value.arrayValue,n)}}class jy extends Lt{constructor(t,n){super(t,"not-in",n)}matches(t){if(ds(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ds(this.value.arrayValue,n)}}class $y extends Lt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!za(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ds(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(t,n=null,r=[],s=[],i=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Ie=null}}function ac(e,t=null,n=[],r=[],s=null,i=null,a=null){return new qy(e,t,n,r,s,i,a)}function Wa(e){const t=pt(e);if(t.Ie===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>aa(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),$i(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>mr(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>mr(r)).join(",")),t.Ie=n}return t.Ie}function Ka(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ny(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Df(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!oc(e.startAt,t.startAt)&&oc(e.endAt,t.endAt)}function la(e){return st.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(t,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Hy(e,t,n,r,s,i,a,l){return new Hi(e,t,n,r,s,i,a,l)}function Of(e){return new Hi(e)}function lc(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function zy(e){return e.collectionGroup!==null}function ts(e){const t=pt(e);if(t.Ee===null){t.Ee=[];const n=new Set;for(const i of t.explicitOrderBy)t.Ee.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Ft(ae.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(t).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||t.Ee.push(new wi(i,r))}),n.has(ae.keyField().canonicalString())||t.Ee.push(new wi(ae.keyField(),r))}return t.Ee}function Le(e){const t=pt(e);return t.de||(t.de=Wy(t,ts(e))),t.de}function Wy(e,t){if(e.limitType==="F")return ac(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new wi(s.field,i)});const n=e.endAt?new Ti(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ti(e.startAt.position,e.startAt.inclusive):null;return ac(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ua(e,t,n){return new Hi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function zi(e,t){return Ka(Le(e),Le(t))&&e.limitType===t.limitType}function Nf(e){return`${Wa(Le(e))}|lt:${e.limitType}`}function Xn(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Vf(s)).join(", ")}]`),$i(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>mr(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>mr(s)).join(",")),`Target(${r})`}(Le(e))}; limitType=${e.limitType})`}function Wi(e,t){return t.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):st.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(e,t)&&function(r,s){for(const i of ts(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(e,t)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(e,t)&&function(r,s){return!(r.startAt&&!function(a,l,c){const f=ic(a,l,c);return a.inclusive?f<=0:f<0}(r.startAt,ts(r),s)||r.endAt&&!function(a,l,c){const f=ic(a,l,c);return a.inclusive?f>=0:f>0}(r.endAt,ts(r),s))}(e,t)}function Ky(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Mf(e){return(t,n)=>{let r=!1;for(const s of ts(e)){const i=Gy(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Gy(e,t,n){const r=e.field.isKeyField()?st.comparator(t.key,n.key):function(i,a,l){const c=a.data.field(i),f=l.data.field(i);return c!==null&&f!==null?pr(c,f):ot(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ot(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){ys(this.inner,(n,r)=>{for(const[s,i]of r)t(s,i)})}isEmpty(){return Cy(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy=new Vt(st.comparator);function Tn(){return Qy}const kf=new Vt(st.comparator);function zr(...e){let t=kf;for(const n of e)t=t.insert(n.key,n);return t}function Yy(e){let t=kf;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function kn(){return es()}function Lf(){return es()}function es(){return new $n(e=>e.toString(),(e,t)=>e.isEqual(t))}const Xy=new Ft(st.comparator);function mt(...e){let t=Xy;for(const n of e)t=t.add(n);return t}const Jy=new Ft(ut);function Zy(){return Jy}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ra(t)?"-0":t}}function ev(e){return{integerValue:""+e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(){this._=void 0}}function nv(e,t,n){return e instanceof ca?function(s,i){const a={fields:{[Af]:{stringValue:If},[Cf]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ha(i)&&(i=qi(i)),i&&(a.fields[bf]=i),{mapValue:a}}(n,t):e instanceof Ii?Ff(e,t):e instanceof Ai?Bf(e,t):function(s,i){const a=sv(s,i),l=uc(a)+uc(s.Re);return oa(a)&&oa(s.Re)?ev(l):tv(s.serializer,l)}(e,t)}function rv(e,t,n){return e instanceof Ii?Ff(e,t):e instanceof Ai?Bf(e,t):n}function sv(e,t){return e instanceof ha?function(r){return oa(r)||function(i){return!!i&&"doubleValue"in i}(r)}(t)?t:{integerValue:0}:null}class ca extends Ki{}class Ii extends Ki{constructor(t){super(),this.elements=t}}function Ff(e,t){const n=Uf(t);for(const r of e.elements)n.some(s=>Be(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ai extends Ki{constructor(t){super(),this.elements=t}}function Bf(e,t){let n=Uf(t);for(const r of e.elements)n=n.filter(s=>!Be(s,r));return{arrayValue:{values:n}}}class ha extends Ki{constructor(t,n){super(),this.serializer=t,this.Re=n}}function uc(e){return Dt(e.integerValue||e.doubleValue)}function Uf(e){return za(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function iv(e,t){return e.field.isEqual(t.field)&&function(r,s){return r instanceof Ii&&s instanceof Ii||r instanceof Ai&&s instanceof Ai?dr(r.elements,s.elements,Be):r instanceof ha&&s instanceof ha?Be(r.Re,s.Re):r instanceof ca&&s instanceof ca}(e.transform,t.transform)}class Bn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Bn}static exists(t){return new Bn(void 0,t)}static updateTime(t){return new Bn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ri(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Ga{}function jf(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new av(e.key,Bn.none()):new Qa(e.key,e.data,Bn.none());{const n=e.data,r=Me.empty();let s=new Ft(ae.comparator);for(let i of t.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Gi(e.key,r,new un(s.toArray()),Bn.none())}}function ov(e,t,n){e instanceof Qa?function(s,i,a){const l=s.value.clone(),c=hc(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof Gi?function(s,i,a){if(!ri(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=hc(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll($f(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(e,t,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function ns(e,t,n,r){return e instanceof Qa?function(i,a,l,c){if(!ri(i.precondition,a))return l;const f=i.value.clone(),d=fc(i.fieldTransforms,c,a);return f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(e,t,n,r):e instanceof Gi?function(i,a,l,c){if(!ri(i.precondition,a))return l;const f=fc(i.fieldTransforms,c,a),d=a.data;return d.setAll($f(i)),d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(e,t,n,r):function(i,a,l){return ri(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function cc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&dr(r,s,(i,a)=>iv(i,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Qa extends Ga{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Gi extends Ga{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function $f(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function hc(e,t,n){const r=new Map;Ct(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,l=t.data.field(i.field);r.set(i.field,rv(a,l,n[s]))}return r}function fc(e,t,n){const r=new Map;for(const s of e){const i=s.transform,a=n.data.field(s.field);r.set(s.field,nv(i,a,t))}return r}class av extends Ga{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&ov(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=ns(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=ns(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Lf();return this.mutations.forEach(s=>{const i=t.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=jf(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(it.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),mt())}isEqual(t){return this.batchId===t.batchId&&dr(this.mutations,t.mutations,(n,r)=>cc(n,r))&&dr(this.baseMutations,t.baseMutations,(n,r)=>cc(n,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,ft;function qf(e){if(e===void 0)return Je("GRPC error has no .code"),H.UNKNOWN;switch(e){case Nt.OK:return H.OK;case Nt.CANCELLED:return H.CANCELLED;case Nt.UNKNOWN:return H.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return H.INTERNAL;case Nt.UNAVAILABLE:return H.UNAVAILABLE;case Nt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case Nt.NOT_FOUND:return H.NOT_FOUND;case Nt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case Nt.ABORTED:return H.ABORTED;case Nt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case Nt.DATA_LOSS:return H.DATA_LOSS;default:return ot(39323,{code:e})}}(ft=Nt||(Nt={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv=new pn([4294967295,4294967295],0);function dc(e){const t=Ef().encode(e),n=new ff;return n.update(t),new Uint8Array(n.digest())}function pc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new pn([n,r],0),new pn([s,i],0)]}class Ya{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wr(`Invalid padding: ${n}`);if(r<0)throw new Wr(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Wr(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Wr(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*t.length-n,this.ye=pn.fromNumber(this.pe)}we(t,n,r){let s=t.add(n.multiply(pn.fromNumber(r)));return s.compare(hv)===1&&(s=new pn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const n=dc(t),[r,s]=pc(n);for(let i=0;i<this.hashCount;i++){const a=this.we(r,s,i);if(!this.be(a))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),a=new Ya(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(t){if(this.pe===0)return;const n=dc(t),[r,s]=pc(n);for(let i=0;i<this.hashCount;i++){const a=this.we(r,s,i);this.Se(a)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Wr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,vs.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Qi(it.min(),s,new Vt(ut),Tn(),mt())}}class vs{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new vs(r,n,mt(),mt(),mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(t,n,r,s){this.De=t,this.removedTargetIds=n,this.key=r,this.ve=s}}class Hf{constructor(t,n){this.targetId=t,this.Ce=n}}class zf{constructor(t,n,r=zt.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class mc{constructor(){this.Fe=0,this.Me=gc(),this.xe=zt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=mt(),n=mt(),r=mt();return this.Me.forEach((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ot(38017,{changeType:i})}}),new vs(this.xe,this.Oe,t,n,r)}Qe(){this.Ne=!1,this.Me=gc()}$e(t,n){this.Ne=!0,this.Me=this.Me.insert(t,n)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ct(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class fv{constructor(t){this.ze=t,this.je=new Map,this.He=Tn(),this.Je=zs(),this.Ye=zs(),this.Ze=new Vt(ut)}Xe(t){for(const n of t.De)t.ve&&t.ve.isFoundDocument()?this.et(n,t.ve):this.tt(n,t.key,t.ve);for(const n of t.removedTargetIds)this.tt(n,t.key,t.ve)}nt(t){this.forEachTarget(t,n=>{const r=this.rt(n);switch(t.state){case 0:this.it(n)&&r.ke(t.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(t.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(t.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(t.resumeToken));break;default:ot(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(t){const n=t.targetId,r=t.Ce.count,s=this._t(n);if(s){const i=s.target;if(la(i))if(r===0){const a=new st(i.path);this.tt(n,a,te.newNoDocument(a,it.min()))}else Ct(r===1,20013,{expectedCount:r});else{const a=this.ut(n);if(a!==r){const l=this.ct(t),c=l?this.lt(l,t,a):1;if(c!==0){this.st(n);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,f)}}}}}ct(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=vn(r).toUint8Array()}catch(c){if(c instanceof wf)return fr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Ya(a,s,i)}catch(c){return fr(c instanceof Wr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.pe===0?null:l}lt(t,n,r){return n.Ce.count===r-this.Tt(t,n.targetId)?0:2}Tt(t,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.ze.Pt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.tt(n,i,null),s++)}),s}It(t){const n=new Map;this.je.forEach((i,a)=>{const l=this._t(a);if(l){if(i.current&&la(l.target)){const c=new st(l.target.path);this.Et(c).has(a)||this.dt(a,c)||this.tt(a,c,te.newNoDocument(c,t))}i.Le&&(n.set(a,i.qe()),i.Qe())}});let r=mt();this.Ye.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const f=this._t(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.He.forEach((i,a)=>a.setReadTime(t));const s=new Qi(t,n,this.Ze,this.He,r);return this.He=Tn(),this.Je=zs(),this.Ye=zs(),this.Ze=new Vt(ut),s}et(t,n){if(!this.it(t))return;const r=this.dt(t,n.key)?2:0;this.rt(t).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(t)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(t))}tt(t,n,r){if(!this.it(t))return;const s=this.rt(t);this.dt(t,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(t)),this.Ye=this.Ye.insert(n,this.At(n).add(t)),r&&(this.He=this.He.insert(n,r))}removeTarget(t){this.je.delete(t)}ut(t){const n=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let n=this.je.get(t);return n||(n=new mc,this.je.set(t,n)),n}At(t){let n=this.Ye.get(t);return n||(n=new Ft(ut),this.Ye=this.Ye.insert(t,n)),n}Et(t){let n=this.Je.get(t);return n||(n=new Ft(ut),this.Je=this.Je.insert(t,n)),n}it(t){const n=this._t(t)!==null;return n||K("WatchChangeAggregator","Detected inactive target",t),n}_t(t){const n=this.je.get(t);return n&&n.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new mc),this.ze.getRemoteKeysForTarget(t).forEach(n=>{this.tt(t,n,null)})}dt(t,n){return this.ze.getRemoteKeysForTarget(t).has(n)}}function zs(){return new Vt(st.comparator)}function gc(){return new Vt(st.comparator)}const dv={asc:"ASCENDING",desc:"DESCENDING"},pv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mv={and:"AND",or:"OR"};class gv{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function fa(e,t){return e.useProto3Json||$i(t)?t:{value:t}}function _v(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function yv(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function lr(e){return Ct(!!e,49232),it.fromTimestamp(function(n){const r=yn(n);return new de(r.seconds,r.nanos)}(e))}function vv(e,t){return da(e,t).canonicalString()}function da(e,t){const n=function(s){return new Pt(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function Wf(e){const t=Pt.fromString(e);return Ct(Xf(t),10190,{key:t.toString()}),t}function Oo(e,t){const n=Wf(t);if(n.get(1)!==e.databaseId.projectId)throw new et(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new et(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new st(Gf(n))}function Kf(e,t){return vv(e.databaseId,t)}function Ev(e){const t=Wf(e);return t.length===4?Pt.emptyPath():Gf(t)}function _c(e){return new Pt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Gf(e){return Ct(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function Tv(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ot(39313,{state:f})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(f,d){return f.useProto3Json?(Ct(d===void 0||typeof d=="string",58123),zt.fromBase64String(d||"")):(Ct(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),zt.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(f){const d=f.code===void 0?H.UNKNOWN:qf(f.code);return new et(d,f.message||"")}(a);n=new zf(r,s,i,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Oo(e,r.document.name),i=lr(r.document.updateTime),a=r.document.createTime?lr(r.document.createTime):it.min(),l=new Me({mapValue:{fields:r.document.fields}}),c=te.newFoundDocument(s,i,a,l),f=r.targetIds||[],d=r.removedTargetIds||[];n=new si(f,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Oo(e,r.document),i=r.readTime?lr(r.readTime):it.min(),a=te.newNoDocument(s,i),l=r.removedTargetIds||[];n=new si([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Oo(e,r.document),i=r.removedTargetIds||[];n=new si([],i,s,null)}else{if(!("filter"in t))return ot(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new cv(s,i),l=r.targetId;n=new Hf(l,a)}}return n}function wv(e,t){return{documents:[Kf(e,t.path)]}}function Iv(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Kf(e,s);const i=function(f){if(f.length!==0)return Yf(Ue.create(f,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(f){if(f.length!==0)return f.map(d=>function(E){return{field:Jn(E.field),direction:Cv(E.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=fa(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(t.endAt)),{gt:n,parent:s}}function Av(e){let t=Ev(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ct(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let i=[];n.where&&(i=function(m){const E=Qf(m);return E instanceof Ue&&Pf(E)?E.getFilters():[E]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(E=>function(V){return new wi(Zn(V.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(E))}(n.orderBy));let l=null;n.limit&&(l=function(m){let E;return E=typeof m=="object"?m.value:m,$i(E)?null:E}(n.limit));let c=null;n.startAt&&(c=function(m){const E=!!m.before,S=m.values||[];return new Ti(S,E)}(n.startAt));let f=null;return n.endAt&&(f=function(m){const E=!m.before,S=m.values||[];return new Ti(S,E)}(n.endAt)),Hy(t,s,a,i,l,"F",c,f)}function bv(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ot(28987,{purpose:s})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Qf(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Zn(n.unaryFilter.field);return Lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Zn(n.unaryFilter.field);return Lt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Zn(n.unaryFilter.field);return Lt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Zn(n.unaryFilter.field);return Lt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ot(61313);default:return ot(60726)}}(e):e.fieldFilter!==void 0?function(n){return Lt.create(Zn(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ot(58110);default:return ot(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Ue.create(n.compositeFilter.filters.map(r=>Qf(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ot(1026)}}(n.compositeFilter.op))}(e):ot(30097,{filter:e})}function Cv(e){return dv[e]}function Sv(e){return pv[e]}function Rv(e){return mv[e]}function Jn(e){return{fieldPath:e.canonicalString()}}function Zn(e){return ae.fromServerFormat(e.fieldPath)}function Yf(e){return e instanceof Lt?function(n){if(n.op==="=="){if(sc(n.value))return{unaryFilter:{field:Jn(n.field),op:"IS_NAN"}};if(rc(n.value))return{unaryFilter:{field:Jn(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(sc(n.value))return{unaryFilter:{field:Jn(n.field),op:"IS_NOT_NAN"}};if(rc(n.value))return{unaryFilter:{field:Jn(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jn(n.field),op:Sv(n.op),value:n.value}}}(e):e instanceof Ue?function(n){const r=n.getFilters().map(s=>Yf(s));return r.length===1?r[0]:{compositeFilter:{op:Rv(n.op),filters:r}}}(e):ot(54877,{filter:e})}function Xf(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(t,n,r,s,i=it.min(),a=it.min(),l=zt.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new cn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new cn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new cn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new cn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(t){this.wt=t}}function Dv(e){const t=Av({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?ua(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(){this.Cn=new xv}addToCollectionParentIndex(t,n){return this.Cn.add(n),x.resolve()}getCollectionParents(t,n){return x.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return x.resolve()}deleteFieldIndex(t,n){return x.resolve()}deleteAllFieldIndexes(t){return x.resolve()}createTargetIndexes(t,n){return x.resolve()}getDocumentsMatchingTarget(t,n){return x.resolve(null)}getIndexType(t,n){return x.resolve(0)}getFieldIndexes(t,n){return x.resolve([])}getNextCollectionGroupToUpdate(t){return x.resolve(null)}getMinOffset(t,n){return x.resolve(_n.min())}getMinOffsetFromCollectionGroup(t,n){return x.resolve(_n.min())}updateCollectionGroup(t,n,r){return x.resolve()}updateIndexEntries(t,n){return x.resolve()}}class xv{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new Ft(Pt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new Ft(Pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Jf=41943040;class he{static withCacheSize(t){return new he(t,he.DEFAULT_COLLECTION_PERCENTILE,he.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */he.DEFAULT_COLLECTION_PERCENTILE=10,he.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,he.DEFAULT=new he(Jf,he.DEFAULT_COLLECTION_PERCENTILE,he.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),he.DISABLED=new he(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new gr(0)}static lr(){return new gr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc="LruGarbageCollector",Ov=1048576;function Ec([e,t],[n,r]){const s=ut(e,n);return s===0?ut(t,r):s}class Nv{constructor(t){this.Er=t,this.buffer=new Ft(Ec),this.dr=0}Ar(){return++this.dr}Rr(t){const n=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Ec(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Mv{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){K(vc,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Tr(n)?K(vc,"Ignoring IndexedDB error during garbage collection: ",n):await Ui(n)}await this.mr(3e5)})}}class kv{constructor(t,n){this.gr=t,this.params=n}calculateTargetCount(t,n){return this.gr.pr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return x.resolve(ji.le);const r=new Nv(n);return this.gr.forEachTarget(t,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(t,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.gr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.gr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(yc)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yc):this.wr(t,n))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,n){let r,s,i,a,l,c,f;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(t,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(t,r,n))).next(m=>(i=m,c=Date.now(),this.removeOrphanedDocuments(t,r))).next(m=>(f=Date.now(),Yn()<=dt.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(f-c)+`ms
Total Duration: ${f-d}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function Lv(e,t){return new kv(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(){this.changes=new $n(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,te.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(r!==null&&ns(r.mutation,s,un.empty(),de.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,mt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=mt()){const s=kn();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,r).next(i=>{let a=zr();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const r=kn();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,mt()))}populateOverlays(t,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(t,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,r,s){let i=Tn();const a=es(),l=function(){return es()}();return n.forEach((c,f)=>{const d=r.get(f.key);s.has(f.key)&&(d===void 0||d.mutation instanceof Gi)?i=i.insert(f.key,f):d!==void 0?(a.set(f.key,d.mutation.getFieldMask()),ns(d.mutation,f,d.mutation.getFieldMask(),de.now())):a.set(f.key,un.empty())}),this.recalculateAndSaveOverlays(t,i).next(c=>(c.forEach((f,d)=>a.set(f,d)),n.forEach((f,d)=>{var m;return l.set(f,new Bv(d,(m=a.get(f))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(t,n){const r=es();let s=new Vt((a,l)=>a-l),i=mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const f=n.get(c);if(f===null)return;let d=r.get(c)||un.empty();d=l.applyToLocalView(f,d),r.set(c,d);const m=(s.get(l.batchId)||mt()).add(c);s=s.insert(l.batchId,m)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),f=c.key,d=c.value,m=Lf();d.forEach(E=>{if(!i.has(E)){const S=jf(n.get(E),r.get(E));S!==null&&m.set(E,S),i=i.add(E)}}),a.push(this.documentOverlayCache.saveOverlays(t,f,m))}return x.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,s){return function(a){return st.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):zy(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):x.resolve(kn());let l=cs,c=i;return a.next(f=>x.forEach(f,(d,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(d)?x.resolve():this.remoteDocumentCache.getEntry(t,d).next(E=>{c=c.insert(d,E)}))).next(()=>this.populateOverlays(t,f,i)).next(()=>this.computeViews(t,c,f,mt())).next(d=>({batchId:l,changes:Yy(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new st(n)).next(r=>{let s=zr();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let a=zr();return this.indexManager.getCollectionParents(t,i).next(l=>x.forEach(l,c=>{const f=function(m,E){return new Hi(E,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,f,r,s).next(d=>{d.forEach((m,E)=>{a=a.insert(m,E)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s))).next(a=>{i.forEach((c,f)=>{const d=f.getKey();a.get(d)===null&&(a=a.insert(d,te.newInvalidDocument(d)))});let l=zr();return a.forEach((c,f)=>{const d=i.get(c);d!==void 0&&ns(d.mutation,f,un.empty(),de.now()),Wi(n,f)&&(l=l.insert(c,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,n){return x.resolve(this.kr.get(n))}saveBundleMetadata(t,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:lr(s.createTime)}}(n)),x.resolve()}getNamedQuery(t,n){return x.resolve(this.qr.get(n))}saveNamedQuery(t,n){return this.qr.set(n.name,function(s){return{name:s.name,query:Dv(s.bundledQuery),readTime:lr(s.readTime)}}(n)),x.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(){this.overlays=new Vt(st.comparator),this.Qr=new Map}getOverlay(t,n){return x.resolve(this.overlays.get(n))}getOverlays(t,n){const r=kn();return x.forEach(n,s=>this.getOverlay(t,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((s,i)=>{this.St(t,n,i)}),x.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(r)),x.resolve()}getOverlaysForCollection(t,n,r){const s=kn(),i=n.length+1,a=new st(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,f=c.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return x.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new Vt((f,d)=>f-d);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let d=i.get(f.largestBatchId);d===null&&(d=kn(),i=i.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const l=kn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,d)=>l.set(f,d)),!(l.size()>=s)););return x.resolve(l)}St(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new uv(n,r));let i=this.Qr.get(n);i===void 0&&(i=mt(),this.Qr.set(n,i)),this.Qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(){this.sessionToken=zt.EMPTY_BYTE_STRING}getSessionToken(t){return x.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,x.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(){this.$r=new Ft(Bt.Ur),this.Kr=new Ft(Bt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,n){const r=new Bt(t,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.zr(new Bt(t,n))}jr(t,n){t.forEach(r=>this.removeReference(r,n))}Hr(t){const n=new st(new Pt([])),r=new Bt(n,t),s=new Bt(n,t+1),i=[];return this.Kr.forEachInRange([r,s],a=>{this.zr(a),i.push(a.key)}),i}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const n=new st(new Pt([])),r=new Bt(n,t),s=new Bt(n,t+1);let i=mt();return this.Kr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(t){const n=new Bt(t,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Bt{constructor(t,n){this.key=t,this.Zr=n}static Ur(t,n){return st.comparator(t.key,n.key)||ut(t.Zr,n.Zr)}static Wr(t,n){return ut(t.Zr,n.Zr)||st.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Ft(Bt.Ur)}checkEmpty(t){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new lv(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Xr=this.Xr.add(new Bt(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return x.resolve(a)}lookupMutationBatch(t,n){return x.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.ti(r),i=s<0?0:s;return x.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?Iy:this.nr-1)}getAllMutationBatches(t){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Bt(n,0),s=new Bt(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([r,s],a=>{const l=this.ei(a.Zr);i.push(l)}),x.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Ft(ut);return n.forEach(s=>{const i=new Bt(s,0),a=new Bt(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,a],l=>{r=r.add(l.Zr)})}),x.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;st.isDocumentKey(i)||(i=i.child(""));const a=new Bt(new st(i),0);let l=new Ft(ut);return this.Xr.forEachWhile(c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(l=l.add(c.Zr)),!0)},a),x.resolve(this.ni(l))}ni(t){const n=[];return t.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){Ct(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return x.forEach(n.mutations,s=>{const i=new Bt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Xr=r})}sr(t){}containsKey(t,n){const r=new Bt(n,0),s=this.Xr.firstAfterOrEqual(r);return x.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,x.resolve()}ri(t,n){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const n=this.ti(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(t){this.ii=t,this.docs=function(){return new Vt(st.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():te.newInvalidDocument(n))}getEntries(t,n){let r=Tn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():te.newInvalidDocument(s))}),x.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=Tn();const a=n.path,l=new st(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:f,value:{document:d}}=c.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||vy(yy(d),r)<=0||(s.has(d.key)||Wi(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return x.resolve(i)}getAllFromCollectionGroup(t,n,r,s){ot(9500)}si(t,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new Wv(this)}getSize(t){return x.resolve(this.size)}}class Wv extends Fv{constructor(t){super(),this.Br=t}applyChanges(t){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(t,s)):this.Br.removeEntry(r)}),x.waitFor(n)}getFromCache(t,n){return this.Br.getEntry(t,n)}getAllFromCache(t,n){return this.Br.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(t){this.persistence=t,this.oi=new $n(n=>Wa(n),Ka),this.lastRemoteSnapshotVersion=it.min(),this.highestTargetId=0,this._i=0,this.ai=new Xa,this.targetCount=0,this.ui=gr.cr()}forEachTarget(t,n){return this.oi.forEach((r,s)=>n(s)),x.resolve()}getLastRemoteSnapshotVersion(t){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return x.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),x.resolve()}Tr(t){this.oi.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ui=new gr(n),this.highestTargetId=n),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,n){return this.Tr(n),this.targetCount+=1,x.resolve()}updateTargetData(t,n){return this.Tr(n),x.resolve()}removeTargetData(t,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.oi.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.oi.delete(a),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),x.waitFor(i).next(()=>s)}getTargetCount(t){return x.resolve(this.targetCount)}getTargetData(t,n){const r=this.oi.get(n)||null;return x.resolve(r)}addMatchingKeys(t,n,r){return this.ai.Gr(n,r),x.resolve()}removeMatchingKeys(t,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(t,a))}),x.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.ai.Hr(n),x.resolve()}getMatchingKeysForTargetId(t,n){const r=this.ai.Yr(n);return x.resolve(r)}containsKey(t,n){return x.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(t,n){this.ci={},this.overlays={},this.li=new ji(0),this.hi=!1,this.hi=!0,this.Pi=new qv,this.referenceDelegate=t(this),this.Ti=new Kv(this),this.indexManager=new Vv,this.remoteDocumentCache=function(s){return new zv(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new Pv(n),this.Ei=new jv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new $v,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ci[t.toKey()];return r||(r=new Hv(n,this.referenceDelegate),this.ci[t.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,n,r){K("MemoryPersistence","Starting transaction:",t);const s=new Gv(this.li.next());return this.referenceDelegate.di(),r(s).next(i=>this.referenceDelegate.Ai(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ri(t,n){return x.or(Object.values(this.ci).map(r=>()=>r.containsKey(t,n)))}}class Gv extends Ty{constructor(t){super(),this.currentSequenceNumber=t}}class Ja{constructor(t){this.persistence=t,this.Vi=new Xa,this.mi=null}static fi(t){return new Ja(t)}get gi(){if(this.mi)return this.mi;throw ot(60996)}addReference(t,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),x.resolve()}removeReference(t,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(t,n){return this.gi.add(n.toString()),x.resolve()}removeTarget(t,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(i=>this.gi.add(i.toString()))}).next(()=>r.removeTargetData(t,n))}di(){this.mi=new Set}Ai(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.gi,r=>{const s=st.fromPath(r);return this.pi(t,s).next(i=>{i||n.removeEntry(s,it.min())})}).next(()=>(this.mi=null,n.apply(t)))}updateLimboDocument(t,n){return this.pi(t,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(t){return 0}pi(t,n){return x.or([()=>x.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ri(t,n)])}}class bi{constructor(t,n){this.persistence=t,this.yi=new $n(r=>Ay(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Lv(this,n)}static fi(t,n){return new bi(t,n)}di(){}Ai(t){return x.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}pr(t){const n=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(s=>r+s))}br(t){let n=0;return this.yr(t,r=>{n++}).next(()=>n)}yr(t,n){return x.forEach(this.yi,(r,s)=>this.Dr(t,r,s).next(i=>i?x.resolve():n(s)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.si(t,a=>this.Dr(t,a,n).next(l=>{l||(r++,i.removeEntry(a,it.min()))})).next(()=>i.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.yi.set(n,t.currentSequenceNumber),x.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),x.resolve()}removeReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),x.resolve()}updateLimboDocument(t,n){return this.yi.set(n,t.currentSequenceNumber),x.resolve()}Ii(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=ni(t.data.value)),n}Dr(t,n,r){return x.or([()=>this.persistence.Ri(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.yi.get(n);return x.resolve(s!==void 0&&s>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.ds=r,this.As=s}static Rs(t,n){let r=mt(),s=mt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Za(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return Ug()?8:wy(Fg())>0?6:4}()}initialize(t,n){this.ys=t,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.ws(t,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.bs(t,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new Qv;return this.Ss(t,n,a).next(l=>{if(i.result=l,this.fs)return this.Ds(t,n,a,l.size)})}).next(()=>i.result)}Ds(t,n,r,s){return r.documentReadCount<this.gs?(Yn()<=dt.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Xn(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),x.resolve()):(Yn()<=dt.DEBUG&&K("QueryEngine","Query:",Xn(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(Yn()<=dt.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Xn(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Le(n))):x.resolve())}ws(t,n){if(lc(n))return x.resolve(null);let r=Le(n);return this.indexManager.getIndexType(t,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ua(n,null,"F"),r=Le(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(i=>{const a=mt(...i);return this.ys.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,r).next(c=>{const f=this.vs(n,l);return this.Cs(n,f,a,c.readTime)?this.ws(t,ua(n,null,"F")):this.Fs(t,f,n,c)}))})))}bs(t,n,r,s){return lc(n)||s.isEqual(it.min())?x.resolve(null):this.ys.getDocuments(t,r).next(i=>{const a=this.vs(n,i);return this.Cs(n,a,r,s)?x.resolve(null):(Yn()<=dt.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Xn(n)),this.Fs(t,a,n,_y(s,cs)).next(l=>l))})}vs(t,n){let r=new Ft(Mf(t));return n.forEach((s,i)=>{Wi(t,i)&&(r=r.add(i))}),r}Cs(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(t,n,r){return Yn()<=dt.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Xn(n)),this.ys.getDocumentsMatchingQuery(t,n,_n.min(),r)}Fs(t,n,r,s){return this.ys.getDocumentsMatchingQuery(t,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl="LocalStore",Xv=3e8;class Jv{constructor(t,n,r,s){this.persistence=t,this.Ms=n,this.serializer=s,this.xs=new Vt(ut),this.Os=new $n(i=>Wa(i),Ka),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(r)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Uv(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.xs))}}function Zv(e,t,n,r){return new Jv(e,t,n,r)}async function td(e,t){const n=pt(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ls(t),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=mt();for(const f of s){a.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}for(const f of i){l.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(f=>({ks:f,removedBatchIds:a,addedBatchIds:l}))})})}function ed(e){const t=pt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ti.getLastRemoteSnapshotVersion(n))}function tE(e,t){const n=pt(e),r=t.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const l=[];t.targetChanges.forEach((d,m)=>{const E=s.get(m);if(!E)return;l.push(n.Ti.removeMatchingKeys(i,d.removedDocuments,m).next(()=>n.Ti.addMatchingKeys(i,d.addedDocuments,m)));let S=E.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(m)!==null?S=S.withResumeToken(zt.EMPTY_BYTE_STRING,it.min()).withLastLimboFreeSnapshotVersion(it.min()):d.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(d.resumeToken,r)),s=s.insert(m,S),function(N,j,Q){return N.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=Xv?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0}(E,S,d)&&l.push(n.Ti.updateTargetData(i,S))});let c=Tn(),f=mt();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(eE(i,a,t.documentUpdates).next(d=>{c=d.qs,f=d.Qs})),!r.isEqual(it.min())){const d=n.Ti.getLastRemoteSnapshotVersion(i).next(m=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(d)}return x.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,f)).next(()=>c)}).then(i=>(n.xs=s,i))}function eE(e,t,n){let r=mt(),s=mt();return n.forEach(i=>r=r.add(i)),t.getEntries(e,r).next(i=>{let a=Tn();return n.forEach((l,c)=>{const f=i.get(l);c.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(it.min())?(t.removeEntry(l,c.readTime),a=a.insert(l,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(c),a=a.insert(l,c)):K(tl,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",c.version)}),{qs:a,Qs:s}})}function nE(e,t){const n=pt(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,t).next(i=>i?(s=i,x.resolve(s)):n.Ti.allocateTargetId(r).next(a=>(s=new cn(t,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(t,r.targetId)),r})}async function pa(e,t,n){const r=pt(e),s=r.xs.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Tr(a))throw a;K(tl,`Failed to update sequence numbers for target ${t}: ${a}`)}r.xs=r.xs.remove(t),r.Os.delete(s.target)}function Tc(e,t,n){const r=pt(e);let s=it.min(),i=mt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,f,d){const m=pt(c),E=m.Os.get(d);return E!==void 0?x.resolve(m.xs.get(E)):m.Ti.getTargetData(f,d)}(r,a,Le(t)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.Ms.getDocumentsMatchingQuery(a,t,n?s:it.min(),n?i:mt())).next(l=>(rE(r,Ky(t),l),{documents:l,$s:i})))}function rE(e,t,n){let r=e.Ns.get(t)||it.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),e.Ns.set(t,r)}class wc{constructor(){this.activeTargetIds=Zy()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class sE{constructor(){this.xo=new wc,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,n,r){this.Oo[t]=n}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new wc,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic="ConnectivityMonitor";class Ac{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){K(Ic,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){K(Ic,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ws=null;function ma(){return Ws===null?Ws=function(){return 268435456+Math.round(2147483648*Math.random())}():Ws++,"0x"+Ws.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No="RestConnection",oE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aE{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+t.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===Ei?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(t,n,r,s,i){const a=ma(),l=this.jo(t,n.toUriEncodedString());K(No,`Sending RPC '${t}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,s,i);const{host:f}=new URL(l),d=ja(f);return this.Jo(t,l,c,r,d).then(m=>(K(No,`Received RPC '${t}' ${a}: `,m),m),m=>{throw fr(No,`RPC '${t}' ${a} failed with error: `,m,"url: ",l,"request:",r),m})}Yo(t,n,r,s,i,a){return this.zo(t,n,r,s,i)}Ho(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Er}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>t[i]=s),r&&r.headers.forEach((s,i)=>t[i]=s)}jo(t,n){const r=oE[t];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class uE extends aE{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,s,i){const a=ma();return new Promise((l,c)=>{const f=new df;f.setWithCredentials(!0),f.listenOnce(pf.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case ei.NO_ERROR:const m=f.getResponseJson();K(Xt,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(m)),l(m);break;case ei.TIMEOUT:K(Xt,`RPC '${t}' ${a} timed out`),c(new et(H.DEADLINE_EXCEEDED,"Request time out"));break;case ei.HTTP_ERROR:const E=f.getStatus();if(K(Xt,`RPC '${t}' ${a} failed with status:`,E,"response text:",f.getResponseText()),E>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);const V=S==null?void 0:S.error;if(V&&V.status&&V.message){const N=function(Q){const U=Q.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(U)>=0?U:H.UNKNOWN}(V.status);c(new et(N,V.message))}else c(new et(H.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new et(H.UNAVAILABLE,"Connection failed."));break;default:ot(9055,{h_:t,streamId:a,P_:f.getLastErrorCode(),T_:f.getLastError()})}}finally{K(Xt,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(s);K(Xt,`RPC '${t}' ${a} sending request:`,s),f.send(n,"POST",d,r,15)})}I_(t,n,r){const s=ma(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=_f(),l=gf(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=i.join("");K(Xt,`Creating RPC '${t}' stream ${s}: ${d}`,c);const m=a.createWebChannel(d,c);this.E_(m);let E=!1,S=!1;const V=new lE({Zo:j=>{S?K(Xt,`Not sending because RPC '${t}' stream ${s} is closed:`,j):(E||(K(Xt,`Opening RPC '${t}' stream ${s} transport.`),m.open(),E=!0),K(Xt,`RPC '${t}' stream ${s} sending:`,j),m.send(j))},Xo:()=>m.close()}),N=(j,Q,U)=>{j.listen(Q,F=>{try{U(F)}catch(D){setTimeout(()=>{throw D},0)}})};return N(m,Hr.EventType.OPEN,()=>{S||(K(Xt,`RPC '${t}' stream ${s} transport opened.`),V.__())}),N(m,Hr.EventType.CLOSE,()=>{S||(S=!0,K(Xt,`RPC '${t}' stream ${s} transport closed`),V.u_(),this.d_(m))}),N(m,Hr.EventType.ERROR,j=>{S||(S=!0,fr(Xt,`RPC '${t}' stream ${s} transport errored. Name:`,j.name,"Message:",j.message),V.u_(new et(H.UNAVAILABLE,"The operation could not be completed")))}),N(m,Hr.EventType.MESSAGE,j=>{var Q;if(!S){const U=j.data[0];Ct(!!U,16349);const F=U,D=(F==null?void 0:F.error)||((Q=F[0])===null||Q===void 0?void 0:Q.error);if(D){K(Xt,`RPC '${t}' stream ${s} received error:`,D);const J=D.status;let Z=function(_){const T=Nt[_];if(T!==void 0)return qf(T)}(J),I=D.message;Z===void 0&&(Z=H.INTERNAL,I="Unknown error status: "+J+" with message "+D.message),S=!0,V.u_(new et(Z,I)),m.close()}else K(Xt,`RPC '${t}' stream ${s} received:`,U),V.c_(U)}}),N(l,mf.STAT_EVENT,j=>{j.stat===ea.PROXY?K(Xt,`RPC '${t}' stream ${s} detected buffering proxy`):j.stat===ea.NOPROXY&&K(Xt,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{V.a_()},0),V}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(n=>n===t)}}function Mo(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(e){return new gv(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(t,n,r=1e3,s=1.5,i=6e4){this.xi=t,this.timerId=n,this.A_=r,this.R_=s,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc="PersistentStream";class cE{constructor(t,n,r,s,i,a,l,c){this.xi=t,this.S_=r,this.D_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new rd(t,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(Je(n.toString()),Je("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(n)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{t(()=>{const s=new et(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(t,n){const r=this.G_(this.v_);this.stream=this.H_(t,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return K(bc,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return n=>{this.xi.enqueueAndForget(()=>this.v_===t?n():(K(bc,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hE extends cE{constructor(t,n,r,s,i,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}H_(t,n){return this.connection.I_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const n=Tv(this.serializer,t),r=function(i){if(!("targetChange"in i))return it.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?it.min():a.readTime?lr(a.readTime):it.min()}(t);return this.listener.Y_(n,r)}Z_(t){const n={};n.database=_c(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=la(c)?{documents:wv(i,c)}:{query:Iv(i,c).gt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=yv(i,a.resumeToken);const f=fa(i,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(it.min())>0){l.readTime=_v(i,a.snapshotVersion.toTimestamp());const f=fa(i,a.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,t);const r=bv(this.serializer,t);r&&(n.labels=r),this.Q_(n)}X_(t){const n={};n.database=_c(this.serializer),n.removeTarget=t,this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{}class dE extends fE{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new et(H.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.zo(t,da(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new et(H.UNKNOWN,i.toString())})}Yo(t,n,r,s,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Yo(t,da(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new et(H.UNKNOWN,a.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class pE{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Je(n),this.ua=!1):K("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r="RemoteStore";class mE{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(a=>{r.enqueueAndForget(async()=>{Ts(this)&&(K(_r,"Restarting streams for network reachability change."),await async function(c){const f=pt(c);f.da.add(4),await Es(f),f.Va.set("Unknown"),f.da.delete(4),await Yi(f)}(this))})}),this.Va=new pE(r,s)}}async function Yi(e){if(Ts(e))for(const t of e.Aa)await t(!0)}async function Es(e){for(const t of e.Aa)await t(!1)}function sd(e,t){const n=pt(e);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),sl(n)?rl(n):wr(n).N_()&&nl(n,t))}function el(e,t){const n=pt(e),r=wr(n);n.Ea.delete(t),r.N_()&&id(n,t),n.Ea.size===0&&(r.N_()?r.k_():Ts(n)&&n.Va.set("Unknown"))}function nl(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(it.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}wr(e).Z_(t)}function id(e,t){e.ma.Ke(t),wr(e).X_(t)}function rl(e){e.ma=new fv({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),wr(e).start(),e.Va.ca()}function sl(e){return Ts(e)&&!wr(e).O_()&&e.Ea.size>0}function Ts(e){return pt(e).da.size===0}function od(e){e.ma=void 0}async function gE(e){e.Va.set("Online")}async function _E(e){e.Ea.forEach((t,n)=>{nl(e,t)})}async function yE(e,t){od(e),sl(e)?(e.Va.Pa(t),rl(e)):e.Va.set("Unknown")}async function vE(e,t,n){if(e.Va.set("Online"),t instanceof zf&&t.state===2&&t.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ea.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ea.delete(l),s.ma.removeTarget(l))}(e,t)}catch(r){K(_r,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Cc(e,r)}else if(t instanceof si?e.ma.Xe(t):t instanceof Hf?e.ma.ot(t):e.ma.nt(t),!n.isEqual(it.min()))try{const r=await ed(e.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.ma.It(a);return l.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.Ea.get(f);d&&i.Ea.set(f,d.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,f)=>{const d=i.Ea.get(c);if(!d)return;i.Ea.set(c,d.withResumeToken(zt.EMPTY_BYTE_STRING,d.snapshotVersion)),id(i,c);const m=new cn(d.target,c,f,d.sequenceNumber);nl(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(r){K(_r,"Failed to raise snapshot:",r),await Cc(e,r)}}async function Cc(e,t,n){if(!Tr(t))throw t;e.da.add(1),await Es(e),e.Va.set("Offline"),n||(n=()=>ed(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{K(_r,"Retrying IndexedDB access"),await n(),e.da.delete(1),await Yi(e)})}async function Sc(e,t){const n=pt(e);n.asyncQueue.verifyOperationInProgress(),K(_r,"RemoteStore received new credentials");const r=Ts(n);n.da.add(3),await Es(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await Yi(n)}async function EE(e,t){const n=pt(e);t?(n.da.delete(2),await Yi(n)):t||(n.da.add(2),await Es(n),n.Va.set("Unknown"))}function wr(e){return e.fa||(e.fa=function(n,r,s){const i=pt(n);return i.oa(),new hE(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{e_:gE.bind(null,e),n_:_E.bind(null,e),i_:yE.bind(null,e),Y_:vE.bind(null,e)}),e.Aa.push(async t=>{t?(e.fa.L_(),sl(e)?rl(e):e.Va.set("Unknown")):(await e.fa.stop(),od(e))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Fn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const a=Date.now()+r,l=new il(t,n,a,s,i);return l.start(r),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new et(H.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ad(e,t){if(Je("AsyncQueue",`${t}: ${e}`),Tr(e))return new et(H.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{static emptySet(t){return new ur(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||st.comparator(n.key,r.key):(n,r)=>st.comparator(n.key,r.key),this.keyedMap=zr(),this.sortedSet=new Vt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof ur)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new ur;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(){this.pa=new Vt(st.comparator)}track(t){const n=t.doc.key,r=this.pa.get(n);r?t.type!==0&&r.type===3?this.pa=this.pa.insert(n,t):t.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.pa=this.pa.remove(n):t.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):ot(63341,{Vt:t,ya:r}):this.pa=this.pa.insert(n,t)}wa(){const t=[];return this.pa.inorderTraversal((n,r)=>{t.push(r)}),t}}class yr{constructor(t,n,r,s,i,a,l,c,f){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(t,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new yr(t,n,ur.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&zi(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class wE{constructor(){this.queries=Pc(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=pt(n),i=s.queries;s.queries=Pc(),i.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new et(H.ABORTED,"Firestore shutting down"))}}function Pc(){return new $n(e=>Nf(e),zi)}async function IE(e,t){const n=pt(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.Da()&&t.va()&&(r=2):(i=new TE,r=t.va()?0:1);try{switch(r){case 0:i.ba=await n.onListen(s,!0);break;case 1:i.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=ad(a,`Initialization of query '${Xn(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,i),i.Sa.push(t),t.Fa(n.onlineState),i.ba&&t.Ma(i.ba)&&ol(n)}async function AE(e,t){const n=pt(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(t);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=t.va()?0:1:!i.Da()&&t.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function bE(e,t){const n=pt(e);let r=!1;for(const s of t){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Ma(s)&&(r=!0);a.ba=s}}r&&ol(n)}function CE(e,t,n){const r=pt(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function ol(e){e.Ca.forEach(t=>{t.next()})}var ga,Dc;(Dc=ga||(ga={})).xa="default",Dc.Cache="cache";class SE{constructor(t,n,r){this.query=t,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new yr(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Na?this.La(t)&&(this.Oa.next(t),n=!0):this.ka(t,this.onlineState)&&(this.qa(t),n=!0),this.Ba=t,n}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),n=!0),n}ka(t,n){if(!t.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}La(t){if(t.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(t){t=yr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==ga.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(t){this.key=t}}class ud{constructor(t){this.key=t}}class RE{constructor(t,n){this.query=t,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=mt(),this.mutatedKeys=mt(),this.Za=Mf(t),this.Xa=new ur(this.Za)}get eu(){return this.Ha}tu(t,n){const r=n?n.nu:new Rc,s=n?n.Xa:this.Xa;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((d,m)=>{const E=s.get(d),S=Wi(this.query,m)?m:null,V=!!E&&this.mutatedKeys.has(E.key),N=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let j=!1;E&&S?E.data.isEqual(S.data)?V!==N&&(r.track({type:3,doc:S}),j=!0):this.ru(E,S)||(r.track({type:2,doc:S}),j=!0,(c&&this.Za(S,c)>0||f&&this.Za(S,f)<0)&&(l=!0)):!E&&S?(r.track({type:0,doc:S}),j=!0):E&&!S&&(r.track({type:1,doc:E}),j=!0,(c||f)&&(l=!0)),j&&(S?(a=a.add(S),i=N?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Xa:a,nu:r,Cs:l,mutatedKeys:i}}ru(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const a=t.nu.wa();a.sort((d,m)=>function(S,V){const N=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ot(20277,{Vt:j})}};return N(S)-N(V)}(d.type,m.type)||this.Za(d.doc,m.doc)),this.iu(r),s=s!=null&&s;const l=n&&!s?this.su():[],c=this.Ya.size===0&&this.current&&!s?1:0,f=c!==this.Ja;return this.Ja=c,a.length!==0||f?{snapshot:new yr(this.query,t.Xa,i,a,t.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:l}:{ou:l}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Rc,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=mt(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return t.forEach(r=>{this.Ya.has(r)||n.push(new ud(r))}),this.Ya.forEach(r=>{t.has(r)||n.push(new ld(r))}),n}au(t){this.Ha=t.$s,this.Ya=mt();const n=this.tu(t.documents);return this.applyChanges(n,!0)}uu(){return yr.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const al="SyncEngine";class PE{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class DE{constructor(t){this.key=t,this.cu=!1}}class VE{constructor(t,n,r,s,i,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.lu={},this.hu=new $n(l=>Nf(l),zi),this.Pu=new Map,this.Tu=new Set,this.Iu=new Vt(st.comparator),this.Eu=new Map,this.du=new Xa,this.Au={},this.Ru=new Map,this.Vu=gr.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function xE(e,t,n=!0){const r=pd(e);let s;const i=r.hu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.uu()):s=await cd(r,t,n,!0),s}async function OE(e,t){const n=pd(e);await cd(n,t,!0,!1)}async function cd(e,t,n,r){const s=await nE(e.localStore,Le(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await NE(e,t,i,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&sd(e.remoteStore,s),l}async function NE(e,t,n,r,s){e.fu=(m,E,S)=>async function(N,j,Q,U){let F=j.view.tu(Q);F.Cs&&(F=await Tc(N.localStore,j.query,!1).then(({documents:I})=>j.view.tu(I,F)));const D=U&&U.targetChanges.get(j.targetId),J=U&&U.targetMismatches.get(j.targetId)!=null,Z=j.view.applyChanges(F,N.isPrimaryClient,D,J);return xc(N,j.targetId,Z.ou),Z.snapshot}(e,m,E,S);const i=await Tc(e.localStore,t,!0),a=new RE(t,i.$s),l=a.tu(i.documents),c=vs.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),f=a.applyChanges(l,e.isPrimaryClient,c);xc(e,n,f.ou);const d=new PE(t,n,a);return e.hu.set(t,d),e.Pu.has(n)?e.Pu.get(n).push(t):e.Pu.set(n,[t]),f.snapshot}async function ME(e,t,n){const r=pt(e),s=r.hu.get(t),i=r.Pu.get(s.targetId);if(i.length>1)return r.Pu.set(s.targetId,i.filter(a=>!zi(a,t))),void r.hu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await pa(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&el(r.remoteStore,s.targetId),_a(r,s.targetId)}).catch(Ui)):(_a(r,s.targetId),await pa(r.localStore,s.targetId,!0))}async function kE(e,t){const n=pt(e),r=n.hu.get(t),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),el(n.remoteStore,r.targetId))}async function hd(e,t){const n=pt(e);try{const r=await tE(n.localStore,t);t.targetChanges.forEach((s,i)=>{const a=n.Eu.get(i);a&&(Ct(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.cu=!0:s.modifiedDocuments.size>0?Ct(a.cu,14607):s.removedDocuments.size>0&&(Ct(a.cu,42227),a.cu=!1))}),await dd(n,r,t)}catch(r){await Ui(r)}}function Vc(e,t,n){const r=pt(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((i,a)=>{const l=a.view.Fa(t);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=pt(a);c.onlineState=l;let f=!1;c.queries.forEach((d,m)=>{for(const E of m.Sa)E.Fa(l)&&(f=!0)}),f&&ol(c)}(r.eventManager,t),s.length&&r.lu.Y_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function LE(e,t,n){const r=pt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Eu.get(t),i=s&&s.key;if(i){let a=new Vt(st.comparator);a=a.insert(i,te.newNoDocument(i,it.min()));const l=mt().add(i),c=new Qi(it.min(),new Map,new Vt(ut),a,l);await hd(r,c),r.Iu=r.Iu.remove(i),r.Eu.delete(t),ll(r)}else await pa(r.localStore,t,!1).then(()=>_a(r,t,n)).catch(Ui)}function _a(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Pu.get(t))e.hu.delete(r),n&&e.lu.gu(r,n);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach(r=>{e.du.containsKey(r)||fd(e,r)})}function fd(e,t){e.Tu.delete(t.path.canonicalString());const n=e.Iu.get(t);n!==null&&(el(e.remoteStore,n),e.Iu=e.Iu.remove(t),e.Eu.delete(n),ll(e))}function xc(e,t,n){for(const r of n)r instanceof ld?(e.du.addReference(r.key,t),FE(e,r)):r instanceof ud?(K(al,"Document no longer in limbo: "+r.key),e.du.removeReference(r.key,t),e.du.containsKey(r.key)||fd(e,r.key)):ot(19791,{pu:r})}function FE(e,t){const n=t.key,r=n.path.canonicalString();e.Iu.get(n)||e.Tu.has(r)||(K(al,"New document in limbo: "+n),e.Tu.add(r),ll(e))}function ll(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){const t=e.Tu.values().next().value;e.Tu.delete(t);const n=new st(Pt.fromString(t)),r=e.Vu.next();e.Eu.set(r,new DE(n)),e.Iu=e.Iu.insert(n,r),sd(e.remoteStore,new cn(Le(Of(n.path)),r,"TargetPurposeLimboResolution",ji.le))}}async function dd(e,t,n){const r=pt(e),s=[],i=[],a=[];r.hu.isEmpty()||(r.hu.forEach((l,c)=>{a.push(r.fu(c,t,n).then(f=>{var d;if((f||n)&&r.isPrimaryClient){const m=f?!f.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(f){s.push(f);const m=Za.Rs(c.targetId,f);i.push(m)}}))}),await Promise.all(a),r.lu.Y_(s),await async function(c,f){const d=pt(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>x.forEach(f,E=>x.forEach(E.ds,S=>d.persistence.referenceDelegate.addReference(m,E.targetId,S)).next(()=>x.forEach(E.As,S=>d.persistence.referenceDelegate.removeReference(m,E.targetId,S)))))}catch(m){if(!Tr(m))throw m;K(tl,"Failed to update sequence numbers: "+m)}for(const m of f){const E=m.targetId;if(!m.fromCache){const S=d.xs.get(E),V=S.snapshotVersion,N=S.withLastLimboFreeSnapshotVersion(V);d.xs=d.xs.insert(E,N)}}}(r.localStore,i))}async function BE(e,t){const n=pt(e);if(!n.currentUser.isEqual(t)){K(al,"User change. New user:",t.toKey());const r=await td(n.localStore,t);n.currentUser=t,function(i,a){i.Ru.forEach(l=>{l.forEach(c=>{c.reject(new et(H.CANCELLED,a))})}),i.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await dd(n,r.ks)}}function UE(e,t){const n=pt(e),r=n.Eu.get(t);if(r&&r.cu)return mt().add(r.key);{let s=mt();const i=n.Pu.get(t);if(!i)return s;for(const a of i){const l=n.hu.get(a);s=s.unionWith(l.view.eu)}return s}}function pd(e){const t=pt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=hd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=UE.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=LE.bind(null,t),t.lu.Y_=bE.bind(null,t.eventManager),t.lu.gu=CE.bind(null,t.eventManager),t}class Ci{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=nd(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,n){return null}Cu(t,n){return null}Du(t){return Zv(this.persistence,new Yv,t.initialUser,this.serializer)}Su(t){return new Zf(Ja.fi,this.serializer)}bu(t){return new sE}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ci.provider={build:()=>new Ci};class jE extends Ci{constructor(t){super(),this.cacheSizeBytes=t}vu(t,n){Ct(this.persistence.referenceDelegate instanceof bi,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Mv(r,t.asyncQueue,n)}Su(t){const n=this.cacheSizeBytes!==void 0?he.withCacheSize(this.cacheSizeBytes):he.DEFAULT;return new Zf(r=>bi.fi(r,n),this.serializer)}}class ya{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Vc(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=BE.bind(null,this.syncEngine),await EE(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new wE}()}createDatastore(t){const n=nd(t.databaseInfo.databaseId),r=function(i){return new uE(i)}(t.databaseInfo);return function(i,a,l,c){return new dE(i,a,l,c)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,s,i,a,l){return new mE(r,s,i,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>Vc(this.syncEngine,n,0),function(){return Ac.C()?new Ac:new iE}())}createSyncEngine(t,n){return function(s,i,a,l,c,f,d){const m=new VE(s,i,a,l,c,f);return d&&(m.mu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(s){const i=pt(s);K(_r,"RemoteStore shutting down."),i.da.add(5),await Es(i),i.Ra.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ya.provider={build:()=>new ya};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):Je("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="FirestoreClient";class qE{constructor(t,n,r,s,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Jt.UNAUTHENTICATED,this.clientId=py.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{K(wn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(K(wn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Fn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=ad(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function ko(e,t){e.asyncQueue.verifyOperationInProgress(),K(wn,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async s=>{r.isEqual(s)||(await td(t.localStore,s),r=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Oc(e,t){e.asyncQueue.verifyOperationInProgress();const n=await HE(e);K(wn,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Sc(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,s)=>Sc(t.remoteStore,s)),e._onlineComponents=t}async function HE(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){K(wn,"Using user provided OfflineComponentProvider");try{await ko(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===H.FAILED_PRECONDITION||s.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;fr("Error using user provided cache. Falling back to memory cache: "+n),await ko(e,new Ci)}}else K(wn,"Using default OfflineComponentProvider"),await ko(e,new jE(void 0));return e._offlineComponents}async function zE(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(K(wn,"Using user provided OnlineComponentProvider"),await Oc(e,e._uninitializedComponentsProvider._online)):(K(wn,"Using default OnlineComponentProvider"),await Oc(e,new ya))),e._onlineComponents}async function WE(e){const t=await zE(e),n=t.eventManager;return n.onListen=xE.bind(null,t.syncEngine),n.onUnlisten=ME.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=OE.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=kE.bind(null,t.syncEngine),n}function KE(e,t,n={}){const r=new Fn;return e.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,f){const d=new $E({next:E=>{d.xu(),a.enqueueAndForget(()=>AE(i,m)),E.fromCache&&c.source==="server"?f.reject(new et(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(E)},error:E=>f.reject(E)}),m=new SE(l,d,{includeMetadataChanges:!0,Qa:!0});return IE(i,m)}(await WE(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(e,t,n){if(!n)throw new et(H.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function QE(e,t,n,r){if(t===!0&&r===!0)throw new et(H.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Mc(e){if(st.isDocumentKey(e))throw new et(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function YE(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":ot(12329,{type:typeof e})}function va(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new et(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=YE(e);throw new et(H.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd="firestore.googleapis.com",kc=!0;class Lc{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new et(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gd,this.ssl=kc}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:kc;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Jf;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Ov)throw new et(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}QE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=md((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new et(H.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new et(H.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new et(H.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ul{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lc({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new et(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new et(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lc(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ay;switch(r.type){case"firstParty":return new hy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new et(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Nc.get(n);r&&(K("ComponentProvider","Removing Datastore"),Nc.delete(n),r.terminate())}(this),Promise.resolve()}}function XE(e,t,n,r={}){var s;e=va(e,ul);const i=ja(t),a=e._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),c=`${t}:${n}`;i&&(Og(`https://${c}`),Lg("Firestore",!0)),a.host!==gd&&a.host!==c&&fr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},a),{host:c,ssl:i,emulatorOptions:r});if(!_i(f,l)&&(e._setSettings(f),r.mockUserToken)){let d,m;if(typeof r.mockUserToken=="string")d=r.mockUserToken,m=Jt.MOCK_USER;else{d=Ng(r.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new et(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Jt(E)}e._authCredentials=new ly(new vf(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Xi(this.firestore,t,this._query)}}class Ir{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ir(this.firestore,t,this._key)}}class cr extends Xi{constructor(t,n,r){super(t,n,Of(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ir(this.firestore,null,new st(t))}withConverter(t){return new cr(this.firestore,t,this._path)}}function Ks(e,t,...n){if(e=Wg(e),GE("collection","path",t),e instanceof ul){const r=Pt.fromString(t,...n);return Mc(r),new cr(e,null,r)}{if(!(e instanceof Ir||e instanceof cr))throw new et(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Pt.fromString(t,...n));return Mc(r),new cr(e.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc="AsyncQueue";class Bc{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new rd(this,"async_queue_retry"),this.rc=()=>{const r=Mo();r&&K(Fc,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=t;const n=Mo();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const n=Mo();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Fn;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!Tr(t))throw t;K(Fc,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const n=this.sc.then(()=>(this.ec=!0,t().catch(r=>{throw this.Xu=r,this.ec=!1,Je("INTERNAL UNHANDLED ERROR: ",Uc(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(t,n,r){this.oc(),this.nc.indexOf(t)>-1&&(n=0);const s=il.createAndSchedule(this,t,n,r,i=>this.uc(i));return this.Zu.push(s),s}oc(){this.Xu&&ot(47125,{cc:Uc(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const n of this.Zu)if(n.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const n=this.Zu.indexOf(t);this.Zu.splice(n,1)}}function Uc(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class _d extends ul{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=new Bc,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Bc(t),this._firestoreClient=void 0,await t}}}function JE(e,t){const n=typeof e=="object"?e:G_(),r=typeof e=="string"?e:Ei,s=q_(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Vg("firestore");i&&XE(s,...i)}return s}function ZE(e){if(e._terminated)throw new et(H.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||tT(e),e._firestoreClient}function tT(e){var t,n,r;const s=e._freezeSettings(),i=function(l,c,f,d){return new Ry(l,c,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,md(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new qE(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Si(zt.fromBase64String(t))}catch(n){throw new et(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Si(zt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new et(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ae(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new et(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new et(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ut(this._lat,t._lat)||ut(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,t._values)}}const rT=new RegExp("[~\\*/\\[\\]]");function sT(e,t,n){if(t.search(rT)>=0)throw jc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e);try{return new yd(...t.split("."))._internalPath}catch{throw jc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e)}}function jc(e,t,n,r,s){let i=`Function ${t}() called with invalid data`;i+=". ";let a="";return new et(H.INVALID_ARGUMENT,i+e+a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ir(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new iT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Ed("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iT extends vd{data(){return super.data()}}function Ed(e,t){return typeof t=="string"?sT(e,t):t instanceof yd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new et(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class aT{convertValue(t,n="none"){switch(En(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Dt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(vn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw ot(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return ys(t,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(t){var n,r,s;const i=(s=(r=(n=t.fields)===null||n===void 0?void 0:n[sa].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Dt(a.doubleValue));return new nT(i)}convertGeoPoint(t){return new eT(Dt(t.latitude),Dt(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=qi(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(hs(t));default:return null}}convertTimestamp(t){const n=yn(t);return new de(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Pt.fromString(t);Ct(Xf(r),9688,{name:t});const s=new fs(r.get(1),r.get(3)),i=new st(r.popFirst(5));return s.isEqual(n)||Je(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class lT extends vd{constructor(t,n,r,s,i,a){super(t,n,r,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new ii(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Ed("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ii extends lT{data(t={}){return super.data(t)}}class uT{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new Gs(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new ii(this._firestore,this._userDataWriter,r.key,r,new Gs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new et(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new ii(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Gs(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new ii(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Gs(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,d=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:cT(l.type),doc:c,oldIndex:f,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function cT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ot(61501,{type:e})}}class hT extends aT{constructor(t){super(),this.firestore=t}convertBytes(t){return new Si(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ir(this.firestore,null,n)}}function Qs(e){e=va(e,Xi);const t=va(e.firestore,_d),n=ZE(t),r=new hT(t);return oT(e._query),KE(n,e._query).then(s=>new uT(t,r,e,s))}(function(t,n=!0){(function(s){Er=s})(K_),vi(new ls("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new _d(new uy(r.getProvider("auth-internal")),new fy(a,r.getProvider("app-check-internal")),function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new et(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fs(f.options.projectId,d)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),ar(zu,Wu,t),ar(zu,Wu,"esm2017")})();const fT={apiKey:"AIzaSyDxxyyeYpqhyUHQF7fKkLJcICYoXDWvdbg",authDomain:"ecosort-6ab5c.firebaseapp.com",projectId:"ecosort-6ab5c",storageBucket:"ecosort-6ab5c.firebasestorage.app",messagingSenderId:"591486107501",appId:"1:591486107501:web:4ece31d87803835c4ea464",measurementId:"G-ST3ZXT65W0"},dT=uf(fT),Ys=JE(dT),Td=6048e5,pT=864e5,$c=Symbol.for("constructDateFrom");function In(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&$c in e?e[$c](t):e instanceof Date?new e.constructor(t):new Date(t)}function Re(e,t){return In(t||e,e)}let mT={};function Ji(){return mT}function ps(e,t){var l,c,f,d;const n=Ji(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(f=n.locale)==null?void 0:f.options)==null?void 0:d.weekStartsOn)??0,s=Re(e,t==null?void 0:t.in),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function Ri(e,t){return ps(e,{...t,weekStartsOn:1})}function wd(e,t){const n=Re(e,t==null?void 0:t.in),r=n.getFullYear(),s=In(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=Ri(s),a=In(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const l=Ri(a);return n.getTime()>=i.getTime()?r+1:n.getTime()>=l.getTime()?r:r-1}function qc(e){const t=Re(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function gT(e,...t){const n=In.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function Hc(e,t){const n=Re(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function _T(e,t,n){const[r,s]=gT(n==null?void 0:n.in,e,t),i=Hc(r),a=Hc(s),l=+i-qc(i),c=+a-qc(a);return Math.round((l-c)/pT)}function yT(e,t){const n=wd(e,t),r=In(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Ri(r)}function vT(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function ET(e){return!(!vT(e)&&typeof e!="number"||isNaN(+Re(e)))}function TT(e,t){const n=Re(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const wT={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},IT=(e,t,n)=>{let r;const s=wT[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Lo(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const AT={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},bT={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},CT={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ST={date:Lo({formats:AT,defaultWidth:"full"}),time:Lo({formats:bT,defaultWidth:"full"}),dateTime:Lo({formats:CT,defaultWidth:"full"})},RT={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},PT=(e,t,n,r)=>RT[e];function jr(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):a;s=e.formattingValues[l]||e.formattingValues[a]}else{const a=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[l]||e.values[a]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const DT={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},VT={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},xT={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},OT={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},NT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},MT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},kT=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},LT={ordinalNumber:kT,era:jr({values:DT,defaultWidth:"wide"}),quarter:jr({values:VT,defaultWidth:"wide",argumentCallback:e=>e-1}),month:jr({values:xT,defaultWidth:"wide"}),day:jr({values:OT,defaultWidth:"wide"}),dayPeriod:jr({values:NT,defaultWidth:"wide",formattingValues:MT,defaultFormattingWidth:"wide"})};function $r(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const a=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?BT(l,m=>m.test(a)):FT(l,m=>m.test(a));let f;f=e.valueCallback?e.valueCallback(c):c,f=n.valueCallback?n.valueCallback(f):f;const d=t.slice(a.length);return{value:f,rest:d}}}function FT(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function BT(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function UT(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],i=t.match(e.parsePattern);if(!i)return null;let a=e.valueCallback?e.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;const l=t.slice(s.length);return{value:a,rest:l}}}const jT=/^(\d+)(th|st|nd|rd)?/i,$T=/\d+/i,qT={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},HT={any:[/^b/i,/^(a|c)/i]},zT={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},WT={any:[/1/i,/2/i,/3/i,/4/i]},KT={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},GT={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},QT={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},YT={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},XT={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},JT={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ZT={ordinalNumber:UT({matchPattern:jT,parsePattern:$T,valueCallback:e=>parseInt(e,10)}),era:$r({matchPatterns:qT,defaultMatchWidth:"wide",parsePatterns:HT,defaultParseWidth:"any"}),quarter:$r({matchPatterns:zT,defaultMatchWidth:"wide",parsePatterns:WT,defaultParseWidth:"any",valueCallback:e=>e+1}),month:$r({matchPatterns:KT,defaultMatchWidth:"wide",parsePatterns:GT,defaultParseWidth:"any"}),day:$r({matchPatterns:QT,defaultMatchWidth:"wide",parsePatterns:YT,defaultParseWidth:"any"}),dayPeriod:$r({matchPatterns:XT,defaultMatchWidth:"any",parsePatterns:JT,defaultParseWidth:"any"})},tw={code:"en-US",formatDistance:IT,formatLong:ST,formatRelative:PT,localize:LT,match:ZT,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ew(e,t){const n=Re(e,t==null?void 0:t.in);return _T(n,TT(n))+1}function nw(e,t){const n=Re(e,t==null?void 0:t.in),r=+Ri(n)-+yT(n);return Math.round(r/Td)+1}function Id(e,t){var d,m,E,S;const n=Re(e,t==null?void 0:t.in),r=n.getFullYear(),s=Ji(),i=(t==null?void 0:t.firstWeekContainsDate)??((m=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:m.firstWeekContainsDate)??s.firstWeekContainsDate??((S=(E=s.locale)==null?void 0:E.options)==null?void 0:S.firstWeekContainsDate)??1,a=In((t==null?void 0:t.in)||e,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const l=ps(a,t),c=In((t==null?void 0:t.in)||e,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const f=ps(c,t);return+n>=+l?r+1:+n>=+f?r:r-1}function rw(e,t){var l,c,f,d;const n=Ji(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(f=n.locale)==null?void 0:f.options)==null?void 0:d.firstWeekContainsDate)??1,s=Id(e,t),i=In((t==null?void 0:t.in)||e,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),ps(i,t)}function sw(e,t){const n=Re(e,t==null?void 0:t.in),r=+ps(n,t)-+rw(n,t);return Math.round(r/Td)+1}function Et(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const on={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Et(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Et(n+1,2)},d(e,t){return Et(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Et(e.getHours()%12||12,t.length)},H(e,t){return Et(e.getHours(),t.length)},m(e,t){return Et(e.getMinutes(),t.length)},s(e,t){return Et(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Et(s,t.length)}},Gn={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},zc={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return on.y(e,t)},Y:function(e,t,n,r){const s=Id(e,r),i=s>0?s:1-s;if(t==="YY"){const a=i%100;return Et(a,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):Et(i,t.length)},R:function(e,t){const n=wd(e);return Et(n,t.length)},u:function(e,t){const n=e.getFullYear();return Et(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Et(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Et(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return on.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Et(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=sw(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):Et(s,t.length)},I:function(e,t,n){const r=nw(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Et(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):on.d(e,t)},D:function(e,t,n){const r=ew(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Et(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Et(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Et(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return Et(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=Gn.noon:r===0?s=Gn.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=Gn.evening:r>=12?s=Gn.afternoon:r>=4?s=Gn.morning:s=Gn.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return on.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):on.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Et(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Et(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):on.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):on.s(e,t)},S:function(e,t){return on.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return Kc(r);case"XXXX":case"XX":return Nn(r);case"XXXXX":case"XXX":default:return Nn(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return Kc(r);case"xxxx":case"xx":return Nn(r);case"xxxxx":case"xxx":default:return Nn(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Wc(r,":");case"OOOO":default:return"GMT"+Nn(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Wc(r,":");case"zzzz":default:return"GMT"+Nn(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return Et(r,t.length)},T:function(e,t,n){return Et(+e,t.length)}};function Wc(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+t+Et(i,2)}function Kc(e,t){return e%60===0?(e>0?"-":"+")+Et(Math.abs(e)/60,2):Nn(e,t)}function Nn(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Et(Math.trunc(r/60),2),i=Et(r%60,2);return n+s+t+i}const Gc=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Ad=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},iw=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Gc(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",Gc(r,t)).replace("{{time}}",Ad(s,t))},ow={p:Ad,P:iw},aw=/^D+$/,lw=/^Y+$/,uw=["D","DD","YY","YYYY"];function cw(e){return aw.test(e)}function hw(e){return lw.test(e)}function fw(e,t,n){const r=dw(e,t,n);if(console.warn(r),uw.includes(e))throw new RangeError(r)}function dw(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const pw=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,mw=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,gw=/^'([^]*?)'?$/,_w=/''/g,yw=/[a-zA-Z]/;function vw(e,t,n){var d,m,E,S;const r=Ji(),s=r.locale??tw,i=r.firstWeekContainsDate??((m=(d=r.locale)==null?void 0:d.options)==null?void 0:m.firstWeekContainsDate)??1,a=r.weekStartsOn??((S=(E=r.locale)==null?void 0:E.options)==null?void 0:S.weekStartsOn)??0,l=Re(e,n==null?void 0:n.in);if(!ET(l))throw new RangeError("Invalid time value");let c=t.match(mw).map(V=>{const N=V[0];if(N==="p"||N==="P"){const j=ow[N];return j(V,s.formatLong)}return V}).join("").match(pw).map(V=>{if(V==="''")return{isToken:!1,value:"'"};const N=V[0];if(N==="'")return{isToken:!1,value:Ew(V)};if(zc[N])return{isToken:!0,value:V};if(N.match(yw))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");return{isToken:!1,value:V}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const f={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return c.map(V=>{if(!V.isToken)return V.value;const N=V.value;(hw(N)||cw(N))&&fw(N,t,String(e));const j=zc[N[0]];return j(l,N,s.localize,f)}).join("")}function Ew(e){const t=e.match(gw);return t?t[1].replace(_w,"'"):e}const bd=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},Tw={class:"table-section"},ww={class:"table-wrapper"},Iw={__name:"TableSection",props:["title"],setup(e){return(t,n)=>(ge(),xe("section",Tw,[X("h3",null,kt(e.title),1),X("div",ww,[em(t.$slots,"default",{},void 0)])]))}},Aw=bd(Iw,[["__scopeId","data-v-8cf6f284"]]),bw={class:"dashboard-container"},Cw={class:"filters"},Sw=["value"],Rw=["onClick"],Pw={key:1},Dw={class:"modal-content"},Vw=["src"],xw={__name:"studentTable",setup(e){const t=sn([]),n=sn([]),r=sn([]),s=sn([]),i=sn({name:"",classLevel:"",date:""}),a=sn([]);Ph(async()=>{const[U,F,D,J]=await Promise.all([Qs(Ks(Ys,"users")),Qs(Ks(Ys,"trash_records")),Qs(Ks(Ys,"redemptions")),Qs(Ks(Ys,"profile_changes"))]);t.value=U.docs.map(Z=>({id:Z.id,...Z.data()})),n.value=F.docs.map(Z=>({id:Z.id,...Z.data()})),r.value=D.docs.map(Z=>({id:Z.id,...Z.data()})),s.value=J.docs.map(Z=>({id:Z.id,...Z.data()})),a.value=[...new Set(t.value.map(Z=>Z.classLevel).filter(Boolean))]});const c=U=>{if(!U)return"-";try{return vw(U instanceof Date?U:new Date(U),"yyyy-MM-dd")}catch{return"-"}},f=U=>{const F=n.value.filter(D=>D.userId===U);return F.length===0?null:F.sort((D,J)=>{var g,_;const Z=(g=D.timestamp)!=null&&g.toDate?D.timestamp.toDate():new Date(D.timestamp||0);return((_=J.timestamp)!=null&&_.toDate?J.timestamp.toDate():new Date(J.timestamp||0))-Z})[0]},d=U=>{const F=r.value.filter(D=>D.studentId===U);return F.length===0?null:F.sort((D,J)=>{var g,_;const Z=(g=D.timestamp)!=null&&g.toDate?D.timestamp.toDate():new Date(D.timestamp||0);return((_=J.timestamp)!=null&&_.toDate?J.timestamp.toDate():new Date(J.timestamp||0))-Z})[0]},m=U=>{const F=s.value.filter(D=>D.studentId===U);return F.length===0?null:F.sort((D,J)=>{var g,_;const Z=(g=D.timestamp)!=null&&g.toDate?D.timestamp.toDate():new Date(D.timestamp||0);return((_=J.timestamp)!=null&&_.toDate?J.timestamp.toDate():new Date(J.timestamp||0))-Z})[0]},E=Go(()=>t.value.map(U=>{const F=f(U.id),D=d(U.id),J=m(U.id);return{...U,studentId:U.studentId||"-",lastTrash:F?{trashType:F.trashType||"-",amount:F.amount||"-",pointsEarned:(F.amount||0)*(F.pointsPerItem||0),imageUrl:F.imageUrl||"",timestamp:F.timestamp}:null,lastRedemption:D,lastProfileChange:J}})),S=Go(()=>E.value.filter(U=>{var Z,I,g;const F=(Z=U.fullName)==null?void 0:Z.toLowerCase().includes(i.value.name.toLowerCase()),D=!i.value.classLevel||U.classLevel===i.value.classLevel,J=!i.value.date||c(((g=(I=U.createdAt)==null?void 0:I.toDate)==null?void 0:g.call(I))||U.createdAt)===i.value.date;return F&&D&&J})),V=sn(!1),N=sn(""),j=U=>{U&&U.trim()!==""?(N.value=U,V.value=!0):alert("ไม่มีรูปหลักฐาน")},Q=()=>{V.value=!1,N.value=""};return(U,F)=>(ge(),xe("div",bw,[F[5]||(F[5]=X("header",{class:"header"},[X("img",{src:Eg,alt:"Logo",class:"logo"}),X("h2",{class:"title"},[X("span",{class:"material-symbols-outlined icon"},"recycling"),Xh(" ข้อมูลการเก็บขยะและแลกของรางวัล ")])],-1)),X("section",Cw,[To(X("input",{"onUpdate:modelValue":F[0]||(F[0]=D=>i.value.name=D),type:"text",placeholder:"ค้นหาชื่อ..."},null,512),[[Du,i.value.name]]),To(X("select",{"onUpdate:modelValue":F[1]||(F[1]=D=>i.value.classLevel=D)},[F[3]||(F[3]=X("option",{value:""},"ทุกชั้น",-1)),(ge(!0),xe(fe,null,ou(a.value,D=>(ge(),xe("option",{key:D,value:D},kt(D),9,Sw))),128))],512),[[hg,i.value.classLevel]]),To(X("input",{type:"date","onUpdate:modelValue":F[2]||(F[2]=D=>i.value.date=D)},null,512),[[Du,i.value.date]])]),Ie(Aw,{title:"ข้อมูลรวมของนักเรียน"},{default:bh(()=>[X("table",null,[F[4]||(F[4]=X("thead",null,[X("tr",null,[X("th",null,"รหัสนักเรียน"),X("th",null,"ชื่อ-สกุล"),X("th",null,"ชั้น"),X("th",null,"อีเมล"),X("th",null,"เบอร์โทร"),X("th",null,"แต้มสะสม"),X("th",null,"วันสมัคร"),X("th",null,"ประเภทขยะล่าสุด"),X("th",null,"จำนวน"),X("th",null,"แต้มที่ได้"),X("th",null,"ของรางวัลล่าสุด"),X("th",null,"แต้มที่ใช้"),X("th",null,"วันที่แลก"),X("th",null,"หลักฐานการทิ้ง"),X("th",null,"ชื่อเก่า"),X("th",null,"ชื่อใหม่"),X("th",null,"วันที่เปลี่ยนชื่อ")])],-1)),X("tbody",null,[(ge(!0),xe(fe,null,ou(S.value,D=>{var J,Z,I,g,_,T,A,b,y,Wt,Ae,xt,gt,ct,ue,ye,ve,St;return ge(),xe("tr",{key:D.id},[X("td",null,kt(D.studentId||"-"),1),X("td",null,kt(D.fullName||"-"),1),X("td",null,kt(D.classLevel||"-"),1),X("td",null,kt(D.email||"-"),1),X("td",null,kt(D.phone||"-"),1),X("td",null,kt(D.points||0),1),X("td",null,kt(c(((Z=(J=D.createdAt)==null?void 0:J.toDate)==null?void 0:Z.call(J))||D.createdAt)),1),X("td",null,kt(((I=D.lastTrash)==null?void 0:I.trashType)||"-"),1),X("td",null,kt(((g=D.lastTrash)==null?void 0:g.amount)||"-"),1),X("td",null,kt(((_=D.lastTrash)==null?void 0:_.pointsEarned)||"-"),1),X("td",null,kt(((T=D.lastRedemption)==null?void 0:T.rewardName)||"-"),1),X("td",null,kt(((A=D.lastRedemption)==null?void 0:A.pointsUsed)||"-"),1),X("td",null,kt(c(((Wt=(y=(b=D.lastRedemption)==null?void 0:b.timestamp)==null?void 0:y.toDate)==null?void 0:Wt.call(y))||((Ae=D.lastRedemption)==null?void 0:Ae.timestamp))),1),X("td",null,[(xt=D.lastTrash)!=null&&xt.imageUrl?(ge(),xe("button",{key:0,onClick:Ot=>j(D.lastTrash.imageUrl)}," ดูรูป ",8,Rw)):(ge(),xe("span",Pw,"-"))]),X("td",null,kt(((gt=D.lastProfileChange)==null?void 0:gt.oldFullName)||"-"),1),X("td",null,kt(((ct=D.lastProfileChange)==null?void 0:ct.newFullName)||"-"),1),X("td",null,kt(c(((ve=(ye=(ue=D.lastProfileChange)==null?void 0:ue.timestamp)==null?void 0:ye.toDate)==null?void 0:ve.call(ye))||((St=D.lastProfileChange)==null?void 0:St.timestamp))),1)])}),128))])])]),_:1}),V.value?(ge(),xe("div",{key:0,class:"modal",onClick:pg(Q,["self"])},[X("div",Dw,[X("span",{class:"close",onClick:Q},"×"),X("img",{src:N.value,alt:"หลักฐานการทิ้ง"},null,8,Vw)])])):Nm("",!0)]))}},Ow=bd(xw,[["__scopeId","data-v-bd688e98"]]),Nw={__name:"App",setup(e){return(t,n)=>(ge(),xe("div",null,[Ie(Ow)]))}};_g(Nw).mount("#app");
