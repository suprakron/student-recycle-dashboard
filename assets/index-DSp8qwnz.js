(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ya(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Tt={},Jn=[],Pe=()=>{},Hd=()=>!1,bi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),va=e=>e.startsWith("onUpdate:"),ie=Object.assign,Ea=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},zd=Object.prototype.hasOwnProperty,gt=(e,t)=>zd.call(e,t),tt=Array.isArray,Zn=e=>ps(e)==="[object Map]",Ci=e=>ps(e)==="[object Set]",Jl=e=>ps(e)==="[object Date]",it=e=>typeof e=="function",Dt=e=>typeof e=="string",xe=e=>typeof e=="symbol",bt=e=>e!==null&&typeof e=="object",Wc=e=>(bt(e)||it(e))&&it(e.then)&&it(e.catch),Kc=Object.prototype.toString,ps=e=>Kc.call(e),Wd=e=>ps(e).slice(8,-1),Gc=e=>ps(e)==="[object Object]",Ta=e=>Dt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,zr=ya(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Si=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Kd=/-(\w)/g,cn=Si(e=>e.replace(Kd,(t,n)=>n?n.toUpperCase():"")),Gd=/\B([A-Z])/g,Ln=Si(e=>e.replace(Gd,"-$1").toLowerCase()),Qc=Si(e=>e.charAt(0).toUpperCase()+e.slice(1)),ho=Si(e=>e?`on${Qc(e)}`:""),sn=(e,t)=>!Object.is(e,t),Ks=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Yc=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},ni=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Zl;const Ri=()=>Zl||(Zl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function wa(e){if(tt(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=Dt(r)?Jd(r):wa(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Dt(e)||bt(e))return e}const Qd=/;(?![^(]*\))/g,Yd=/:([^]+)/,Xd=/\/\*[^]*?\*\//g;function Jd(e){const t={};return e.replace(Xd,"").split(Qd).forEach(n=>{if(n){const r=n.split(Yd);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Ia(e){let t="";if(Dt(e))t=e;else if(tt(e))for(let n=0;n<e.length;n++){const r=Ia(e[n]);r&&(t+=r+" ")}else if(bt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Zd="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",tp=ya(Zd);function Xc(e){return!!e||e===""}function ep(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Pi(e[r],t[r]);return n}function Pi(e,t){if(e===t)return!0;let n=Jl(e),r=Jl(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=xe(e),r=xe(t),n||r)return e===t;if(n=tt(e),r=tt(t),n||r)return n&&r?ep(e,t):!1;if(n=bt(e),r=bt(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const a in e){const l=e.hasOwnProperty(a),c=t.hasOwnProperty(a);if(l&&!c||!l&&c||!Pi(e[a],t[a]))return!1}}return String(e)===String(t)}function np(e,t){return e.findIndex(n=>Pi(n,t))}const Jc=e=>!!(e&&e.__v_isRef===!0),Ae=e=>Dt(e)?e:e==null?"":tt(e)||bt(e)&&(e.toString===Kc||!it(e.toString))?Jc(e)?Ae(e.value):JSON.stringify(e,Zc,2):String(e),Zc=(e,t)=>Jc(t)?Zc(e,t.value):Zn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[fo(r,i)+" =>"]=s,n),{})}:Ci(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>fo(n))}:xe(t)?fo(t):bt(t)&&!tt(t)&&!Gc(t)?String(t):t,fo=(e,t="")=>{var n;return xe(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let oe;class rp{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=oe,!t&&oe&&(this.index=(oe.scopes||(oe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=oe;try{return oe=this,t()}finally{oe=n}}}on(){++this._on===1&&(this.prevScope=oe,oe=this)}off(){this._on>0&&--this._on===0&&(oe=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function sp(){return oe}let It;const po=new WeakSet;class th{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,oe&&oe.active&&oe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,po.has(this)&&(po.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||nh(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,tu(this),rh(this);const t=It,n=Ee;It=this,Ee=!0;try{return this.fn()}finally{sh(this),It=t,Ee=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ca(t);this.deps=this.depsTail=void 0,tu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?po.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Fo(this)&&this.run()}get dirty(){return Fo(this)}}let eh=0,Wr,Kr;function nh(e,t=!1){if(e.flags|=8,t){e.next=Kr,Kr=e;return}e.next=Wr,Wr=e}function Aa(){eh++}function ba(){if(--eh>0)return;if(Kr){let t=Kr;for(Kr=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Wr;){let t=Wr;for(Wr=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function rh(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function sh(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Ca(r),ip(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function Fo(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(ih(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function ih(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===ns)||(e.globalVersion=ns,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Fo(e))))return;e.flags|=2;const t=e.dep,n=It,r=Ee;It=e,Ee=!0;try{rh(e);const s=e.fn(e._value);(t.version===0||sn(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{It=n,Ee=r,sh(e),e.flags&=-3}}function Ca(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Ca(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function ip(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Ee=!0;const oh=[];function qe(){oh.push(Ee),Ee=!1}function He(){const e=oh.pop();Ee=e===void 0?!0:e}function tu(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=It;It=void 0;try{t()}finally{It=n}}}let ns=0;class op{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Sa{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!It||!Ee||It===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==It)n=this.activeLink=new op(It,this),It.deps?(n.prevDep=It.depsTail,It.depsTail.nextDep=n,It.depsTail=n):It.deps=It.depsTail=n,ah(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=It.depsTail,n.nextDep=void 0,It.depsTail.nextDep=n,It.depsTail=n,It.deps===n&&(It.deps=r)}return n}trigger(t){this.version++,ns++,this.notify(t)}notify(t){Aa();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{ba()}}}function ah(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)ah(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Bo=new WeakMap,On=Symbol(""),Uo=Symbol(""),rs=Symbol("");function Xt(e,t,n){if(Ee&&It){let r=Bo.get(e);r||Bo.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new Sa),s.map=r,s.key=n),s.track()}}function je(e,t,n,r,s,i){const a=Bo.get(e);if(!a){ns++;return}const l=c=>{c&&c.trigger()};if(Aa(),t==="clear")a.forEach(l);else{const c=tt(e),f=c&&Ta(n);if(c&&n==="length"){const d=Number(r);a.forEach((m,E)=>{(E==="length"||E===rs||!xe(E)&&E>=d)&&l(m)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),f&&l(a.get(rs)),t){case"add":c?f&&l(a.get("length")):(l(a.get(On)),Zn(e)&&l(a.get(Uo)));break;case"delete":c||(l(a.get(On)),Zn(e)&&l(a.get(Uo)));break;case"set":Zn(e)&&l(a.get(On));break}}ba()}function qn(e){const t=mt(e);return t===e?t:(Xt(t,"iterate",rs),ge(e)?t:t.map(qt))}function Vi(e){return Xt(e=mt(e),"iterate",rs),e}const ap={__proto__:null,[Symbol.iterator](){return mo(this,Symbol.iterator,qt)},concat(...e){return qn(this).concat(...e.map(t=>tt(t)?qn(t):t))},entries(){return mo(this,"entries",e=>(e[1]=qt(e[1]),e))},every(e,t){return Be(this,"every",e,t,void 0,arguments)},filter(e,t){return Be(this,"filter",e,t,n=>n.map(qt),arguments)},find(e,t){return Be(this,"find",e,t,qt,arguments)},findIndex(e,t){return Be(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Be(this,"findLast",e,t,qt,arguments)},findLastIndex(e,t){return Be(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Be(this,"forEach",e,t,void 0,arguments)},includes(...e){return go(this,"includes",e)},indexOf(...e){return go(this,"indexOf",e)},join(e){return qn(this).join(e)},lastIndexOf(...e){return go(this,"lastIndexOf",e)},map(e,t){return Be(this,"map",e,t,void 0,arguments)},pop(){return Lr(this,"pop")},push(...e){return Lr(this,"push",e)},reduce(e,...t){return eu(this,"reduce",e,t)},reduceRight(e,...t){return eu(this,"reduceRight",e,t)},shift(){return Lr(this,"shift")},some(e,t){return Be(this,"some",e,t,void 0,arguments)},splice(...e){return Lr(this,"splice",e)},toReversed(){return qn(this).toReversed()},toSorted(e){return qn(this).toSorted(e)},toSpliced(...e){return qn(this).toSpliced(...e)},unshift(...e){return Lr(this,"unshift",e)},values(){return mo(this,"values",qt)}};function mo(e,t,n){const r=Vi(e),s=r[t]();return r!==e&&!ge(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const lp=Array.prototype;function Be(e,t,n,r,s,i){const a=Vi(e),l=a!==e&&!ge(e),c=a[t];if(c!==lp[t]){const m=c.apply(e,i);return l?qt(m):m}let f=n;a!==e&&(l?f=function(m,E){return n.call(this,qt(m),E,e)}:n.length>2&&(f=function(m,E){return n.call(this,m,E,e)}));const d=c.call(a,f,r);return l&&s?s(d):d}function eu(e,t,n,r){const s=Vi(e);let i=n;return s!==e&&(ge(e)?n.length>3&&(i=function(a,l,c){return n.call(this,a,l,c,e)}):i=function(a,l,c){return n.call(this,a,qt(l),c,e)}),s[t](i,...r)}function go(e,t,n){const r=mt(e);Xt(r,"iterate",rs);const s=r[t](...n);return(s===-1||s===!1)&&xa(n[0])?(n[0]=mt(n[0]),r[t](...n)):s}function Lr(e,t,n=[]){qe(),Aa();const r=mt(e)[t].apply(e,n);return ba(),He(),r}const up=ya("__proto__,__v_isRef,__isVue"),lh=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(xe));function cp(e){xe(e)||(e=String(e));const t=mt(this);return Xt(t,"has",e),t.hasOwnProperty(e)}class uh{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Ep:dh:i?fh:hh).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=tt(t);if(!s){let c;if(a&&(c=ap[n]))return c;if(n==="hasOwnProperty")return cp}const l=Reflect.get(t,n,Zt(t)?t:r);return(xe(n)?lh.has(n):up(n))||(s||Xt(t,"get",n),i)?l:Zt(l)?a&&Ta(n)?l:l.value:bt(l)?s?ph(l):Pa(l):l}}class ch extends uh{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const c=hn(i);if(!ge(r)&&!hn(r)&&(i=mt(i),r=mt(r)),!tt(t)&&Zt(i)&&!Zt(r))return c?!1:(i.value=r,!0)}const a=tt(t)&&Ta(n)?Number(n)<t.length:gt(t,n),l=Reflect.set(t,n,r,Zt(t)?t:s);return t===mt(s)&&(a?sn(r,i)&&je(t,"set",n,r):je(t,"add",n,r)),l}deleteProperty(t,n){const r=gt(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&je(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!xe(n)||!lh.has(n))&&Xt(t,"has",n),r}ownKeys(t){return Xt(t,"iterate",tt(t)?"length":On),Reflect.ownKeys(t)}}class hp extends uh{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const fp=new ch,dp=new hp,pp=new ch(!0);const jo=e=>e,Fs=e=>Reflect.getPrototypeOf(e);function mp(e,t,n){return function(...r){const s=this.__v_raw,i=mt(s),a=Zn(i),l=e==="entries"||e===Symbol.iterator&&a,c=e==="keys"&&a,f=s[e](...r),d=n?jo:t?ri:qt;return!t&&Xt(i,"iterate",c?Uo:On),{next(){const{value:m,done:E}=f.next();return E?{value:m,done:E}:{value:l?[d(m[0]),d(m[1])]:d(m),done:E}},[Symbol.iterator](){return this}}}}function Bs(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function gp(e,t){const n={get(s){const i=this.__v_raw,a=mt(i),l=mt(s);e||(sn(s,l)&&Xt(a,"get",s),Xt(a,"get",l));const{has:c}=Fs(a),f=t?jo:e?ri:qt;if(c.call(a,s))return f(i.get(s));if(c.call(a,l))return f(i.get(l));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!e&&Xt(mt(s),"iterate",On),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,a=mt(i),l=mt(s);return e||(sn(s,l)&&Xt(a,"has",s),Xt(a,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const a=this,l=a.__v_raw,c=mt(l),f=t?jo:e?ri:qt;return!e&&Xt(c,"iterate",On),l.forEach((d,m)=>s.call(i,f(d),f(m),a))}};return ie(n,e?{add:Bs("add"),set:Bs("set"),delete:Bs("delete"),clear:Bs("clear")}:{add(s){!t&&!ge(s)&&!hn(s)&&(s=mt(s));const i=mt(this);return Fs(i).has.call(i,s)||(i.add(s),je(i,"add",s,s)),this},set(s,i){!t&&!ge(i)&&!hn(i)&&(i=mt(i));const a=mt(this),{has:l,get:c}=Fs(a);let f=l.call(a,s);f||(s=mt(s),f=l.call(a,s));const d=c.call(a,s);return a.set(s,i),f?sn(i,d)&&je(a,"set",s,i):je(a,"add",s,i),this},delete(s){const i=mt(this),{has:a,get:l}=Fs(i);let c=a.call(i,s);c||(s=mt(s),c=a.call(i,s)),l&&l.call(i,s);const f=i.delete(s);return c&&je(i,"delete",s,void 0),f},clear(){const s=mt(this),i=s.size!==0,a=s.clear();return i&&je(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=mp(s,e,t)}),n}function Ra(e,t){const n=gp(e,t);return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(gt(n,s)&&s in r?n:r,s,i)}const _p={get:Ra(!1,!1)},yp={get:Ra(!1,!0)},vp={get:Ra(!0,!1)};const hh=new WeakMap,fh=new WeakMap,dh=new WeakMap,Ep=new WeakMap;function Tp(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wp(e){return e.__v_skip||!Object.isExtensible(e)?0:Tp(Wd(e))}function Pa(e){return hn(e)?e:Va(e,!1,fp,_p,hh)}function Ip(e){return Va(e,!1,pp,yp,fh)}function ph(e){return Va(e,!0,dp,vp,dh)}function Va(e,t,n,r,s){if(!bt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=wp(e);if(i===0)return e;const a=s.get(e);if(a)return a;const l=new Proxy(e,i===2?r:n);return s.set(e,l),l}function tr(e){return hn(e)?tr(e.__v_raw):!!(e&&e.__v_isReactive)}function hn(e){return!!(e&&e.__v_isReadonly)}function ge(e){return!!(e&&e.__v_isShallow)}function xa(e){return e?!!e.__v_raw:!1}function mt(e){const t=e&&e.__v_raw;return t?mt(t):e}function Ap(e){return!gt(e,"__v_skip")&&Object.isExtensible(e)&&Yc(e,"__v_skip",!0),e}const qt=e=>bt(e)?Pa(e):e,ri=e=>bt(e)?ph(e):e;function Zt(e){return e?e.__v_isRef===!0:!1}function _o(e){return bp(e,!1)}function bp(e,t){return Zt(e)?e:new Cp(e,t)}class Cp{constructor(t,n){this.dep=new Sa,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:mt(t),this._value=n?t:qt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||ge(t)||hn(t);t=r?t:mt(t),sn(t,n)&&(this._rawValue=t,this._value=r?t:qt(t),this.dep.trigger())}}function Sp(e){return Zt(e)?e.value:e}const Rp={get:(e,t,n)=>t==="__v_raw"?e:Sp(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return Zt(s)&&!Zt(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function mh(e){return tr(e)?e:new Proxy(e,Rp)}class Pp{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Sa(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ns-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&It!==this)return nh(this,!0),!0}get value(){const t=this.dep.track();return ih(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Vp(e,t,n=!1){let r,s;return it(e)?r=e:(r=e.get,s=e.set),new Pp(r,s,n)}const Us={},si=new WeakMap;let Rn;function xp(e,t=!1,n=Rn){if(n){let r=si.get(n);r||si.set(n,r=[]),r.push(e)}}function Dp(e,t,n=Tt){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:l,call:c}=n,f=z=>s?z:ge(z)||s===!1||s===0?$e(z,1):$e(z);let d,m,E,S,V=!1,D=!1;if(Zt(e)?(m=()=>e.value,V=ge(e)):tr(e)?(m=()=>f(e),V=!0):tt(e)?(D=!0,V=e.some(z=>tr(z)||ge(z)),m=()=>e.map(z=>{if(Zt(z))return z.value;if(tr(z))return f(z);if(it(z))return c?c(z,2):z()})):it(e)?t?m=c?()=>c(e,2):e:m=()=>{if(E){qe();try{E()}finally{He()}}const z=Rn;Rn=d;try{return c?c(e,3,[S]):e(S)}finally{Rn=z}}:m=Pe,t&&s){const z=m,_t=s===!0?1/0:s;m=()=>$e(z(),_t)}const F=sp(),G=()=>{d.stop(),F&&F.active&&Ea(F.effects,d)};if(i&&t){const z=t;t=(..._t)=>{z(..._t),G()}}let W=D?new Array(e.length).fill(Us):Us;const Q=z=>{if(!(!(d.flags&1)||!d.dirty&&!z))if(t){const _t=d.run();if(s||V||(D?_t.some((wt,I)=>sn(wt,W[I])):sn(_t,W))){E&&E();const wt=Rn;Rn=d;try{const I=[_t,W===Us?void 0:D&&W[0]===Us?[]:W,S];W=_t,c?c(t,3,I):t(...I)}finally{Rn=wt}}}else d.run()};return l&&l(Q),d=new th(m),d.scheduler=a?()=>a(Q,!1):Q,S=z=>xp(z,!1,d),E=d.onStop=()=>{const z=si.get(d);if(z){if(c)c(z,4);else for(const _t of z)_t();si.delete(d)}},t?r?Q(!0):W=d.run():a?a(Q.bind(null,!0),!0):d.run(),G.pause=d.pause.bind(d),G.resume=d.resume.bind(d),G.stop=G,G}function $e(e,t=1/0,n){if(t<=0||!bt(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Zt(e))$e(e.value,t,n);else if(tt(e))for(let r=0;r<e.length;r++)$e(e[r],t,n);else if(Ci(e)||Zn(e))e.forEach(r=>{$e(r,t,n)});else if(Gc(e)){for(const r in e)$e(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&$e(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ms(e,t,n,r){try{return r?e(...r):e()}catch(s){xi(s,t,n)}}function De(e,t,n,r){if(it(e)){const s=ms(e,t,n,r);return s&&Wc(s)&&s.catch(i=>{xi(i,t,n)}),s}if(tt(e)){const s=[];for(let i=0;i<e.length;i++)s.push(De(e[i],t,n,r));return s}}function xi(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||Tt;if(t){let l=t.parent;const c=t.proxy,f=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let m=0;m<d.length;m++)if(d[m](e,c,f)===!1)return}l=l.parent}if(i){qe(),ms(i,null,10,[e,c,f]),He();return}}Op(e,n,s,r,a)}function Op(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const ne=[];let be=-1;const er=[];let tn=null,zn=0;const gh=Promise.resolve();let ii=null;function _h(e){const t=ii||gh;return e?t.then(this?e.bind(this):e):t}function Np(e){let t=be+1,n=ne.length;for(;t<n;){const r=t+n>>>1,s=ne[r],i=ss(s);i<e||i===e&&s.flags&2?t=r+1:n=r}return t}function Da(e){if(!(e.flags&1)){const t=ss(e),n=ne[ne.length-1];!n||!(e.flags&2)&&t>=ss(n)?ne.push(e):ne.splice(Np(t),0,e),e.flags|=1,yh()}}function yh(){ii||(ii=gh.then(Eh))}function Mp(e){tt(e)?er.push(...e):tn&&e.id===-1?tn.splice(zn+1,0,e):e.flags&1||(er.push(e),e.flags|=1),yh()}function nu(e,t,n=be+1){for(;n<ne.length;n++){const r=ne[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;ne.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function vh(e){if(er.length){const t=[...new Set(er)].sort((n,r)=>ss(n)-ss(r));if(er.length=0,tn){tn.push(...t);return}for(tn=t,zn=0;zn<tn.length;zn++){const n=tn[zn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}tn=null,zn=0}}const ss=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Eh(e){try{for(be=0;be<ne.length;be++){const t=ne[be];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ms(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;be<ne.length;be++){const t=ne[be];t&&(t.flags&=-2)}be=-1,ne.length=0,vh(),ii=null,(ne.length||er.length)&&Eh()}}let me=null,Th=null;function oi(e){const t=me;return me=e,Th=e&&e.type.__scopeId||null,t}function kp(e,t=me,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&fu(-1);const i=oi(t);let a;try{a=e(...s)}finally{oi(i),r._d&&fu(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function yo(e,t){if(me===null)return e;const n=Mi(me),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,a,l,c=Tt]=t[s];i&&(it(i)&&(i={mounted:i,updated:i}),i.deep&&$e(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function Cn(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let a=0;a<s.length;a++){const l=s[a];i&&(l.oldValue=i[a].value);let c=l.dir[r];c&&(qe(),De(c,n,8,[e.el,l,e,t]),He())}}const Lp=Symbol("_vte"),Fp=e=>e.__isTeleport;function Oa(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Oa(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function wh(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function ai(e,t,n,r,s=!1){if(tt(e)){e.forEach((V,D)=>ai(V,t&&(tt(t)?t[D]:t),n,r,s));return}if(Gr(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&ai(e,t,n,r.component.subTree);return}const i=r.shapeFlag&4?Mi(r.component):r.el,a=s?null:i,{i:l,r:c}=e,f=t&&t.r,d=l.refs===Tt?l.refs={}:l.refs,m=l.setupState,E=mt(m),S=m===Tt?()=>!1:V=>gt(E,V);if(f!=null&&f!==c&&(Dt(f)?(d[f]=null,S(f)&&(m[f]=null)):Zt(f)&&(f.value=null)),it(c))ms(c,l,12,[a,d]);else{const V=Dt(c),D=Zt(c);if(V||D){const F=()=>{if(e.f){const G=V?S(c)?m[c]:d[c]:c.value;s?tt(G)&&Ea(G,i):tt(G)?G.includes(i)||G.push(i):V?(d[c]=[i],S(c)&&(m[c]=d[c])):(c.value=[i],e.k&&(d[e.k]=c.value))}else V?(d[c]=a,S(c)&&(m[c]=a)):D&&(c.value=a,e.k&&(d[e.k]=a))};a?(F.id=-1,he(F,n)):F()}}}Ri().requestIdleCallback;Ri().cancelIdleCallback;const Gr=e=>!!e.type.__asyncLoader,Ih=e=>e.type.__isKeepAlive;function Bp(e,t){Ah(e,"a",t)}function Up(e,t){Ah(e,"da",t)}function Ah(e,t,n=re){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Di(t,r,n),n){let s=n.parent;for(;s&&s.parent;)Ih(s.parent.vnode)&&jp(r,t,n,s),s=s.parent}}function jp(e,t,n,r){const s=Di(t,e,r,!0);Ch(()=>{Ea(r[t],s)},n)}function Di(e,t,n=re,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{qe();const l=gs(n),c=De(t,n,e,a);return l(),He(),c});return r?s.unshift(i):s.push(i),i}}const Ke=e=>(t,n=re)=>{(!os||e==="sp")&&Di(e,(...r)=>t(...r),n)},$p=Ke("bm"),bh=Ke("m"),qp=Ke("bu"),Hp=Ke("u"),zp=Ke("bum"),Ch=Ke("um"),Wp=Ke("sp"),Kp=Ke("rtg"),Gp=Ke("rtc");function Qp(e,t=re){Di("ec",e,t)}const Yp=Symbol.for("v-ndc");function ru(e,t,n,r){let s;const i=n,a=tt(e);if(a||Dt(e)){const l=a&&tr(e);let c=!1,f=!1;l&&(c=!ge(e),f=hn(e),e=Vi(e)),s=new Array(e.length);for(let d=0,m=e.length;d<m;d++)s[d]=t(c?f?ri(qt(e[d])):qt(e[d]):e[d],d,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let l=0;l<e;l++)s[l]=t(l+1,l,void 0,i)}else if(bt(e))if(e[Symbol.iterator])s=Array.from(e,(l,c)=>t(l,c,void 0,i));else{const l=Object.keys(e);s=new Array(l.length);for(let c=0,f=l.length;c<f;c++){const d=l[c];s[c]=t(e[d],d,c,i)}}else s=[];return s}const $o=e=>e?Kh(e)?Mi(e):$o(e.parent):null,Qr=ie(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>$o(e.parent),$root:e=>$o(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Rh(e),$forceUpdate:e=>e.f||(e.f=()=>{Da(e.update)}),$nextTick:e=>e.n||(e.n=_h.bind(e.proxy)),$watch:e=>ym.bind(e)}),vo=(e,t)=>e!==Tt&&!e.__isScriptSetup&&gt(e,t),Xp={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:l,appContext:c}=e;let f;if(t[0]!=="$"){const S=a[t];if(S!==void 0)switch(S){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(vo(r,t))return a[t]=1,r[t];if(s!==Tt&&gt(s,t))return a[t]=2,s[t];if((f=e.propsOptions[0])&&gt(f,t))return a[t]=3,i[t];if(n!==Tt&&gt(n,t))return a[t]=4,n[t];qo&&(a[t]=0)}}const d=Qr[t];let m,E;if(d)return t==="$attrs"&&Xt(e.attrs,"get",""),d(e);if((m=l.__cssModules)&&(m=m[t]))return m;if(n!==Tt&&gt(n,t))return a[t]=4,n[t];if(E=c.config.globalProperties,gt(E,t))return E[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return vo(s,t)?(s[t]=n,!0):r!==Tt&&gt(r,t)?(r[t]=n,!0):gt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},a){let l;return!!n[a]||e!==Tt&&gt(e,a)||vo(t,a)||(l=i[0])&&gt(l,a)||gt(r,a)||gt(Qr,a)||gt(s.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:gt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function su(e){return tt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let qo=!0;function Jp(e){const t=Rh(e),n=e.proxy,r=e.ctx;qo=!1,t.beforeCreate&&iu(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:a,watch:l,provide:c,inject:f,created:d,beforeMount:m,mounted:E,beforeUpdate:S,updated:V,activated:D,deactivated:F,beforeDestroy:G,beforeUnmount:W,destroyed:Q,unmounted:z,render:_t,renderTracked:wt,renderTriggered:I,errorCaptured:g,serverPrefetch:v,expose:w,inheritAttrs:A,components:C,directives:y,filters:ue}=t;if(f&&Zp(f,r,null),a)for(const yt in a){const ft=a[yt];it(ft)&&(r[yt]=ft.bind(n))}if(s){const yt=s.call(n,n);bt(yt)&&(e.data=Pa(yt))}if(qo=!0,i)for(const yt in i){const ft=i[yt],_e=it(ft)?ft.bind(n,n):it(ft.get)?ft.get.bind(n,n):Pe,vn=!it(ft)&&it(ft.set)?ft.set.bind(n):Pe,Me=Qh({get:_e,set:vn});Object.defineProperty(r,yt,{enumerable:!0,configurable:!0,get:()=>Me.value,set:Ot=>Me.value=Ot})}if(l)for(const yt in l)Sh(l[yt],r,n,yt);if(c){const yt=it(c)?c.call(n):c;Reflect.ownKeys(yt).forEach(ft=>{im(ft,yt[ft])})}d&&iu(d,e,"c");function Ft(yt,ft){tt(ft)?ft.forEach(_e=>yt(_e.bind(n))):ft&&yt(ft.bind(n))}if(Ft($p,m),Ft(bh,E),Ft(qp,S),Ft(Hp,V),Ft(Bp,D),Ft(Up,F),Ft(Qp,g),Ft(Gp,wt),Ft(Kp,I),Ft(zp,W),Ft(Ch,z),Ft(Wp,v),tt(w))if(w.length){const yt=e.exposed||(e.exposed={});w.forEach(ft=>{Object.defineProperty(yt,ft,{get:()=>n[ft],set:_e=>n[ft]=_e})})}else e.exposed||(e.exposed={});_t&&e.render===Pe&&(e.render=_t),A!=null&&(e.inheritAttrs=A),C&&(e.components=C),y&&(e.directives=y),v&&wh(e)}function Zp(e,t,n=Pe){tt(e)&&(e=Ho(e));for(const r in e){const s=e[r];let i;bt(s)?"default"in s?i=Gs(s.from||r,s.default,!0):i=Gs(s.from||r):i=Gs(s),Zt(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[r]=i}}function iu(e,t,n){De(tt(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Sh(e,t,n,r){let s=r.includes(".")?jh(n,r):()=>n[r];if(Dt(e)){const i=t[e];it(i)&&To(s,i)}else if(it(e))To(s,e.bind(n));else if(bt(e))if(tt(e))e.forEach(i=>Sh(i,t,n,r));else{const i=it(e.handler)?e.handler.bind(n):t[e.handler];it(i)&&To(s,i,e)}}function Rh(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,l=i.get(t);let c;return l?c=l:!s.length&&!n&&!r?c=t:(c={},s.length&&s.forEach(f=>li(c,f,a,!0)),li(c,t,a)),bt(t)&&i.set(t,c),c}function li(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&li(e,i,n,!0),s&&s.forEach(a=>li(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const l=tm[a]||n&&n[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const tm={data:ou,props:au,emits:au,methods:jr,computed:jr,beforeCreate:ee,created:ee,beforeMount:ee,mounted:ee,beforeUpdate:ee,updated:ee,beforeDestroy:ee,beforeUnmount:ee,destroyed:ee,unmounted:ee,activated:ee,deactivated:ee,errorCaptured:ee,serverPrefetch:ee,components:jr,directives:jr,watch:nm,provide:ou,inject:em};function ou(e,t){return t?e?function(){return ie(it(e)?e.call(this,this):e,it(t)?t.call(this,this):t)}:t:e}function em(e,t){return jr(Ho(e),Ho(t))}function Ho(e){if(tt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ee(e,t){return e?[...new Set([].concat(e,t))]:t}function jr(e,t){return e?ie(Object.create(null),e,t):t}function au(e,t){return e?tt(e)&&tt(t)?[...new Set([...e,...t])]:ie(Object.create(null),su(e),su(t??{})):t}function nm(e,t){if(!e)return t;if(!t)return e;const n=ie(Object.create(null),e);for(const r in t)n[r]=ee(e[r],t[r]);return n}function Ph(){return{app:null,config:{isNativeTag:Hd,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let rm=0;function sm(e,t){return function(r,s=null){it(r)||(r=ie({},r)),s!=null&&!bt(s)&&(s=null);const i=Ph(),a=new WeakSet,l=[];let c=!1;const f=i.app={_uid:rm++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Bm,get config(){return i.config},set config(d){},use(d,...m){return a.has(d)||(d&&it(d.install)?(a.add(d),d.install(f,...m)):it(d)&&(a.add(d),d(f,...m))),f},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),f},component(d,m){return m?(i.components[d]=m,f):i.components[d]},directive(d,m){return m?(i.directives[d]=m,f):i.directives[d]},mount(d,m,E){if(!c){const S=f._ceVNode||on(r,s);return S.appContext=i,E===!0?E="svg":E===!1&&(E=void 0),e(S,d,E),c=!0,f._container=d,d.__vue_app__=f,Mi(S.component)}},onUnmount(d){l.push(d)},unmount(){c&&(De(l,f._instance,16),e(null,f._container),delete f._container.__vue_app__)},provide(d,m){return i.provides[d]=m,f},runWithContext(d){const m=nr;nr=f;try{return d()}finally{nr=m}}};return f}}let nr=null;function im(e,t){if(re){let n=re.provides;const r=re.parent&&re.parent.provides;r===n&&(n=re.provides=Object.create(r)),n[e]=t}}function Gs(e,t,n=!1){const r=re||me;if(r||nr){let s=nr?nr._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&it(t)?t.call(r&&r.proxy):t}}const Vh={},xh=()=>Object.create(Vh),Dh=e=>Object.getPrototypeOf(e)===Vh;function om(e,t,n,r=!1){const s={},i=xh();e.propsDefaults=Object.create(null),Oh(e,t,s,i);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);n?e.props=r?s:Ip(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function am(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=e,l=mt(s),[c]=e.propsOptions;let f=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let m=0;m<d.length;m++){let E=d[m];if(Oi(e.emitsOptions,E))continue;const S=t[E];if(c)if(gt(i,E))S!==i[E]&&(i[E]=S,f=!0);else{const V=cn(E);s[V]=zo(c,l,V,S,e,!1)}else S!==i[E]&&(i[E]=S,f=!0)}}}else{Oh(e,t,s,i)&&(f=!0);let d;for(const m in l)(!t||!gt(t,m)&&((d=Ln(m))===m||!gt(t,d)))&&(c?n&&(n[m]!==void 0||n[d]!==void 0)&&(s[m]=zo(c,l,m,void 0,e,!0)):delete s[m]);if(i!==l)for(const m in i)(!t||!gt(t,m))&&(delete i[m],f=!0)}f&&je(e.attrs,"set","")}function Oh(e,t,n,r){const[s,i]=e.propsOptions;let a=!1,l;if(t)for(let c in t){if(zr(c))continue;const f=t[c];let d;s&&gt(s,d=cn(c))?!i||!i.includes(d)?n[d]=f:(l||(l={}))[d]=f:Oi(e.emitsOptions,c)||(!(c in r)||f!==r[c])&&(r[c]=f,a=!0)}if(i){const c=mt(n),f=l||Tt;for(let d=0;d<i.length;d++){const m=i[d];n[m]=zo(s,c,m,f[m],e,!gt(f,m))}}return a}function zo(e,t,n,r,s,i){const a=e[n];if(a!=null){const l=gt(a,"default");if(l&&r===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&it(c)){const{propsDefaults:f}=s;if(n in f)r=f[n];else{const d=gs(s);r=f[n]=c.call(null,t),d()}}else r=c;s.ce&&s.ce._setProp(n,r)}a[0]&&(i&&!l?r=!1:a[1]&&(r===""||r===Ln(n))&&(r=!0))}return r}const lm=new WeakMap;function Nh(e,t,n=!1){const r=n?lm:t.propsCache,s=r.get(e);if(s)return s;const i=e.props,a={},l=[];let c=!1;if(!it(e)){const d=m=>{c=!0;const[E,S]=Nh(m,t,!0);ie(a,E),S&&l.push(...S)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!i&&!c)return bt(e)&&r.set(e,Jn),Jn;if(tt(i))for(let d=0;d<i.length;d++){const m=cn(i[d]);lu(m)&&(a[m]=Tt)}else if(i)for(const d in i){const m=cn(d);if(lu(m)){const E=i[d],S=a[m]=tt(E)||it(E)?{type:E}:ie({},E),V=S.type;let D=!1,F=!0;if(tt(V))for(let G=0;G<V.length;++G){const W=V[G],Q=it(W)&&W.name;if(Q==="Boolean"){D=!0;break}else Q==="String"&&(F=!1)}else D=it(V)&&V.name==="Boolean";S[0]=D,S[1]=F,(D||gt(S,"default"))&&l.push(m)}}const f=[a,l];return bt(e)&&r.set(e,f),f}function lu(e){return e[0]!=="$"&&!zr(e)}const Na=e=>e[0]==="_"||e==="$stable",Ma=e=>tt(e)?e.map(Se):[Se(e)],um=(e,t,n)=>{if(t._n)return t;const r=kp((...s)=>Ma(t(...s)),n);return r._c=!1,r},Mh=(e,t,n)=>{const r=e._ctx;for(const s in e){if(Na(s))continue;const i=e[s];if(it(i))t[s]=um(s,i,r);else if(i!=null){const a=Ma(i);t[s]=()=>a}}},kh=(e,t)=>{const n=Ma(t);e.slots.default=()=>n},Lh=(e,t,n)=>{for(const r in t)(n||!Na(r))&&(e[r]=t[r])},cm=(e,t,n)=>{const r=e.slots=xh();if(e.vnode.shapeFlag&32){const s=t._;s?(Lh(r,t,n),n&&Yc(r,"_",s,!0)):Mh(t,r)}else t&&kh(e,t)},hm=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,a=Tt;if(r.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:Lh(s,t,n):(i=!t.$stable,Mh(t,s)),a=t}else t&&(kh(e,t),a={default:1});if(i)for(const l in s)!Na(l)&&a[l]==null&&delete s[l]},he=bm;function fm(e){return dm(e)}function dm(e,t){const n=Ri();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:l,createComment:c,setText:f,setElementText:d,parentNode:m,nextSibling:E,setScopeId:S=Pe,insertStaticContent:V}=e,D=(_,T,P,M=null,O=null,N=null,q=void 0,B=null,L=!!T.dynamicChildren)=>{if(_===T)return;_&&!Fr(_,T)&&(M=ke(_),Ot(_,O,N,!0),_=null),T.patchFlag===-2&&(L=!1,T.dynamicChildren=null);const{type:k,ref:Y,shapeFlag:$}=T;switch(k){case Ni:F(_,T,P,M);break;case lr:G(_,T,P,M);break;case wo:_==null&&W(T,P,M,q);break;case ve:C(_,T,P,M,O,N,q,B,L);break;default:$&1?_t(_,T,P,M,O,N,q,B,L):$&6?y(_,T,P,M,O,N,q,B,L):($&64||$&128)&&k.process(_,T,P,M,O,N,q,B,L,we)}Y!=null&&O&&ai(Y,_&&_.ref,N,T||_,!T)},F=(_,T,P,M)=>{if(_==null)r(T.el=l(T.children),P,M);else{const O=T.el=_.el;T.children!==_.children&&f(O,T.children)}},G=(_,T,P,M)=>{_==null?r(T.el=c(T.children||""),P,M):T.el=_.el},W=(_,T,P,M)=>{[_.el,_.anchor]=V(_.children,T,P,M,_.el,_.anchor)},Q=({el:_,anchor:T},P,M)=>{let O;for(;_&&_!==T;)O=E(_),r(_,P,M),_=O;r(T,P,M)},z=({el:_,anchor:T})=>{let P;for(;_&&_!==T;)P=E(_),s(_),_=P;s(T)},_t=(_,T,P,M,O,N,q,B,L)=>{T.type==="svg"?q="svg":T.type==="math"&&(q="mathml"),_==null?wt(T,P,M,O,N,q,B,L):v(_,T,O,N,q,B,L)},wt=(_,T,P,M,O,N,q,B)=>{let L,k;const{props:Y,shapeFlag:$,transition:K,dirs:Z}=_;if(L=_.el=a(_.type,N,Y&&Y.is,Y),$&8?d(L,_.children):$&16&&g(_.children,L,null,M,O,Eo(_,N),q,B),Z&&Cn(_,null,M,"created"),I(L,_,_.scopeId,q,M),Y){for(const st in Y)st!=="value"&&!zr(st)&&i(L,st,null,Y[st],N,M);"value"in Y&&i(L,"value",null,Y.value,N),(k=Y.onVnodeBeforeMount)&&Ie(k,M,_)}Z&&Cn(_,null,M,"beforeMount");const X=pm(O,K);X&&K.beforeEnter(L),r(L,T,P),((k=Y&&Y.onVnodeMounted)||X||Z)&&he(()=>{k&&Ie(k,M,_),X&&K.enter(L),Z&&Cn(_,null,M,"mounted")},O)},I=(_,T,P,M,O)=>{if(P&&S(_,P),M)for(let N=0;N<M.length;N++)S(_,M[N]);if(O){let N=O.subTree;if(T===N||qh(N.type)&&(N.ssContent===T||N.ssFallback===T)){const q=O.vnode;I(_,q,q.scopeId,q.slotScopeIds,O.parent)}}},g=(_,T,P,M,O,N,q,B,L=0)=>{for(let k=L;k<_.length;k++){const Y=_[k]=B?en(_[k]):Se(_[k]);D(null,Y,T,P,M,O,N,q,B)}},v=(_,T,P,M,O,N,q)=>{const B=T.el=_.el;let{patchFlag:L,dynamicChildren:k,dirs:Y}=T;L|=_.patchFlag&16;const $=_.props||Tt,K=T.props||Tt;let Z;if(P&&Sn(P,!1),(Z=K.onVnodeBeforeUpdate)&&Ie(Z,P,T,_),Y&&Cn(T,_,P,"beforeUpdate"),P&&Sn(P,!0),($.innerHTML&&K.innerHTML==null||$.textContent&&K.textContent==null)&&d(B,""),k?w(_.dynamicChildren,k,B,P,M,Eo(T,O),N):q||ft(_,T,B,null,P,M,Eo(T,O),N,!1),L>0){if(L&16)A(B,$,K,P,O);else if(L&2&&$.class!==K.class&&i(B,"class",null,K.class,O),L&4&&i(B,"style",$.style,K.style,O),L&8){const X=T.dynamicProps;for(let st=0;st<X.length;st++){const at=X[st],zt=$[at],Bt=K[at];(Bt!==zt||at==="value")&&i(B,at,zt,Bt,O,P)}}L&1&&_.children!==T.children&&d(B,T.children)}else!q&&k==null&&A(B,$,K,P,O);((Z=K.onVnodeUpdated)||Y)&&he(()=>{Z&&Ie(Z,P,T,_),Y&&Cn(T,_,P,"updated")},M)},w=(_,T,P,M,O,N,q)=>{for(let B=0;B<T.length;B++){const L=_[B],k=T[B],Y=L.el&&(L.type===ve||!Fr(L,k)||L.shapeFlag&198)?m(L.el):P;D(L,k,Y,null,M,O,N,q,!0)}},A=(_,T,P,M,O)=>{if(T!==P){if(T!==Tt)for(const N in T)!zr(N)&&!(N in P)&&i(_,N,T[N],null,O,M);for(const N in P){if(zr(N))continue;const q=P[N],B=T[N];q!==B&&N!=="value"&&i(_,N,B,q,O,M)}"value"in P&&i(_,"value",T.value,P.value,O)}},C=(_,T,P,M,O,N,q,B,L)=>{const k=T.el=_?_.el:l(""),Y=T.anchor=_?_.anchor:l("");let{patchFlag:$,dynamicChildren:K,slotScopeIds:Z}=T;Z&&(B=B?B.concat(Z):Z),_==null?(r(k,P,M),r(Y,P,M),g(T.children||[],P,Y,O,N,q,B,L)):$>0&&$&64&&K&&_.dynamicChildren?(w(_.dynamicChildren,K,P,O,N,q,B),(T.key!=null||O&&T===O.subTree)&&Fh(_,T,!0)):ft(_,T,P,Y,O,N,q,B,L)},y=(_,T,P,M,O,N,q,B,L)=>{T.slotScopeIds=B,_==null?T.shapeFlag&512?O.ctx.activate(T,P,M,q,L):ue(T,P,M,O,N,q,L):Ge(_,T,L)},ue=(_,T,P,M,O,N,q)=>{const B=_.component=Om(_,M,O);if(Ih(_)&&(B.ctx.renderer=we),Nm(B,!1,q),B.asyncDep){if(O&&O.registerDep(B,Ft,q),!_.el){const L=B.subTree=on(lr);G(null,L,T,P)}}else Ft(B,_,T,P,O,N,q)},Ge=(_,T,P)=>{const M=T.component=_.component;if(Im(_,T,P))if(M.asyncDep&&!M.asyncResolved){yt(M,T,P);return}else M.next=T,M.update();else T.el=_.el,M.vnode=T},Ft=(_,T,P,M,O,N,q)=>{const B=()=>{if(_.isMounted){let{next:$,bu:K,u:Z,parent:X,vnode:st}=_;{const Wt=Bh(_);if(Wt){$&&($.el=st.el,yt(_,$,q)),Wt.asyncDep.then(()=>{_.isUnmounted||B()});return}}let at=$,zt;Sn(_,!1),$?($.el=st.el,yt(_,$,q)):$=st,K&&Ks(K),(zt=$.props&&$.props.onVnodeBeforeUpdate)&&Ie(zt,X,$,st),Sn(_,!0);const Bt=cu(_),de=_.subTree;_.subTree=Bt,D(de,Bt,m(de.el),ke(de),_,O,N),$.el=Bt.el,at===null&&Am(_,Bt.el),Z&&he(Z,O),(zt=$.props&&$.props.onVnodeUpdated)&&he(()=>Ie(zt,X,$,st),O)}else{let $;const{el:K,props:Z}=T,{bm:X,m:st,parent:at,root:zt,type:Bt}=_,de=Gr(T);Sn(_,!1),X&&Ks(X),!de&&($=Z&&Z.onVnodeBeforeMount)&&Ie($,at,T),Sn(_,!0);{zt.ce&&zt.ce._injectChildStyle(Bt);const Wt=_.subTree=cu(_);D(null,Wt,P,M,_,O,N),T.el=Wt.el}if(st&&he(st,O),!de&&($=Z&&Z.onVnodeMounted)){const Wt=T;he(()=>Ie($,at,Wt),O)}(T.shapeFlag&256||at&&Gr(at.vnode)&&at.vnode.shapeFlag&256)&&_.a&&he(_.a,O),_.isMounted=!0,T=P=M=null}};_.scope.on();const L=_.effect=new th(B);_.scope.off();const k=_.update=L.run.bind(L),Y=_.job=L.runIfDirty.bind(L);Y.i=_,Y.id=_.uid,L.scheduler=()=>Da(Y),Sn(_,!0),k()},yt=(_,T,P)=>{T.component=_;const M=_.vnode.props;_.vnode=T,_.next=null,am(_,T.props,M,P),hm(_,T.children,P),qe(),nu(_),He()},ft=(_,T,P,M,O,N,q,B,L=!1)=>{const k=_&&_.children,Y=_?_.shapeFlag:0,$=T.children,{patchFlag:K,shapeFlag:Z}=T;if(K>0){if(K&128){vn(k,$,P,M,O,N,q,B,L);return}else if(K&256){_e(k,$,P,M,O,N,q,B,L);return}}Z&8?(Y&16&&Tn(k,O,N),$!==k&&d(P,$)):Y&16?Z&16?vn(k,$,P,M,O,N,q,B,L):Tn(k,O,N,!0):(Y&8&&d(P,""),Z&16&&g($,P,M,O,N,q,B,L))},_e=(_,T,P,M,O,N,q,B,L)=>{_=_||Jn,T=T||Jn;const k=_.length,Y=T.length,$=Math.min(k,Y);let K;for(K=0;K<$;K++){const Z=T[K]=L?en(T[K]):Se(T[K]);D(_[K],Z,P,null,O,N,q,B,L)}k>Y?Tn(_,O,N,!0,!1,$):g(T,P,M,O,N,q,B,L,$)},vn=(_,T,P,M,O,N,q,B,L)=>{let k=0;const Y=T.length;let $=_.length-1,K=Y-1;for(;k<=$&&k<=K;){const Z=_[k],X=T[k]=L?en(T[k]):Se(T[k]);if(Fr(Z,X))D(Z,X,P,null,O,N,q,B,L);else break;k++}for(;k<=$&&k<=K;){const Z=_[$],X=T[K]=L?en(T[K]):Se(T[K]);if(Fr(Z,X))D(Z,X,P,null,O,N,q,B,L);else break;$--,K--}if(k>$){if(k<=K){const Z=K+1,X=Z<Y?T[Z].el:M;for(;k<=K;)D(null,T[k]=L?en(T[k]):Se(T[k]),P,X,O,N,q,B,L),k++}}else if(k>K)for(;k<=$;)Ot(_[k],O,N,!0),k++;else{const Z=k,X=k,st=new Map;for(k=X;k<=K;k++){const Ut=T[k]=L?en(T[k]):Se(T[k]);Ut.key!=null&&st.set(Ut.key,k)}let at,zt=0;const Bt=K-X+1;let de=!1,Wt=0;const Qe=new Array(Bt);for(k=0;k<Bt;k++)Qe[k]=0;for(k=Z;k<=$;k++){const Ut=_[k];if(zt>=Bt){Ot(Ut,O,N,!0);continue}let pe;if(Ut.key!=null)pe=st.get(Ut.key);else for(at=X;at<=K;at++)if(Qe[at-X]===0&&Fr(Ut,T[at])){pe=at;break}pe===void 0?Ot(Ut,O,N,!0):(Qe[pe-X]=k+1,pe>=Wt?Wt=pe:de=!0,D(Ut,T[pe],P,null,O,N,q,B,L),zt++)}const Ar=de?mm(Qe):Jn;for(at=Ar.length-1,k=Bt-1;k>=0;k--){const Ut=X+k,pe=T[Ut],ws=Ut+1<Y?T[Ut+1].el:M;Qe[k]===0?D(null,pe,P,ws,O,N,q,B,L):de&&(at<0||k!==Ar[at]?Me(pe,P,ws,2):at--)}}},Me=(_,T,P,M,O=null)=>{const{el:N,type:q,transition:B,children:L,shapeFlag:k}=_;if(k&6){Me(_.component.subTree,T,P,M);return}if(k&128){_.suspense.move(T,P,M);return}if(k&64){q.move(_,T,P,we);return}if(q===ve){r(N,T,P);for(let $=0;$<L.length;$++)Me(L[$],T,P,M);r(_.anchor,T,P);return}if(q===wo){Q(_,T,P);return}if(M!==2&&k&1&&B)if(M===0)B.beforeEnter(N),r(N,T,P),he(()=>B.enter(N),O);else{const{leave:$,delayLeave:K,afterLeave:Z}=B,X=()=>{_.ctx.isUnmounted?s(N):r(N,T,P)},st=()=>{$(N,()=>{X(),Z&&Z()})};K?K(N,X,st):st()}else r(N,T,P)},Ot=(_,T,P,M=!1,O=!1)=>{const{type:N,props:q,ref:B,children:L,dynamicChildren:k,shapeFlag:Y,patchFlag:$,dirs:K,cacheIndex:Z}=_;if($===-2&&(O=!1),B!=null&&(qe(),ai(B,null,P,_,!0),He()),Z!=null&&(T.renderCache[Z]=void 0),Y&256){T.ctx.deactivate(_);return}const X=Y&1&&K,st=!Gr(_);let at;if(st&&(at=q&&q.onVnodeBeforeUnmount)&&Ie(at,T,_),Y&6)En(_.component,P,M);else{if(Y&128){_.suspense.unmount(P,M);return}X&&Cn(_,null,T,"beforeUnmount"),Y&64?_.type.remove(_,T,P,we,M):k&&!k.hasOnce&&(N!==ve||$>0&&$&64)?Tn(k,T,P,!1,!0):(N===ve&&$&384||!O&&Y&16)&&Tn(L,T,P),M&&Nt(_)}(st&&(at=q&&q.onVnodeUnmounted)||X)&&he(()=>{at&&Ie(at,T,_),X&&Cn(_,null,T,"unmounted")},P)},Nt=_=>{const{type:T,el:P,anchor:M,transition:O}=_;if(T===ve){Qi(P,M);return}if(T===wo){z(_);return}const N=()=>{s(P),O&&!O.persisted&&O.afterLeave&&O.afterLeave()};if(_.shapeFlag&1&&O&&!O.persisted){const{leave:q,delayLeave:B}=O,L=()=>q(P,N);B?B(_.el,N,L):L()}else N()},Qi=(_,T)=>{let P;for(;_!==T;)P=E(_),s(_),_=P;s(T)},En=(_,T,P)=>{const{bum:M,scope:O,job:N,subTree:q,um:B,m:L,a:k,parent:Y,slots:{__:$}}=_;uu(L),uu(k),M&&Ks(M),Y&&tt($)&&$.forEach(K=>{Y.renderCache[K]=void 0}),O.stop(),N&&(N.flags|=8,Ot(q,_,T,P)),B&&he(B,T),he(()=>{_.isUnmounted=!0},T),T&&T.pendingBranch&&!T.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===T.pendingId&&(T.deps--,T.deps===0&&T.resolve())},Tn=(_,T,P,M=!1,O=!1,N=0)=>{for(let q=N;q<_.length;q++)Ot(_[q],T,P,M,O)},ke=_=>{if(_.shapeFlag&6)return ke(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const T=E(_.anchor||_.el),P=T&&T[Lp];return P?E(P):T};let wr=!1;const Ts=(_,T,P)=>{_==null?T._vnode&&Ot(T._vnode,null,null,!0):D(T._vnode||null,_,T,null,null,null,P),T._vnode=_,wr||(wr=!0,nu(),vh(),wr=!1)},we={p:D,um:Ot,m:Me,r:Nt,mt:ue,mc:g,pc:ft,pbc:w,n:ke,o:e};return{render:Ts,hydrate:void 0,createApp:sm(Ts)}}function Eo({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Sn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function pm(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Fh(e,t,n=!1){const r=e.children,s=t.children;if(tt(r)&&tt(s))for(let i=0;i<r.length;i++){const a=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=en(s[i]),l.el=a.el),!n&&l.patchFlag!==-2&&Fh(a,l)),l.type===Ni&&(l.el=a.el),l.type===lr&&!l.el&&(l.el=a.el)}}function mm(e){const t=e.slice(),n=[0];let r,s,i,a,l;const c=e.length;for(r=0;r<c;r++){const f=e[r];if(f!==0){if(s=n[n.length-1],e[s]<f){t[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)l=i+a>>1,e[n[l]]<f?i=l+1:a=l;f<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}function Bh(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Bh(t)}function uu(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const gm=Symbol.for("v-scx"),_m=()=>Gs(gm);function To(e,t,n){return Uh(e,t,n)}function Uh(e,t,n=Tt){const{immediate:r,deep:s,flush:i,once:a}=n,l=ie({},n),c=t&&r||!t&&i!=="post";let f;if(os){if(i==="sync"){const S=_m();f=S.__watcherHandles||(S.__watcherHandles=[])}else if(!c){const S=()=>{};return S.stop=Pe,S.resume=Pe,S.pause=Pe,S}}const d=re;l.call=(S,V,D)=>De(S,d,V,D);let m=!1;i==="post"?l.scheduler=S=>{he(S,d&&d.suspense)}:i!=="sync"&&(m=!0,l.scheduler=(S,V)=>{V?S():Da(S)}),l.augmentJob=S=>{t&&(S.flags|=4),m&&(S.flags|=2,d&&(S.id=d.uid,S.i=d))};const E=Dp(e,t,l);return os&&(f?f.push(E):c&&E()),E}function ym(e,t,n){const r=this.proxy,s=Dt(e)?e.includes(".")?jh(r,e):()=>r[e]:e.bind(r,r);let i;it(t)?i=t:(i=t.handler,n=t);const a=gs(this),l=Uh(s,i.bind(r),n);return a(),l}function jh(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const vm=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${cn(t)}Modifiers`]||e[`${Ln(t)}Modifiers`];function Em(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Tt;let s=n;const i=t.startsWith("update:"),a=i&&vm(r,t.slice(7));a&&(a.trim&&(s=n.map(d=>Dt(d)?d.trim():d)),a.number&&(s=n.map(ni)));let l,c=r[l=ho(t)]||r[l=ho(cn(t))];!c&&i&&(c=r[l=ho(Ln(t))]),c&&De(c,e,6,s);const f=r[l+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,De(f,e,6,s)}}function $h(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let a={},l=!1;if(!it(e)){const c=f=>{const d=$h(f,t,!0);d&&(l=!0,ie(a,d))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!l?(bt(e)&&r.set(e,null),null):(tt(i)?i.forEach(c=>a[c]=null):ie(a,i),bt(e)&&r.set(e,a),a)}function Oi(e,t){return!e||!bi(t)?!1:(t=t.slice(2).replace(/Once$/,""),gt(e,t[0].toLowerCase()+t.slice(1))||gt(e,Ln(t))||gt(e,t))}function cu(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:l,emit:c,render:f,renderCache:d,props:m,data:E,setupState:S,ctx:V,inheritAttrs:D}=e,F=oi(e);let G,W;try{if(n.shapeFlag&4){const z=s||r,_t=z;G=Se(f.call(_t,z,d,m,S,E,V)),W=l}else{const z=t;G=Se(z.length>1?z(m,{attrs:l,slots:a,emit:c}):z(m,null)),W=t.props?l:Tm(l)}}catch(z){Yr.length=0,xi(z,e,1),G=on(lr)}let Q=G;if(W&&D!==!1){const z=Object.keys(W),{shapeFlag:_t}=Q;z.length&&_t&7&&(i&&z.some(va)&&(W=wm(W,i)),Q=ur(Q,W,!1,!0))}return n.dirs&&(Q=ur(Q,null,!1,!0),Q.dirs=Q.dirs?Q.dirs.concat(n.dirs):n.dirs),n.transition&&Oa(Q,n.transition),G=Q,oi(F),G}const Tm=e=>{let t;for(const n in e)(n==="class"||n==="style"||bi(n))&&((t||(t={}))[n]=e[n]);return t},wm=(e,t)=>{const n={};for(const r in e)(!va(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Im(e,t,n){const{props:r,children:s,component:i}=e,{props:a,children:l,patchFlag:c}=t,f=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?hu(r,a,f):!!a;if(c&8){const d=t.dynamicProps;for(let m=0;m<d.length;m++){const E=d[m];if(a[E]!==r[E]&&!Oi(f,E))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?hu(r,a,f):!0:!!a;return!1}function hu(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!Oi(n,i))return!0}return!1}function Am({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const qh=e=>e.__isSuspense;function bm(e,t){t&&t.pendingBranch?tt(e)?t.effects.push(...e):t.effects.push(e):Mp(e)}const ve=Symbol.for("v-fgt"),Ni=Symbol.for("v-txt"),lr=Symbol.for("v-cmt"),wo=Symbol.for("v-stc"),Yr=[];let fe=null;function Wn(e=!1){Yr.push(fe=e?null:[])}function Cm(){Yr.pop(),fe=Yr[Yr.length-1]||null}let is=1;function fu(e,t=!1){is+=e,e<0&&fe&&t&&(fe.hasOnce=!0)}function Sm(e){return e.dynamicChildren=is>0?fe||Jn:null,Cm(),is>0&&fe&&fe.push(e),e}function Kn(e,t,n,r,s,i){return Sm(pt(e,t,n,r,s,i,!0))}function Hh(e){return e?e.__v_isVNode===!0:!1}function Fr(e,t){return e.type===t.type&&e.key===t.key}const zh=({key:e})=>e??null,Qs=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Dt(e)||Zt(e)||it(e)?{i:me,r:e,k:t,f:!!n}:e:null);function pt(e,t=null,n=null,r=0,s=null,i=e===ve?0:1,a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&zh(t),ref:t&&Qs(t),scopeId:Th,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:me};return l?(ka(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=Dt(n)?8:16),is>0&&!a&&fe&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&fe.push(c),c}const on=Rm;function Rm(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===Yp)&&(e=lr),Hh(e)){const l=ur(e,t,!0);return n&&ka(l,n),is>0&&!i&&fe&&(l.shapeFlag&6?fe[fe.indexOf(e)]=l:fe.push(l)),l.patchFlag=-2,l}if(Fm(e)&&(e=e.__vccOpts),t){t=Pm(t);let{class:l,style:c}=t;l&&!Dt(l)&&(t.class=Ia(l)),bt(c)&&(xa(c)&&!tt(c)&&(c=ie({},c)),t.style=wa(c))}const a=Dt(e)?1:qh(e)?128:Fp(e)?64:bt(e)?4:it(e)?2:0;return pt(e,t,n,r,s,a,i,!0)}function Pm(e){return e?xa(e)||Dh(e)?ie({},e):e:null}function ur(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:l,transition:c}=e,f=t?Vm(s||{},t):s,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&zh(f),ref:t&&t.ref?n&&i?tt(i)?i.concat(Qs(t)):[i,Qs(t)]:Qs(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ve?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ur(e.ssContent),ssFallback:e.ssFallback&&ur(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&Oa(d,c.clone(d)),d}function Wh(e=" ",t=0){return on(Ni,null,e,t)}function Se(e){return e==null||typeof e=="boolean"?on(lr):tt(e)?on(ve,null,e.slice()):Hh(e)?en(e):on(Ni,null,String(e))}function en(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ur(e)}function ka(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(tt(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),ka(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!Dh(t)?t._ctx=me:s===3&&me&&(me.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else it(t)?(t={default:t,_ctx:me},n=32):(t=String(t),r&64?(n=16,t=[Wh(t)]):n=8);e.children=t,e.shapeFlag|=n}function Vm(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=Ia([t.class,r.class]));else if(s==="style")t.style=wa([t.style,r.style]);else if(bi(s)){const i=t[s],a=r[s];a&&i!==a&&!(tt(i)&&i.includes(a))&&(t[s]=i?[].concat(i,a):a)}else s!==""&&(t[s]=r[s])}return t}function Ie(e,t,n,r=null){De(e,t,7,[n,r])}const xm=Ph();let Dm=0;function Om(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||xm,i={uid:Dm++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new rp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Nh(r,s),emitsOptions:$h(r,s),emit:null,emitted:null,propsDefaults:Tt,inheritAttrs:r.inheritAttrs,ctx:Tt,data:Tt,props:Tt,attrs:Tt,slots:Tt,refs:Tt,setupState:Tt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Em.bind(null,i),e.ce&&e.ce(i),i}let re=null,ui,Wo;{const e=Ri(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};ui=t("__VUE_INSTANCE_SETTERS__",n=>re=n),Wo=t("__VUE_SSR_SETTERS__",n=>os=n)}const gs=e=>{const t=re;return ui(e),e.scope.on(),()=>{e.scope.off(),ui(t)}},du=()=>{re&&re.scope.off(),ui(null)};function Kh(e){return e.vnode.shapeFlag&4}let os=!1;function Nm(e,t=!1,n=!1){t&&Wo(t);const{props:r,children:s}=e.vnode,i=Kh(e);om(e,r,i,t),cm(e,s,n||t);const a=i?Mm(e,t):void 0;return t&&Wo(!1),a}function Mm(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Xp);const{setup:r}=n;if(r){qe();const s=e.setupContext=r.length>1?Lm(e):null,i=gs(e),a=ms(r,e,0,[e.props,s]),l=Wc(a);if(He(),i(),(l||e.sp)&&!Gr(e)&&wh(e),l){if(a.then(du,du),t)return a.then(c=>{pu(e,c)}).catch(c=>{xi(c,e,0)});e.asyncDep=a}else pu(e,a)}else Gh(e)}function pu(e,t,n){it(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:bt(t)&&(e.setupState=mh(t)),Gh(e)}function Gh(e,t,n){const r=e.type;e.render||(e.render=r.render||Pe);{const s=gs(e);qe();try{Jp(e)}finally{He(),s()}}}const km={get(e,t){return Xt(e,"get",""),e[t]}};function Lm(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,km),slots:e.slots,emit:e.emit,expose:t}}function Mi(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(mh(Ap(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Qr)return Qr[n](e)},has(t,n){return n in t||n in Qr}})):e.proxy}function Fm(e){return it(e)&&"__vccOpts"in e}const Qh=(e,t)=>Vp(e,t,os),Bm="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ko;const mu=typeof window<"u"&&window.trustedTypes;if(mu)try{Ko=mu.createPolicy("vue",{createHTML:e=>e})}catch{}const Yh=Ko?e=>Ko.createHTML(e):e=>e,Um="http://www.w3.org/2000/svg",jm="http://www.w3.org/1998/Math/MathML",Ue=typeof document<"u"?document:null,gu=Ue&&Ue.createElement("template"),$m={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?Ue.createElementNS(Um,e):t==="mathml"?Ue.createElementNS(jm,e):n?Ue.createElement(e,{is:n}):Ue.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>Ue.createTextNode(e),createComment:e=>Ue.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ue.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const a=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{gu.innerHTML=Yh(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const l=gu.content;if(r==="svg"||r==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},qm=Symbol("_vtc");function Hm(e,t,n){const r=e[qm];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const _u=Symbol("_vod"),zm=Symbol("_vsh"),Wm=Symbol(""),Km=/(^|;)\s*display\s*:/;function Gm(e,t,n){const r=e.style,s=Dt(n);let i=!1;if(n&&!s){if(t)if(Dt(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&Ys(r,l,"")}else for(const a in t)n[a]==null&&Ys(r,a,"");for(const a in n)a==="display"&&(i=!0),Ys(r,a,n[a])}else if(s){if(t!==n){const a=r[Wm];a&&(n+=";"+a),r.cssText=n,i=Km.test(n)}}else t&&e.removeAttribute("style");_u in e&&(e[_u]=i?r.display:"",e[zm]&&(r.display="none"))}const yu=/\s*!important$/;function Ys(e,t,n){if(tt(n))n.forEach(r=>Ys(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=Qm(e,t);yu.test(n)?e.setProperty(Ln(r),n.replace(yu,""),"important"):e[r]=n}}const vu=["Webkit","Moz","ms"],Io={};function Qm(e,t){const n=Io[t];if(n)return n;let r=cn(t);if(r!=="filter"&&r in e)return Io[t]=r;r=Qc(r);for(let s=0;s<vu.length;s++){const i=vu[s]+r;if(i in e)return Io[t]=i}return t}const Eu="http://www.w3.org/1999/xlink";function Tu(e,t,n,r,s,i=tp(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Eu,t.slice(6,t.length)):e.setAttributeNS(Eu,t,n):n==null||i&&!Xc(n)?e.removeAttribute(t):e.setAttribute(t,i?"":xe(n)?String(n):n)}function wu(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Yh(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=Xc(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(s||t)}function xn(e,t,n,r){e.addEventListener(t,n,r)}function Ym(e,t,n,r){e.removeEventListener(t,n,r)}const Iu=Symbol("_vei");function Xm(e,t,n,r,s=null){const i=e[Iu]||(e[Iu]={}),a=i[t];if(r&&a)a.value=r;else{const[l,c]=Jm(t);if(r){const f=i[t]=eg(r,s);xn(e,l,f,c)}else a&&(Ym(e,l,a,c),i[t]=void 0)}}const Au=/(?:Once|Passive|Capture)$/;function Jm(e){let t;if(Au.test(e)){t={};let r;for(;r=e.match(Au);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ln(e.slice(2)),t]}let Ao=0;const Zm=Promise.resolve(),tg=()=>Ao||(Zm.then(()=>Ao=0),Ao=Date.now());function eg(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;De(ng(r,n.value),t,5,[r])};return n.value=e,n.attached=tg(),n}function ng(e,t){if(tt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const bu=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,rg=(e,t,n,r,s,i)=>{const a=s==="svg";t==="class"?Hm(e,r,a):t==="style"?Gm(e,n,r):bi(t)?va(t)||Xm(e,t,n,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):sg(e,t,r,a))?(wu(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Tu(e,t,r,a,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Dt(r))?wu(e,cn(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Tu(e,t,r,a))};function sg(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&bu(t)&&it(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return bu(t)&&Dt(n)?!1:t in e}const ci=e=>{const t=e.props["onUpdate:modelValue"]||!1;return tt(t)?n=>Ks(t,n):t};function ig(e){e.target.composing=!0}function Cu(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const rr=Symbol("_assign"),Su={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[rr]=ci(s);const i=r||s.props&&s.props.type==="number";xn(e,t?"change":"input",a=>{if(a.target.composing)return;let l=e.value;n&&(l=l.trim()),i&&(l=ni(l)),e[rr](l)}),n&&xn(e,"change",()=>{e.value=e.value.trim()}),t||(xn(e,"compositionstart",ig),xn(e,"compositionend",Cu),xn(e,"change",Cu))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},a){if(e[rr]=ci(a),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?ni(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||s&&e.value.trim()===c)||(e.value=c))}},og={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const s=Ci(t);xn(e,"change",()=>{const i=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>n?ni(hi(a)):hi(a));e[rr](e.multiple?s?new Set(i):i:i[0]),e._assigning=!0,_h(()=>{e._assigning=!1})}),e[rr]=ci(r)},mounted(e,{value:t}){Ru(e,t)},beforeUpdate(e,t,n){e[rr]=ci(n)},updated(e,{value:t}){e._assigning||Ru(e,t)}};function Ru(e,t){const n=e.multiple,r=tt(t);if(!(n&&!r&&!Ci(t))){for(let s=0,i=e.options.length;s<i;s++){const a=e.options[s],l=hi(a);if(n)if(r){const c=typeof l;c==="string"||c==="number"?a.selected=t.some(f=>String(f)===String(l)):a.selected=np(t,l)>-1}else a.selected=t.has(l);else if(Pi(hi(a),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function hi(e){return"_value"in e?e._value:e.value}const ag=ie({patchProp:rg},$m);let Pu;function lg(){return Pu||(Pu=fm(ag))}const ug=(...e)=>{const t=lg().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=hg(r);if(!s)return;const i=t._component;!it(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,cg(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t};function cg(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function hg(e){return Dt(e)?document.querySelector(e):e}const fg="/student-recycle-dashboard/assets/logo-DMlNQp5X.jpeg",dg=()=>{};var Vu={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},pg=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],a=e[n++],l=e[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return t.join("")},Jh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],a=s+1<e.length,l=a?e[s+1]:0,c=s+2<e.length,f=c?e[s+2]:0,d=i>>2,m=(i&3)<<4|l>>4;let E=(l&15)<<2|f>>6,S=f&63;c||(S=64,a||(E=64)),r.push(n[d],n[m],n[E],n[S])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Xh(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):pg(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const f=s<e.length?n[e.charAt(s)]:64;++s;const m=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||l==null||f==null||m==null)throw new mg;const E=i<<2|l>>4;if(r.push(E),f!==64){const S=l<<4&240|f>>2;if(r.push(S),m!==64){const V=f<<6&192|m;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class mg extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gg=function(e){const t=Xh(e);return Jh.encodeByteArray(t,!0)},fi=function(e){return gg(e).replace(/\./g,"")},_g=function(e){try{return Jh.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg=()=>yg().__FIREBASE_DEFAULTS__,Eg=()=>{if(typeof process>"u"||typeof Vu>"u")return;const e=Vu.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Tg=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&_g(e[1]);return t&&JSON.parse(t)},La=()=>{try{return dg()||vg()||Eg()||Tg()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},wg=e=>{var t,n;return(n=(t=La())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Ig=e=>{const t=wg(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Zh=()=>{var e;return(e=La())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(e){return e.endsWith(".cloudworkstations.dev")}async function bg(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[fi(JSON.stringify(n)),fi(JSON.stringify(a)),""].join(".")}const Xr={};function Sg(){const e={prod:[],emulator:[]};for(const t of Object.keys(Xr))Xr[t]?e.emulator.push(t):e.prod.push(t);return e}function Rg(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let xu=!1;function Pg(e,t){if(typeof window>"u"||typeof document>"u"||!Fa(window.location.host)||Xr[e]===t||Xr[e]||xu)return;Xr[e]=t;function n(E){return`__firebase__banner__${E}`}const r="__firebase__banner",i=Sg().prod.length>0;function a(){const E=document.getElementById(r);E&&E.remove()}function l(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function c(E,S){E.setAttribute("width","24"),E.setAttribute("id",S),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function f(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{xu=!0,a()},E}function d(E,S){E.setAttribute("id",S),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function m(){const E=Rg(r),S=n("text"),V=document.getElementById(S)||document.createElement("span"),D=n("learnmore"),F=document.getElementById(D)||document.createElement("a"),G=n("preprendIcon"),W=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const Q=E.element;l(Q),d(F,D);const z=f();c(W,G),Q.append(W,V,F,z),document.body.appendChild(Q)}i?(V.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xg(){var e;const t=(e=La())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Dg(){return!xg()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Og(){try{return typeof indexedDB=="object"}catch{return!1}}function Ng(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="FirebaseError";class _r extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Mg,Object.setPrototypeOf(this,_r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tf.prototype.create)}}class tf{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],a=i?kg(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new _r(s,l,r)}}function kg(e,t){return e.replace(Lg,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const Lg=/\{\$([^}]+)}/g;function di(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],a=t[s];if(Du(i)&&Du(a)){if(!di(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Du(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(e){return e&&e._delegate?e._delegate:e}class as{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new Ag;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(jg(t))try{this.getOrInitializeService({instanceIdentifier:Pn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=Pn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Pn){return this.instances.has(t)}getOptions(t=Pn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&t(a,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ug(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Pn){return this.component?this.component.multipleInstances?t:Pn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ug(e){return e===Pn?void 0:e}function jg(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Bg(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ut||(ut={}));const qg={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},Hg=ut.INFO,zg={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},Wg=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=zg[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ef{constructor(t){this.name=t,this._logLevel=Hg,this._logHandler=Wg,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ut))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?qg[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...t),this._logHandler(this,ut.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...t),this._logHandler(this,ut.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...t),this._logHandler(this,ut.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...t),this._logHandler(this,ut.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...t),this._logHandler(this,ut.ERROR,...t)}}const Kg=(e,t)=>t.some(n=>e instanceof n);let Ou,Nu;function Gg(){return Ou||(Ou=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qg(){return Nu||(Nu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nf=new WeakMap,Go=new WeakMap,rf=new WeakMap,bo=new WeakMap,Ba=new WeakMap;function Yg(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{n(an(e.result)),s()},a=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&nf.set(n,e)}).catch(()=>{}),Ba.set(t,e),t}function Xg(e){if(Go.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});Go.set(e,t)}let Qo={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Go.get(e);if(t==="objectStoreNames")return e.objectStoreNames||rf.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return an(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Jg(e){Qo=e(Qo)}function Zg(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Co(this),t,...n);return rf.set(r,t.sort?t.sort():[t]),an(r)}:Qg().includes(e)?function(...t){return e.apply(Co(this),t),an(nf.get(this))}:function(...t){return an(e.apply(Co(this),t))}}function t_(e){return typeof e=="function"?Zg(e):(e instanceof IDBTransaction&&Xg(e),Kg(e,Gg())?new Proxy(e,Qo):e)}function an(e){if(e instanceof IDBRequest)return Yg(e);if(bo.has(e))return bo.get(e);const t=t_(e);return t!==e&&(bo.set(e,t),Ba.set(t,e)),t}const Co=e=>Ba.get(e);function e_(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(e,t),l=an(a);return r&&a.addEventListener("upgradeneeded",c=>{r(an(a.result),c.oldVersion,c.newVersion,an(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const n_=["get","getKey","getAll","getAllKeys","count"],r_=["put","add","delete","clear"],So=new Map;function Mu(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(So.get(t))return So.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=r_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||n_.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),s&&c.done]))[0]};return So.set(t,i),i}Jg(e=>({...e,get:(t,n,r)=>Mu(t,n)||e.get(t,n,r),has:(t,n)=>!!Mu(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(i_(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function i_(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Yo="@firebase/app",ku="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ze=new ef("@firebase/app"),o_="@firebase/app-compat",a_="@firebase/analytics-compat",l_="@firebase/analytics",u_="@firebase/app-check-compat",c_="@firebase/app-check",h_="@firebase/auth",f_="@firebase/auth-compat",d_="@firebase/database",p_="@firebase/data-connect",m_="@firebase/database-compat",g_="@firebase/functions",__="@firebase/functions-compat",y_="@firebase/installations",v_="@firebase/installations-compat",E_="@firebase/messaging",T_="@firebase/messaging-compat",w_="@firebase/performance",I_="@firebase/performance-compat",A_="@firebase/remote-config",b_="@firebase/remote-config-compat",C_="@firebase/storage",S_="@firebase/storage-compat",R_="@firebase/firestore",P_="@firebase/ai",V_="@firebase/firestore-compat",x_="firebase",D_="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo="[DEFAULT]",O_={[Yo]:"fire-core",[o_]:"fire-core-compat",[l_]:"fire-analytics",[a_]:"fire-analytics-compat",[c_]:"fire-app-check",[u_]:"fire-app-check-compat",[h_]:"fire-auth",[f_]:"fire-auth-compat",[d_]:"fire-rtdb",[p_]:"fire-data-connect",[m_]:"fire-rtdb-compat",[g_]:"fire-fn",[__]:"fire-fn-compat",[y_]:"fire-iid",[v_]:"fire-iid-compat",[E_]:"fire-fcm",[T_]:"fire-fcm-compat",[w_]:"fire-perf",[I_]:"fire-perf-compat",[A_]:"fire-rc",[b_]:"fire-rc-compat",[C_]:"fire-gcs",[S_]:"fire-gcs-compat",[R_]:"fire-fst",[V_]:"fire-fst-compat",[P_]:"fire-vertex","fire-js":"fire-js",[x_]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi=new Map,N_=new Map,Jo=new Map;function Lu(e,t){try{e.container.addComponent(t)}catch(n){ze.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function mi(e){const t=e.name;if(Jo.has(t))return ze.debug(`There were multiple attempts to register component ${t}.`),!1;Jo.set(t,e);for(const n of pi.values())Lu(n,e);for(const n of N_.values())Lu(n,e);return!0}function M_(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function k_(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ln=new tf("app","Firebase",L_);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new as("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ln.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_=D_;function sf(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Xo,automaticDataCollectionEnabled:!0},t),s=r.name;if(typeof s!="string"||!s)throw ln.create("bad-app-name",{appName:String(s)});if(n||(n=Zh()),!n)throw ln.create("no-options");const i=pi.get(s);if(i){if(di(n,i.options)&&di(r,i.config))return i;throw ln.create("duplicate-app",{appName:s})}const a=new $g(s);for(const c of Jo.values())a.addComponent(c);const l=new F_(n,r,a);return pi.set(s,l),l}function U_(e=Xo){const t=pi.get(e);if(!t&&e===Xo&&Zh())return sf();if(!t)throw ln.create("no-app",{appName:e});return t}function sr(e,t,n){var r;let s=(r=O_[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${t}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ze.warn(l.join(" "));return}mi(new as(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="firebase-heartbeat-database",$_=1,ls="firebase-heartbeat-store";let Ro=null;function of(){return Ro||(Ro=e_(j_,$_,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(ls)}catch(n){console.warn(n)}}}}).catch(e=>{throw ln.create("idb-open",{originalErrorMessage:e.message})})),Ro}async function q_(e){try{const n=(await of()).transaction(ls),r=await n.objectStore(ls).get(af(e));return await n.done,r}catch(t){if(t instanceof _r)ze.warn(t.message);else{const n=ln.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ze.warn(n.message)}}}async function Fu(e,t){try{const r=(await of()).transaction(ls,"readwrite");await r.objectStore(ls).put(t,af(e)),await r.done}catch(n){if(n instanceof _r)ze.warn(n.message);else{const r=ln.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ze.warn(r.message)}}}function af(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=1024,z_=30;class W_{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new G_(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Bu();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>z_){const a=Q_(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ze.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Bu(),{heartbeatsToSend:r,unsentEntries:s}=K_(this._heartbeatsCache.heartbeats),i=fi(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ze.warn(n),""}}}function Bu(){return new Date().toISOString().substring(0,10)}function K_(e,t=H_){const n=[];let r=e.slice();for(const s of e){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Uu(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Uu(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class G_{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Og()?Ng().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await q_(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Fu(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Fu(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Uu(e){return fi(JSON.stringify({version:2,heartbeats:e})).length}function Q_(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(e){mi(new as("platform-logger",t=>new s_(t),"PRIVATE")),mi(new as("heartbeat",t=>new W_(t),"PRIVATE")),sr(Yo,ku,e),sr(Yo,ku,"esm2017"),sr("fire-js","")}Y_("");var X_="firebase",J_="11.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr(X_,J_,"app");var ju=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var un,lf;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,g){function v(){}v.prototype=g.prototype,I.D=g.prototype,I.prototype=new v,I.prototype.constructor=I,I.C=function(w,A,C){for(var y=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)y[ue-2]=arguments[ue];return g.prototype[A].apply(w,y)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,g,v){v||(v=0);var w=Array(16);if(typeof g=="string")for(var A=0;16>A;++A)w[A]=g.charCodeAt(v++)|g.charCodeAt(v++)<<8|g.charCodeAt(v++)<<16|g.charCodeAt(v++)<<24;else for(A=0;16>A;++A)w[A]=g[v++]|g[v++]<<8|g[v++]<<16|g[v++]<<24;g=I.g[0],v=I.g[1],A=I.g[2];var C=I.g[3],y=g+(C^v&(A^C))+w[0]+3614090360&4294967295;g=v+(y<<7&4294967295|y>>>25),y=C+(A^g&(v^A))+w[1]+3905402710&4294967295,C=g+(y<<12&4294967295|y>>>20),y=A+(v^C&(g^v))+w[2]+606105819&4294967295,A=C+(y<<17&4294967295|y>>>15),y=v+(g^A&(C^g))+w[3]+3250441966&4294967295,v=A+(y<<22&4294967295|y>>>10),y=g+(C^v&(A^C))+w[4]+4118548399&4294967295,g=v+(y<<7&4294967295|y>>>25),y=C+(A^g&(v^A))+w[5]+1200080426&4294967295,C=g+(y<<12&4294967295|y>>>20),y=A+(v^C&(g^v))+w[6]+2821735955&4294967295,A=C+(y<<17&4294967295|y>>>15),y=v+(g^A&(C^g))+w[7]+4249261313&4294967295,v=A+(y<<22&4294967295|y>>>10),y=g+(C^v&(A^C))+w[8]+1770035416&4294967295,g=v+(y<<7&4294967295|y>>>25),y=C+(A^g&(v^A))+w[9]+2336552879&4294967295,C=g+(y<<12&4294967295|y>>>20),y=A+(v^C&(g^v))+w[10]+4294925233&4294967295,A=C+(y<<17&4294967295|y>>>15),y=v+(g^A&(C^g))+w[11]+2304563134&4294967295,v=A+(y<<22&4294967295|y>>>10),y=g+(C^v&(A^C))+w[12]+1804603682&4294967295,g=v+(y<<7&4294967295|y>>>25),y=C+(A^g&(v^A))+w[13]+4254626195&4294967295,C=g+(y<<12&4294967295|y>>>20),y=A+(v^C&(g^v))+w[14]+2792965006&4294967295,A=C+(y<<17&4294967295|y>>>15),y=v+(g^A&(C^g))+w[15]+1236535329&4294967295,v=A+(y<<22&4294967295|y>>>10),y=g+(A^C&(v^A))+w[1]+4129170786&4294967295,g=v+(y<<5&4294967295|y>>>27),y=C+(v^A&(g^v))+w[6]+3225465664&4294967295,C=g+(y<<9&4294967295|y>>>23),y=A+(g^v&(C^g))+w[11]+643717713&4294967295,A=C+(y<<14&4294967295|y>>>18),y=v+(C^g&(A^C))+w[0]+3921069994&4294967295,v=A+(y<<20&4294967295|y>>>12),y=g+(A^C&(v^A))+w[5]+3593408605&4294967295,g=v+(y<<5&4294967295|y>>>27),y=C+(v^A&(g^v))+w[10]+38016083&4294967295,C=g+(y<<9&4294967295|y>>>23),y=A+(g^v&(C^g))+w[15]+3634488961&4294967295,A=C+(y<<14&4294967295|y>>>18),y=v+(C^g&(A^C))+w[4]+3889429448&4294967295,v=A+(y<<20&4294967295|y>>>12),y=g+(A^C&(v^A))+w[9]+568446438&4294967295,g=v+(y<<5&4294967295|y>>>27),y=C+(v^A&(g^v))+w[14]+3275163606&4294967295,C=g+(y<<9&4294967295|y>>>23),y=A+(g^v&(C^g))+w[3]+4107603335&4294967295,A=C+(y<<14&4294967295|y>>>18),y=v+(C^g&(A^C))+w[8]+1163531501&4294967295,v=A+(y<<20&4294967295|y>>>12),y=g+(A^C&(v^A))+w[13]+2850285829&4294967295,g=v+(y<<5&4294967295|y>>>27),y=C+(v^A&(g^v))+w[2]+4243563512&4294967295,C=g+(y<<9&4294967295|y>>>23),y=A+(g^v&(C^g))+w[7]+1735328473&4294967295,A=C+(y<<14&4294967295|y>>>18),y=v+(C^g&(A^C))+w[12]+2368359562&4294967295,v=A+(y<<20&4294967295|y>>>12),y=g+(v^A^C)+w[5]+4294588738&4294967295,g=v+(y<<4&4294967295|y>>>28),y=C+(g^v^A)+w[8]+2272392833&4294967295,C=g+(y<<11&4294967295|y>>>21),y=A+(C^g^v)+w[11]+1839030562&4294967295,A=C+(y<<16&4294967295|y>>>16),y=v+(A^C^g)+w[14]+4259657740&4294967295,v=A+(y<<23&4294967295|y>>>9),y=g+(v^A^C)+w[1]+2763975236&4294967295,g=v+(y<<4&4294967295|y>>>28),y=C+(g^v^A)+w[4]+1272893353&4294967295,C=g+(y<<11&4294967295|y>>>21),y=A+(C^g^v)+w[7]+4139469664&4294967295,A=C+(y<<16&4294967295|y>>>16),y=v+(A^C^g)+w[10]+3200236656&4294967295,v=A+(y<<23&4294967295|y>>>9),y=g+(v^A^C)+w[13]+681279174&4294967295,g=v+(y<<4&4294967295|y>>>28),y=C+(g^v^A)+w[0]+3936430074&4294967295,C=g+(y<<11&4294967295|y>>>21),y=A+(C^g^v)+w[3]+3572445317&4294967295,A=C+(y<<16&4294967295|y>>>16),y=v+(A^C^g)+w[6]+76029189&4294967295,v=A+(y<<23&4294967295|y>>>9),y=g+(v^A^C)+w[9]+3654602809&4294967295,g=v+(y<<4&4294967295|y>>>28),y=C+(g^v^A)+w[12]+3873151461&4294967295,C=g+(y<<11&4294967295|y>>>21),y=A+(C^g^v)+w[15]+530742520&4294967295,A=C+(y<<16&4294967295|y>>>16),y=v+(A^C^g)+w[2]+3299628645&4294967295,v=A+(y<<23&4294967295|y>>>9),y=g+(A^(v|~C))+w[0]+4096336452&4294967295,g=v+(y<<6&4294967295|y>>>26),y=C+(v^(g|~A))+w[7]+1126891415&4294967295,C=g+(y<<10&4294967295|y>>>22),y=A+(g^(C|~v))+w[14]+2878612391&4294967295,A=C+(y<<15&4294967295|y>>>17),y=v+(C^(A|~g))+w[5]+4237533241&4294967295,v=A+(y<<21&4294967295|y>>>11),y=g+(A^(v|~C))+w[12]+1700485571&4294967295,g=v+(y<<6&4294967295|y>>>26),y=C+(v^(g|~A))+w[3]+2399980690&4294967295,C=g+(y<<10&4294967295|y>>>22),y=A+(g^(C|~v))+w[10]+4293915773&4294967295,A=C+(y<<15&4294967295|y>>>17),y=v+(C^(A|~g))+w[1]+2240044497&4294967295,v=A+(y<<21&4294967295|y>>>11),y=g+(A^(v|~C))+w[8]+1873313359&4294967295,g=v+(y<<6&4294967295|y>>>26),y=C+(v^(g|~A))+w[15]+4264355552&4294967295,C=g+(y<<10&4294967295|y>>>22),y=A+(g^(C|~v))+w[6]+2734768916&4294967295,A=C+(y<<15&4294967295|y>>>17),y=v+(C^(A|~g))+w[13]+1309151649&4294967295,v=A+(y<<21&4294967295|y>>>11),y=g+(A^(v|~C))+w[4]+4149444226&4294967295,g=v+(y<<6&4294967295|y>>>26),y=C+(v^(g|~A))+w[11]+3174756917&4294967295,C=g+(y<<10&4294967295|y>>>22),y=A+(g^(C|~v))+w[2]+718787259&4294967295,A=C+(y<<15&4294967295|y>>>17),y=v+(C^(A|~g))+w[9]+3951481745&4294967295,I.g[0]=I.g[0]+g&4294967295,I.g[1]=I.g[1]+(A+(y<<21&4294967295|y>>>11))&4294967295,I.g[2]=I.g[2]+A&4294967295,I.g[3]=I.g[3]+C&4294967295}r.prototype.u=function(I,g){g===void 0&&(g=I.length);for(var v=g-this.blockSize,w=this.B,A=this.h,C=0;C<g;){if(A==0)for(;C<=v;)s(this,I,C),C+=this.blockSize;if(typeof I=="string"){for(;C<g;)if(w[A++]=I.charCodeAt(C++),A==this.blockSize){s(this,w),A=0;break}}else for(;C<g;)if(w[A++]=I[C++],A==this.blockSize){s(this,w),A=0;break}}this.h=A,this.o+=g},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var g=1;g<I.length-8;++g)I[g]=0;var v=8*this.o;for(g=I.length-8;g<I.length;++g)I[g]=v&255,v/=256;for(this.u(I),I=Array(16),g=v=0;4>g;++g)for(var w=0;32>w;w+=8)I[v++]=this.g[g]>>>w&255;return I};function i(I,g){var v=l;return Object.prototype.hasOwnProperty.call(v,I)?v[I]:v[I]=g(I)}function a(I,g){this.h=g;for(var v=[],w=!0,A=I.length-1;0<=A;A--){var C=I[A]|0;w&&C==g||(v[A]=C,w=!1)}this.g=v}var l={};function c(I){return-128<=I&&128>I?i(I,function(g){return new a([g|0],0>g?-1:0)}):new a([I|0],0>I?-1:0)}function f(I){if(isNaN(I)||!isFinite(I))return m;if(0>I)return F(f(-I));for(var g=[],v=1,w=0;I>=v;w++)g[w]=I/v|0,v*=4294967296;return new a(g,0)}function d(I,g){if(I.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(I.charAt(0)=="-")return F(d(I.substring(1),g));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=f(Math.pow(g,8)),w=m,A=0;A<I.length;A+=8){var C=Math.min(8,I.length-A),y=parseInt(I.substring(A,A+C),g);8>C?(C=f(Math.pow(g,C)),w=w.j(C).add(f(y))):(w=w.j(v),w=w.add(f(y)))}return w}var m=c(0),E=c(1),S=c(16777216);e=a.prototype,e.m=function(){if(D(this))return-F(this).m();for(var I=0,g=1,v=0;v<this.g.length;v++){var w=this.i(v);I+=(0<=w?w:4294967296+w)*g,g*=4294967296}return I},e.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(V(this))return"0";if(D(this))return"-"+F(this).toString(I);for(var g=f(Math.pow(I,6)),v=this,w="";;){var A=z(v,g).g;v=G(v,A.j(g));var C=((0<v.g.length?v.g[0]:v.h)>>>0).toString(I);if(v=A,V(v))return C+w;for(;6>C.length;)C="0"+C;w=C+w}},e.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function V(I){if(I.h!=0)return!1;for(var g=0;g<I.g.length;g++)if(I.g[g]!=0)return!1;return!0}function D(I){return I.h==-1}e.l=function(I){return I=G(this,I),D(I)?-1:V(I)?0:1};function F(I){for(var g=I.g.length,v=[],w=0;w<g;w++)v[w]=~I.g[w];return new a(v,~I.h).add(E)}e.abs=function(){return D(this)?F(this):this},e.add=function(I){for(var g=Math.max(this.g.length,I.g.length),v=[],w=0,A=0;A<=g;A++){var C=w+(this.i(A)&65535)+(I.i(A)&65535),y=(C>>>16)+(this.i(A)>>>16)+(I.i(A)>>>16);w=y>>>16,C&=65535,y&=65535,v[A]=y<<16|C}return new a(v,v[v.length-1]&-2147483648?-1:0)};function G(I,g){return I.add(F(g))}e.j=function(I){if(V(this)||V(I))return m;if(D(this))return D(I)?F(this).j(F(I)):F(F(this).j(I));if(D(I))return F(this.j(F(I)));if(0>this.l(S)&&0>I.l(S))return f(this.m()*I.m());for(var g=this.g.length+I.g.length,v=[],w=0;w<2*g;w++)v[w]=0;for(w=0;w<this.g.length;w++)for(var A=0;A<I.g.length;A++){var C=this.i(w)>>>16,y=this.i(w)&65535,ue=I.i(A)>>>16,Ge=I.i(A)&65535;v[2*w+2*A]+=y*Ge,W(v,2*w+2*A),v[2*w+2*A+1]+=C*Ge,W(v,2*w+2*A+1),v[2*w+2*A+1]+=y*ue,W(v,2*w+2*A+1),v[2*w+2*A+2]+=C*ue,W(v,2*w+2*A+2)}for(w=0;w<g;w++)v[w]=v[2*w+1]<<16|v[2*w];for(w=g;w<2*g;w++)v[w]=0;return new a(v,0)};function W(I,g){for(;(I[g]&65535)!=I[g];)I[g+1]+=I[g]>>>16,I[g]&=65535,g++}function Q(I,g){this.g=I,this.h=g}function z(I,g){if(V(g))throw Error("division by zero");if(V(I))return new Q(m,m);if(D(I))return g=z(F(I),g),new Q(F(g.g),F(g.h));if(D(g))return g=z(I,F(g)),new Q(F(g.g),g.h);if(30<I.g.length){if(D(I)||D(g))throw Error("slowDivide_ only works with positive integers.");for(var v=E,w=g;0>=w.l(I);)v=_t(v),w=_t(w);var A=wt(v,1),C=wt(w,1);for(w=wt(w,2),v=wt(v,2);!V(w);){var y=C.add(w);0>=y.l(I)&&(A=A.add(v),C=y),w=wt(w,1),v=wt(v,1)}return g=G(I,A.j(g)),new Q(A,g)}for(A=m;0<=I.l(g);){for(v=Math.max(1,Math.floor(I.m()/g.m())),w=Math.ceil(Math.log(v)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),C=f(v),y=C.j(g);D(y)||0<y.l(I);)v-=w,C=f(v),y=C.j(g);V(C)&&(C=E),A=A.add(C),I=G(I,y)}return new Q(A,I)}e.A=function(I){return z(this,I).h},e.and=function(I){for(var g=Math.max(this.g.length,I.g.length),v=[],w=0;w<g;w++)v[w]=this.i(w)&I.i(w);return new a(v,this.h&I.h)},e.or=function(I){for(var g=Math.max(this.g.length,I.g.length),v=[],w=0;w<g;w++)v[w]=this.i(w)|I.i(w);return new a(v,this.h|I.h)},e.xor=function(I){for(var g=Math.max(this.g.length,I.g.length),v=[],w=0;w<g;w++)v[w]=this.i(w)^I.i(w);return new a(v,this.h^I.h)};function _t(I){for(var g=I.g.length+1,v=[],w=0;w<g;w++)v[w]=I.i(w)<<1|I.i(w-1)>>>31;return new a(v,I.h)}function wt(I,g){var v=g>>5;g%=32;for(var w=I.g.length-v,A=[],C=0;C<w;C++)A[C]=0<g?I.i(C+v)>>>g|I.i(C+v+1)<<32-g:I.i(C+v);return new a(A,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,lf=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=d,un=a}).apply(typeof ju<"u"?ju:typeof self<"u"?self:typeof window<"u"?window:{});var js=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uf,$r,cf,Xs,Zo,hf,ff,df;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,h){return o==Array.prototype||o==Object.prototype||(o[u]=h.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof js=="object"&&js];for(var u=0;u<o.length;++u){var h=o[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function s(o,u){if(u)t:{var h=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var b=o[p];if(!(b in h))break t;h=h[b]}o=o[o.length-1],p=h[o],u=u(p),u!=p&&u!=null&&t(h,o,{configurable:!0,writable:!0,value:u})}}function i(o,u){o instanceof String&&(o+="");var h=0,p=!1,b={next:function(){if(!p&&h<o.length){var R=h++;return{value:u(R,o[R]),done:!1}}return p=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}s("Array.prototype.values",function(o){return o||function(){return i(this,function(u,h){return h})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function f(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function d(o,u,h){return o.call.apply(o.bind,arguments)}function m(o,u,h){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,p),o.apply(u,b)}}return function(){return o.apply(u,arguments)}}function E(o,u,h){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,E.apply(null,arguments)}function S(o,u){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function V(o,u){function h(){}h.prototype=u.prototype,o.aa=u.prototype,o.prototype=new h,o.prototype.constructor=o,o.Qb=function(p,b,R){for(var U=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)U[Et-2]=arguments[Et];return u.prototype[b].apply(p,U)}}function D(o){const u=o.length;if(0<u){const h=Array(u);for(let p=0;p<u;p++)h[p]=o[p];return h}return[]}function F(o,u){for(let h=1;h<arguments.length;h++){const p=arguments[h];if(c(p)){const b=o.length||0,R=p.length||0;o.length=b+R;for(let U=0;U<R;U++)o[b+U]=p[U]}else o.push(p)}}class G{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function W(o){return/^[\s\xa0]*$/.test(o)}function Q(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function z(o){return z[" "](o),o}z[" "]=function(){};var _t=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function wt(o,u,h){for(const p in o)u.call(h,o[p],p,o)}function I(o,u){for(const h in o)u.call(void 0,o[h],h,o)}function g(o){const u={};for(const h in o)u[h]=o[h];return u}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(o,u){let h,p;for(let b=1;b<arguments.length;b++){p=arguments[b];for(h in p)o[h]=p[h];for(let R=0;R<v.length;R++)h=v[R],Object.prototype.hasOwnProperty.call(p,h)&&(o[h]=p[h])}}function A(o){var u=1;o=o.split(":");const h=[];for(;0<u&&o.length;)h.push(o.shift()),u--;return o.length&&h.push(o.join(":")),h}function C(o){l.setTimeout(()=>{throw o},0)}function y(){var o=_e;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class ue{constructor(){this.h=this.g=null}add(u,h){const p=Ge.get();p.set(u,h),this.h?this.h.next=p:this.g=p,this.h=p}}var Ge=new G(()=>new Ft,o=>o.reset());class Ft{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let yt,ft=!1,_e=new ue,vn=()=>{const o=l.Promise.resolve(void 0);yt=()=>{o.then(Me)}};var Me=()=>{for(var o;o=y();){try{o.h.call(o.g)}catch(h){C(h)}var u=Ge;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}ft=!1};function Ot(){this.s=this.s,this.C=this.C}Ot.prototype.s=!1,Ot.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ot.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Nt(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Nt.prototype.h=function(){this.defaultPrevented=!0};var Qi=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const h=()=>{};l.addEventListener("test",h,u),l.removeEventListener("test",h,u)}catch{}return o}();function En(o,u){if(Nt.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var h=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(_t){t:{try{z(u.nodeName);var b=!0;break t}catch{}b=!1}b||(u=null)}}else h=="mouseover"?u=o.fromElement:h=="mouseout"&&(u=o.toElement);this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Tn[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&En.aa.h.call(this)}}V(En,Nt);var Tn={2:"touch",3:"pen",4:"mouse"};En.prototype.h=function(){En.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var ke="closure_listenable_"+(1e6*Math.random()|0),wr=0;function Ts(o,u,h,p,b){this.listener=o,this.proxy=null,this.src=u,this.type=h,this.capture=!!p,this.ha=b,this.key=++wr,this.da=this.fa=!1}function we(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Ir(o){this.src=o,this.g={},this.h=0}Ir.prototype.add=function(o,u,h,p,b){var R=o.toString();o=this.g[R],o||(o=this.g[R]=[],this.h++);var U=T(o,u,p,b);return-1<U?(u=o[U],h||(u.fa=!1)):(u=new Ts(u,this.src,R,!!p,b),u.fa=h,o.push(u)),u};function _(o,u){var h=u.type;if(h in o.g){var p=o.g[h],b=Array.prototype.indexOf.call(p,u,void 0),R;(R=0<=b)&&Array.prototype.splice.call(p,b,1),R&&(we(u),o.g[h].length==0&&(delete o.g[h],o.h--))}}function T(o,u,h,p){for(var b=0;b<o.length;++b){var R=o[b];if(!R.da&&R.listener==u&&R.capture==!!h&&R.ha==p)return b}return-1}var P="closure_lm_"+(1e6*Math.random()|0),M={};function O(o,u,h,p,b){if(Array.isArray(u)){for(var R=0;R<u.length;R++)O(o,u[R],h,p,b);return null}return h=Z(h),o&&o[ke]?o.K(u,h,f(p)?!!p.capture:!1,b):N(o,u,h,!1,p,b)}function N(o,u,h,p,b,R){if(!u)throw Error("Invalid event type");var U=f(b)?!!b.capture:!!b,Et=$(o);if(Et||(o[P]=Et=new Ir(o)),h=Et.add(u,h,p,U,R),h.proxy)return h;if(p=q(),h.proxy=p,p.src=o,p.listener=h,o.addEventListener)Qi||(b=U),b===void 0&&(b=!1),o.addEventListener(u.toString(),p,b);else if(o.attachEvent)o.attachEvent(k(u.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function q(){function o(h){return u.call(o.src,o.listener,h)}const u=Y;return o}function B(o,u,h,p,b){if(Array.isArray(u))for(var R=0;R<u.length;R++)B(o,u[R],h,p,b);else p=f(p)?!!p.capture:!!p,h=Z(h),o&&o[ke]?(o=o.i,u=String(u).toString(),u in o.g&&(R=o.g[u],h=T(R,h,p,b),-1<h&&(we(R[h]),Array.prototype.splice.call(R,h,1),R.length==0&&(delete o.g[u],o.h--)))):o&&(o=$(o))&&(u=o.g[u.toString()],o=-1,u&&(o=T(u,h,p,b)),(h=-1<o?u[o]:null)&&L(h))}function L(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[ke])_(u.i,o);else{var h=o.type,p=o.proxy;u.removeEventListener?u.removeEventListener(h,p,o.capture):u.detachEvent?u.detachEvent(k(h),p):u.addListener&&u.removeListener&&u.removeListener(p),(h=$(u))?(_(h,o),h.h==0&&(h.src=null,u[P]=null)):we(o)}}}function k(o){return o in M?M[o]:M[o]="on"+o}function Y(o,u){if(o.da)o=!0;else{u=new En(u,this);var h=o.listener,p=o.ha||o.src;o.fa&&L(o),o=h.call(p,u)}return o}function $(o){return o=o[P],o instanceof Ir?o:null}var K="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z(o){return typeof o=="function"?o:(o[K]||(o[K]=function(u){return o.handleEvent(u)}),o[K])}function X(){Ot.call(this),this.i=new Ir(this),this.M=this,this.F=null}V(X,Ot),X.prototype[ke]=!0,X.prototype.removeEventListener=function(o,u,h,p){B(this,o,u,h,p)};function st(o,u){var h,p=o.F;if(p)for(h=[];p;p=p.F)h.push(p);if(o=o.M,p=u.type||u,typeof u=="string")u=new Nt(u,o);else if(u instanceof Nt)u.target=u.target||o;else{var b=u;u=new Nt(p,o),w(u,b)}if(b=!0,h)for(var R=h.length-1;0<=R;R--){var U=u.g=h[R];b=at(U,p,!0,u)&&b}if(U=u.g=o,b=at(U,p,!0,u)&&b,b=at(U,p,!1,u)&&b,h)for(R=0;R<h.length;R++)U=u.g=h[R],b=at(U,p,!1,u)&&b}X.prototype.N=function(){if(X.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var h=o.g[u],p=0;p<h.length;p++)we(h[p]);delete o.g[u],o.h--}}this.F=null},X.prototype.K=function(o,u,h,p){return this.i.add(String(o),u,!1,h,p)},X.prototype.L=function(o,u,h,p){return this.i.add(String(o),u,!0,h,p)};function at(o,u,h,p){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var b=!0,R=0;R<u.length;++R){var U=u[R];if(U&&!U.da&&U.capture==h){var Et=U.listener,jt=U.ha||U.src;U.fa&&_(o.i,U),b=Et.call(jt,p)!==!1&&b}}return b&&!p.defaultPrevented}function zt(o,u,h){if(typeof o=="function")h&&(o=E(o,h));else if(o&&typeof o.handleEvent=="function")o=E(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function Bt(o){o.g=zt(()=>{o.g=null,o.i&&(o.i=!1,Bt(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class de extends Ot{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Bt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wt(o){Ot.call(this),this.h=o,this.g={}}V(Wt,Ot);var Qe=[];function Ar(o){wt(o.g,function(u,h){this.g.hasOwnProperty(h)&&L(u)},o),o.g={}}Wt.prototype.N=function(){Wt.aa.N.call(this),Ar(this)},Wt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ut=l.JSON.stringify,pe=l.JSON.parse,ws=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Yi(){}Yi.prototype.h=null;function al(o){return o.h||(o.h=o.i())}function ll(){}var br={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xi(){Nt.call(this,"d")}V(Xi,Nt);function Ji(){Nt.call(this,"c")}V(Ji,Nt);var wn={},ul=null;function Is(){return ul=ul||new X}wn.La="serverreachability";function cl(o){Nt.call(this,wn.La,o)}V(cl,Nt);function Cr(o){const u=Is();st(u,new cl(u))}wn.STAT_EVENT="statevent";function hl(o,u){Nt.call(this,wn.STAT_EVENT,o),this.stat=u}V(hl,Nt);function te(o){const u=Is();st(u,new hl(u,o))}wn.Ma="timingevent";function fl(o,u){Nt.call(this,wn.Ma,o),this.size=u}V(fl,Nt);function Sr(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},u)}function Rr(){this.g=!0}Rr.prototype.xa=function(){this.g=!1};function Td(o,u,h,p,b,R){o.info(function(){if(o.g)if(R)for(var U="",Et=R.split("&"),jt=0;jt<Et.length;jt++){var dt=Et[jt].split("=");if(1<dt.length){var Kt=dt[0];dt=dt[1];var Gt=Kt.split("_");U=2<=Gt.length&&Gt[1]=="type"?U+(Kt+"="+dt+"&"):U+(Kt+"=redacted&")}}else U=null;else U=R;return"XMLHTTP REQ ("+p+") [attempt "+b+"]: "+u+`
`+h+`
`+U})}function wd(o,u,h,p,b,R,U){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+b+"]: "+u+`
`+h+`
`+R+" "+U})}function Bn(o,u,h,p){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+Ad(o,h)+(p?" "+p:"")})}function Id(o,u){o.info(function(){return"TIMEOUT: "+u})}Rr.prototype.info=function(){};function Ad(o,u){if(!o.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(o=0;o<h.length;o++)if(Array.isArray(h[o])){var p=h[o];if(!(2>p.length)){var b=p[1];if(Array.isArray(b)&&!(1>b.length)){var R=b[0];if(R!="noop"&&R!="stop"&&R!="close")for(var U=1;U<b.length;U++)b[U]=""}}}}return Ut(h)}catch{return u}}var As={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zi;function bs(){}V(bs,Yi),bs.prototype.g=function(){return new XMLHttpRequest},bs.prototype.i=function(){return{}},Zi=new bs;function Ye(o,u,h,p){this.j=o,this.i=u,this.l=h,this.R=p||1,this.U=new Wt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pl}function pl(){this.i=null,this.g="",this.h=!1}var ml={},to={};function eo(o,u,h){o.L=1,o.v=Ps(Le(u)),o.m=h,o.P=!0,gl(o,null)}function gl(o,u){o.F=Date.now(),Cs(o),o.A=Le(o.v);var h=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),Vl(h.i,"t",p),o.C=0,h=o.j.J,o.h=new pl,o.g=Gl(o.j,h?u:null,!o.m),0<o.O&&(o.M=new de(E(o.Y,o,o.g),o.O)),u=o.U,h=o.g,p=o.ca;var b="readystatechange";Array.isArray(b)||(b&&(Qe[0]=b.toString()),b=Qe);for(var R=0;R<b.length;R++){var U=O(h,b[R],p||u.handleEvent,!1,u.h||u);if(!U)break;u.g[U.key]=U}u=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),Cr(),Td(o.i,o.u,o.A,o.l,o.R,o.m)}Ye.prototype.ca=function(o){o=o.target;const u=this.M;u&&Fe(o)==3?u.j():this.Y(o)},Ye.prototype.Y=function(o){try{if(o==this.g)t:{const Gt=Fe(this.g);var u=this.g.Ba();const $n=this.g.Z();if(!(3>Gt)&&(Gt!=3||this.g&&(this.h.h||this.g.oa()||Ll(this.g)))){this.J||Gt!=4||u==7||(u==8||0>=$n?Cr(3):Cr(2)),no(this);var h=this.g.Z();this.X=h;e:if(_l(this)){var p=Ll(this.g);o="";var b=p.length,R=Fe(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){In(this),Pr(this);var U="";break e}this.h.i=new l.TextDecoder}for(u=0;u<b;u++)this.h.h=!0,o+=this.h.i.decode(p[u],{stream:!(R&&u==b-1)});p.length=0,this.h.g+=o,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=h==200,wd(this.i,this.u,this.A,this.l,this.R,Gt,h),this.o){if(this.T&&!this.K){e:{if(this.g){var Et,jt=this.g;if((Et=jt.g?jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Et)){var dt=Et;break e}}dt=null}if(h=dt)Bn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ro(this,h);else{this.o=!1,this.s=3,te(12),In(this),Pr(this);break t}}if(this.P){h=!0;let ye;for(;!this.J&&this.C<U.length;)if(ye=bd(this,U),ye==to){Gt==4&&(this.s=4,te(14),h=!1),Bn(this.i,this.l,null,"[Incomplete Response]");break}else if(ye==ml){this.s=4,te(15),Bn(this.i,this.l,U,"[Invalid Chunk]"),h=!1;break}else Bn(this.i,this.l,ye,null),ro(this,ye);if(_l(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gt!=4||U.length!=0||this.h.h||(this.s=1,te(16),h=!1),this.o=this.o&&h,!h)Bn(this.i,this.l,U,"[Invalid Chunked Response]"),In(this),Pr(this);else if(0<U.length&&!this.W){this.W=!0;var Kt=this.j;Kt.g==this&&Kt.ba&&!Kt.M&&(Kt.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),uo(Kt),Kt.M=!0,te(11))}}else Bn(this.i,this.l,U,null),ro(this,U);Gt==4&&In(this),this.o&&!this.J&&(Gt==4?Hl(this.j,this):(this.o=!1,Cs(this)))}else $d(this.g),h==400&&0<U.indexOf("Unknown SID")?(this.s=3,te(12)):(this.s=0,te(13)),In(this),Pr(this)}}}catch{}finally{}};function _l(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function bd(o,u){var h=o.C,p=u.indexOf(`
`,h);return p==-1?to:(h=Number(u.substring(h,p)),isNaN(h)?ml:(p+=1,p+h>u.length?to:(u=u.slice(p,p+h),o.C=p+h,u)))}Ye.prototype.cancel=function(){this.J=!0,In(this)};function Cs(o){o.S=Date.now()+o.I,yl(o,o.I)}function yl(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Sr(E(o.ba,o),u)}function no(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Ye.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Id(this.i,this.A),this.L!=2&&(Cr(),te(17)),In(this),this.s=2,Pr(this)):yl(this,this.S-o)};function Pr(o){o.j.G==0||o.J||Hl(o.j,o)}function In(o){no(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,Ar(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function ro(o,u){try{var h=o.j;if(h.G!=0&&(h.g==o||so(h.h,o))){if(!o.K&&so(h.h,o)&&h.G==3){try{var p=h.Da.g.parse(u)}catch{p=null}if(Array.isArray(p)&&p.length==3){var b=p;if(b[0]==0){t:if(!h.u){if(h.g)if(h.g.F+3e3<o.F)Ms(h),Os(h);else break t;lo(h),te(18)}}else h.za=b[1],0<h.za-h.T&&37500>b[2]&&h.F&&h.v==0&&!h.C&&(h.C=Sr(E(h.Za,h),6e3));if(1>=Tl(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else bn(h,11)}else if((o.K||h.g==o)&&Ms(h),!W(u))for(b=h.Da.g.parse(u),u=0;u<b.length;u++){let dt=b[u];if(h.T=dt[0],dt=dt[1],h.G==2)if(dt[0]=="c"){h.K=dt[1],h.ia=dt[2];const Kt=dt[3];Kt!=null&&(h.la=Kt,h.j.info("VER="+h.la));const Gt=dt[4];Gt!=null&&(h.Aa=Gt,h.j.info("SVER="+h.Aa));const $n=dt[5];$n!=null&&typeof $n=="number"&&0<$n&&(p=1.5*$n,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;const ye=o.g;if(ye){const Ls=ye.g?ye.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ls){var R=p.h;R.g||Ls.indexOf("spdy")==-1&&Ls.indexOf("quic")==-1&&Ls.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(io(R,R.h),R.h=null))}if(p.D){const co=ye.g?ye.g.getResponseHeader("X-HTTP-Session-Id"):null;co&&(p.ya=co,At(p.I,p.D,co))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-o.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var U=o;if(p.qa=Kl(p,p.J?p.ia:null,p.W),U.K){wl(p.h,U);var Et=U,jt=p.L;jt&&(Et.I=jt),Et.B&&(no(Et),Cs(Et)),p.g=U}else $l(p);0<h.i.length&&Ns(h)}else dt[0]!="stop"&&dt[0]!="close"||bn(h,7);else h.G==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?bn(h,7):ao(h):dt[0]!="noop"&&h.l&&h.l.ta(dt),h.v=0)}}Cr(4)}catch{}}var Cd=class{constructor(o,u){this.g=o,this.map=u}};function vl(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function El(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Tl(o){return o.h?1:o.g?o.g.size:0}function so(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function io(o,u){o.g?o.g.add(u):o.h=u}function wl(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}vl.prototype.cancel=function(){if(this.i=Il(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Il(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const h of o.g.values())u=u.concat(h.D);return u}return D(o.i)}function Sd(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(c(o)){for(var u=[],h=o.length,p=0;p<h;p++)u.push(o[p]);return u}u=[],h=0;for(p in o)u[h++]=o[p];return u}function Rd(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(c(o)||typeof o=="string"){var u=[];o=o.length;for(var h=0;h<o;h++)u.push(h);return u}u=[],h=0;for(const p in o)u[h++]=p;return u}}}function Al(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(c(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var h=Rd(o),p=Sd(o),b=p.length,R=0;R<b;R++)u.call(void 0,p[R],h&&h[R],o)}var bl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pd(o,u){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var p=o[h].indexOf("="),b=null;if(0<=p){var R=o[h].substring(0,p);b=o[h].substring(p+1)}else R=o[h];u(R,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function An(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof An){this.h=o.h,Ss(this,o.j),this.o=o.o,this.g=o.g,Rs(this,o.s),this.l=o.l;var u=o.i,h=new Dr;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),Cl(this,h),this.m=o.m}else o&&(u=String(o).match(bl))?(this.h=!1,Ss(this,u[1]||"",!0),this.o=Vr(u[2]||""),this.g=Vr(u[3]||"",!0),Rs(this,u[4]),this.l=Vr(u[5]||"",!0),Cl(this,u[6]||"",!0),this.m=Vr(u[7]||"")):(this.h=!1,this.i=new Dr(null,this.h))}An.prototype.toString=function(){var o=[],u=this.j;u&&o.push(xr(u,Sl,!0),":");var h=this.g;return(h||u=="file")&&(o.push("//"),(u=this.o)&&o.push(xr(u,Sl,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&o.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(xr(h,h.charAt(0)=="/"?Dd:xd,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",xr(h,Nd)),o.join("")};function Le(o){return new An(o)}function Ss(o,u,h){o.j=h?Vr(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function Rs(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function Cl(o,u,h){u instanceof Dr?(o.i=u,Md(o.i,o.h)):(h||(u=xr(u,Od)),o.i=new Dr(u,o.h))}function At(o,u,h){o.i.set(u,h)}function Ps(o){return At(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Vr(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function xr(o,u,h){return typeof o=="string"?(o=encodeURI(o).replace(u,Vd),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Vd(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Sl=/[#\/\?@]/g,xd=/[#\?:]/g,Dd=/[#\?]/g,Od=/[#\?@]/g,Nd=/#/g;function Dr(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function Xe(o){o.g||(o.g=new Map,o.h=0,o.i&&Pd(o.i,function(u,h){o.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}e=Dr.prototype,e.add=function(o,u){Xe(this),this.i=null,o=Un(this,o);var h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(u),this.h+=1,this};function Rl(o,u){Xe(o),u=Un(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function Pl(o,u){return Xe(o),u=Un(o,u),o.g.has(u)}e.forEach=function(o,u){Xe(this),this.g.forEach(function(h,p){h.forEach(function(b){o.call(u,b,p,this)},this)},this)},e.na=function(){Xe(this);const o=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let p=0;p<u.length;p++){const b=o[p];for(let R=0;R<b.length;R++)h.push(u[p])}return h},e.V=function(o){Xe(this);let u=[];if(typeof o=="string")Pl(this,o)&&(u=u.concat(this.g.get(Un(this,o))));else{o=Array.from(this.g.values());for(let h=0;h<o.length;h++)u=u.concat(o[h])}return u},e.set=function(o,u){return Xe(this),this.i=null,o=Un(this,o),Pl(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},e.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function Vl(o,u,h){Rl(o,u),0<h.length&&(o.i=null,o.g.set(Un(o,u),D(h)),o.h+=h.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var p=u[h];const R=encodeURIComponent(String(p)),U=this.V(p);for(p=0;p<U.length;p++){var b=R;U[p]!==""&&(b+="="+encodeURIComponent(String(U[p]))),o.push(b)}}return this.i=o.join("&")};function Un(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function Md(o,u){u&&!o.j&&(Xe(o),o.i=null,o.g.forEach(function(h,p){var b=p.toLowerCase();p!=b&&(Rl(this,p),Vl(this,b,h))},o)),o.j=u}function kd(o,u){const h=new Rr;if(l.Image){const p=new Image;p.onload=S(Je,h,"TestLoadImage: loaded",!0,u,p),p.onerror=S(Je,h,"TestLoadImage: error",!1,u,p),p.onabort=S(Je,h,"TestLoadImage: abort",!1,u,p),p.ontimeout=S(Je,h,"TestLoadImage: timeout",!1,u,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else u(!1)}function Ld(o,u){const h=new Rr,p=new AbortController,b=setTimeout(()=>{p.abort(),Je(h,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:p.signal}).then(R=>{clearTimeout(b),R.ok?Je(h,"TestPingServer: ok",!0,u):Je(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(b),Je(h,"TestPingServer: error",!1,u)})}function Je(o,u,h,p,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),p(h)}catch{}}function Fd(){this.g=new ws}function Bd(o,u,h){const p=h||"";try{Al(o,function(b,R){let U=b;f(b)&&(U=Ut(b)),u.push(p+R+"="+encodeURIComponent(U))})}catch(b){throw u.push(p+"type="+encodeURIComponent("_badmap")),b}}function Vs(o){this.l=o.Ub||null,this.j=o.eb||!1}V(Vs,Yi),Vs.prototype.g=function(){return new xs(this.l,this.j)},Vs.prototype.i=function(o){return function(){return o}}({});function xs(o,u){X.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(xs,X),e=xs.prototype,e.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,Nr(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||l).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Or(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Nr(this)),this.g&&(this.readyState=3,Nr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xl(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function xl(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?Or(this):Nr(this),this.readyState==3&&xl(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,Or(this))},e.Qa=function(o){this.g&&(this.response=o,Or(this))},e.ga=function(){this.g&&Or(this)};function Or(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Nr(o)}e.setRequestHeader=function(o,u){this.u.append(o,u)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=u.next();return o.join(`\r
`)};function Nr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(xs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Dl(o){let u="";return wt(o,function(h,p){u+=p,u+=":",u+=h,u+=`\r
`}),u}function oo(o,u,h){t:{for(p in h){var p=!1;break t}p=!0}p||(h=Dl(h),typeof o=="string"?h!=null&&encodeURIComponent(String(h)):At(o,u,h))}function St(o){X.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(St,X);var Ud=/^https?$/i,jd=["POST","PUT"];e=St.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,u,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zi.g(),this.v=this.o?al(this.o):al(Zi),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(R){Ol(this,R);return}if(o=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var b in p)h.set(b,p[b]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const R of p.keys())h.set(R,p.get(R));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(R=>R.toLowerCase()=="content-type"),b=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(jd,u,void 0))||p||b||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[R,U]of h)this.g.setRequestHeader(R,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{kl(this),this.u=!0,this.g.send(o),this.u=!1}catch(R){Ol(this,R)}};function Ol(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,Nl(o),Ds(o)}function Nl(o){o.A||(o.A=!0,st(o,"complete"),st(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,st(this,"complete"),st(this,"abort"),Ds(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ds(this,!0)),St.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ml(this):this.bb())},e.bb=function(){Ml(this)};function Ml(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Fe(o)!=4||o.Z()!=2)){if(o.u&&Fe(o)==4)zt(o.Ea,0,o);else if(st(o,"readystatechange"),Fe(o)==4){o.h=!1;try{const U=o.Z();t:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break t;default:u=!1}var h;if(!(h=u)){var p;if(p=U===0){var b=String(o.D).match(bl)[1]||null;!b&&l.self&&l.self.location&&(b=l.self.location.protocol.slice(0,-1)),p=!Ud.test(b?b.toLowerCase():"")}h=p}if(h)st(o,"complete"),st(o,"success");else{o.m=6;try{var R=2<Fe(o)?o.g.statusText:""}catch{R=""}o.l=R+" ["+o.Z()+"]",Nl(o)}}finally{Ds(o)}}}}function Ds(o,u){if(o.g){kl(o);const h=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||st(o,"ready");try{h.onreadystatechange=p}catch{}}}function kl(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function Fe(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<Fe(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),pe(u)}};function Ll(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function $d(o){const u={};o=(o.g&&2<=Fe(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(W(o[p]))continue;var h=A(o[p]);const b=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const R=u[b]||[];u[b]=R,R.push(h)}I(u,function(p){return p.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mr(o,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||u}function Fl(o){this.Aa=0,this.i=[],this.j=new Rr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Mr("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Mr("baseRetryDelayMs",5e3,o),this.cb=Mr("retryDelaySeedMs",1e4,o),this.Wa=Mr("forwardChannelMaxRetries",2,o),this.wa=Mr("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new vl(o&&o.concurrentRequestLimit),this.Da=new Fd,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Fl.prototype,e.la=8,e.G=1,e.connect=function(o,u,h,p){te(0),this.W=o,this.H=u||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=Kl(this,null,this.W),Ns(this)};function ao(o){if(Bl(o),o.G==3){var u=o.U++,h=Le(o.I);if(At(h,"SID",o.K),At(h,"RID",u),At(h,"TYPE","terminate"),kr(o,h),u=new Ye(o,o.j,u),u.L=2,u.v=Ps(Le(h)),h=!1,l.navigator&&l.navigator.sendBeacon)try{h=l.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&l.Image&&(new Image().src=u.v,h=!0),h||(u.g=Gl(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Cs(u)}Wl(o)}function Os(o){o.g&&(uo(o),o.g.cancel(),o.g=null)}function Bl(o){Os(o),o.u&&(l.clearTimeout(o.u),o.u=null),Ms(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Ns(o){if(!El(o.h)&&!o.s){o.s=!0;var u=o.Ga;yt||vn(),ft||(yt(),ft=!0),_e.add(u,o),o.B=0}}function qd(o,u){return Tl(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Sr(E(o.Ga,o,u),zl(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const b=new Ye(this,this.j,o);let R=this.o;if(this.S&&(R?(R=g(R),w(R,this.S)):R=this.S),this.m!==null||this.O||(b.H=R,R=null),this.P)t:{for(var u=0,h=0;h<this.i.length;h++){e:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(u+=p,4096<u){u=h;break t}if(u===4096||h===this.i.length-1){u=h+1;break t}}u=1e3}else u=1e3;u=jl(this,b,u),h=Le(this.I),At(h,"RID",o),At(h,"CVER",22),this.D&&At(h,"X-HTTP-Session-Id",this.D),kr(this,h),R&&(this.O?u="headers="+encodeURIComponent(String(Dl(R)))+"&"+u:this.m&&oo(h,this.m,R)),io(this.h,b),this.Ua&&At(h,"TYPE","init"),this.P?(At(h,"$req",u),At(h,"SID","null"),b.T=!0,eo(b,h,null)):eo(b,h,u),this.G=2}}else this.G==3&&(o?Ul(this,o):this.i.length==0||El(this.h)||Ul(this))};function Ul(o,u){var h;u?h=u.l:h=o.U++;const p=Le(o.I);At(p,"SID",o.K),At(p,"RID",h),At(p,"AID",o.T),kr(o,p),o.m&&o.o&&oo(p,o.m,o.o),h=new Ye(o,o.j,h,o.B+1),o.m===null&&(h.H=o.o),u&&(o.i=u.D.concat(o.i)),u=jl(o,h,1e3),h.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),io(o.h,h),eo(h,p,u)}function kr(o,u){o.H&&wt(o.H,function(h,p){At(u,p,h)}),o.l&&Al({},function(h,p){At(u,p,h)})}function jl(o,u,h){h=Math.min(o.i.length,h);var p=o.l?E(o.l.Na,o.l,o):null;t:{var b=o.i;let R=-1;for(;;){const U=["count="+h];R==-1?0<h?(R=b[0].g,U.push("ofs="+R)):R=0:U.push("ofs="+R);let Et=!0;for(let jt=0;jt<h;jt++){let dt=b[jt].g;const Kt=b[jt].map;if(dt-=R,0>dt)R=Math.max(0,b[jt].g-100),Et=!1;else try{Bd(Kt,U,"req"+dt+"_")}catch{p&&p(Kt)}}if(Et){p=U.join("&");break t}}}return o=o.i.splice(0,h),u.D=o,p}function $l(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;yt||vn(),ft||(yt(),ft=!0),_e.add(u,o),o.v=0}}function lo(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Sr(E(o.Fa,o),zl(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,ql(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Sr(E(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,te(10),Os(this),ql(this))};function uo(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function ql(o){o.g=new Ye(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=Le(o.qa);At(u,"RID","rpc"),At(u,"SID",o.K),At(u,"AID",o.T),At(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&At(u,"TO",o.ja),At(u,"TYPE","xmlhttp"),kr(o,u),o.m&&o.o&&oo(u,o.m,o.o),o.L&&(o.g.I=o.L);var h=o.g;o=o.ia,h.L=1,h.v=Ps(Le(u)),h.m=null,h.P=!0,gl(h,o)}e.Za=function(){this.C!=null&&(this.C=null,Os(this),lo(this),te(19))};function Ms(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Hl(o,u){var h=null;if(o.g==u){Ms(o),uo(o),o.g=null;var p=2}else if(so(o.h,u))h=u.D,wl(o.h,u),p=1;else return;if(o.G!=0){if(u.o)if(p==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var b=o.B;p=Is(),st(p,new fl(p,h)),Ns(o)}else $l(o);else if(b=u.s,b==3||b==0&&0<u.X||!(p==1&&qd(o,u)||p==2&&lo(o)))switch(h&&0<h.length&&(u=o.h,u.i=u.i.concat(h)),b){case 1:bn(o,5);break;case 4:bn(o,10);break;case 3:bn(o,6);break;default:bn(o,2)}}}function zl(o,u){let h=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(h*=2),h*u}function bn(o,u){if(o.j.info("Error code "+u),u==2){var h=E(o.fb,o),p=o.Xa;const b=!p;p=new An(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ss(p,"https"),Ps(p),b?kd(p.toString(),h):Ld(p.toString(),h)}else te(2);o.G=0,o.l&&o.l.sa(u),Wl(o),Bl(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),te(2)):(this.j.info("Failed to ping google.com"),te(1))};function Wl(o){if(o.G=0,o.ka=[],o.l){const u=Il(o.h);(u.length!=0||o.i.length!=0)&&(F(o.ka,u),F(o.ka,o.i),o.h.i.length=0,D(o.i),o.i.length=0),o.l.ra()}}function Kl(o,u,h){var p=h instanceof An?Le(h):new An(h);if(p.g!="")u&&(p.g=u+"."+p.g),Rs(p,p.s);else{var b=l.location;p=b.protocol,u=u?u+"."+b.hostname:b.hostname,b=+b.port;var R=new An(null);p&&Ss(R,p),u&&(R.g=u),b&&Rs(R,b),h&&(R.l=h),p=R}return h=o.D,u=o.ya,h&&u&&At(p,h,u),At(p,"VER",o.la),kr(o,p),p}function Gl(o,u,h){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new St(new Vs({eb:h})):new St(o.pa),u.Ha(o.J),u}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ql(){}e=Ql.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function ks(){}ks.prototype.g=function(o,u){return new ce(o,u)};function ce(o,u){X.call(this),this.g=new Fl(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!W(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!W(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new jn(this)}V(ce,X),ce.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ce.prototype.close=function(){ao(this.g)},ce.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.u&&(h={},h.__data__=Ut(o),o=h);u.i.push(new Cd(u.Ya++,o)),u.G==3&&Ns(u)},ce.prototype.N=function(){this.g.l=null,delete this.j,ao(this.g),delete this.g,ce.aa.N.call(this)};function Yl(o){Xi.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){t:{for(const h in u){o=h;break t}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}V(Yl,Xi);function Xl(){Ji.call(this),this.status=1}V(Xl,Ji);function jn(o){this.g=o}V(jn,Ql),jn.prototype.ua=function(){st(this.g,"a")},jn.prototype.ta=function(o){st(this.g,new Yl(o))},jn.prototype.sa=function(o){st(this.g,new Xl)},jn.prototype.ra=function(){st(this.g,"b")},ks.prototype.createWebChannel=ks.prototype.g,ce.prototype.send=ce.prototype.o,ce.prototype.open=ce.prototype.m,ce.prototype.close=ce.prototype.close,df=function(){return new ks},ff=function(){return Is()},hf=wn,Zo={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},As.NO_ERROR=0,As.TIMEOUT=8,As.HTTP_ERROR=6,Xs=As,dl.COMPLETE="complete",cf=dl,ll.EventType=br,br.OPEN="a",br.CLOSE="b",br.ERROR="c",br.MESSAGE="d",X.prototype.listen=X.prototype.K,$r=ll,St.prototype.listenOnce=St.prototype.L,St.prototype.getLastError=St.prototype.Ka,St.prototype.getLastErrorCode=St.prototype.Ba,St.prototype.getStatus=St.prototype.Z,St.prototype.getResponseJson=St.prototype.Oa,St.prototype.getResponseText=St.prototype.oa,St.prototype.send=St.prototype.ea,St.prototype.setWithCredentials=St.prototype.Ha,uf=St}).apply(typeof js<"u"?js:typeof self<"u"?self:typeof window<"u"?window:{});const $u="@firebase/firestore",qu="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yr="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kn=new ef("@firebase/firestore");function Gn(){return kn.logLevel}function H(e,...t){if(kn.logLevel<=ut.DEBUG){const n=t.map(Ua);kn.debug(`Firestore (${yr}): ${e}`,...n)}}function We(e,...t){if(kn.logLevel<=ut.ERROR){const n=t.map(Ua);kn.error(`Firestore (${yr}): ${e}`,...n)}}function cr(e,...t){if(kn.logLevel<=ut.WARN){const n=t.map(Ua);kn.warn(`Firestore (${yr}): ${e}`,...n)}}function Ua(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,pf(e,r,n)}function pf(e,t,n){let r=`FIRESTORE (${yr}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw We(r),new Error(r)}function Ct(e,t,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,e||pf(t,s,r)}function ct(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends _r{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Z_{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Yt.UNAUTHENTICATED))}shutdown(){}}class ty{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ey{constructor(t){this.t=t,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ct(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Nn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Nn,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;t.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Nn)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct(typeof r.accessToken=="string",31837,{l:r}),new mf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ct(t===null||typeof t=="string",2055,{h:t}),new Yt(t)}}class ny{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ry{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new ny(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Hu{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sy{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,k_(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Ct(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Hu(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Ct(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Hu(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=iy(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%62))}return r}}function ot(e,t){return e<t?-1:e>t?1:0}function ta(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return ot(r,s);{const i=gf(),a=ay(i.encode(zu(e,n)),i.encode(zu(t,n)));return a!==0?a:ot(r,s)}}n+=r>65535?2:1}return ot(e.length,t.length)}function zu(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function ay(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return ot(e[n],t[n]);return ot(e.length,t.length)}function hr(e,t,n){return e.length===t.length&&e.every((r,s)=>n(r,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu=-62135596800,Ku=1e6;class le{static now(){return le.fromMillis(Date.now())}static fromDate(t){return le.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*Ku);return new le(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new J(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Wu)throw new J(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new J(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ku}_compareTo(t){return this.seconds===t.seconds?ot(this.nanoseconds,t.nanoseconds):ot(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-Wu;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{static fromTimestamp(t){return new nt(t)}static min(){return new nt(new le(0,0))}static max(){return new nt(new le(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu="__name__";class Ce{constructor(t,n,r){n===void 0?n=0:n>t.length&&rt(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&rt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Ce.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Ce?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=Ce.compareSegments(t.get(s),n.get(s));if(i!==0)return i}return ot(t.length,n.length)}static compareSegments(t,n){const r=Ce.isNumericId(t),s=Ce.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ce.extractNumericId(t).compare(Ce.extractNumericId(n)):ta(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return un.fromString(t.substring(4,t.length-2))}}class Rt extends Ce{construct(t,n,r){return new Rt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new J(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Rt(n)}static emptyPath(){return new Rt([])}}const ly=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class se extends Ce{construct(t,n,r){return new se(t,n,r)}static isValidIdentifier(t){return ly.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),se.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Gu}static keyField(){return new se([Gu])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new J(j.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new J(j.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new J(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new J(j.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new se(n)}static emptyPath(){return new se([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(t){this.path=t}static fromPath(t){return new et(Rt.fromString(t))}static fromName(t){return new et(Rt.fromString(t).popFirst(5))}static empty(){return new et(Rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Rt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Rt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new et(new Rt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=-1;function uy(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=nt.fromTimestamp(r===1e9?new le(n+1,0):new le(n,r));return new fn(s,et.empty(),t)}function cy(e){return new fn(e.readTime,e.key,us)}class fn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new fn(nt.min(),et.empty(),us)}static max(){return new fn(nt.max(),et.empty(),us)}}function hy(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=et.comparator(e.documentKey,t.documentKey),n!==0?n:ot(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dy{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ki(e){if(e.code!==j.FAILED_PRECONDITION||e.message!==fy)throw e;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&rt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new x((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof x?n:x.resolve(n)}catch(n){return x.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):x.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):x.reject(n)}static resolve(t){return new x((n,r)=>{n(t)})}static reject(t){return new x((n,r)=>{r(t)})}static waitFor(t){return new x((n,r)=>{let s=0,i=0,a=!1;t.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(t){let n=x.resolve(!1);for(const r of t)n=n.next(s=>s?x.resolve(s):r());return n}static forEach(t,n){const r=[];return t.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(t,n){return new x((r,s)=>{const i=t.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const f=c;n(t[f]).next(d=>{a[f]=d,++l,l===i&&r(a)},d=>s(d))}})}static doWhile(t,n){return new x((r,s)=>{const i=()=>{t()===!0?n().next(()=>{i()},s):r()};i()})}}function py(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function vr(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}Li.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my=-1;function Fi(e){return e==null}function ea(e){return e===0&&1/e==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f="";function gy(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Qu(t)),t=_y(e.get(n),t);return Qu(t)}function _y(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const i=e.charAt(s);switch(i){case"\0":n+="";break;case _f:n+="";break;default:n+=i}}return n}function Qu(e){return e+_f+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function _s(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function yy(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(t,n){this.comparator=t,this.root=n||$t.EMPTY}insert(t,n){return new Vt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(t){return new Vt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,$t.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new $s(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new $s(this.root,t,this.comparator,!1)}getReverseIterator(){return new $s(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new $s(this.root,t,this.comparator,!0)}}class $s{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class $t{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??$t.RED,this.left=s??$t.EMPTY,this.right=i??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new $t(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return $t.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw rt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw rt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw rt(27949);return t+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw rt(57766)}get value(){throw rt(16141)}get color(){throw rt(16727)}get left(){throw rt(29726)}get right(){throw rt(36894)}copy(t,n,r,s,i){return this}insert(t,n,r){return new $t(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(t){this.comparator=t,this.data=new Vt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xu(this.data.getIterator())}getIteratorFrom(t){return new Xu(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof kt)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new kt(this.comparator);return n.data=t,n}}class Xu{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(t){this.fields=t,t.sort(se.comparator)}static empty(){return new nn([])}unionWith(t){let n=new kt(se.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new nn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return hr(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new yf("Invalid base64 string: "+i):i}}(t);return new Ht(n)}static fromUint8Array(t){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(t);return new Ht(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ot(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ht.EMPTY_BYTE_STRING=new Ht("");const vy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dn(e){if(Ct(!!e,39018),typeof e=="string"){let t=0;const n=vy.exec(e);if(Ct(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Pt(e.seconds),nanos:Pt(e.nanos)}}function Pt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function pn(e){return typeof e=="string"?Ht.fromBase64String(e):Ht.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf="server_timestamp",Ef="__type__",Tf="__previous_value__",wf="__local_write_time__";function ja(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Ef])===null||n===void 0?void 0:n.stringValue)===vf}function Bi(e){const t=e.mapValue.fields[Tf];return ja(t)?Bi(t):t}function cs(e){const t=dn(e.mapValue.fields[wf].timestampValue);return new le(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(t,n,r,s,i,a,l,c,f,d){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=d}}const gi="(default)";class hs{constructor(t,n){this.projectId=t,this.database=n||gi}static empty(){return new hs("","")}get isDefaultDatabase(){return this.database===gi}isEqual(t){return t instanceof hs&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="__type__",wy="__max__",qs={mapValue:{}},Iy="__vector__",na="value";function mn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ja(e)?4:by(e)?9007199254740991:Ay(e)?10:11:rt(28295,{value:e})}function Oe(e,t){if(e===t)return!0;const n=mn(e);if(n!==mn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return cs(e).isEqual(cs(t));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=dn(s.timestampValue),l=dn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,i){return pn(s.bytesValue).isEqual(pn(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,i){return Pt(s.geoPointValue.latitude)===Pt(i.geoPointValue.latitude)&&Pt(s.geoPointValue.longitude)===Pt(i.geoPointValue.longitude)}(e,t);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Pt(s.integerValue)===Pt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Pt(s.doubleValue),l=Pt(i.doubleValue);return a===l?ea(a)===ea(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return hr(e.arrayValue.values||[],t.arrayValue.values||[],Oe);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Yu(a)!==Yu(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!Oe(a[c],l[c])))return!1;return!0}(e,t);default:return rt(52216,{left:e})}}function fs(e,t){return(e.values||[]).find(n=>Oe(n,t))!==void 0}function fr(e,t){if(e===t)return 0;const n=mn(e),r=mn(t);if(n!==r)return ot(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ot(e.booleanValue,t.booleanValue);case 2:return function(i,a){const l=Pt(i.integerValue||i.doubleValue),c=Pt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(e,t);case 3:return Ju(e.timestampValue,t.timestampValue);case 4:return Ju(cs(e),cs(t));case 5:return ta(e.stringValue,t.stringValue);case 6:return function(i,a){const l=pn(i),c=pn(a);return l.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let f=0;f<l.length&&f<c.length;f++){const d=ot(l[f],c[f]);if(d!==0)return d}return ot(l.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,a){const l=ot(Pt(i.latitude),Pt(a.latitude));return l!==0?l:ot(Pt(i.longitude),Pt(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Zu(e.arrayValue,t.arrayValue);case 10:return function(i,a){var l,c,f,d;const m=i.fields||{},E=a.fields||{},S=(l=m[na])===null||l===void 0?void 0:l.arrayValue,V=(c=E[na])===null||c===void 0?void 0:c.arrayValue,D=ot(((f=S==null?void 0:S.values)===null||f===void 0?void 0:f.length)||0,((d=V==null?void 0:V.values)===null||d===void 0?void 0:d.length)||0);return D!==0?D:Zu(S,V)}(e.mapValue,t.mapValue);case 11:return function(i,a){if(i===qs.mapValue&&a===qs.mapValue)return 0;if(i===qs.mapValue)return 1;if(a===qs.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),f=a.fields||{},d=Object.keys(f);c.sort(),d.sort();for(let m=0;m<c.length&&m<d.length;++m){const E=ta(c[m],d[m]);if(E!==0)return E;const S=fr(l[c[m]],f[d[m]]);if(S!==0)return S}return ot(c.length,d.length)}(e.mapValue,t.mapValue);default:throw rt(23264,{Pe:n})}}function Ju(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ot(e,t);const n=dn(e),r=dn(t),s=ot(n.seconds,r.seconds);return s!==0?s:ot(n.nanos,r.nanos)}function Zu(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=fr(n[s],r[s]);if(i)return i}return ot(n.length,r.length)}function dr(e){return ra(e)}function ra(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=dn(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return pn(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return et.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ra(i);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${ra(n.fields[a])}`;return s+"}"}(e.mapValue):rt(61005,{value:e})}function Js(e){switch(mn(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Bi(e);return t?16+Js(t):16;case 5:return 2*e.stringValue.length;case 6:return pn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Js(i),0)}(e.arrayValue);case 10:case 11:return function(r){let s=0;return _s(r.fields,(i,a)=>{s+=i.length+Js(a)}),s}(e.mapValue);default:throw rt(13486,{value:e})}}function sa(e){return!!e&&"integerValue"in e}function $a(e){return!!e&&"arrayValue"in e}function tc(e){return!!e&&"nullValue"in e}function ec(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Po(e){return!!e&&"mapValue"in e}function Ay(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Ty])===null||n===void 0?void 0:n.stringValue)===Iy}function Jr(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return _s(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Jr(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Jr(e.arrayValue.values[n]);return t}return Object.assign({},e)}function by(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===wy}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(t){this.value=t}static empty(){return new Re({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Po(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Jr(n)}setAll(t){let n=se.emptyPath(),r={},s=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Jr(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());Po(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Oe(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];Po(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){_s(n,(s,i)=>t[s]=i);for(const s of r)delete t[s]}clone(){return new Re(Jr(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(t,n,r,s,i,a,l){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(t){return new Jt(t,0,nt.min(),nt.min(),nt.min(),Re.empty(),0)}static newFoundDocument(t,n,r,s){return new Jt(t,1,n,nt.min(),r,s,0)}static newNoDocument(t,n){return new Jt(t,2,n,nt.min(),nt.min(),Re.empty(),0)}static newUnknownDocument(t,n){return new Jt(t,3,n,nt.min(),nt.min(),Re.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Re.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Re.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Jt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(t,n){this.position=t,this.inclusive=n}}function nc(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(i.field.isKeyField()?r=et.comparator(et.fromName(a.referenceValue),n.key):r=fr(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function rc(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Oe(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(t,n="asc"){this.field=t,this.dir=n}}function Cy(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{}class Mt extends If{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new Ry(t,n,r):n==="array-contains"?new xy(t,r):n==="in"?new Dy(t,r):n==="not-in"?new Oy(t,r):n==="array-contains-any"?new Ny(t,r):new Mt(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new Py(t,r):new Vy(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(fr(n,this.value)):n!==null&&mn(this.value)===mn(n)&&this.matchesComparison(fr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return rt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ne extends If{constructor(t,n){super(),this.filters=t,this.op=n,this.Te=null}static create(t,n){return new Ne(t,n)}matches(t){return Af(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Af(e){return e.op==="and"}function bf(e){return Sy(e)&&Af(e)}function Sy(e){for(const t of e.filters)if(t instanceof Ne)return!1;return!0}function ia(e){if(e instanceof Mt)return e.field.canonicalString()+e.op.toString()+dr(e.value);if(bf(e))return e.filters.map(t=>ia(t)).join(",");{const t=e.filters.map(n=>ia(n)).join(",");return`${e.op}(${t})`}}function Cf(e,t){return e instanceof Mt?function(r,s){return s instanceof Mt&&r.op===s.op&&r.field.isEqual(s.field)&&Oe(r.value,s.value)}(e,t):e instanceof Ne?function(r,s){return s instanceof Ne&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&Cf(a,s.filters[l]),!0):!1}(e,t):void rt(19439)}function Sf(e){return e instanceof Mt?function(n){return`${n.field.canonicalString()} ${n.op} ${dr(n.value)}`}(e):e instanceof Ne?function(n){return n.op.toString()+" {"+n.getFilters().map(Sf).join(" ,")+"}"}(e):"Filter"}class Ry extends Mt{constructor(t,n,r){super(t,n,r),this.key=et.fromName(r.referenceValue)}matches(t){const n=et.comparator(t.key,this.key);return this.matchesComparison(n)}}class Py extends Mt{constructor(t,n){super(t,"in",n),this.keys=Rf("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class Vy extends Mt{constructor(t,n){super(t,"not-in",n),this.keys=Rf("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Rf(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>et.fromName(r.referenceValue))}class xy extends Mt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return $a(n)&&fs(n.arrayValue,this.value)}}class Dy extends Mt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&fs(this.value.arrayValue,n)}}class Oy extends Mt{constructor(t,n){super(t,"not-in",n)}matches(t){if(fs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!fs(this.value.arrayValue,n)}}class Ny extends Mt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!$a(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>fs(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(t,n=null,r=[],s=[],i=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Ie=null}}function sc(e,t=null,n=[],r=[],s=null,i=null,a=null){return new My(e,t,n,r,s,i,a)}function qa(e){const t=ct(e);if(t.Ie===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>ia(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Fi(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>dr(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>dr(r)).join(",")),t.Ie=n}return t.Ie}function Ha(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Cy(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Cf(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!rc(e.startAt,t.startAt)&&rc(e.endAt,t.endAt)}function oa(e){return et.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(t,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function ky(e,t,n,r,s,i,a,l){return new Ui(e,t,n,r,s,i,a,l)}function Pf(e){return new Ui(e)}function ic(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Ly(e){return e.collectionGroup!==null}function Zr(e){const t=ct(e);if(t.Ee===null){t.Ee=[];const n=new Set;for(const i of t.explicitOrderBy)t.Ee.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new kt(se.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(t).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||t.Ee.push(new yi(i,r))}),n.has(se.keyField().canonicalString())||t.Ee.push(new yi(se.keyField(),r))}return t.Ee}function Ve(e){const t=ct(e);return t.de||(t.de=Fy(t,Zr(e))),t.de}function Fy(e,t){if(e.limitType==="F")return sc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new yi(s.field,i)});const n=e.endAt?new _i(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new _i(e.startAt.position,e.startAt.inclusive):null;return sc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function aa(e,t,n){return new Ui(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ji(e,t){return Ha(Ve(e),Ve(t))&&e.limitType===t.limitType}function Vf(e){return`${qa(Ve(e))}|lt:${e.limitType}`}function Qn(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Sf(s)).join(", ")}]`),Fi(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>dr(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>dr(s)).join(",")),`Target(${r})`}(Ve(e))}; limitType=${e.limitType})`}function $i(e,t){return t.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):et.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(e,t)&&function(r,s){for(const i of Zr(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(e,t)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(e,t)&&function(r,s){return!(r.startAt&&!function(a,l,c){const f=nc(a,l,c);return a.inclusive?f<=0:f<0}(r.startAt,Zr(r),s)||r.endAt&&!function(a,l,c){const f=nc(a,l,c);return a.inclusive?f>=0:f>0}(r.endAt,Zr(r),s))}(e,t)}function By(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function xf(e){return(t,n)=>{let r=!1;for(const s of Zr(e)){const i=Uy(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Uy(e,t,n){const r=e.field.isKeyField()?et.comparator(t.key,n.key):function(i,a,l){const c=a.data.field(i),f=l.data.field(i);return c!==null&&f!==null?fr(c,f):rt(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return rt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){_s(this.inner,(n,r)=>{for(const[s,i]of r)t(s,i)})}isEmpty(){return yy(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy=new Vt(et.comparator);function gn(){return jy}const Df=new Vt(et.comparator);function qr(...e){let t=Df;for(const n of e)t=t.insert(n.key,n);return t}function $y(e){let t=Df;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Dn(){return ts()}function Of(){return ts()}function ts(){return new Fn(e=>e.toString(),(e,t)=>e.isEqual(t))}const qy=new kt(et.comparator);function ht(...e){let t=qy;for(const n of e)t=t.add(n);return t}const Hy=new kt(ot);function zy(){return Hy}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ea(t)?"-0":t}}function Ky(e){return{integerValue:""+e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(){this._=void 0}}function Gy(e,t,n){return e instanceof la?function(s,i){const a={fields:{[Ef]:{stringValue:vf},[wf]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&ja(i)&&(i=Bi(i)),i&&(a.fields[Tf]=i),{mapValue:a}}(n,t):e instanceof vi?Nf(e,t):e instanceof Ei?Mf(e,t):function(s,i){const a=Yy(s,i),l=oc(a)+oc(s.Re);return sa(a)&&sa(s.Re)?Ky(l):Wy(s.serializer,l)}(e,t)}function Qy(e,t,n){return e instanceof vi?Nf(e,t):e instanceof Ei?Mf(e,t):n}function Yy(e,t){return e instanceof ua?function(r){return sa(r)||function(i){return!!i&&"doubleValue"in i}(r)}(t)?t:{integerValue:0}:null}class la extends qi{}class vi extends qi{constructor(t){super(),this.elements=t}}function Nf(e,t){const n=kf(t);for(const r of e.elements)n.some(s=>Oe(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ei extends qi{constructor(t){super(),this.elements=t}}function Mf(e,t){let n=kf(t);for(const r of e.elements)n=n.filter(s=>!Oe(s,r));return{arrayValue:{values:n}}}class ua extends qi{constructor(t,n){super(),this.serializer=t,this.Re=n}}function oc(e){return Pt(e.integerValue||e.doubleValue)}function kf(e){return $a(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function Xy(e,t){return e.field.isEqual(t.field)&&function(r,s){return r instanceof vi&&s instanceof vi||r instanceof Ei&&s instanceof Ei?hr(r.elements,s.elements,Oe):r instanceof ua&&s instanceof ua?Oe(r.Re,s.Re):r instanceof la&&s instanceof la}(e.transform,t.transform)}class Mn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Mn}static exists(t){return new Mn(void 0,t)}static updateTime(t){return new Mn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Zs(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class za{}function Lf(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Zy(e.key,Mn.none()):new Wa(e.key,e.data,Mn.none());{const n=e.data,r=Re.empty();let s=new kt(se.comparator);for(let i of t.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Hi(e.key,r,new nn(s.toArray()),Mn.none())}}function Jy(e,t,n){e instanceof Wa?function(s,i,a){const l=s.value.clone(),c=lc(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof Hi?function(s,i,a){if(!Zs(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=lc(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(Ff(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(e,t,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function es(e,t,n,r){return e instanceof Wa?function(i,a,l,c){if(!Zs(i.precondition,a))return l;const f=i.value.clone(),d=uc(i.fieldTransforms,c,a);return f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(e,t,n,r):e instanceof Hi?function(i,a,l,c){if(!Zs(i.precondition,a))return l;const f=uc(i.fieldTransforms,c,a),d=a.data;return d.setAll(Ff(i)),d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(e,t,n,r):function(i,a,l){return Zs(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function ac(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&hr(r,s,(i,a)=>Xy(i,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Wa extends za{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Hi extends za{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ff(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function lc(e,t,n){const r=new Map;Ct(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,l=t.data.field(i.field);r.set(i.field,Qy(a,l,n[s]))}return r}function uc(e,t,n){const r=new Map;for(const s of e){const i=s.transform,a=n.data.field(s.field);r.set(s.field,Gy(i,a,t))}return r}class Zy extends za{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&Jy(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=es(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=es(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Of();return this.mutations.forEach(s=>{const i=t.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=Lf(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(nt.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ht())}isEqual(t){return this.batchId===t.batchId&&hr(this.mutations,t.mutations,(n,r)=>ac(n,r))&&hr(this.baseMutations,t.baseMutations,(n,r)=>ac(n,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,lt;function Bf(e){if(e===void 0)return We("GRPC error has no .code"),j.UNKNOWN;switch(e){case xt.OK:return j.OK;case xt.CANCELLED:return j.CANCELLED;case xt.UNKNOWN:return j.UNKNOWN;case xt.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case xt.INTERNAL:return j.INTERNAL;case xt.UNAVAILABLE:return j.UNAVAILABLE;case xt.UNAUTHENTICATED:return j.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case xt.NOT_FOUND:return j.NOT_FOUND;case xt.ALREADY_EXISTS:return j.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return j.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case xt.ABORTED:return j.ABORTED;case xt.OUT_OF_RANGE:return j.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return j.UNIMPLEMENTED;case xt.DATA_LOSS:return j.DATA_LOSS;default:return rt(39323,{code:e})}}(lt=xt||(xt={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv=new un([4294967295,4294967295],0);function cc(e){const t=gf().encode(e),n=new lf;return n.update(t),new Uint8Array(n.digest())}function hc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new un([n,r],0),new un([s,i],0)]}class Ka{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Hr(`Invalid padding: ${n}`);if(r<0)throw new Hr(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Hr(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Hr(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*t.length-n,this.ye=un.fromNumber(this.pe)}we(t,n,r){let s=t.add(n.multiply(un.fromNumber(r)));return s.compare(rv)===1&&(s=new un([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const n=cc(t),[r,s]=hc(n);for(let i=0;i<this.hashCount;i++){const a=this.we(r,s,i);if(!this.be(a))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),a=new Ka(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(t){if(this.pe===0)return;const n=cc(t),[r,s]=hc(n);for(let i=0;i<this.hashCount;i++){const a=this.we(r,s,i);this.Se(a)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Hr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,ys.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new zi(nt.min(),s,new Vt(ot),gn(),ht())}}class ys{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new ys(r,n,ht(),ht(),ht())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(t,n,r,s){this.De=t,this.removedTargetIds=n,this.key=r,this.ve=s}}class Uf{constructor(t,n){this.targetId=t,this.Ce=n}}class jf{constructor(t,n,r=Ht.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class fc{constructor(){this.Fe=0,this.Me=dc(),this.xe=Ht.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=ht(),n=ht(),r=ht();return this.Me.forEach((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:rt(38017,{changeType:i})}}),new ys(this.xe,this.Oe,t,n,r)}Qe(){this.Ne=!1,this.Me=dc()}$e(t,n){this.Ne=!0,this.Me=this.Me.insert(t,n)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ct(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class sv{constructor(t){this.ze=t,this.je=new Map,this.He=gn(),this.Je=Hs(),this.Ye=Hs(),this.Ze=new Vt(ot)}Xe(t){for(const n of t.De)t.ve&&t.ve.isFoundDocument()?this.et(n,t.ve):this.tt(n,t.key,t.ve);for(const n of t.removedTargetIds)this.tt(n,t.key,t.ve)}nt(t){this.forEachTarget(t,n=>{const r=this.rt(n);switch(t.state){case 0:this.it(n)&&r.ke(t.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(t.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(t.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(t.resumeToken));break;default:rt(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(t){const n=t.targetId,r=t.Ce.count,s=this._t(n);if(s){const i=s.target;if(oa(i))if(r===0){const a=new et(i.path);this.tt(n,a,Jt.newNoDocument(a,nt.min()))}else Ct(r===1,20013,{expectedCount:r});else{const a=this.ut(n);if(a!==r){const l=this.ct(t),c=l?this.lt(l,t,a):1;if(c!==0){this.st(n);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,f)}}}}}ct(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=pn(r).toUint8Array()}catch(c){if(c instanceof yf)return cr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Ka(a,s,i)}catch(c){return cr(c instanceof Hr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.pe===0?null:l}lt(t,n,r){return n.Ce.count===r-this.Tt(t,n.targetId)?0:2}Tt(t,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.ze.Pt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.tt(n,i,null),s++)}),s}It(t){const n=new Map;this.je.forEach((i,a)=>{const l=this._t(a);if(l){if(i.current&&oa(l.target)){const c=new et(l.target.path);this.Et(c).has(a)||this.dt(a,c)||this.tt(a,c,Jt.newNoDocument(c,t))}i.Le&&(n.set(a,i.qe()),i.Qe())}});let r=ht();this.Ye.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const f=this._t(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.He.forEach((i,a)=>a.setReadTime(t));const s=new zi(t,n,this.Ze,this.He,r);return this.He=gn(),this.Je=Hs(),this.Ye=Hs(),this.Ze=new Vt(ot),s}et(t,n){if(!this.it(t))return;const r=this.dt(t,n.key)?2:0;this.rt(t).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(t)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(t))}tt(t,n,r){if(!this.it(t))return;const s=this.rt(t);this.dt(t,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(t)),this.Ye=this.Ye.insert(n,this.At(n).add(t)),r&&(this.He=this.He.insert(n,r))}removeTarget(t){this.je.delete(t)}ut(t){const n=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let n=this.je.get(t);return n||(n=new fc,this.je.set(t,n)),n}At(t){let n=this.Ye.get(t);return n||(n=new kt(ot),this.Ye=this.Ye.insert(t,n)),n}Et(t){let n=this.Je.get(t);return n||(n=new kt(ot),this.Je=this.Je.insert(t,n)),n}it(t){const n=this._t(t)!==null;return n||H("WatchChangeAggregator","Detected inactive target",t),n}_t(t){const n=this.je.get(t);return n&&n.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new fc),this.ze.getRemoteKeysForTarget(t).forEach(n=>{this.tt(t,n,null)})}dt(t,n){return this.ze.getRemoteKeysForTarget(t).has(n)}}function Hs(){return new Vt(et.comparator)}function dc(){return new Vt(et.comparator)}const iv={asc:"ASCENDING",desc:"DESCENDING"},ov={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},av={and:"AND",or:"OR"};class lv{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function ca(e,t){return e.useProto3Json||Fi(t)?t:{value:t}}function uv(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function cv(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ir(e){return Ct(!!e,49232),nt.fromTimestamp(function(n){const r=dn(n);return new le(r.seconds,r.nanos)}(e))}function hv(e,t){return ha(e,t).canonicalString()}function ha(e,t){const n=function(s){return new Rt(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function $f(e){const t=Rt.fromString(e);return Ct(Kf(t),10190,{key:t.toString()}),t}function Vo(e,t){const n=$f(t);if(n.get(1)!==e.databaseId.projectId)throw new J(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new J(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new et(Hf(n))}function qf(e,t){return hv(e.databaseId,t)}function fv(e){const t=$f(e);return t.length===4?Rt.emptyPath():Hf(t)}function pc(e){return new Rt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Hf(e){return Ct(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function dv(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:rt(39313,{state:f})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(f,d){return f.useProto3Json?(Ct(d===void 0||typeof d=="string",58123),Ht.fromBase64String(d||"")):(Ct(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Ht.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(f){const d=f.code===void 0?j.UNKNOWN:Bf(f.code);return new J(d,f.message||"")}(a);n=new jf(r,s,i,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Vo(e,r.document.name),i=ir(r.document.updateTime),a=r.document.createTime?ir(r.document.createTime):nt.min(),l=new Re({mapValue:{fields:r.document.fields}}),c=Jt.newFoundDocument(s,i,a,l),f=r.targetIds||[],d=r.removedTargetIds||[];n=new ti(f,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Vo(e,r.document),i=r.readTime?ir(r.readTime):nt.min(),a=Jt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new ti([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Vo(e,r.document),i=r.removedTargetIds||[];n=new ti([],i,s,null)}else{if(!("filter"in t))return rt(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new nv(s,i),l=r.targetId;n=new Uf(l,a)}}return n}function pv(e,t){return{documents:[qf(e,t.path)]}}function mv(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=qf(e,s);const i=function(f){if(f.length!==0)return Wf(Ne.create(f,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(f){if(f.length!==0)return f.map(d=>function(E){return{field:Yn(E.field),direction:yv(E.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=ca(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(t.endAt)),{gt:n,parent:s}}function gv(e){let t=fv(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ct(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let i=[];n.where&&(i=function(m){const E=zf(m);return E instanceof Ne&&bf(E)?E.getFilters():[E]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(E=>function(V){return new yi(Xn(V.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(E))}(n.orderBy));let l=null;n.limit&&(l=function(m){let E;return E=typeof m=="object"?m.value:m,Fi(E)?null:E}(n.limit));let c=null;n.startAt&&(c=function(m){const E=!!m.before,S=m.values||[];return new _i(S,E)}(n.startAt));let f=null;return n.endAt&&(f=function(m){const E=!m.before,S=m.values||[];return new _i(S,E)}(n.endAt)),ky(t,s,a,i,l,"F",c,f)}function _v(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rt(28987,{purpose:s})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function zf(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Xn(n.unaryFilter.field);return Mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Xn(n.unaryFilter.field);return Mt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Xn(n.unaryFilter.field);return Mt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Xn(n.unaryFilter.field);return Mt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return rt(61313);default:return rt(60726)}}(e):e.fieldFilter!==void 0?function(n){return Mt.create(Xn(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return rt(58110);default:return rt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Ne.create(n.compositeFilter.filters.map(r=>zf(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return rt(1026)}}(n.compositeFilter.op))}(e):rt(30097,{filter:e})}function yv(e){return iv[e]}function vv(e){return ov[e]}function Ev(e){return av[e]}function Yn(e){return{fieldPath:e.canonicalString()}}function Xn(e){return se.fromServerFormat(e.fieldPath)}function Wf(e){return e instanceof Mt?function(n){if(n.op==="=="){if(ec(n.value))return{unaryFilter:{field:Yn(n.field),op:"IS_NAN"}};if(tc(n.value))return{unaryFilter:{field:Yn(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ec(n.value))return{unaryFilter:{field:Yn(n.field),op:"IS_NOT_NAN"}};if(tc(n.value))return{unaryFilter:{field:Yn(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yn(n.field),op:vv(n.op),value:n.value}}}(e):e instanceof Ne?function(n){const r=n.getFilters().map(s=>Wf(s));return r.length===1?r[0]:{compositeFilter:{op:Ev(n.op),filters:r}}}(e):rt(54877,{filter:e})}function Kf(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(t,n,r,s,i=nt.min(),a=nt.min(),l=Ht.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new rn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new rn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new rn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new rn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(t){this.wt=t}}function wv(e){const t=gv({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?aa(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(){this.Cn=new Av}addToCollectionParentIndex(t,n){return this.Cn.add(n),x.resolve()}getCollectionParents(t,n){return x.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return x.resolve()}deleteFieldIndex(t,n){return x.resolve()}deleteAllFieldIndexes(t){return x.resolve()}createTargetIndexes(t,n){return x.resolve()}getDocumentsMatchingTarget(t,n){return x.resolve(null)}getIndexType(t,n){return x.resolve(0)}getFieldIndexes(t,n){return x.resolve([])}getNextCollectionGroupToUpdate(t){return x.resolve(null)}getMinOffset(t,n){return x.resolve(fn.min())}getMinOffsetFromCollectionGroup(t,n){return x.resolve(fn.min())}updateCollectionGroup(t,n,r){return x.resolve()}updateIndexEntries(t,n){return x.resolve()}}class Av{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new kt(Rt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new kt(Rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Gf=41943040;class ae{static withCacheSize(t){return new ae(t,ae.DEFAULT_COLLECTION_PERCENTILE,ae.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ae.DEFAULT_COLLECTION_PERCENTILE=10,ae.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ae.DEFAULT=new ae(Gf,ae.DEFAULT_COLLECTION_PERCENTILE,ae.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ae.DISABLED=new ae(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new pr(0)}static lr(){return new pr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc="LruGarbageCollector",bv=1048576;function _c([e,t],[n,r]){const s=ot(e,n);return s===0?ot(t,r):s}class Cv{constructor(t){this.Er=t,this.buffer=new kt(_c),this.dr=0}Ar(){return++this.dr}Rr(t){const n=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();_c(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Sv{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){H(gc,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){vr(n)?H(gc,"Ignoring IndexedDB error during garbage collection: ",n):await ki(n)}await this.mr(3e5)})}}class Rv{constructor(t,n){this.gr=t,this.params=n}calculateTargetCount(t,n){return this.gr.pr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return x.resolve(Li.le);const r=new Cv(n);return this.gr.forEachTarget(t,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(t,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.gr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.gr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(mc)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mc):this.wr(t,n))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,n){let r,s,i,a,l,c,f;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(t,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(t,r,n))).next(m=>(i=m,c=Date.now(),this.removeOrphanedDocuments(t,r))).next(m=>(f=Date.now(),Gn()<=ut.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(f-c)+`ms
Total Duration: ${f-d}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function Pv(e,t){return new Rv(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(){this.changes=new Fn(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Jt.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(r!==null&&es(r.mutation,s,nn.empty(),le.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,ht()).next(()=>r))}getLocalViewOfDocuments(t,n,r=ht()){const s=Dn();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,r).next(i=>{let a=qr();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const r=Dn();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,ht()))}populateOverlays(t,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(t,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,r,s){let i=gn();const a=ts(),l=function(){return ts()}();return n.forEach((c,f)=>{const d=r.get(f.key);s.has(f.key)&&(d===void 0||d.mutation instanceof Hi)?i=i.insert(f.key,f):d!==void 0?(a.set(f.key,d.mutation.getFieldMask()),es(d.mutation,f,d.mutation.getFieldMask(),le.now())):a.set(f.key,nn.empty())}),this.recalculateAndSaveOverlays(t,i).next(c=>(c.forEach((f,d)=>a.set(f,d)),n.forEach((f,d)=>{var m;return l.set(f,new xv(d,(m=a.get(f))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(t,n){const r=ts();let s=new Vt((a,l)=>a-l),i=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const f=n.get(c);if(f===null)return;let d=r.get(c)||nn.empty();d=l.applyToLocalView(f,d),r.set(c,d);const m=(s.get(l.batchId)||ht()).add(c);s=s.insert(l.batchId,m)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),f=c.key,d=c.value,m=Of();d.forEach(E=>{if(!i.has(E)){const S=Lf(n.get(E),r.get(E));S!==null&&m.set(E,S),i=i.add(E)}}),a.push(this.documentOverlayCache.saveOverlays(t,f,m))}return x.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,s){return function(a){return et.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Ly(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):x.resolve(Dn());let l=us,c=i;return a.next(f=>x.forEach(f,(d,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(d)?x.resolve():this.remoteDocumentCache.getEntry(t,d).next(E=>{c=c.insert(d,E)}))).next(()=>this.populateOverlays(t,f,i)).next(()=>this.computeViews(t,c,f,ht())).next(d=>({batchId:l,changes:$y(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new et(n)).next(r=>{let s=qr();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let a=qr();return this.indexManager.getCollectionParents(t,i).next(l=>x.forEach(l,c=>{const f=function(m,E){return new Ui(E,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,f,r,s).next(d=>{d.forEach((m,E)=>{a=a.insert(m,E)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s))).next(a=>{i.forEach((c,f)=>{const d=f.getKey();a.get(d)===null&&(a=a.insert(d,Jt.newInvalidDocument(d)))});let l=qr();return a.forEach((c,f)=>{const d=i.get(c);d!==void 0&&es(d.mutation,f,nn.empty(),le.now()),$i(n,f)&&(l=l.insert(c,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,n){return x.resolve(this.kr.get(n))}saveBundleMetadata(t,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ir(s.createTime)}}(n)),x.resolve()}getNamedQuery(t,n){return x.resolve(this.qr.get(n))}saveNamedQuery(t,n){return this.qr.set(n.name,function(s){return{name:s.name,query:wv(s.bundledQuery),readTime:ir(s.readTime)}}(n)),x.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(){this.overlays=new Vt(et.comparator),this.Qr=new Map}getOverlay(t,n){return x.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Dn();return x.forEach(n,s=>this.getOverlay(t,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((s,i)=>{this.St(t,n,i)}),x.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(r)),x.resolve()}getOverlaysForCollection(t,n,r){const s=Dn(),i=n.length+1,a=new et(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,f=c.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return x.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new Vt((f,d)=>f-d);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let d=i.get(f.largestBatchId);d===null&&(d=Dn(),i=i.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const l=Dn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,d)=>l.set(f,d)),!(l.size()>=s)););return x.resolve(l)}St(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new ev(n,r));let i=this.Qr.get(n);i===void 0&&(i=ht(),this.Qr.set(n,i)),this.Qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(){this.sessionToken=Ht.EMPTY_BYTE_STRING}getSessionToken(t){return x.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,x.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.$r=new kt(Lt.Ur),this.Kr=new kt(Lt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,n){const r=new Lt(t,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.zr(new Lt(t,n))}jr(t,n){t.forEach(r=>this.removeReference(r,n))}Hr(t){const n=new et(new Rt([])),r=new Lt(n,t),s=new Lt(n,t+1),i=[];return this.Kr.forEachInRange([r,s],a=>{this.zr(a),i.push(a.key)}),i}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const n=new et(new Rt([])),r=new Lt(n,t),s=new Lt(n,t+1);let i=ht();return this.Kr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(t){const n=new Lt(t,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Lt{constructor(t,n){this.key=t,this.Zr=n}static Ur(t,n){return et.comparator(t.key,n.key)||ot(t.Zr,n.Zr)}static Wr(t,n){return ot(t.Zr,n.Zr)||et.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new kt(Lt.Ur)}checkEmpty(t){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new tv(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Xr=this.Xr.add(new Lt(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return x.resolve(a)}lookupMutationBatch(t,n){return x.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.ti(r),i=s<0?0:s;return x.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?my:this.nr-1)}getAllMutationBatches(t){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Lt(n,0),s=new Lt(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([r,s],a=>{const l=this.ei(a.Zr);i.push(l)}),x.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new kt(ot);return n.forEach(s=>{const i=new Lt(s,0),a=new Lt(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,a],l=>{r=r.add(l.Zr)})}),x.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;et.isDocumentKey(i)||(i=i.child(""));const a=new Lt(new et(i),0);let l=new kt(ot);return this.Xr.forEachWhile(c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(l=l.add(c.Zr)),!0)},a),x.resolve(this.ni(l))}ni(t){const n=[];return t.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){Ct(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return x.forEach(n.mutations,s=>{const i=new Lt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Xr=r})}sr(t){}containsKey(t,n){const r=new Lt(n,0),s=this.Xr.firstAfterOrEqual(r);return x.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,x.resolve()}ri(t,n){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const n=this.ti(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(t){this.ii=t,this.docs=function(){return new Vt(et.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():Jt.newInvalidDocument(n))}getEntries(t,n){let r=gn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Jt.newInvalidDocument(s))}),x.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=gn();const a=n.path,l=new et(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:f,value:{document:d}}=c.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||hy(cy(d),r)<=0||(s.has(d.key)||$i(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return x.resolve(i)}getAllFromCollectionGroup(t,n,r,s){rt(9500)}si(t,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new Fv(this)}getSize(t){return x.resolve(this.size)}}class Fv extends Vv{constructor(t){super(),this.Br=t}applyChanges(t){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(t,s)):this.Br.removeEntry(r)}),x.waitFor(n)}getFromCache(t,n){return this.Br.getEntry(t,n)}getAllFromCache(t,n){return this.Br.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(t){this.persistence=t,this.oi=new Fn(n=>qa(n),Ha),this.lastRemoteSnapshotVersion=nt.min(),this.highestTargetId=0,this._i=0,this.ai=new Ga,this.targetCount=0,this.ui=pr.cr()}forEachTarget(t,n){return this.oi.forEach((r,s)=>n(s)),x.resolve()}getLastRemoteSnapshotVersion(t){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return x.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),x.resolve()}Tr(t){this.oi.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ui=new pr(n),this.highestTargetId=n),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,n){return this.Tr(n),this.targetCount+=1,x.resolve()}updateTargetData(t,n){return this.Tr(n),x.resolve()}removeTargetData(t,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.oi.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.oi.delete(a),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),x.waitFor(i).next(()=>s)}getTargetCount(t){return x.resolve(this.targetCount)}getTargetData(t,n){const r=this.oi.get(n)||null;return x.resolve(r)}addMatchingKeys(t,n,r){return this.ai.Gr(n,r),x.resolve()}removeMatchingKeys(t,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(t,a))}),x.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.ai.Hr(n),x.resolve()}getMatchingKeysForTargetId(t,n){const r=this.ai.Yr(n);return x.resolve(r)}containsKey(t,n){return x.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(t,n){this.ci={},this.overlays={},this.li=new Li(0),this.hi=!1,this.hi=!0,this.Pi=new Mv,this.referenceDelegate=t(this),this.Ti=new Bv(this),this.indexManager=new Iv,this.remoteDocumentCache=function(s){return new Lv(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new Tv(n),this.Ei=new Ov(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Nv,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ci[t.toKey()];return r||(r=new kv(n,this.referenceDelegate),this.ci[t.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,n,r){H("MemoryPersistence","Starting transaction:",t);const s=new Uv(this.li.next());return this.referenceDelegate.di(),r(s).next(i=>this.referenceDelegate.Ai(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ri(t,n){return x.or(Object.values(this.ci).map(r=>()=>r.containsKey(t,n)))}}class Uv extends dy{constructor(t){super(),this.currentSequenceNumber=t}}class Qa{constructor(t){this.persistence=t,this.Vi=new Ga,this.mi=null}static fi(t){return new Qa(t)}get gi(){if(this.mi)return this.mi;throw rt(60996)}addReference(t,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),x.resolve()}removeReference(t,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(t,n){return this.gi.add(n.toString()),x.resolve()}removeTarget(t,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(i=>this.gi.add(i.toString()))}).next(()=>r.removeTargetData(t,n))}di(){this.mi=new Set}Ai(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.gi,r=>{const s=et.fromPath(r);return this.pi(t,s).next(i=>{i||n.removeEntry(s,nt.min())})}).next(()=>(this.mi=null,n.apply(t)))}updateLimboDocument(t,n){return this.pi(t,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(t){return 0}pi(t,n){return x.or([()=>x.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ri(t,n)])}}class Ti{constructor(t,n){this.persistence=t,this.yi=new Fn(r=>gy(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Pv(this,n)}static fi(t,n){return new Ti(t,n)}di(){}Ai(t){return x.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}pr(t){const n=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(s=>r+s))}br(t){let n=0;return this.yr(t,r=>{n++}).next(()=>n)}yr(t,n){return x.forEach(this.yi,(r,s)=>this.Dr(t,r,s).next(i=>i?x.resolve():n(s)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.si(t,a=>this.Dr(t,a,n).next(l=>{l||(r++,i.removeEntry(a,nt.min()))})).next(()=>i.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.yi.set(n,t.currentSequenceNumber),x.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),x.resolve()}removeReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),x.resolve()}updateLimboDocument(t,n){return this.yi.set(n,t.currentSequenceNumber),x.resolve()}Ii(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Js(t.data.value)),n}Dr(t,n,r){return x.or([()=>this.persistence.Ri(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.yi.get(n);return x.resolve(s!==void 0&&s>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.ds=r,this.As=s}static Rs(t,n){let r=ht(),s=ht();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ya(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return Dg()?8:py(Vg())>0?6:4}()}initialize(t,n){this.ys=t,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.ws(t,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.bs(t,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new jv;return this.Ss(t,n,a).next(l=>{if(i.result=l,this.fs)return this.Ds(t,n,a,l.size)})}).next(()=>i.result)}Ds(t,n,r,s){return r.documentReadCount<this.gs?(Gn()<=ut.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Qn(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),x.resolve()):(Gn()<=ut.DEBUG&&H("QueryEngine","Query:",Qn(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(Gn()<=ut.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Qn(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ve(n))):x.resolve())}ws(t,n){if(ic(n))return x.resolve(null);let r=Ve(n);return this.indexManager.getIndexType(t,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=aa(n,null,"F"),r=Ve(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(i=>{const a=ht(...i);return this.ys.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,r).next(c=>{const f=this.vs(n,l);return this.Cs(n,f,a,c.readTime)?this.ws(t,aa(n,null,"F")):this.Fs(t,f,n,c)}))})))}bs(t,n,r,s){return ic(n)||s.isEqual(nt.min())?x.resolve(null):this.ys.getDocuments(t,r).next(i=>{const a=this.vs(n,i);return this.Cs(n,a,r,s)?x.resolve(null):(Gn()<=ut.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Qn(n)),this.Fs(t,a,n,uy(s,us)).next(l=>l))})}vs(t,n){let r=new kt(xf(t));return n.forEach((s,i)=>{$i(t,i)&&(r=r.add(i))}),r}Cs(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(t,n,r){return Gn()<=ut.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Qn(n)),this.ys.getDocumentsMatchingQuery(t,n,fn.min(),r)}Fs(t,n,r,s){return this.ys.getDocumentsMatchingQuery(t,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa="LocalStore",qv=3e8;class Hv{constructor(t,n,r,s){this.persistence=t,this.Ms=n,this.serializer=s,this.xs=new Vt(ot),this.Os=new Fn(i=>qa(i),Ha),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(r)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Dv(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.xs))}}function zv(e,t,n,r){return new Hv(e,t,n,r)}async function Yf(e,t){const n=ct(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ls(t),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=ht();for(const f of s){a.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}for(const f of i){l.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(f=>({ks:f,removedBatchIds:a,addedBatchIds:l}))})})}function Xf(e){const t=ct(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ti.getLastRemoteSnapshotVersion(n))}function Wv(e,t){const n=ct(e),r=t.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const l=[];t.targetChanges.forEach((d,m)=>{const E=s.get(m);if(!E)return;l.push(n.Ti.removeMatchingKeys(i,d.removedDocuments,m).next(()=>n.Ti.addMatchingKeys(i,d.addedDocuments,m)));let S=E.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(m)!==null?S=S.withResumeToken(Ht.EMPTY_BYTE_STRING,nt.min()).withLastLimboFreeSnapshotVersion(nt.min()):d.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(d.resumeToken,r)),s=s.insert(m,S),function(D,F,G){return D.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=qv?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(E,S,d)&&l.push(n.Ti.updateTargetData(i,S))});let c=gn(),f=ht();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(Kv(i,a,t.documentUpdates).next(d=>{c=d.qs,f=d.Qs})),!r.isEqual(nt.min())){const d=n.Ti.getLastRemoteSnapshotVersion(i).next(m=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(d)}return x.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,f)).next(()=>c)}).then(i=>(n.xs=s,i))}function Kv(e,t,n){let r=ht(),s=ht();return n.forEach(i=>r=r.add(i)),t.getEntries(e,r).next(i=>{let a=gn();return n.forEach((l,c)=>{const f=i.get(l);c.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(nt.min())?(t.removeEntry(l,c.readTime),a=a.insert(l,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(c),a=a.insert(l,c)):H(Xa,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",c.version)}),{qs:a,Qs:s}})}function Gv(e,t){const n=ct(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,t).next(i=>i?(s=i,x.resolve(s)):n.Ti.allocateTargetId(r).next(a=>(s=new rn(t,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(t,r.targetId)),r})}async function fa(e,t,n){const r=ct(e),s=r.xs.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!vr(a))throw a;H(Xa,`Failed to update sequence numbers for target ${t}: ${a}`)}r.xs=r.xs.remove(t),r.Os.delete(s.target)}function yc(e,t,n){const r=ct(e);let s=nt.min(),i=ht();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,f,d){const m=ct(c),E=m.Os.get(d);return E!==void 0?x.resolve(m.xs.get(E)):m.Ti.getTargetData(f,d)}(r,a,Ve(t)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.Ms.getDocumentsMatchingQuery(a,t,n?s:nt.min(),n?i:ht())).next(l=>(Qv(r,By(t),l),{documents:l,$s:i})))}function Qv(e,t,n){let r=e.Ns.get(t)||nt.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),e.Ns.set(t,r)}class vc{constructor(){this.activeTargetIds=zy()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Yv{constructor(){this.xo=new vc,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,n,r){this.Oo[t]=n}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new vc,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec="ConnectivityMonitor";class Tc{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){H(Ec,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){H(Ec,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zs=null;function da(){return zs===null?zs=function(){return 268435456+Math.round(2147483648*Math.random())}():zs++,"0x"+zs.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo="RestConnection",Jv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Zv{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+t.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===gi?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(t,n,r,s,i){const a=da(),l=this.jo(t,n.toUriEncodedString());H(xo,`Sending RPC '${t}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,s,i);const{host:f}=new URL(l),d=Fa(f);return this.Jo(t,l,c,r,d).then(m=>(H(xo,`Received RPC '${t}' ${a}: `,m),m),m=>{throw cr(xo,`RPC '${t}' ${a} failed with error: `,m,"url: ",l,"request:",r),m})}Yo(t,n,r,s,i,a){return this.zo(t,n,r,s,i)}Ho(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>t[i]=s),r&&r.headers.forEach((s,i)=>t[i]=s)}jo(t,n){const r=Jv[t];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt="WebChannelConnection";class eE extends Zv{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,s,i){const a=da();return new Promise((l,c)=>{const f=new uf;f.setWithCredentials(!0),f.listenOnce(cf.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Xs.NO_ERROR:const m=f.getResponseJson();H(Qt,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(m)),l(m);break;case Xs.TIMEOUT:H(Qt,`RPC '${t}' ${a} timed out`),c(new J(j.DEADLINE_EXCEEDED,"Request time out"));break;case Xs.HTTP_ERROR:const E=f.getStatus();if(H(Qt,`RPC '${t}' ${a} failed with status:`,E,"response text:",f.getResponseText()),E>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);const V=S==null?void 0:S.error;if(V&&V.status&&V.message){const D=function(G){const W=G.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(W)>=0?W:j.UNKNOWN}(V.status);c(new J(D,V.message))}else c(new J(j.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new J(j.UNAVAILABLE,"Connection failed."));break;default:rt(9055,{h_:t,streamId:a,P_:f.getLastErrorCode(),T_:f.getLastError()})}}finally{H(Qt,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(s);H(Qt,`RPC '${t}' ${a} sending request:`,s),f.send(n,"POST",d,r,15)})}I_(t,n,r){const s=da(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=df(),l=ff(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=i.join("");H(Qt,`Creating RPC '${t}' stream ${s}: ${d}`,c);const m=a.createWebChannel(d,c);this.E_(m);let E=!1,S=!1;const V=new tE({Zo:F=>{S?H(Qt,`Not sending because RPC '${t}' stream ${s} is closed:`,F):(E||(H(Qt,`Opening RPC '${t}' stream ${s} transport.`),m.open(),E=!0),H(Qt,`RPC '${t}' stream ${s} sending:`,F),m.send(F))},Xo:()=>m.close()}),D=(F,G,W)=>{F.listen(G,Q=>{try{W(Q)}catch(z){setTimeout(()=>{throw z},0)}})};return D(m,$r.EventType.OPEN,()=>{S||(H(Qt,`RPC '${t}' stream ${s} transport opened.`),V.__())}),D(m,$r.EventType.CLOSE,()=>{S||(S=!0,H(Qt,`RPC '${t}' stream ${s} transport closed`),V.u_(),this.d_(m))}),D(m,$r.EventType.ERROR,F=>{S||(S=!0,cr(Qt,`RPC '${t}' stream ${s} transport errored. Name:`,F.name,"Message:",F.message),V.u_(new J(j.UNAVAILABLE,"The operation could not be completed")))}),D(m,$r.EventType.MESSAGE,F=>{var G;if(!S){const W=F.data[0];Ct(!!W,16349);const Q=W,z=(Q==null?void 0:Q.error)||((G=Q[0])===null||G===void 0?void 0:G.error);if(z){H(Qt,`RPC '${t}' stream ${s} received error:`,z);const _t=z.status;let wt=function(v){const w=xt[v];if(w!==void 0)return Bf(w)}(_t),I=z.message;wt===void 0&&(wt=j.INTERNAL,I="Unknown error status: "+_t+" with message "+z.message),S=!0,V.u_(new J(wt,I)),m.close()}else H(Qt,`RPC '${t}' stream ${s} received:`,W),V.c_(W)}}),D(l,hf.STAT_EVENT,F=>{F.stat===Zo.PROXY?H(Qt,`RPC '${t}' stream ${s} detected buffering proxy`):F.stat===Zo.NOPROXY&&H(Qt,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{V.a_()},0),V}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(n=>n===t)}}function Do(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(e){return new lv(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(t,n,r=1e3,s=1.5,i=6e4){this.xi=t,this.timerId=n,this.A_=r,this.R_=s,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc="PersistentStream";class nE{constructor(t,n,r,s,i,a,l,c){this.xi=t,this.S_=r,this.D_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Zf(t,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(We(n.toString()),We("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(n)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{t(()=>{const s=new J(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(t,n){const r=this.G_(this.v_);this.stream=this.H_(t,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return H(wc,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return n=>{this.xi.enqueueAndForget(()=>this.v_===t?n():(H(wc,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rE extends nE{constructor(t,n,r,s,i,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}H_(t,n){return this.connection.I_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const n=dv(this.serializer,t),r=function(i){if(!("targetChange"in i))return nt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?nt.min():a.readTime?ir(a.readTime):nt.min()}(t);return this.listener.Y_(n,r)}Z_(t){const n={};n.database=pc(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=oa(c)?{documents:pv(i,c)}:{query:mv(i,c).gt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=cv(i,a.resumeToken);const f=ca(i,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(nt.min())>0){l.readTime=uv(i,a.snapshotVersion.toTimestamp());const f=ca(i,a.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,t);const r=_v(this.serializer,t);r&&(n.labels=r),this.Q_(n)}X_(t){const n={};n.database=pc(this.serializer),n.removeTarget=t,this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{}class iE extends sE{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new J(j.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.zo(t,ha(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(j.UNKNOWN,i.toString())})}Yo(t,n,r,s,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Yo(t,ha(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new J(j.UNKNOWN,a.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class oE{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(We(n),this.ua=!1):H("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr="RemoteStore";class aE{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(a=>{r.enqueueAndForget(async()=>{Es(this)&&(H(mr,"Restarting streams for network reachability change."),await async function(c){const f=ct(c);f.da.add(4),await vs(f),f.Va.set("Unknown"),f.da.delete(4),await Wi(f)}(this))})}),this.Va=new oE(r,s)}}async function Wi(e){if(Es(e))for(const t of e.Aa)await t(!0)}async function vs(e){for(const t of e.Aa)await t(!1)}function td(e,t){const n=ct(e);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),el(n)?tl(n):Er(n).N_()&&Za(n,t))}function Ja(e,t){const n=ct(e),r=Er(n);n.Ea.delete(t),r.N_()&&ed(n,t),n.Ea.size===0&&(r.N_()?r.k_():Es(n)&&n.Va.set("Unknown"))}function Za(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(nt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Er(e).Z_(t)}function ed(e,t){e.ma.Ke(t),Er(e).X_(t)}function tl(e){e.ma=new sv({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),Er(e).start(),e.Va.ca()}function el(e){return Es(e)&&!Er(e).O_()&&e.Ea.size>0}function Es(e){return ct(e).da.size===0}function nd(e){e.ma=void 0}async function lE(e){e.Va.set("Online")}async function uE(e){e.Ea.forEach((t,n)=>{Za(e,t)})}async function cE(e,t){nd(e),el(e)?(e.Va.Pa(t),tl(e)):e.Va.set("Unknown")}async function hE(e,t,n){if(e.Va.set("Online"),t instanceof jf&&t.state===2&&t.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ea.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ea.delete(l),s.ma.removeTarget(l))}(e,t)}catch(r){H(mr,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Ic(e,r)}else if(t instanceof ti?e.ma.Xe(t):t instanceof Uf?e.ma.ot(t):e.ma.nt(t),!n.isEqual(nt.min()))try{const r=await Xf(e.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.ma.It(a);return l.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.Ea.get(f);d&&i.Ea.set(f,d.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,f)=>{const d=i.Ea.get(c);if(!d)return;i.Ea.set(c,d.withResumeToken(Ht.EMPTY_BYTE_STRING,d.snapshotVersion)),ed(i,c);const m=new rn(d.target,c,f,d.sequenceNumber);Za(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(r){H(mr,"Failed to raise snapshot:",r),await Ic(e,r)}}async function Ic(e,t,n){if(!vr(t))throw t;e.da.add(1),await vs(e),e.Va.set("Offline"),n||(n=()=>Xf(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{H(mr,"Retrying IndexedDB access"),await n(),e.da.delete(1),await Wi(e)})}async function Ac(e,t){const n=ct(e);n.asyncQueue.verifyOperationInProgress(),H(mr,"RemoteStore received new credentials");const r=Es(n);n.da.add(3),await vs(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await Wi(n)}async function fE(e,t){const n=ct(e);t?(n.da.delete(2),await Wi(n)):t||(n.da.add(2),await vs(n),n.Va.set("Unknown"))}function Er(e){return e.fa||(e.fa=function(n,r,s){const i=ct(n);return i.oa(),new rE(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{e_:lE.bind(null,e),n_:uE.bind(null,e),i_:cE.bind(null,e),Y_:hE.bind(null,e)}),e.Aa.push(async t=>{t?(e.fa.L_(),el(e)?tl(e):e.Va.set("Unknown")):(await e.fa.stop(),nd(e))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Nn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const a=Date.now()+r,l=new nl(t,n,a,s,i);return l.start(r),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(j.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rd(e,t){if(We("AsyncQueue",`${t}: ${e}`),vr(e))return new J(j.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{static emptySet(t){return new or(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||et.comparator(n.key,r.key):(n,r)=>et.comparator(n.key,r.key),this.keyedMap=qr(),this.sortedSet=new Vt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof or)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new or;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(){this.pa=new Vt(et.comparator)}track(t){const n=t.doc.key,r=this.pa.get(n);r?t.type!==0&&r.type===3?this.pa=this.pa.insert(n,t):t.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.pa=this.pa.remove(n):t.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):rt(63341,{Vt:t,ya:r}):this.pa=this.pa.insert(n,t)}wa(){const t=[];return this.pa.inorderTraversal((n,r)=>{t.push(r)}),t}}class gr{constructor(t,n,r,s,i,a,l,c,f){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(t,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new gr(t,n,or.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ji(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class pE{constructor(){this.queries=Cc(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ct(n),i=s.queries;s.queries=Cc(),i.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new J(j.ABORTED,"Firestore shutting down"))}}function Cc(){return new Fn(e=>Vf(e),ji)}async function mE(e,t){const n=ct(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.Da()&&t.va()&&(r=2):(i=new dE,r=t.va()?0:1);try{switch(r){case 0:i.ba=await n.onListen(s,!0);break;case 1:i.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=rd(a,`Initialization of query '${Qn(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,i),i.Sa.push(t),t.Fa(n.onlineState),i.ba&&t.Ma(i.ba)&&rl(n)}async function gE(e,t){const n=ct(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(t);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=t.va()?0:1:!i.Da()&&t.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _E(e,t){const n=ct(e);let r=!1;for(const s of t){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Ma(s)&&(r=!0);a.ba=s}}r&&rl(n)}function yE(e,t,n){const r=ct(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function rl(e){e.Ca.forEach(t=>{t.next()})}var pa,Sc;(Sc=pa||(pa={})).xa="default",Sc.Cache="cache";class vE{constructor(t,n,r){this.query=t,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new gr(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Na?this.La(t)&&(this.Oa.next(t),n=!0):this.ka(t,this.onlineState)&&(this.qa(t),n=!0),this.Ba=t,n}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),n=!0),n}ka(t,n){if(!t.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}La(t){if(t.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(t){t=gr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==pa.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(t){this.key=t}}class id{constructor(t){this.key=t}}class EE{constructor(t,n){this.query=t,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ht(),this.mutatedKeys=ht(),this.Za=xf(t),this.Xa=new or(this.Za)}get eu(){return this.Ha}tu(t,n){const r=n?n.nu:new bc,s=n?n.Xa:this.Xa;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((d,m)=>{const E=s.get(d),S=$i(this.query,m)?m:null,V=!!E&&this.mutatedKeys.has(E.key),D=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let F=!1;E&&S?E.data.isEqual(S.data)?V!==D&&(r.track({type:3,doc:S}),F=!0):this.ru(E,S)||(r.track({type:2,doc:S}),F=!0,(c&&this.Za(S,c)>0||f&&this.Za(S,f)<0)&&(l=!0)):!E&&S?(r.track({type:0,doc:S}),F=!0):E&&!S&&(r.track({type:1,doc:E}),F=!0,(c||f)&&(l=!0)),F&&(S?(a=a.add(S),i=D?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Xa:a,nu:r,Cs:l,mutatedKeys:i}}ru(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const a=t.nu.wa();a.sort((d,m)=>function(S,V){const D=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt(20277,{Vt:F})}};return D(S)-D(V)}(d.type,m.type)||this.Za(d.doc,m.doc)),this.iu(r),s=s!=null&&s;const l=n&&!s?this.su():[],c=this.Ya.size===0&&this.current&&!s?1:0,f=c!==this.Ja;return this.Ja=c,a.length!==0||f?{snapshot:new gr(this.query,t.Xa,i,a,t.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:l}:{ou:l}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new bc,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=ht(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return t.forEach(r=>{this.Ya.has(r)||n.push(new id(r))}),this.Ya.forEach(r=>{t.has(r)||n.push(new sd(r))}),n}au(t){this.Ha=t.$s,this.Ya=ht();const n=this.tu(t.documents);return this.applyChanges(n,!0)}uu(){return gr.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const sl="SyncEngine";class TE{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class wE{constructor(t){this.key=t,this.cu=!1}}class IE{constructor(t,n,r,s,i,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.lu={},this.hu=new Fn(l=>Vf(l),ji),this.Pu=new Map,this.Tu=new Set,this.Iu=new Vt(et.comparator),this.Eu=new Map,this.du=new Ga,this.Au={},this.Ru=new Map,this.Vu=pr.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function AE(e,t,n=!0){const r=cd(e);let s;const i=r.hu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.uu()):s=await od(r,t,n,!0),s}async function bE(e,t){const n=cd(e);await od(n,t,!0,!1)}async function od(e,t,n,r){const s=await Gv(e.localStore,Ve(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await CE(e,t,i,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&td(e.remoteStore,s),l}async function CE(e,t,n,r,s){e.fu=(m,E,S)=>async function(D,F,G,W){let Q=F.view.tu(G);Q.Cs&&(Q=await yc(D.localStore,F.query,!1).then(({documents:I})=>F.view.tu(I,Q)));const z=W&&W.targetChanges.get(F.targetId),_t=W&&W.targetMismatches.get(F.targetId)!=null,wt=F.view.applyChanges(Q,D.isPrimaryClient,z,_t);return Pc(D,F.targetId,wt.ou),wt.snapshot}(e,m,E,S);const i=await yc(e.localStore,t,!0),a=new EE(t,i.$s),l=a.tu(i.documents),c=ys.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),f=a.applyChanges(l,e.isPrimaryClient,c);Pc(e,n,f.ou);const d=new TE(t,n,a);return e.hu.set(t,d),e.Pu.has(n)?e.Pu.get(n).push(t):e.Pu.set(n,[t]),f.snapshot}async function SE(e,t,n){const r=ct(e),s=r.hu.get(t),i=r.Pu.get(s.targetId);if(i.length>1)return r.Pu.set(s.targetId,i.filter(a=>!ji(a,t))),void r.hu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await fa(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ja(r.remoteStore,s.targetId),ma(r,s.targetId)}).catch(ki)):(ma(r,s.targetId),await fa(r.localStore,s.targetId,!0))}async function RE(e,t){const n=ct(e),r=n.hu.get(t),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ja(n.remoteStore,r.targetId))}async function ad(e,t){const n=ct(e);try{const r=await Wv(n.localStore,t);t.targetChanges.forEach((s,i)=>{const a=n.Eu.get(i);a&&(Ct(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.cu=!0:s.modifiedDocuments.size>0?Ct(a.cu,14607):s.removedDocuments.size>0&&(Ct(a.cu,42227),a.cu=!1))}),await ud(n,r,t)}catch(r){await ki(r)}}function Rc(e,t,n){const r=ct(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((i,a)=>{const l=a.view.Fa(t);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=ct(a);c.onlineState=l;let f=!1;c.queries.forEach((d,m)=>{for(const E of m.Sa)E.Fa(l)&&(f=!0)}),f&&rl(c)}(r.eventManager,t),s.length&&r.lu.Y_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function PE(e,t,n){const r=ct(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Eu.get(t),i=s&&s.key;if(i){let a=new Vt(et.comparator);a=a.insert(i,Jt.newNoDocument(i,nt.min()));const l=ht().add(i),c=new zi(nt.min(),new Map,new Vt(ot),a,l);await ad(r,c),r.Iu=r.Iu.remove(i),r.Eu.delete(t),il(r)}else await fa(r.localStore,t,!1).then(()=>ma(r,t,n)).catch(ki)}function ma(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Pu.get(t))e.hu.delete(r),n&&e.lu.gu(r,n);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach(r=>{e.du.containsKey(r)||ld(e,r)})}function ld(e,t){e.Tu.delete(t.path.canonicalString());const n=e.Iu.get(t);n!==null&&(Ja(e.remoteStore,n),e.Iu=e.Iu.remove(t),e.Eu.delete(n),il(e))}function Pc(e,t,n){for(const r of n)r instanceof sd?(e.du.addReference(r.key,t),VE(e,r)):r instanceof id?(H(sl,"Document no longer in limbo: "+r.key),e.du.removeReference(r.key,t),e.du.containsKey(r.key)||ld(e,r.key)):rt(19791,{pu:r})}function VE(e,t){const n=t.key,r=n.path.canonicalString();e.Iu.get(n)||e.Tu.has(r)||(H(sl,"New document in limbo: "+n),e.Tu.add(r),il(e))}function il(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){const t=e.Tu.values().next().value;e.Tu.delete(t);const n=new et(Rt.fromString(t)),r=e.Vu.next();e.Eu.set(r,new wE(n)),e.Iu=e.Iu.insert(n,r),td(e.remoteStore,new rn(Ve(Pf(n.path)),r,"TargetPurposeLimboResolution",Li.le))}}async function ud(e,t,n){const r=ct(e),s=[],i=[],a=[];r.hu.isEmpty()||(r.hu.forEach((l,c)=>{a.push(r.fu(c,t,n).then(f=>{var d;if((f||n)&&r.isPrimaryClient){const m=f?!f.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(f){s.push(f);const m=Ya.Rs(c.targetId,f);i.push(m)}}))}),await Promise.all(a),r.lu.Y_(s),await async function(c,f){const d=ct(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>x.forEach(f,E=>x.forEach(E.ds,S=>d.persistence.referenceDelegate.addReference(m,E.targetId,S)).next(()=>x.forEach(E.As,S=>d.persistence.referenceDelegate.removeReference(m,E.targetId,S)))))}catch(m){if(!vr(m))throw m;H(Xa,"Failed to update sequence numbers: "+m)}for(const m of f){const E=m.targetId;if(!m.fromCache){const S=d.xs.get(E),V=S.snapshotVersion,D=S.withLastLimboFreeSnapshotVersion(V);d.xs=d.xs.insert(E,D)}}}(r.localStore,i))}async function xE(e,t){const n=ct(e);if(!n.currentUser.isEqual(t)){H(sl,"User change. New user:",t.toKey());const r=await Yf(n.localStore,t);n.currentUser=t,function(i,a){i.Ru.forEach(l=>{l.forEach(c=>{c.reject(new J(j.CANCELLED,a))})}),i.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await ud(n,r.ks)}}function DE(e,t){const n=ct(e),r=n.Eu.get(t);if(r&&r.cu)return ht().add(r.key);{let s=ht();const i=n.Pu.get(t);if(!i)return s;for(const a of i){const l=n.hu.get(a);s=s.unionWith(l.view.eu)}return s}}function cd(e){const t=ct(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ad.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=DE.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=PE.bind(null,t),t.lu.Y_=_E.bind(null,t.eventManager),t.lu.gu=yE.bind(null,t.eventManager),t}class wi{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Jf(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,n){return null}Cu(t,n){return null}Du(t){return zv(this.persistence,new $v,t.initialUser,this.serializer)}Su(t){return new Qf(Qa.fi,this.serializer)}bu(t){return new Yv}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wi.provider={build:()=>new wi};class OE extends wi{constructor(t){super(),this.cacheSizeBytes=t}vu(t,n){Ct(this.persistence.referenceDelegate instanceof Ti,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Sv(r,t.asyncQueue,n)}Su(t){const n=this.cacheSizeBytes!==void 0?ae.withCacheSize(this.cacheSizeBytes):ae.DEFAULT;return new Qf(r=>Ti.fi(r,n),this.serializer)}}class ga{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Rc(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=xE.bind(null,this.syncEngine),await fE(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new pE}()}createDatastore(t){const n=Jf(t.databaseInfo.databaseId),r=function(i){return new eE(i)}(t.databaseInfo);return function(i,a,l,c){return new iE(i,a,l,c)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,s,i,a,l){return new aE(r,s,i,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>Rc(this.syncEngine,n,0),function(){return Tc.C()?new Tc:new Xv}())}createSyncEngine(t,n){return function(s,i,a,l,c,f,d){const m=new IE(s,i,a,l,c,f);return d&&(m.mu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(s){const i=ct(s);H(mr,"RemoteStore shutting down."),i.da.add(5),await vs(i),i.Ra.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ga.provider={build:()=>new ga};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):We("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="FirestoreClient";class ME{constructor(t,n,r,s,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Yt.UNAUTHENTICATED,this.clientId=oy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{H(_n,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(H(_n,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Nn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=rd(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Oo(e,t){e.asyncQueue.verifyOperationInProgress(),H(_n,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Yf(t.localStore,s),r=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Vc(e,t){e.asyncQueue.verifyOperationInProgress();const n=await kE(e);H(_n,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Ac(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,s)=>Ac(t.remoteStore,s)),e._onlineComponents=t}async function kE(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){H(_n,"Using user provided OfflineComponentProvider");try{await Oo(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===j.FAILED_PRECONDITION||s.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;cr("Error using user provided cache. Falling back to memory cache: "+n),await Oo(e,new wi)}}else H(_n,"Using default OfflineComponentProvider"),await Oo(e,new OE(void 0));return e._offlineComponents}async function LE(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(H(_n,"Using user provided OnlineComponentProvider"),await Vc(e,e._uninitializedComponentsProvider._online)):(H(_n,"Using default OnlineComponentProvider"),await Vc(e,new ga))),e._onlineComponents}async function FE(e){const t=await LE(e),n=t.eventManager;return n.onListen=AE.bind(null,t.syncEngine),n.onUnlisten=SE.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=bE.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=RE.bind(null,t.syncEngine),n}function BE(e,t,n={}){const r=new Nn;return e.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,f){const d=new NE({next:E=>{d.xu(),a.enqueueAndForget(()=>gE(i,m)),E.fromCache&&c.source==="server"?f.reject(new J(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(E)},error:E=>f.reject(E)}),m=new vE(l,d,{includeMetadataChanges:!0,Qa:!0});return mE(i,m)}(await FE(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(e,t,n){if(!n)throw new J(j.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function jE(e,t,n,r){if(t===!0&&r===!0)throw new J(j.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Dc(e){if(et.isDocumentKey(e))throw new J(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function $E(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":rt(12329,{type:typeof e})}function _a(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new J(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$E(e);throw new J(j.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd="firestore.googleapis.com",Oc=!0;class Nc{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new J(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fd,this.ssl=Oc}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:Oc;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Gf;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<bv)throw new J(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}jE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hd((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ol{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nc({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new J(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nc(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Z_;switch(r.type){case"firstParty":return new ry(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=xc.get(n);r&&(H("ComponentProvider","Removing Datastore"),xc.delete(n),r.terminate())}(this),Promise.resolve()}}function qE(e,t,n,r={}){var s;e=_a(e,ol);const i=Fa(t),a=e._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),c=`${t}:${n}`;i&&(bg(`https://${c}`),Pg("Firestore",!0)),a.host!==fd&&a.host!==c&&cr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},a),{host:c,ssl:i,emulatorOptions:r});if(!di(f,l)&&(e._setSettings(f),r.mockUserToken)){let d,m;if(typeof r.mockUserToken=="string")d=r.mockUserToken,m=Yt.MOCK_USER;else{d=Cg(r.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new J(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Yt(E)}e._authCredentials=new ty(new mf(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Ki(this.firestore,t,this._query)}}class Tr{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Tr(this.firestore,t,this._key)}}class ar extends Ki{constructor(t,n,r){super(t,n,Pf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Tr(this.firestore,null,new et(t))}withConverter(t){return new ar(this.firestore,t,this._path)}}function No(e,t,...n){if(e=Fg(e),UE("collection","path",t),e instanceof ol){const r=Rt.fromString(t,...n);return Dc(r),new ar(e,null,r)}{if(!(e instanceof Tr||e instanceof ar))throw new J(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Rt.fromString(t,...n));return Dc(r),new ar(e.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc="AsyncQueue";class kc{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Zf(this,"async_queue_retry"),this.rc=()=>{const r=Do();r&&H(Mc,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=t;const n=Do();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const n=Do();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Nn;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!vr(t))throw t;H(Mc,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const n=this.sc.then(()=>(this.ec=!0,t().catch(r=>{throw this.Xu=r,this.ec=!1,We("INTERNAL UNHANDLED ERROR: ",Lc(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(t,n,r){this.oc(),this.nc.indexOf(t)>-1&&(n=0);const s=nl.createAndSchedule(this,t,n,r,i=>this.uc(i));return this.Zu.push(s),s}oc(){this.Xu&&rt(47125,{cc:Lc(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const n of this.Zu)if(n.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const n=this.Zu.indexOf(t);this.Zu.splice(n,1)}}function Lc(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class dd extends ol{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=new kc,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new kc(t),this._firestoreClient=void 0,await t}}}function HE(e,t){const n=typeof e=="object"?e:U_(),r=typeof e=="string"?e:gi,s=M_(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Ig("firestore");i&&qE(s,...i)}return s}function zE(e){if(e._terminated)throw new J(j.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||WE(e),e._firestoreClient}function WE(e){var t,n,r;const s=e._freezeSettings(),i=function(l,c,f,d){return new Ey(l,c,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,hd(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new ME(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ii(Ht.fromBase64String(t))}catch(n){throw new J(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ii(Ht.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new J(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new se(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new J(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new J(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ot(this._lat,t._lat)||ot(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,t._values)}}const QE=new RegExp("[~\\*/\\[\\]]");function YE(e,t,n){if(t.search(QE)>=0)throw Fc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e);try{return new pd(...t.split("."))._internalPath}catch{throw Fc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e)}}function Fc(e,t,n,r,s){let i=`Function ${t}() called with invalid data`;i+=". ";let a="";return new J(j.INVALID_ARGUMENT,i+e+a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Tr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new XE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(gd("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class XE extends md{data(){return super.data()}}function gd(e,t){return typeof t=="string"?YE(e,t):t instanceof pd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new J(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ZE{convertValue(t,n="none"){switch(mn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Pt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(pn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw rt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return _s(t,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(t){var n,r,s;const i=(s=(r=(n=t.fields)===null||n===void 0?void 0:n[na].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Pt(a.doubleValue));return new GE(i)}convertGeoPoint(t){return new KE(Pt(t.latitude),Pt(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Bi(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(cs(t));default:return null}}convertTimestamp(t){const n=dn(t);return new le(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Rt.fromString(t);Ct(Kf(r),9688,{name:t});const s=new hs(r.get(1),r.get(3)),i=new et(r.popFirst(5));return s.isEqual(n)||We(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class tT extends md{constructor(t,n,r,s,i,a){super(t,n,r,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new ei(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(gd("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ei extends tT{data(t={}){return super.data(t)}}class eT{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ws(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new ei(this._firestore,this._userDataWriter,r.key,r,new Ws(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new ei(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ws(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new ei(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ws(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,d=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:nT(l.type),doc:c,oldIndex:f,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function nT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt(61501,{type:e})}}class rT extends ZE{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ii(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Tr(this.firestore,null,n)}}function Mo(e){e=_a(e,Ki);const t=_a(e.firestore,dd),n=zE(t),r=new rT(t);return JE(e._query),BE(n,e._query).then(s=>new eT(t,r,e,s))}(function(t,n=!0){(function(s){yr=s})(B_),mi(new as("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new dd(new ey(r.getProvider("auth-internal")),new sy(a,r.getProvider("app-check-internal")),function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new J(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hs(f.options.projectId,d)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),sr($u,qu,t),sr($u,qu,"esm2017")})();const sT={apiKey:"AIzaSyDxxyyeYpqhyUHQF7fKkLJcICYoXDWvdbg",authDomain:"ecosort-6ab5c.firebaseapp.com",projectId:"ecosort-6ab5c",storageBucket:"ecosort-6ab5c.firebasestorage.app",messagingSenderId:"591486107501",appId:"1:591486107501:web:4ece31d87803835c4ea464",measurementId:"G-ST3ZXT65W0"},iT=sf(sT),ko=HE(iT),_d=6048e5,oT=864e5,Bc=Symbol.for("constructDateFrom");function yn(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&Bc in e?e[Bc](t):e instanceof Date?new e.constructor(t):new Date(t)}function Te(e,t){return yn(t||e,e)}let aT={};function Gi(){return aT}function ds(e,t){var l,c,f,d;const n=Gi(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(f=n.locale)==null?void 0:f.options)==null?void 0:d.weekStartsOn)??0,s=Te(e,t==null?void 0:t.in),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function Ai(e,t){return ds(e,{...t,weekStartsOn:1})}function yd(e,t){const n=Te(e,t==null?void 0:t.in),r=n.getFullYear(),s=yn(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=Ai(s),a=yn(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const l=Ai(a);return n.getTime()>=i.getTime()?r+1:n.getTime()>=l.getTime()?r:r-1}function Uc(e){const t=Te(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function lT(e,...t){const n=yn.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function jc(e,t){const n=Te(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function uT(e,t,n){const[r,s]=lT(n==null?void 0:n.in,e,t),i=jc(r),a=jc(s),l=+i-Uc(i),c=+a-Uc(a);return Math.round((l-c)/oT)}function cT(e,t){const n=yd(e,t),r=yn(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Ai(r)}function hT(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function fT(e){return!(!hT(e)&&typeof e!="number"||isNaN(+Te(e)))}function dT(e,t){const n=Te(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const pT={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},mT=(e,t,n)=>{let r;const s=pT[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Lo(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const gT={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},_T={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},yT={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},vT={date:Lo({formats:gT,defaultWidth:"full"}),time:Lo({formats:_T,defaultWidth:"full"}),dateTime:Lo({formats:yT,defaultWidth:"full"})},ET={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},TT=(e,t,n,r)=>ET[e];function Br(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):a;s=e.formattingValues[l]||e.formattingValues[a]}else{const a=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[l]||e.values[a]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const wT={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},IT={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},AT={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},bT={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},CT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ST={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},RT=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},PT={ordinalNumber:RT,era:Br({values:wT,defaultWidth:"wide"}),quarter:Br({values:IT,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Br({values:AT,defaultWidth:"wide"}),day:Br({values:bT,defaultWidth:"wide"}),dayPeriod:Br({values:CT,defaultWidth:"wide",formattingValues:ST,defaultFormattingWidth:"wide"})};function Ur(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const a=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?xT(l,m=>m.test(a)):VT(l,m=>m.test(a));let f;f=e.valueCallback?e.valueCallback(c):c,f=n.valueCallback?n.valueCallback(f):f;const d=t.slice(a.length);return{value:f,rest:d}}}function VT(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function xT(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function DT(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],i=t.match(e.parsePattern);if(!i)return null;let a=e.valueCallback?e.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;const l=t.slice(s.length);return{value:a,rest:l}}}const OT=/^(\d+)(th|st|nd|rd)?/i,NT=/\d+/i,MT={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},kT={any:[/^b/i,/^(a|c)/i]},LT={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},FT={any:[/1/i,/2/i,/3/i,/4/i]},BT={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},UT={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},jT={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},$T={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},qT={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},HT={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},zT={ordinalNumber:DT({matchPattern:OT,parsePattern:NT,valueCallback:e=>parseInt(e,10)}),era:Ur({matchPatterns:MT,defaultMatchWidth:"wide",parsePatterns:kT,defaultParseWidth:"any"}),quarter:Ur({matchPatterns:LT,defaultMatchWidth:"wide",parsePatterns:FT,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ur({matchPatterns:BT,defaultMatchWidth:"wide",parsePatterns:UT,defaultParseWidth:"any"}),day:Ur({matchPatterns:jT,defaultMatchWidth:"wide",parsePatterns:$T,defaultParseWidth:"any"}),dayPeriod:Ur({matchPatterns:qT,defaultMatchWidth:"any",parsePatterns:HT,defaultParseWidth:"any"})},WT={code:"en-US",formatDistance:mT,formatLong:vT,formatRelative:TT,localize:PT,match:zT,options:{weekStartsOn:0,firstWeekContainsDate:1}};function KT(e,t){const n=Te(e,t==null?void 0:t.in);return uT(n,dT(n))+1}function GT(e,t){const n=Te(e,t==null?void 0:t.in),r=+Ai(n)-+cT(n);return Math.round(r/_d)+1}function vd(e,t){var d,m,E,S;const n=Te(e,t==null?void 0:t.in),r=n.getFullYear(),s=Gi(),i=(t==null?void 0:t.firstWeekContainsDate)??((m=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:m.firstWeekContainsDate)??s.firstWeekContainsDate??((S=(E=s.locale)==null?void 0:E.options)==null?void 0:S.firstWeekContainsDate)??1,a=yn((t==null?void 0:t.in)||e,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const l=ds(a,t),c=yn((t==null?void 0:t.in)||e,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const f=ds(c,t);return+n>=+l?r+1:+n>=+f?r:r-1}function QT(e,t){var l,c,f,d;const n=Gi(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(f=n.locale)==null?void 0:f.options)==null?void 0:d.firstWeekContainsDate)??1,s=vd(e,t),i=yn((t==null?void 0:t.in)||e,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),ds(i,t)}function YT(e,t){const n=Te(e,t==null?void 0:t.in),r=+ds(n,t)-+QT(n,t);return Math.round(r/_d)+1}function vt(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Ze={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return vt(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):vt(n+1,2)},d(e,t){return vt(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return vt(e.getHours()%12||12,t.length)},H(e,t){return vt(e.getHours(),t.length)},m(e,t){return vt(e.getMinutes(),t.length)},s(e,t){return vt(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return vt(s,t.length)}},Hn={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},$c={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Ze.y(e,t)},Y:function(e,t,n,r){const s=vd(e,r),i=s>0?s:1-s;if(t==="YY"){const a=i%100;return vt(a,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):vt(i,t.length)},R:function(e,t){const n=yd(e);return vt(n,t.length)},u:function(e,t){const n=e.getFullYear();return vt(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return vt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return vt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Ze.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return vt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=YT(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):vt(s,t.length)},I:function(e,t,n){const r=GT(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):vt(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Ze.d(e,t)},D:function(e,t,n){const r=KT(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):vt(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return vt(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return vt(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return vt(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=Hn.noon:r===0?s=Hn.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=Hn.evening:r>=12?s=Hn.afternoon:r>=4?s=Hn.morning:s=Hn.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ze.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Ze.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):vt(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):vt(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ze.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Ze.s(e,t)},S:function(e,t){return Ze.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return Hc(r);case"XXXX":case"XX":return Vn(r);case"XXXXX":case"XXX":default:return Vn(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return Hc(r);case"xxxx":case"xx":return Vn(r);case"xxxxx":case"xxx":default:return Vn(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+qc(r,":");case"OOOO":default:return"GMT"+Vn(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+qc(r,":");case"zzzz":default:return"GMT"+Vn(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return vt(r,t.length)},T:function(e,t,n){return vt(+e,t.length)}};function qc(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+t+vt(i,2)}function Hc(e,t){return e%60===0?(e>0?"-":"+")+vt(Math.abs(e)/60,2):Vn(e,t)}function Vn(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=vt(Math.trunc(r/60),2),i=vt(r%60,2);return n+s+t+i}const zc=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Ed=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},XT=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return zc(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",zc(r,t)).replace("{{time}}",Ed(s,t))},JT={p:Ed,P:XT},ZT=/^D+$/,tw=/^Y+$/,ew=["D","DD","YY","YYYY"];function nw(e){return ZT.test(e)}function rw(e){return tw.test(e)}function sw(e,t,n){const r=iw(e,t,n);if(console.warn(r),ew.includes(e))throw new RangeError(r)}function iw(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ow=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,aw=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,lw=/^'([^]*?)'?$/,uw=/''/g,cw=/[a-zA-Z]/;function hw(e,t,n){var d,m,E,S;const r=Gi(),s=r.locale??WT,i=r.firstWeekContainsDate??((m=(d=r.locale)==null?void 0:d.options)==null?void 0:m.firstWeekContainsDate)??1,a=r.weekStartsOn??((S=(E=r.locale)==null?void 0:E.options)==null?void 0:S.weekStartsOn)??0,l=Te(e,n==null?void 0:n.in);if(!fT(l))throw new RangeError("Invalid time value");let c=t.match(aw).map(V=>{const D=V[0];if(D==="p"||D==="P"){const F=JT[D];return F(V,s.formatLong)}return V}).join("").match(ow).map(V=>{if(V==="''")return{isToken:!1,value:"'"};const D=V[0];if(D==="'")return{isToken:!1,value:fw(V)};if($c[D])return{isToken:!0,value:V};if(D.match(cw))throw new RangeError("Format string contains an unescaped latin alphabet character `"+D+"`");return{isToken:!1,value:V}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const f={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return c.map(V=>{if(!V.isToken)return V.value;const D=V.value;(rw(D)||nw(D))&&sw(D,t,String(e));const F=$c[D[0]];return F(l,D,s.localize,f)}).join("")}function fw(e){const t=e.match(lw);return t?t[1].replace(uw,"'"):e}const dw=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},pw={class:"container"},mw={class:"filters"},gw=["value"],_w={class:"table-wrapper"},yw={class:"material-table"},vw={__name:"studentTable",setup(e){const t=_o([]),n=_o({name:"",classLevel:"",date:""}),r=_o([]),s=async()=>{const l=await Mo(No(ko,"users")),c=await Mo(No(ko,"trash_records")),f=await Mo(No(ko,"redemptions")),d={};l.forEach(V=>{d[V.id]={...V.data(),userId:V.id}});const m={};f.forEach(V=>{const D=V.data();m[D.studentId]={rewardName:D.rewardName,pointsUsed:D.pointsUsed}});const E=c.docs.map(V=>{var W,Q;const D=V.data(),F=d[D.userId]||{},G=m[D.userId]||{};return{fullName:F.fullName,classLevel:F.classLevel,trashType:D.trashType,amount:D.amount,pointsEarned:(D.amount||0)*(D.pointsPerItem||0),rewardName:G.rewardName,pointsUsed:G.pointsUsed,date:((Q=(W=D.date)==null?void 0:W.toDate)==null?void 0:Q.call(W))||new Date,userId:D.userId}});t.value=E;const S=[...new Set(E.map(V=>V.classLevel))].filter(Boolean);r.value=S},i=l=>hw(l,"yyyy-MM-dd"),a=Qh(()=>t.value.filter(l=>{var m;const c=(m=l.fullName)==null?void 0:m.toLowerCase().includes(n.value.name.toLowerCase()),f=n.value.classLevel?l.classLevel===n.value.classLevel:!0,d=n.value.date?i(l.date)===n.value.date:!0;return c&&f&&d}));return bh(s),(l,c)=>(Wn(),Kn("div",pw,[c[5]||(c[5]=pt("img",{src:fg,alt:"",class:"logo"},null,-1)),c[6]||(c[6]=pt("h2",{class:"title"},[pt("span",{class:"material-symbols-outlined icon"},"recycling"),Wh(" ข้อมูลการเก็บขยะและแลกของรางวัล ")],-1)),pt("div",mw,[yo(pt("input",{"onUpdate:modelValue":c[0]||(c[0]=f=>n.value.name=f),type:"text",placeholder:"ค้นหาชื่อ..."},null,512),[[Su,n.value.name]]),yo(pt("select",{"onUpdate:modelValue":c[1]||(c[1]=f=>n.value.classLevel=f)},[c[3]||(c[3]=pt("option",{value:""},"ทุกชั้น",-1)),(Wn(!0),Kn(ve,null,ru(r.value,f=>(Wn(),Kn("option",{key:f,value:f},Ae(f),9,gw))),128))],512),[[og,n.value.classLevel]]),yo(pt("input",{type:"date","onUpdate:modelValue":c[2]||(c[2]=f=>n.value.date=f)},null,512),[[Su,n.value.date]])]),pt("div",_w,[pt("table",yw,[c[4]||(c[4]=pt("thead",null,[pt("tr",null,[pt("th",null,"ชื่อ"),pt("th",null,"ชั้น"),pt("th",null,"ประเภทขยะ"),pt("th",null,"จำนวน"),pt("th",null,"แต้มที่ได้"),pt("th",null,"ของรางวัล"),pt("th",null,"แต้มที่ใช้"),pt("th",null,"วันที่")])],-1)),pt("tbody",null,[(Wn(!0),Kn(ve,null,ru(a.value,f=>(Wn(),Kn("tr",{key:f.userId+f.date},[pt("td",null,Ae(f.fullName),1),pt("td",null,Ae(f.classLevel),1),pt("td",null,Ae(f.trashType),1),pt("td",null,Ae(f.amount),1),pt("td",null,Ae(f.pointsEarned),1),pt("td",null,Ae(f.rewardName||"-"),1),pt("td",null,Ae(f.pointsUsed||"-"),1),pt("td",null,Ae(i(f.date)),1)]))),128))])])])]))}},Ew=dw(vw,[["__scopeId","data-v-e3e11e35"]]),Tw={__name:"App",setup(e){return(t,n)=>(Wn(),Kn("div",null,[on(Ew)]))}};ug(Tw).mount("#app");
