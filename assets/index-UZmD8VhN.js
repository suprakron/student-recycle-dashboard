(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function wa(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const It={},tr=[],Oe=()=>{},Yd=()=>!1,Di=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ia=e=>e.startsWith("onUpdate:"),he=Object.assign,Aa=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Xd=Object.prototype.hasOwnProperty,yt=(e,t)=>Xd.call(e,t),nt=Array.isArray,er=e=>_s(e)==="[object Map]",Oi=e=>_s(e)==="[object Set]",ru=e=>_s(e)==="[object Date]",at=e=>typeof e=="function",Ot=e=>typeof e=="string",be=e=>typeof e=="symbol",Ct=e=>e!==null&&typeof e=="object",Yc=e=>(Ct(e)||at(e))&&at(e.then)&&at(e.catch),Xc=Object.prototype.toString,_s=e=>Xc.call(e),Jd=e=>_s(e).slice(8,-1),Jc=e=>_s(e)==="[object Object]",ba=e=>Ot(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Qr=wa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ni=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Zd=/-(\w)/g,pn=Ni(e=>e.replace(Zd,(t,n)=>n?n.toUpperCase():"")),tp=/\B([A-Z])/g,jn=Ni(e=>e.replace(tp,"-$1").toLowerCase()),Zc=Ni(e=>e.charAt(0).toUpperCase()+e.slice(1)),vo=Ni(e=>e?`on${Zc(e)}`:""),cn=(e,t)=>!Object.is(e,t),ti=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},th=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},ui=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let su;const Mi=()=>su||(su=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ca(e){if(nt(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=Ot(r)?sp(r):Ca(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Ot(e)||Ct(e))return e}const ep=/;(?![^(]*\))/g,np=/:([^]+)/,rp=/\/\*[^]*?\*\//g;function sp(e){const t={};return e.replace(rp,"").split(ep).forEach(n=>{if(n){const r=n.split(np);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Sa(e){let t="";if(Ot(e))t=e;else if(nt(e))for(let n=0;n<e.length;n++){const r=Sa(e[n]);r&&(t+=r+" ")}else if(Ct(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const ip="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",op=wa(ip);function eh(e){return!!e||e===""}function ap(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=ki(e[r],t[r]);return n}function ki(e,t){if(e===t)return!0;let n=ru(e),r=ru(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=be(e),r=be(t),n||r)return e===t;if(n=nt(e),r=nt(t),n||r)return n&&r?ap(e,t):!1;if(n=Ct(e),r=Ct(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const a in e){const l=e.hasOwnProperty(a),c=t.hasOwnProperty(a);if(l&&!c||!l&&c||!ki(e[a],t[a]))return!1}}return String(e)===String(t)}function lp(e,t){return e.findIndex(n=>ki(n,t))}const nh=e=>!!(e&&e.__v_isRef===!0),wt=e=>Ot(e)?e:e==null?"":nt(e)||Ct(e)&&(e.toString===Xc||!at(e.toString))?nh(e)?wt(e.value):JSON.stringify(e,rh,2):String(e),rh=(e,t)=>nh(t)?rh(e,t.value):er(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[Eo(r,i)+" =>"]=s,n),{})}:Oi(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Eo(n))}:be(t)?Eo(t):Ct(t)&&!nt(t)&&!Jc(t)?String(t):t,Eo=(e,t="")=>{var n;return be(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let de;class up{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=de,!t&&de&&(this.index=(de.scopes||(de.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=de;try{return de=this,t()}finally{de=n}}}on(){++this._on===1&&(this.prevScope=de,de=this)}off(){this._on>0&&--this._on===0&&(de=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function cp(){return de}let At;const To=new WeakSet;class sh{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,de&&de.active&&de.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,To.has(this)&&(To.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||oh(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,iu(this),ah(this);const t=At,n=Ae;At=this,Ae=!0;try{return this.fn()}finally{lh(this),At=t,Ae=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Va(t);this.deps=this.depsTail=void 0,iu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?To.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){jo(this)&&this.run()}get dirty(){return jo(this)}}let ih=0,Yr,Xr;function oh(e,t=!1){if(e.flags|=8,t){e.next=Xr,Xr=e;return}e.next=Yr,Yr=e}function Ra(){ih++}function Pa(){if(--ih>0)return;if(Xr){let t=Xr;for(Xr=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Yr;){let t=Yr;for(Yr=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function ah(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function lh(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Va(r),hp(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function jo(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(uh(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function uh(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===is)||(e.globalVersion=is,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!jo(e))))return;e.flags|=2;const t=e.dep,n=At,r=Ae;At=e,Ae=!0;try{ah(e);const s=e.fn(e._value);(t.version===0||cn(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{At=n,Ae=r,lh(e),e.flags&=-3}}function Va(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Va(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function hp(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Ae=!0;const ch=[];function We(){ch.push(Ae),Ae=!1}function Ke(){const e=ch.pop();Ae=e===void 0?!0:e}function iu(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=At;At=void 0;try{t()}finally{At=n}}}let is=0;class fp{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class xa{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!At||!Ae||At===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==At)n=this.activeLink=new fp(At,this),At.deps?(n.prevDep=At.depsTail,At.depsTail.nextDep=n,At.depsTail=n):At.deps=At.depsTail=n,hh(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=At.depsTail,n.nextDep=void 0,At.depsTail.nextDep=n,At.depsTail=n,At.deps===n&&(At.deps=r)}return n}trigger(t){this.version++,is++,this.notify(t)}notify(t){Ra();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Pa()}}}function hh(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)hh(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const $o=new WeakMap,Ln=Symbol(""),qo=Symbol(""),os=Symbol("");function te(e,t,n){if(Ae&&At){let r=$o.get(e);r||$o.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new xa),s.map=r,s.key=n),s.track()}}function He(e,t,n,r,s,i){const a=$o.get(e);if(!a){is++;return}const l=c=>{c&&c.trigger()};if(Ra(),t==="clear")a.forEach(l);else{const c=nt(e),f=c&&ba(n);if(c&&n==="length"){const d=Number(r);a.forEach((m,E)=>{(E==="length"||E===os||!be(E)&&E>=d)&&l(m)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),f&&l(a.get(os)),t){case"add":c?f&&l(a.get("length")):(l(a.get(Ln)),er(e)&&l(a.get(qo)));break;case"delete":c||(l(a.get(Ln)),er(e)&&l(a.get(qo)));break;case"set":er(e)&&l(a.get(Ln));break}}Pa()}function Kn(e){const t=_t(e);return t===e?t:(te(t,"iterate",os),Te(e)?t:t.map(zt))}function Li(e){return te(e=_t(e),"iterate",os),e}const dp={__proto__:null,[Symbol.iterator](){return wo(this,Symbol.iterator,zt)},concat(...e){return Kn(this).concat(...e.map(t=>nt(t)?Kn(t):t))},entries(){return wo(this,"entries",e=>(e[1]=zt(e[1]),e))},every(e,t){return $e(this,"every",e,t,void 0,arguments)},filter(e,t){return $e(this,"filter",e,t,n=>n.map(zt),arguments)},find(e,t){return $e(this,"find",e,t,zt,arguments)},findIndex(e,t){return $e(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return $e(this,"findLast",e,t,zt,arguments)},findLastIndex(e,t){return $e(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return $e(this,"forEach",e,t,void 0,arguments)},includes(...e){return Io(this,"includes",e)},indexOf(...e){return Io(this,"indexOf",e)},join(e){return Kn(this).join(e)},lastIndexOf(...e){return Io(this,"lastIndexOf",e)},map(e,t){return $e(this,"map",e,t,void 0,arguments)},pop(){return Br(this,"pop")},push(...e){return Br(this,"push",e)},reduce(e,...t){return ou(this,"reduce",e,t)},reduceRight(e,...t){return ou(this,"reduceRight",e,t)},shift(){return Br(this,"shift")},some(e,t){return $e(this,"some",e,t,void 0,arguments)},splice(...e){return Br(this,"splice",e)},toReversed(){return Kn(this).toReversed()},toSorted(e){return Kn(this).toSorted(e)},toSpliced(...e){return Kn(this).toSpliced(...e)},unshift(...e){return Br(this,"unshift",e)},values(){return wo(this,"values",zt)}};function wo(e,t,n){const r=Li(e),s=r[t]();return r!==e&&!Te(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const pp=Array.prototype;function $e(e,t,n,r,s,i){const a=Li(e),l=a!==e&&!Te(e),c=a[t];if(c!==pp[t]){const m=c.apply(e,i);return l?zt(m):m}let f=n;a!==e&&(l?f=function(m,E){return n.call(this,zt(m),E,e)}:n.length>2&&(f=function(m,E){return n.call(this,m,E,e)}));const d=c.call(a,f,r);return l&&s?s(d):d}function ou(e,t,n,r){const s=Li(e);let i=n;return s!==e&&(Te(e)?n.length>3&&(i=function(a,l,c){return n.call(this,a,l,c,e)}):i=function(a,l,c){return n.call(this,a,zt(l),c,e)}),s[t](i,...r)}function Io(e,t,n){const r=_t(e);te(r,"iterate",os);const s=r[t](...n);return(s===-1||s===!1)&&Ma(n[0])?(n[0]=_t(n[0]),r[t](...n)):s}function Br(e,t,n=[]){We(),Ra();const r=_t(e)[t].apply(e,n);return Pa(),Ke(),r}const mp=wa("__proto__,__v_isRef,__isVue"),fh=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(be));function gp(e){be(e)||(e=String(e));const t=_t(this);return te(t,"has",e),t.hasOwnProperty(e)}class dh{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Cp:_h:i?gh:mh).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=nt(t);if(!s){let c;if(a&&(c=dp[n]))return c;if(n==="hasOwnProperty")return gp}const l=Reflect.get(t,n,re(t)?t:r);return(be(n)?fh.has(n):mp(n))||(s||te(t,"get",n),i)?l:re(l)?a&&ba(n)?l:l.value:Ct(l)?s?yh(l):Oa(l):l}}class ph extends dh{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const c=mn(i);if(!Te(r)&&!mn(r)&&(i=_t(i),r=_t(r)),!nt(t)&&re(i)&&!re(r))return c?!1:(i.value=r,!0)}const a=nt(t)&&ba(n)?Number(n)<t.length:yt(t,n),l=Reflect.set(t,n,r,re(t)?t:s);return t===_t(s)&&(a?cn(r,i)&&He(t,"set",n,r):He(t,"add",n,r)),l}deleteProperty(t,n){const r=yt(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&He(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!be(n)||!fh.has(n))&&te(t,"has",n),r}ownKeys(t){return te(t,"iterate",nt(t)?"length":Ln),Reflect.ownKeys(t)}}class _p extends dh{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const yp=new ph,vp=new _p,Ep=new ph(!0);const Ho=e=>e,js=e=>Reflect.getPrototypeOf(e);function Tp(e,t,n){return function(...r){const s=this.__v_raw,i=_t(s),a=er(i),l=e==="entries"||e===Symbol.iterator&&a,c=e==="keys"&&a,f=s[e](...r),d=n?Ho:t?ci:zt;return!t&&te(i,"iterate",c?qo:Ln),{next(){const{value:m,done:E}=f.next();return E?{value:m,done:E}:{value:l?[d(m[0]),d(m[1])]:d(m),done:E}},[Symbol.iterator](){return this}}}}function $s(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function wp(e,t){const n={get(s){const i=this.__v_raw,a=_t(i),l=_t(s);e||(cn(s,l)&&te(a,"get",s),te(a,"get",l));const{has:c}=js(a),f=t?Ho:e?ci:zt;if(c.call(a,s))return f(i.get(s));if(c.call(a,l))return f(i.get(l));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!e&&te(_t(s),"iterate",Ln),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,a=_t(i),l=_t(s);return e||(cn(s,l)&&te(a,"has",s),te(a,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const a=this,l=a.__v_raw,c=_t(l),f=t?Ho:e?ci:zt;return!e&&te(c,"iterate",Ln),l.forEach((d,m)=>s.call(i,f(d),f(m),a))}};return he(n,e?{add:$s("add"),set:$s("set"),delete:$s("delete"),clear:$s("clear")}:{add(s){!t&&!Te(s)&&!mn(s)&&(s=_t(s));const i=_t(this);return js(i).has.call(i,s)||(i.add(s),He(i,"add",s,s)),this},set(s,i){!t&&!Te(i)&&!mn(i)&&(i=_t(i));const a=_t(this),{has:l,get:c}=js(a);let f=l.call(a,s);f||(s=_t(s),f=l.call(a,s));const d=c.call(a,s);return a.set(s,i),f?cn(i,d)&&He(a,"set",s,i):He(a,"add",s,i),this},delete(s){const i=_t(this),{has:a,get:l}=js(i);let c=a.call(i,s);c||(s=_t(s),c=a.call(i,s)),l&&l.call(i,s);const f=i.delete(s);return c&&He(i,"delete",s,void 0),f},clear(){const s=_t(this),i=s.size!==0,a=s.clear();return i&&He(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Tp(s,e,t)}),n}function Da(e,t){const n=wp(e,t);return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(yt(n,s)&&s in r?n:r,s,i)}const Ip={get:Da(!1,!1)},Ap={get:Da(!1,!0)},bp={get:Da(!0,!1)};const mh=new WeakMap,gh=new WeakMap,_h=new WeakMap,Cp=new WeakMap;function Sp(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Rp(e){return e.__v_skip||!Object.isExtensible(e)?0:Sp(Jd(e))}function Oa(e){return mn(e)?e:Na(e,!1,yp,Ip,mh)}function Pp(e){return Na(e,!1,Ep,Ap,gh)}function yh(e){return Na(e,!0,vp,bp,_h)}function Na(e,t,n,r,s){if(!Ct(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=Rp(e);if(i===0)return e;const a=s.get(e);if(a)return a;const l=new Proxy(e,i===2?r:n);return s.set(e,l),l}function nr(e){return mn(e)?nr(e.__v_raw):!!(e&&e.__v_isReactive)}function mn(e){return!!(e&&e.__v_isReadonly)}function Te(e){return!!(e&&e.__v_isShallow)}function Ma(e){return e?!!e.__v_raw:!1}function _t(e){const t=e&&e.__v_raw;return t?_t(t):e}function Vp(e){return!yt(e,"__v_skip")&&Object.isExtensible(e)&&th(e,"__v_skip",!0),e}const zt=e=>Ct(e)?Oa(e):e,ci=e=>Ct(e)?yh(e):e;function re(e){return e?e.__v_isRef===!0:!1}function rn(e){return xp(e,!1)}function xp(e,t){return re(e)?e:new Dp(e,t)}class Dp{constructor(t,n){this.dep=new xa,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:_t(t),this._value=n?t:zt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||Te(t)||mn(t);t=r?t:_t(t),cn(t,n)&&(this._rawValue=t,this._value=r?t:zt(t),this.dep.trigger())}}function Op(e){return re(e)?e.value:e}const Np={get:(e,t,n)=>t==="__v_raw"?e:Op(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return re(s)&&!re(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function vh(e){return nr(e)?e:new Proxy(e,Np)}class Mp{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new xa(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=is-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&At!==this)return oh(this,!0),!0}get value(){const t=this.dep.track();return uh(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function kp(e,t,n=!1){let r,s;return at(e)?r=e:(r=e.get,s=e.set),new Mp(r,s,n)}const qs={},hi=new WeakMap;let Dn;function Lp(e,t=!1,n=Dn){if(n){let r=hi.get(n);r||hi.set(n,r=[]),r.push(e)}}function Fp(e,t,n=It){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:l,call:c}=n,f=K=>s?K:Te(K)||s===!1||s===0?ze(K,1):ze(K);let d,m,E,S,x=!1,V=!1;if(re(e)?(m=()=>e.value,x=Te(e)):nr(e)?(m=()=>f(e),x=!0):nt(e)?(V=!0,x=e.some(K=>nr(K)||Te(K)),m=()=>e.map(K=>{if(re(K))return K.value;if(nr(K))return f(K);if(at(K))return c?c(K,2):K()})):at(e)?t?m=c?()=>c(e,2):e:m=()=>{if(E){We();try{E()}finally{Ke()}}const K=Dn;Dn=d;try{return c?c(e,3,[S]):e(S)}finally{Dn=K}}:m=Oe,t&&s){const K=m,J=s===!0?1/0:s;m=()=>ze(K(),J)}const O=cp(),M=()=>{d.stop(),O&&O.active&&Aa(O.effects,d)};if(i&&t){const K=t;t=(...J)=>{K(...J),M()}}let W=V?new Array(e.length).fill(qs):qs;const Q=K=>{if(!(!(d.flags&1)||!d.dirty&&!K))if(t){const J=d.run();if(s||x||(V?J.some((lt,I)=>cn(lt,W[I])):cn(J,W))){E&&E();const lt=Dn;Dn=d;try{const I=[J,W===qs?void 0:V&&W[0]===qs?[]:W,S];W=J,c?c(t,3,I):t(...I)}finally{Dn=lt}}}else d.run()};return l&&l(Q),d=new sh(m),d.scheduler=a?()=>a(Q,!1):Q,S=K=>Lp(K,!1,d),E=d.onStop=()=>{const K=hi.get(d);if(K){if(c)c(K,4);else for(const J of K)J();hi.delete(d)}},t?r?Q(!0):W=d.run():a?a(Q.bind(null,!0),!0):d.run(),M.pause=d.pause.bind(d),M.resume=d.resume.bind(d),M.stop=M,M}function ze(e,t=1/0,n){if(t<=0||!Ct(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,re(e))ze(e.value,t,n);else if(nt(e))for(let r=0;r<e.length;r++)ze(e[r],t,n);else if(Oi(e)||er(e))e.forEach(r=>{ze(r,t,n)});else if(Jc(e)){for(const r in e)ze(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&ze(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ys(e,t,n,r){try{return r?e(...r):e()}catch(s){Fi(s,t,n)}}function Me(e,t,n,r){if(at(e)){const s=ys(e,t,n,r);return s&&Yc(s)&&s.catch(i=>{Fi(i,t,n)}),s}if(nt(e)){const s=[];for(let i=0;i<e.length;i++)s.push(Me(e[i],t,n,r));return s}}function Fi(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||It;if(t){let l=t.parent;const c=t.proxy,f=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let m=0;m<d.length;m++)if(d[m](e,c,f)===!1)return}l=l.parent}if(i){We(),ys(i,null,10,[e,c,f]),Ke();return}}Bp(e,n,s,r,a)}function Bp(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const oe=[];let Pe=-1;const rr=[];let on=null,Qn=0;const Eh=Promise.resolve();let fi=null;function Th(e){const t=fi||Eh;return e?t.then(this?e.bind(this):e):t}function Up(e){let t=Pe+1,n=oe.length;for(;t<n;){const r=t+n>>>1,s=oe[r],i=as(s);i<e||i===e&&s.flags&2?t=r+1:n=r}return t}function ka(e){if(!(e.flags&1)){const t=as(e),n=oe[oe.length-1];!n||!(e.flags&2)&&t>=as(n)?oe.push(e):oe.splice(Up(t),0,e),e.flags|=1,wh()}}function wh(){fi||(fi=Eh.then(Ah))}function jp(e){nt(e)?rr.push(...e):on&&e.id===-1?on.splice(Qn+1,0,e):e.flags&1||(rr.push(e),e.flags|=1),wh()}function au(e,t,n=Pe+1){for(;n<oe.length;n++){const r=oe[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;oe.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Ih(e){if(rr.length){const t=[...new Set(rr)].sort((n,r)=>as(n)-as(r));if(rr.length=0,on){on.push(...t);return}for(on=t,Qn=0;Qn<on.length;Qn++){const n=on[Qn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}on=null,Qn=0}}const as=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Ah(e){try{for(Pe=0;Pe<oe.length;Pe++){const t=oe[Pe];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ys(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Pe<oe.length;Pe++){const t=oe[Pe];t&&(t.flags&=-2)}Pe=-1,oe.length=0,Ih(),fi=null,(oe.length||rr.length)&&Ah()}}let ne=null,bh=null;function di(e){const t=ne;return ne=e,bh=e&&e.type.__scopeId||null,t}function Hr(e,t=ne,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&gu(-1);const i=di(t);let a;try{a=e(...s)}finally{di(i),r._d&&gu(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function Ao(e,t){if(ne===null)return e;const n=$i(ne),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,a,l,c=It]=t[s];i&&(at(i)&&(i={mounted:i,updated:i}),i.deep&&ze(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function Vn(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let a=0;a<s.length;a++){const l=s[a];i&&(l.oldValue=i[a].value);let c=l.dir[r];c&&(We(),Me(c,n,8,[e.el,l,e,t]),Ke())}}const $p=Symbol("_vte"),qp=e=>e.__isTeleport;function La(e,t){e.shapeFlag&6&&e.component?(e.transition=t,La(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ch(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function pi(e,t,n,r,s=!1){if(nt(e)){e.forEach((x,V)=>pi(x,t&&(nt(t)?t[V]:t),n,r,s));return}if(sr(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&pi(e,t,n,r.component.subTree);return}const i=r.shapeFlag&4?$i(r.component):r.el,a=s?null:i,{i:l,r:c}=e,f=t&&t.r,d=l.refs===It?l.refs={}:l.refs,m=l.setupState,E=_t(m),S=m===It?()=>!1:x=>yt(E,x);if(f!=null&&f!==c&&(Ot(f)?(d[f]=null,S(f)&&(m[f]=null)):re(f)&&(f.value=null)),at(c))ys(c,l,12,[a,d]);else{const x=Ot(c),V=re(c);if(x||V){const O=()=>{if(e.f){const M=x?S(c)?m[c]:d[c]:c.value;s?nt(M)&&Aa(M,i):nt(M)?M.includes(i)||M.push(i):x?(d[c]=[i],S(c)&&(m[c]=d[c])):(c.value=[i],e.k&&(d[e.k]=c.value))}else x?(d[c]=a,S(c)&&(m[c]=a)):V&&(c.value=a,e.k&&(d[e.k]=a))};a?(O.id=-1,_e(O,n)):O()}}}Mi().requestIdleCallback;Mi().cancelIdleCallback;const sr=e=>!!e.type.__asyncLoader,Sh=e=>e.type.__isKeepAlive;function Hp(e,t){Rh(e,"a",t)}function zp(e,t){Rh(e,"da",t)}function Rh(e,t,n=ae){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Bi(t,r,n),n){let s=n.parent;for(;s&&s.parent;)Sh(s.parent.vnode)&&Wp(r,t,n,s),s=s.parent}}function Wp(e,t,n,r){const s=Bi(t,e,r,!0);Vh(()=>{Aa(r[t],s)},n)}function Bi(e,t,n=ae,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{We();const l=vs(n),c=Me(t,n,e,a);return l(),Ke(),c});return r?s.unshift(i):s.push(i),i}}const Xe=e=>(t,n=ae)=>{(!us||e==="sp")&&Bi(e,(...r)=>t(...r),n)},Kp=Xe("bm"),Ph=Xe("m"),Gp=Xe("bu"),Qp=Xe("u"),Yp=Xe("bum"),Vh=Xe("um"),Xp=Xe("sp"),Jp=Xe("rtg"),Zp=Xe("rtc");function tm(e,t=ae){Bi("ec",e,t)}const em=Symbol.for("v-ndc");function Ur(e,t,n,r){let s;const i=n,a=nt(e);if(a||Ot(e)){const l=a&&nr(e);let c=!1,f=!1;l&&(c=!Te(e),f=mn(e),e=Li(e)),s=new Array(e.length);for(let d=0,m=e.length;d<m;d++)s[d]=t(c?f?ci(zt(e[d])):zt(e[d]):e[d],d,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let l=0;l<e;l++)s[l]=t(l+1,l,void 0,i)}else if(Ct(e))if(e[Symbol.iterator])s=Array.from(e,(l,c)=>t(l,c,void 0,i));else{const l=Object.keys(e);s=new Array(l.length);for(let c=0,f=l.length;c<f;c++){const d=l[c];s[c]=t(e[d],d,c,i)}}else s=[];return s}function nm(e,t,n={},r,s){if(ne.ce||ne.parent&&sr(ne.parent)&&ne.parent.ce)return qt(),Qo(Wt,null,[ue("slot",n,r)],64);let i=e[t];i&&i._c&&(i._d=!1),qt();const a=i&&xh(i(n)),l=n.key||a&&a.key,c=Qo(Wt,{key:(l&&!be(l)?l:`_${t}`)+""},a||[],a&&e._===1?64:-2);return i&&i._c&&(i._d=!0),c}function xh(e){return e.some(t=>Ua(t)?!(t.type===Ge||t.type===Wt&&!xh(t.children)):!0)?e:null}const zo=e=>e?Jh(e)?$i(e):zo(e.parent):null,Jr=he(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>zo(e.parent),$root:e=>zo(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Oh(e),$forceUpdate:e=>e.f||(e.f=()=>{ka(e.update)}),$nextTick:e=>e.n||(e.n=Th.bind(e.proxy)),$watch:e=>Am.bind(e)}),bo=(e,t)=>e!==It&&!e.__isScriptSetup&&yt(e,t),rm={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:l,appContext:c}=e;let f;if(t[0]!=="$"){const S=a[t];if(S!==void 0)switch(S){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(bo(r,t))return a[t]=1,r[t];if(s!==It&&yt(s,t))return a[t]=2,s[t];if((f=e.propsOptions[0])&&yt(f,t))return a[t]=3,i[t];if(n!==It&&yt(n,t))return a[t]=4,n[t];Wo&&(a[t]=0)}}const d=Jr[t];let m,E;if(d)return t==="$attrs"&&te(e.attrs,"get",""),d(e);if((m=l.__cssModules)&&(m=m[t]))return m;if(n!==It&&yt(n,t))return a[t]=4,n[t];if(E=c.config.globalProperties,yt(E,t))return E[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return bo(s,t)?(s[t]=n,!0):r!==It&&yt(r,t)?(r[t]=n,!0):yt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},a){let l;return!!n[a]||e!==It&&yt(e,a)||bo(t,a)||(l=i[0])&&yt(l,a)||yt(r,a)||yt(Jr,a)||yt(s.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:yt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function lu(e){return nt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Wo=!0;function sm(e){const t=Oh(e),n=e.proxy,r=e.ctx;Wo=!1,t.beforeCreate&&uu(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:a,watch:l,provide:c,inject:f,created:d,beforeMount:m,mounted:E,beforeUpdate:S,updated:x,activated:V,deactivated:O,beforeDestroy:M,beforeUnmount:W,destroyed:Q,unmounted:K,render:J,renderTracked:lt,renderTriggered:I,errorCaptured:g,serverPrefetch:v,expose:w,inheritAttrs:A,components:C,directives:y,filters:me}=t;if(f&&im(f,r,null),a)for(const vt in a){const mt=a[vt];at(mt)&&(r[vt]=mt.bind(n))}if(s){const vt=s.call(n,n);Ct(vt)&&(e.data=Oa(vt))}if(Wo=!0,i)for(const vt in i){const mt=i[vt],we=at(mt)?mt.bind(n,n):at(mt.get)?mt.get.bind(n,n):Oe,In=!at(mt)&&at(mt.set)?mt.set.bind(n):Oe,Fe=tf({get:we,set:In});Object.defineProperty(r,vt,{enumerable:!0,configurable:!0,get:()=>Fe.value,set:Nt=>Fe.value=Nt})}if(l)for(const vt in l)Dh(l[vt],r,n,vt);if(c){const vt=at(c)?c.call(n):c;Reflect.ownKeys(vt).forEach(mt=>{hm(mt,vt[mt])})}d&&uu(d,e,"c");function Bt(vt,mt){nt(mt)?mt.forEach(we=>vt(we.bind(n))):mt&&vt(mt.bind(n))}if(Bt(Kp,m),Bt(Ph,E),Bt(Gp,S),Bt(Qp,x),Bt(Hp,V),Bt(zp,O),Bt(tm,g),Bt(Zp,lt),Bt(Jp,I),Bt(Yp,W),Bt(Vh,K),Bt(Xp,v),nt(w))if(w.length){const vt=e.exposed||(e.exposed={});w.forEach(mt=>{Object.defineProperty(vt,mt,{get:()=>n[mt],set:we=>n[mt]=we})})}else e.exposed||(e.exposed={});J&&e.render===Oe&&(e.render=J),A!=null&&(e.inheritAttrs=A),C&&(e.components=C),y&&(e.directives=y),v&&Ch(e)}function im(e,t,n=Oe){nt(e)&&(e=Ko(e));for(const r in e){const s=e[r];let i;Ct(s)?"default"in s?i=ei(s.from||r,s.default,!0):i=ei(s.from||r):i=ei(s),re(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[r]=i}}function uu(e,t,n){Me(nt(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Dh(e,t,n,r){let s=r.includes(".")?Wh(n,r):()=>n[r];if(Ot(e)){const i=t[e];at(i)&&So(s,i)}else if(at(e))So(s,e.bind(n));else if(Ct(e))if(nt(e))e.forEach(i=>Dh(i,t,n,r));else{const i=at(e.handler)?e.handler.bind(n):t[e.handler];at(i)&&So(s,i,e)}}function Oh(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,l=i.get(t);let c;return l?c=l:!s.length&&!n&&!r?c=t:(c={},s.length&&s.forEach(f=>mi(c,f,a,!0)),mi(c,t,a)),Ct(t)&&i.set(t,c),c}function mi(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&mi(e,i,n,!0),s&&s.forEach(a=>mi(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const l=om[a]||n&&n[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const om={data:cu,props:hu,emits:hu,methods:zr,computed:zr,beforeCreate:ie,created:ie,beforeMount:ie,mounted:ie,beforeUpdate:ie,updated:ie,beforeDestroy:ie,beforeUnmount:ie,destroyed:ie,unmounted:ie,activated:ie,deactivated:ie,errorCaptured:ie,serverPrefetch:ie,components:zr,directives:zr,watch:lm,provide:cu,inject:am};function cu(e,t){return t?e?function(){return he(at(e)?e.call(this,this):e,at(t)?t.call(this,this):t)}:t:e}function am(e,t){return zr(Ko(e),Ko(t))}function Ko(e){if(nt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ie(e,t){return e?[...new Set([].concat(e,t))]:t}function zr(e,t){return e?he(Object.create(null),e,t):t}function hu(e,t){return e?nt(e)&&nt(t)?[...new Set([...e,...t])]:he(Object.create(null),lu(e),lu(t??{})):t}function lm(e,t){if(!e)return t;if(!t)return e;const n=he(Object.create(null),e);for(const r in t)n[r]=ie(e[r],t[r]);return n}function Nh(){return{app:null,config:{isNativeTag:Yd,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let um=0;function cm(e,t){return function(r,s=null){at(r)||(r=he({},r)),s!=null&&!Ct(s)&&(s=null);const i=Nh(),a=new WeakSet,l=[];let c=!1;const f=i.app={_uid:um++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:zm,get config(){return i.config},set config(d){},use(d,...m){return a.has(d)||(d&&at(d.install)?(a.add(d),d.install(f,...m)):at(d)&&(a.add(d),d(f,...m))),f},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),f},component(d,m){return m?(i.components[d]=m,f):i.components[d]},directive(d,m){return m?(i.directives[d]=m,f):i.directives[d]},mount(d,m,E){if(!c){const S=f._ceVNode||ue(r,s);return S.appContext=i,E===!0?E="svg":E===!1&&(E=void 0),e(S,d,E),c=!0,f._container=d,d.__vue_app__=f,$i(S.component)}},onUnmount(d){l.push(d)},unmount(){c&&(Me(l,f._instance,16),e(null,f._container),delete f._container.__vue_app__)},provide(d,m){return i.provides[d]=m,f},runWithContext(d){const m=ir;ir=f;try{return d()}finally{ir=m}}};return f}}let ir=null;function hm(e,t){if(ae){let n=ae.provides;const r=ae.parent&&ae.parent.provides;r===n&&(n=ae.provides=Object.create(r)),n[e]=t}}function ei(e,t,n=!1){const r=ae||ne;if(r||ir){let s=ir?ir._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&at(t)?t.call(r&&r.proxy):t}}const Mh={},kh=()=>Object.create(Mh),Lh=e=>Object.getPrototypeOf(e)===Mh;function fm(e,t,n,r=!1){const s={},i=kh();e.propsDefaults=Object.create(null),Fh(e,t,s,i);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);n?e.props=r?s:Pp(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function dm(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=e,l=_t(s),[c]=e.propsOptions;let f=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let m=0;m<d.length;m++){let E=d[m];if(Ui(e.emitsOptions,E))continue;const S=t[E];if(c)if(yt(i,E))S!==i[E]&&(i[E]=S,f=!0);else{const x=pn(E);s[x]=Go(c,l,x,S,e,!1)}else S!==i[E]&&(i[E]=S,f=!0)}}}else{Fh(e,t,s,i)&&(f=!0);let d;for(const m in l)(!t||!yt(t,m)&&((d=jn(m))===m||!yt(t,d)))&&(c?n&&(n[m]!==void 0||n[d]!==void 0)&&(s[m]=Go(c,l,m,void 0,e,!0)):delete s[m]);if(i!==l)for(const m in i)(!t||!yt(t,m))&&(delete i[m],f=!0)}f&&He(e.attrs,"set","")}function Fh(e,t,n,r){const[s,i]=e.propsOptions;let a=!1,l;if(t)for(let c in t){if(Qr(c))continue;const f=t[c];let d;s&&yt(s,d=pn(c))?!i||!i.includes(d)?n[d]=f:(l||(l={}))[d]=f:Ui(e.emitsOptions,c)||(!(c in r)||f!==r[c])&&(r[c]=f,a=!0)}if(i){const c=_t(n),f=l||It;for(let d=0;d<i.length;d++){const m=i[d];n[m]=Go(s,c,m,f[m],e,!yt(f,m))}}return a}function Go(e,t,n,r,s,i){const a=e[n];if(a!=null){const l=yt(a,"default");if(l&&r===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&at(c)){const{propsDefaults:f}=s;if(n in f)r=f[n];else{const d=vs(s);r=f[n]=c.call(null,t),d()}}else r=c;s.ce&&s.ce._setProp(n,r)}a[0]&&(i&&!l?r=!1:a[1]&&(r===""||r===jn(n))&&(r=!0))}return r}const pm=new WeakMap;function Bh(e,t,n=!1){const r=n?pm:t.propsCache,s=r.get(e);if(s)return s;const i=e.props,a={},l=[];let c=!1;if(!at(e)){const d=m=>{c=!0;const[E,S]=Bh(m,t,!0);he(a,E),S&&l.push(...S)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!i&&!c)return Ct(e)&&r.set(e,tr),tr;if(nt(i))for(let d=0;d<i.length;d++){const m=pn(i[d]);fu(m)&&(a[m]=It)}else if(i)for(const d in i){const m=pn(d);if(fu(m)){const E=i[d],S=a[m]=nt(E)||at(E)?{type:E}:he({},E),x=S.type;let V=!1,O=!0;if(nt(x))for(let M=0;M<x.length;++M){const W=x[M],Q=at(W)&&W.name;if(Q==="Boolean"){V=!0;break}else Q==="String"&&(O=!1)}else V=at(x)&&x.name==="Boolean";S[0]=V,S[1]=O,(V||yt(S,"default"))&&l.push(m)}}const f=[a,l];return Ct(e)&&r.set(e,f),f}function fu(e){return e[0]!=="$"&&!Qr(e)}const Fa=e=>e[0]==="_"||e==="$stable",Ba=e=>nt(e)?e.map(xe):[xe(e)],mm=(e,t,n)=>{if(t._n)return t;const r=Hr((...s)=>Ba(t(...s)),n);return r._c=!1,r},Uh=(e,t,n)=>{const r=e._ctx;for(const s in e){if(Fa(s))continue;const i=e[s];if(at(i))t[s]=mm(s,i,r);else if(i!=null){const a=Ba(i);t[s]=()=>a}}},jh=(e,t)=>{const n=Ba(t);e.slots.default=()=>n},$h=(e,t,n)=>{for(const r in t)(n||!Fa(r))&&(e[r]=t[r])},gm=(e,t,n)=>{const r=e.slots=kh();if(e.vnode.shapeFlag&32){const s=t._;s?($h(r,t,n),n&&th(r,"_",s,!0)):Uh(t,r)}else t&&jh(e,t)},_m=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,a=It;if(r.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:$h(s,t,n):(i=!t.$stable,Uh(t,s)),a=t}else t&&(jh(e,t),a={default:1});if(i)for(const l in s)!Fa(l)&&a[l]==null&&delete s[l]},_e=xm;function ym(e){return vm(e)}function vm(e,t){const n=Mi();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:l,createComment:c,setText:f,setElementText:d,parentNode:m,nextSibling:E,setScopeId:S=Oe,insertStaticContent:x}=e,V=(_,T,P,L=null,N=null,k=null,z=void 0,U=null,B=!!T.dynamicChildren)=>{if(_===T)return;_&&!jr(_,T)&&(L=Be(_),Nt(_,N,k,!0),_=null),T.patchFlag===-2&&(B=!1,T.dynamicChildren=null);const{type:F,ref:X,shapeFlag:H}=T;switch(F){case ji:O(_,T,P,L);break;case Ge:M(_,T,P,L);break;case Ro:_==null&&W(T,P,L,z);break;case Wt:C(_,T,P,L,N,k,z,U,B);break;default:H&1?J(_,T,P,L,N,k,z,U,B):H&6?y(_,T,P,L,N,k,z,U,B):(H&64||H&128)&&F.process(_,T,P,L,N,k,z,U,B,Se)}X!=null&&N&&pi(X,_&&_.ref,k,T||_,!T)},O=(_,T,P,L)=>{if(_==null)r(T.el=l(T.children),P,L);else{const N=T.el=_.el;T.children!==_.children&&f(N,T.children)}},M=(_,T,P,L)=>{_==null?r(T.el=c(T.children||""),P,L):T.el=_.el},W=(_,T,P,L)=>{[_.el,_.anchor]=x(_.children,T,P,L,_.el,_.anchor)},Q=({el:_,anchor:T},P,L)=>{let N;for(;_&&_!==T;)N=E(_),r(_,P,L),_=N;r(T,P,L)},K=({el:_,anchor:T})=>{let P;for(;_&&_!==T;)P=E(_),s(_),_=P;s(T)},J=(_,T,P,L,N,k,z,U,B)=>{T.type==="svg"?z="svg":T.type==="math"&&(z="mathml"),_==null?lt(T,P,L,N,k,z,U,B):v(_,T,N,k,z,U,B)},lt=(_,T,P,L,N,k,z,U)=>{let B,F;const{props:X,shapeFlag:H,transition:Y,dirs:et}=_;if(B=_.el=a(_.type,k,X&&X.is,X),H&8?d(B,_.children):H&16&&g(_.children,B,null,L,N,Co(_,k),z,U),et&&Vn(_,null,L,"created"),I(B,_,_.scopeId,z,L),X){for(const ot in X)ot!=="value"&&!Qr(ot)&&i(B,ot,null,X[ot],k,L);"value"in X&&i(B,"value",null,X.value,k),(F=X.onVnodeBeforeMount)&&Re(F,L,_)}et&&Vn(_,null,L,"beforeMount");const Z=Em(N,Y);Z&&Y.beforeEnter(B),r(B,T,P),((F=X&&X.onVnodeMounted)||Z||et)&&_e(()=>{F&&Re(F,L,_),Z&&Y.enter(B),et&&Vn(_,null,L,"mounted")},N)},I=(_,T,P,L,N)=>{if(P&&S(_,P),L)for(let k=0;k<L.length;k++)S(_,L[k]);if(N){let k=N.subTree;if(T===k||Gh(k.type)&&(k.ssContent===T||k.ssFallback===T)){const z=N.vnode;I(_,z,z.scopeId,z.slotScopeIds,N.parent)}}},g=(_,T,P,L,N,k,z,U,B=0)=>{for(let F=B;F<_.length;F++){const X=_[F]=U?an(_[F]):xe(_[F]);V(null,X,T,P,L,N,k,z,U)}},v=(_,T,P,L,N,k,z)=>{const U=T.el=_.el;let{patchFlag:B,dynamicChildren:F,dirs:X}=T;B|=_.patchFlag&16;const H=_.props||It,Y=T.props||It;let et;if(P&&xn(P,!1),(et=Y.onVnodeBeforeUpdate)&&Re(et,P,T,_),X&&Vn(T,_,P,"beforeUpdate"),P&&xn(P,!0),(H.innerHTML&&Y.innerHTML==null||H.textContent&&Y.textContent==null)&&d(U,""),F?w(_.dynamicChildren,F,U,P,L,Co(T,N),k):z||mt(_,T,U,null,P,L,Co(T,N),k,!1),B>0){if(B&16)A(U,H,Y,P,N);else if(B&2&&H.class!==Y.class&&i(U,"class",null,Y.class,N),B&4&&i(U,"style",H.style,Y.style,N),B&8){const Z=T.dynamicProps;for(let ot=0;ot<Z.length;ot++){const ct=Z[ot],Gt=H[ct],Ut=Y[ct];(Ut!==Gt||ct==="value")&&i(U,ct,Gt,Ut,N,P)}}B&1&&_.children!==T.children&&d(U,T.children)}else!z&&F==null&&A(U,H,Y,P,N);((et=Y.onVnodeUpdated)||X)&&_e(()=>{et&&Re(et,P,T,_),X&&Vn(T,_,P,"updated")},L)},w=(_,T,P,L,N,k,z)=>{for(let U=0;U<T.length;U++){const B=_[U],F=T[U],X=B.el&&(B.type===Wt||!jr(B,F)||B.shapeFlag&198)?m(B.el):P;V(B,F,X,null,L,N,k,z,!0)}},A=(_,T,P,L,N)=>{if(T!==P){if(T!==It)for(const k in T)!Qr(k)&&!(k in P)&&i(_,k,T[k],null,N,L);for(const k in P){if(Qr(k))continue;const z=P[k],U=T[k];z!==U&&k!=="value"&&i(_,k,U,z,N,L)}"value"in P&&i(_,"value",T.value,P.value,N)}},C=(_,T,P,L,N,k,z,U,B)=>{const F=T.el=_?_.el:l(""),X=T.anchor=_?_.anchor:l("");let{patchFlag:H,dynamicChildren:Y,slotScopeIds:et}=T;et&&(U=U?U.concat(et):et),_==null?(r(F,P,L),r(X,P,L),g(T.children||[],P,X,N,k,z,U,B)):H>0&&H&64&&Y&&_.dynamicChildren?(w(_.dynamicChildren,Y,P,N,k,z,U),(T.key!=null||N&&T===N.subTree)&&qh(_,T,!0)):mt(_,T,P,X,N,k,z,U,B)},y=(_,T,P,L,N,k,z,U,B)=>{T.slotScopeIds=U,_==null?T.shapeFlag&512?N.ctx.activate(T,P,L,z,B):me(T,P,L,N,k,z,B):Je(_,T,B)},me=(_,T,P,L,N,k,z)=>{const U=_.component=Bm(_,L,N);if(Sh(_)&&(U.ctx.renderer=Se),Um(U,!1,z),U.asyncDep){if(N&&N.registerDep(U,Bt,z),!_.el){const B=U.subTree=ue(Ge);M(null,B,T,P)}}else Bt(U,_,T,P,N,k,z)},Je=(_,T,P)=>{const L=T.component=_.component;if(Pm(_,T,P))if(L.asyncDep&&!L.asyncResolved){vt(L,T,P);return}else L.next=T,L.update();else T.el=_.el,L.vnode=T},Bt=(_,T,P,L,N,k,z)=>{const U=()=>{if(_.isMounted){let{next:H,bu:Y,u:et,parent:Z,vnode:ot}=_;{const Qt=Hh(_);if(Qt){H&&(H.el=ot.el,vt(_,H,z)),Qt.asyncDep.then(()=>{_.isUnmounted||U()});return}}let ct=H,Gt;xn(_,!1),H?(H.el=ot.el,vt(_,H,z)):H=ot,Y&&ti(Y),(Gt=H.props&&H.props.onVnodeBeforeUpdate)&&Re(Gt,Z,H,ot),xn(_,!0);const Ut=pu(_),ve=_.subTree;_.subTree=Ut,V(ve,Ut,m(ve.el),Be(ve),_,N,k),H.el=Ut.el,ct===null&&Vm(_,Ut.el),et&&_e(et,N),(Gt=H.props&&H.props.onVnodeUpdated)&&_e(()=>Re(Gt,Z,H,ot),N)}else{let H;const{el:Y,props:et}=T,{bm:Z,m:ot,parent:ct,root:Gt,type:Ut}=_,ve=sr(T);xn(_,!1),Z&&ti(Z),!ve&&(H=et&&et.onVnodeBeforeMount)&&Re(H,ct,T),xn(_,!0);{Gt.ce&&Gt.ce._injectChildStyle(Ut);const Qt=_.subTree=pu(_);V(null,Qt,P,L,_,N,k),T.el=Qt.el}if(ot&&_e(ot,N),!ve&&(H=et&&et.onVnodeMounted)){const Qt=T;_e(()=>Re(H,ct,Qt),N)}(T.shapeFlag&256||ct&&sr(ct.vnode)&&ct.vnode.shapeFlag&256)&&_.a&&_e(_.a,N),_.isMounted=!0,T=P=L=null}};_.scope.on();const B=_.effect=new sh(U);_.scope.off();const F=_.update=B.run.bind(B),X=_.job=B.runIfDirty.bind(B);X.i=_,X.id=_.uid,B.scheduler=()=>ka(X),xn(_,!0),F()},vt=(_,T,P)=>{T.component=_;const L=_.vnode.props;_.vnode=T,_.next=null,dm(_,T.props,L,P),_m(_,T.children,P),We(),au(_),Ke()},mt=(_,T,P,L,N,k,z,U,B=!1)=>{const F=_&&_.children,X=_?_.shapeFlag:0,H=T.children,{patchFlag:Y,shapeFlag:et}=T;if(Y>0){if(Y&128){In(F,H,P,L,N,k,z,U,B);return}else if(Y&256){we(F,H,P,L,N,k,z,U,B);return}}et&8?(X&16&&bn(F,N,k),H!==F&&d(P,H)):X&16?et&16?In(F,H,P,L,N,k,z,U,B):bn(F,N,k,!0):(X&8&&d(P,""),et&16&&g(H,P,L,N,k,z,U,B))},we=(_,T,P,L,N,k,z,U,B)=>{_=_||tr,T=T||tr;const F=_.length,X=T.length,H=Math.min(F,X);let Y;for(Y=0;Y<H;Y++){const et=T[Y]=B?an(T[Y]):xe(T[Y]);V(_[Y],et,P,null,N,k,z,U,B)}F>X?bn(_,N,k,!0,!1,H):g(T,P,L,N,k,z,U,B,H)},In=(_,T,P,L,N,k,z,U,B)=>{let F=0;const X=T.length;let H=_.length-1,Y=X-1;for(;F<=H&&F<=Y;){const et=_[F],Z=T[F]=B?an(T[F]):xe(T[F]);if(jr(et,Z))V(et,Z,P,null,N,k,z,U,B);else break;F++}for(;F<=H&&F<=Y;){const et=_[H],Z=T[Y]=B?an(T[Y]):xe(T[Y]);if(jr(et,Z))V(et,Z,P,null,N,k,z,U,B);else break;H--,Y--}if(F>H){if(F<=Y){const et=Y+1,Z=et<X?T[et].el:L;for(;F<=Y;)V(null,T[F]=B?an(T[F]):xe(T[F]),P,Z,N,k,z,U,B),F++}}else if(F>Y)for(;F<=H;)Nt(_[F],N,k,!0),F++;else{const et=F,Z=F,ot=new Map;for(F=Z;F<=Y;F++){const jt=T[F]=B?an(T[F]):xe(T[F]);jt.key!=null&&ot.set(jt.key,F)}let ct,Gt=0;const Ut=Y-Z+1;let ve=!1,Qt=0;const Ze=new Array(Ut);for(F=0;F<Ut;F++)Ze[F]=0;for(F=et;F<=H;F++){const jt=_[F];if(Gt>=Ut){Nt(jt,N,k,!0);continue}let Ee;if(jt.key!=null)Ee=ot.get(jt.key);else for(ct=Z;ct<=Y;ct++)if(Ze[ct-Z]===0&&jr(jt,T[ct])){Ee=ct;break}Ee===void 0?Nt(jt,N,k,!0):(Ze[Ee-Z]=F+1,Ee>=Qt?Qt=Ee:ve=!0,V(jt,T[Ee],P,null,N,k,z,U,B),Gt++)}const Cr=ve?Tm(Ze):tr;for(ct=Cr.length-1,F=Ut-1;F>=0;F--){const jt=Z+F,Ee=T[jt],bs=jt+1<X?T[jt+1].el:L;Ze[F]===0?V(null,Ee,P,bs,N,k,z,U,B):ve&&(ct<0||F!==Cr[ct]?Fe(Ee,P,bs,2):ct--)}}},Fe=(_,T,P,L,N=null)=>{const{el:k,type:z,transition:U,children:B,shapeFlag:F}=_;if(F&6){Fe(_.component.subTree,T,P,L);return}if(F&128){_.suspense.move(T,P,L);return}if(F&64){z.move(_,T,P,Se);return}if(z===Wt){r(k,T,P);for(let H=0;H<B.length;H++)Fe(B[H],T,P,L);r(_.anchor,T,P);return}if(z===Ro){Q(_,T,P);return}if(L!==2&&F&1&&U)if(L===0)U.beforeEnter(k),r(k,T,P),_e(()=>U.enter(k),N);else{const{leave:H,delayLeave:Y,afterLeave:et}=U,Z=()=>{_.ctx.isUnmounted?s(k):r(k,T,P)},ot=()=>{H(k,()=>{Z(),et&&et()})};Y?Y(k,Z,ot):ot()}else r(k,T,P)},Nt=(_,T,P,L=!1,N=!1)=>{const{type:k,props:z,ref:U,children:B,dynamicChildren:F,shapeFlag:X,patchFlag:H,dirs:Y,cacheIndex:et}=_;if(H===-2&&(N=!1),U!=null&&(We(),pi(U,null,P,_,!0),Ke()),et!=null&&(T.renderCache[et]=void 0),X&256){T.ctx.deactivate(_);return}const Z=X&1&&Y,ot=!sr(_);let ct;if(ot&&(ct=z&&z.onVnodeBeforeUnmount)&&Re(ct,T,_),X&6)An(_.component,P,L);else{if(X&128){_.suspense.unmount(P,L);return}Z&&Vn(_,null,T,"beforeUnmount"),X&64?_.type.remove(_,T,P,Se,L):F&&!F.hasOnce&&(k!==Wt||H>0&&H&64)?bn(F,T,P,!1,!0):(k===Wt&&H&384||!N&&X&16)&&bn(B,T,P),L&&Mt(_)}(ot&&(ct=z&&z.onVnodeUnmounted)||Z)&&_e(()=>{ct&&Re(ct,T,_),Z&&Vn(_,null,T,"unmounted")},P)},Mt=_=>{const{type:T,el:P,anchor:L,transition:N}=_;if(T===Wt){no(P,L);return}if(T===Ro){K(_);return}const k=()=>{s(P),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(_.shapeFlag&1&&N&&!N.persisted){const{leave:z,delayLeave:U}=N,B=()=>z(P,k);U?U(_.el,k,B):B()}else k()},no=(_,T)=>{let P;for(;_!==T;)P=E(_),s(_),_=P;s(T)},An=(_,T,P)=>{const{bum:L,scope:N,job:k,subTree:z,um:U,m:B,a:F,parent:X,slots:{__:H}}=_;du(B),du(F),L&&ti(L),X&&nt(H)&&H.forEach(Y=>{X.renderCache[Y]=void 0}),N.stop(),k&&(k.flags|=8,Nt(z,_,T,P)),U&&_e(U,T),_e(()=>{_.isUnmounted=!0},T),T&&T.pendingBranch&&!T.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===T.pendingId&&(T.deps--,T.deps===0&&T.resolve())},bn=(_,T,P,L=!1,N=!1,k=0)=>{for(let z=k;z<_.length;z++)Nt(_[z],T,P,L,N)},Be=_=>{if(_.shapeFlag&6)return Be(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const T=E(_.anchor||_.el),P=T&&T[$p];return P?E(P):T};let Ar=!1;const As=(_,T,P)=>{_==null?T._vnode&&Nt(T._vnode,null,null,!0):V(T._vnode||null,_,T,null,null,null,P),T._vnode=_,Ar||(Ar=!0,au(),Ih(),Ar=!1)},Se={p:V,um:Nt,m:Fe,r:Mt,mt:me,mc:g,pc:mt,pbc:w,n:Be,o:e};return{render:As,hydrate:void 0,createApp:cm(As)}}function Co({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function xn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Em(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function qh(e,t,n=!1){const r=e.children,s=t.children;if(nt(r)&&nt(s))for(let i=0;i<r.length;i++){const a=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=an(s[i]),l.el=a.el),!n&&l.patchFlag!==-2&&qh(a,l)),l.type===ji&&(l.el=a.el),l.type===Ge&&!l.el&&(l.el=a.el)}}function Tm(e){const t=e.slice(),n=[0];let r,s,i,a,l;const c=e.length;for(r=0;r<c;r++){const f=e[r];if(f!==0){if(s=n[n.length-1],e[s]<f){t[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)l=i+a>>1,e[n[l]]<f?i=l+1:a=l;f<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}function Hh(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Hh(t)}function du(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const wm=Symbol.for("v-scx"),Im=()=>ei(wm);function So(e,t,n){return zh(e,t,n)}function zh(e,t,n=It){const{immediate:r,deep:s,flush:i,once:a}=n,l=he({},n),c=t&&r||!t&&i!=="post";let f;if(us){if(i==="sync"){const S=Im();f=S.__watcherHandles||(S.__watcherHandles=[])}else if(!c){const S=()=>{};return S.stop=Oe,S.resume=Oe,S.pause=Oe,S}}const d=ae;l.call=(S,x,V)=>Me(S,d,x,V);let m=!1;i==="post"?l.scheduler=S=>{_e(S,d&&d.suspense)}:i!=="sync"&&(m=!0,l.scheduler=(S,x)=>{x?S():ka(S)}),l.augmentJob=S=>{t&&(S.flags|=4),m&&(S.flags|=2,d&&(S.id=d.uid,S.i=d))};const E=Fp(e,t,l);return us&&(f?f.push(E):c&&E()),E}function Am(e,t,n){const r=this.proxy,s=Ot(e)?e.includes(".")?Wh(r,e):()=>r[e]:e.bind(r,r);let i;at(t)?i=t:(i=t.handler,n=t);const a=vs(this),l=zh(s,i.bind(r),n);return a(),l}function Wh(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const bm=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${pn(t)}Modifiers`]||e[`${jn(t)}Modifiers`];function Cm(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||It;let s=n;const i=t.startsWith("update:"),a=i&&bm(r,t.slice(7));a&&(a.trim&&(s=n.map(d=>Ot(d)?d.trim():d)),a.number&&(s=n.map(ui)));let l,c=r[l=vo(t)]||r[l=vo(pn(t))];!c&&i&&(c=r[l=vo(jn(t))]),c&&Me(c,e,6,s);const f=r[l+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Me(f,e,6,s)}}function Kh(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let a={},l=!1;if(!at(e)){const c=f=>{const d=Kh(f,t,!0);d&&(l=!0,he(a,d))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!l?(Ct(e)&&r.set(e,null),null):(nt(i)?i.forEach(c=>a[c]=null):he(a,i),Ct(e)&&r.set(e,a),a)}function Ui(e,t){return!e||!Di(t)?!1:(t=t.slice(2).replace(/Once$/,""),yt(e,t[0].toLowerCase()+t.slice(1))||yt(e,jn(t))||yt(e,t))}function pu(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:l,emit:c,render:f,renderCache:d,props:m,data:E,setupState:S,ctx:x,inheritAttrs:V}=e,O=di(e);let M,W;try{if(n.shapeFlag&4){const K=s||r,J=K;M=xe(f.call(J,K,d,m,S,E,x)),W=l}else{const K=t;M=xe(K.length>1?K(m,{attrs:l,slots:a,emit:c}):K(m,null)),W=t.props?l:Sm(l)}}catch(K){Zr.length=0,Fi(K,e,1),M=ue(Ge)}let Q=M;if(W&&V!==!1){const K=Object.keys(W),{shapeFlag:J}=Q;K.length&&J&7&&(i&&K.some(Ia)&&(W=Rm(W,i)),Q=hr(Q,W,!1,!0))}return n.dirs&&(Q=hr(Q,null,!1,!0),Q.dirs=Q.dirs?Q.dirs.concat(n.dirs):n.dirs),n.transition&&La(Q,n.transition),M=Q,di(O),M}const Sm=e=>{let t;for(const n in e)(n==="class"||n==="style"||Di(n))&&((t||(t={}))[n]=e[n]);return t},Rm=(e,t)=>{const n={};for(const r in e)(!Ia(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Pm(e,t,n){const{props:r,children:s,component:i}=e,{props:a,children:l,patchFlag:c}=t,f=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?mu(r,a,f):!!a;if(c&8){const d=t.dynamicProps;for(let m=0;m<d.length;m++){const E=d[m];if(a[E]!==r[E]&&!Ui(f,E))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?mu(r,a,f):!0:!!a;return!1}function mu(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!Ui(n,i))return!0}return!1}function Vm({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Gh=e=>e.__isSuspense;function xm(e,t){t&&t.pendingBranch?nt(e)?t.effects.push(...e):t.effects.push(e):jp(e)}const Wt=Symbol.for("v-fgt"),ji=Symbol.for("v-txt"),Ge=Symbol.for("v-cmt"),Ro=Symbol.for("v-stc"),Zr=[];let ye=null;function qt(e=!1){Zr.push(ye=e?null:[])}function Dm(){Zr.pop(),ye=Zr[Zr.length-1]||null}let ls=1;function gu(e,t=!1){ls+=e,e<0&&ye&&t&&(ye.hasOnce=!0)}function Qh(e){return e.dynamicChildren=ls>0?ye||tr:null,Dm(),ls>0&&ye&&ye.push(e),e}function fe(e,t,n,r,s,i){return Qh($(e,t,n,r,s,i,!0))}function Qo(e,t,n,r,s){return Qh(ue(e,t,n,r,s,!0))}function Ua(e){return e?e.__v_isVNode===!0:!1}function jr(e,t){return e.type===t.type&&e.key===t.key}const Yh=({key:e})=>e??null,ni=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Ot(e)||re(e)||at(e)?{i:ne,r:e,k:t,f:!!n}:e:null);function $(e,t=null,n=null,r=0,s=null,i=e===Wt?0:1,a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Yh(t),ref:t&&ni(t),scopeId:bh,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:ne};return l?(ja(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=Ot(n)?8:16),ls>0&&!a&&ye&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&ye.push(c),c}const ue=Om;function Om(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===em)&&(e=Ge),Ua(e)){const l=hr(e,t,!0);return n&&ja(l,n),ls>0&&!i&&ye&&(l.shapeFlag&6?ye[ye.indexOf(e)]=l:ye.push(l)),l.patchFlag=-2,l}if(Hm(e)&&(e=e.__vccOpts),t){t=Nm(t);let{class:l,style:c}=t;l&&!Ot(l)&&(t.class=Sa(l)),Ct(c)&&(Ma(c)&&!nt(c)&&(c=he({},c)),t.style=Ca(c))}const a=Ot(e)?1:Gh(e)?128:qp(e)?64:Ct(e)?4:at(e)?2:0;return $(e,t,n,r,s,a,i,!0)}function Nm(e){return e?Ma(e)||Lh(e)?he({},e):e:null}function hr(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:l,transition:c}=e,f=t?km(s||{},t):s,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&Yh(f),ref:t&&t.ref?n&&i?nt(i)?i.concat(ni(t)):[i,ni(t)]:ni(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Wt?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&hr(e.ssContent),ssFallback:e.ssFallback&&hr(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&La(d,c.clone(d)),d}function Xh(e=" ",t=0){return ue(ji,null,e,t)}function Mm(e="",t=!1){return t?(qt(),Qo(Ge,null,e)):ue(Ge,null,e)}function xe(e){return e==null||typeof e=="boolean"?ue(Ge):nt(e)?ue(Wt,null,e.slice()):Ua(e)?an(e):ue(ji,null,String(e))}function an(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:hr(e)}function ja(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(nt(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),ja(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!Lh(t)?t._ctx=ne:s===3&&ne&&(ne.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else at(t)?(t={default:t,_ctx:ne},n=32):(t=String(t),r&64?(n=16,t=[Xh(t)]):n=8);e.children=t,e.shapeFlag|=n}function km(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=Sa([t.class,r.class]));else if(s==="style")t.style=Ca([t.style,r.style]);else if(Di(s)){const i=t[s],a=r[s];a&&i!==a&&!(nt(i)&&i.includes(a))&&(t[s]=i?[].concat(i,a):a)}else s!==""&&(t[s]=r[s])}return t}function Re(e,t,n,r=null){Me(e,t,7,[n,r])}const Lm=Nh();let Fm=0;function Bm(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||Lm,i={uid:Fm++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new up(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Bh(r,s),emitsOptions:Kh(r,s),emit:null,emitted:null,propsDefaults:It,inheritAttrs:r.inheritAttrs,ctx:It,data:It,props:It,attrs:It,slots:It,refs:It,setupState:It,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Cm.bind(null,i),e.ce&&e.ce(i),i}let ae=null,gi,Yo;{const e=Mi(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};gi=t("__VUE_INSTANCE_SETTERS__",n=>ae=n),Yo=t("__VUE_SSR_SETTERS__",n=>us=n)}const vs=e=>{const t=ae;return gi(e),e.scope.on(),()=>{e.scope.off(),gi(t)}},_u=()=>{ae&&ae.scope.off(),gi(null)};function Jh(e){return e.vnode.shapeFlag&4}let us=!1;function Um(e,t=!1,n=!1){t&&Yo(t);const{props:r,children:s}=e.vnode,i=Jh(e);fm(e,r,i,t),gm(e,s,n||t);const a=i?jm(e,t):void 0;return t&&Yo(!1),a}function jm(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,rm);const{setup:r}=n;if(r){We();const s=e.setupContext=r.length>1?qm(e):null,i=vs(e),a=ys(r,e,0,[e.props,s]),l=Yc(a);if(Ke(),i(),(l||e.sp)&&!sr(e)&&Ch(e),l){if(a.then(_u,_u),t)return a.then(c=>{yu(e,c)}).catch(c=>{Fi(c,e,0)});e.asyncDep=a}else yu(e,a)}else Zh(e)}function yu(e,t,n){at(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ct(t)&&(e.setupState=vh(t)),Zh(e)}function Zh(e,t,n){const r=e.type;e.render||(e.render=r.render||Oe);{const s=vs(e);We();try{sm(e)}finally{Ke(),s()}}}const $m={get(e,t){return te(e,"get",""),e[t]}};function qm(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,$m),slots:e.slots,emit:e.emit,expose:t}}function $i(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(vh(Vp(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Jr)return Jr[n](e)},has(t,n){return n in t||n in Jr}})):e.proxy}function Hm(e){return at(e)&&"__vccOpts"in e}const tf=(e,t)=>kp(e,t,us),zm="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Xo;const vu=typeof window<"u"&&window.trustedTypes;if(vu)try{Xo=vu.createPolicy("vue",{createHTML:e=>e})}catch{}const ef=Xo?e=>Xo.createHTML(e):e=>e,Wm="http://www.w3.org/2000/svg",Km="http://www.w3.org/1998/Math/MathML",qe=typeof document<"u"?document:null,Eu=qe&&qe.createElement("template"),Gm={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?qe.createElementNS(Wm,e):t==="mathml"?qe.createElementNS(Km,e):n?qe.createElement(e,{is:n}):qe.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>qe.createTextNode(e),createComment:e=>qe.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>qe.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const a=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Eu.innerHTML=ef(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const l=Eu.content;if(r==="svg"||r==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Qm=Symbol("_vtc");function Ym(e,t,n){const r=e[Qm];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Tu=Symbol("_vod"),Xm=Symbol("_vsh"),Jm=Symbol(""),Zm=/(^|;)\s*display\s*:/;function tg(e,t,n){const r=e.style,s=Ot(n);let i=!1;if(n&&!s){if(t)if(Ot(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&ri(r,l,"")}else for(const a in t)n[a]==null&&ri(r,a,"");for(const a in n)a==="display"&&(i=!0),ri(r,a,n[a])}else if(s){if(t!==n){const a=r[Jm];a&&(n+=";"+a),r.cssText=n,i=Zm.test(n)}}else t&&e.removeAttribute("style");Tu in e&&(e[Tu]=i?r.display:"",e[Xm]&&(r.display="none"))}const wu=/\s*!important$/;function ri(e,t,n){if(nt(n))n.forEach(r=>ri(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=eg(e,t);wu.test(n)?e.setProperty(jn(r),n.replace(wu,""),"important"):e[r]=n}}const Iu=["Webkit","Moz","ms"],Po={};function eg(e,t){const n=Po[t];if(n)return n;let r=pn(t);if(r!=="filter"&&r in e)return Po[t]=r;r=Zc(r);for(let s=0;s<Iu.length;s++){const i=Iu[s]+r;if(i in e)return Po[t]=i}return t}const Au="http://www.w3.org/1999/xlink";function bu(e,t,n,r,s,i=op(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Au,t.slice(6,t.length)):e.setAttributeNS(Au,t,n):n==null||i&&!eh(n)?e.removeAttribute(t):e.setAttribute(t,i?"":be(n)?String(n):n)}function Cu(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?ef(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=eh(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(s||t)}function Mn(e,t,n,r){e.addEventListener(t,n,r)}function ng(e,t,n,r){e.removeEventListener(t,n,r)}const Su=Symbol("_vei");function rg(e,t,n,r,s=null){const i=e[Su]||(e[Su]={}),a=i[t];if(r&&a)a.value=r;else{const[l,c]=sg(t);if(r){const f=i[t]=ag(r,s);Mn(e,l,f,c)}else a&&(ng(e,l,a,c),i[t]=void 0)}}const Ru=/(?:Once|Passive|Capture)$/;function sg(e){let t;if(Ru.test(e)){t={};let r;for(;r=e.match(Ru);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):jn(e.slice(2)),t]}let Vo=0;const ig=Promise.resolve(),og=()=>Vo||(ig.then(()=>Vo=0),Vo=Date.now());function ag(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Me(lg(r,n.value),t,5,[r])};return n.value=e,n.attached=og(),n}function lg(e,t){if(nt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const Pu=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,ug=(e,t,n,r,s,i)=>{const a=s==="svg";t==="class"?Ym(e,r,a):t==="style"?tg(e,n,r):Di(t)?Ia(t)||rg(e,t,n,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):cg(e,t,r,a))?(Cu(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&bu(e,t,r,a,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ot(r))?Cu(e,pn(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),bu(e,t,r,a))};function cg(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&Pu(t)&&at(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Pu(t)&&Ot(n)?!1:t in e}const _i=e=>{const t=e.props["onUpdate:modelValue"]||!1;return nt(t)?n=>ti(t,n):t};function hg(e){e.target.composing=!0}function Vu(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const or=Symbol("_assign"),xu={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[or]=_i(s);const i=r||s.props&&s.props.type==="number";Mn(e,t?"change":"input",a=>{if(a.target.composing)return;let l=e.value;n&&(l=l.trim()),i&&(l=ui(l)),e[or](l)}),n&&Mn(e,"change",()=>{e.value=e.value.trim()}),t||(Mn(e,"compositionstart",hg),Mn(e,"compositionend",Vu),Mn(e,"change",Vu))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},a){if(e[or]=_i(a),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?ui(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||s&&e.value.trim()===c)||(e.value=c))}},fg={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const s=Oi(t);Mn(e,"change",()=>{const i=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>n?ui(yi(a)):yi(a));e[or](e.multiple?s?new Set(i):i:i[0]),e._assigning=!0,Th(()=>{e._assigning=!1})}),e[or]=_i(r)},mounted(e,{value:t}){Du(e,t)},beforeUpdate(e,t,n){e[or]=_i(n)},updated(e,{value:t}){e._assigning||Du(e,t)}};function Du(e,t){const n=e.multiple,r=nt(t);if(!(n&&!r&&!Oi(t))){for(let s=0,i=e.options.length;s<i;s++){const a=e.options[s],l=yi(a);if(n)if(r){const c=typeof l;c==="string"||c==="number"?a.selected=t.some(f=>String(f)===String(l)):a.selected=lp(t,l)>-1}else a.selected=t.has(l);else if(ki(yi(a),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function yi(e){return"_value"in e?e._value:e.value}const dg=he({patchProp:ug},Gm);let Ou;function pg(){return Ou||(Ou=ym(dg))}const mg=(...e)=>{const t=pg().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=_g(r);if(!s)return;const i=t._component;!at(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,gg(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t};function gg(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function _g(e){return Ot(e)?document.querySelector(e):e}const yg="/student-recycle-dashboard/assets/logo-DMlNQp5X.jpeg",vg=()=>{};var Nu={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},Eg=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],a=e[n++],l=e[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return t.join("")},rf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],a=s+1<e.length,l=a?e[s+1]:0,c=s+2<e.length,f=c?e[s+2]:0,d=i>>2,m=(i&3)<<4|l>>4;let E=(l&15)<<2|f>>6,S=f&63;c||(S=64,a||(E=64)),r.push(n[d],n[m],n[E],n[S])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(nf(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Eg(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const f=s<e.length?n[e.charAt(s)]:64;++s;const m=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||l==null||f==null||m==null)throw new Tg;const E=i<<2|l>>4;if(r.push(E),f!==64){const S=l<<4&240|f>>2;if(r.push(S),m!==64){const x=f<<6&192|m;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Tg extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wg=function(e){const t=nf(e);return rf.encodeByteArray(t,!0)},vi=function(e){return wg(e).replace(/\./g,"")},Ig=function(e){try{return rf.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg=()=>Ag().__FIREBASE_DEFAULTS__,Cg=()=>{if(typeof process>"u"||typeof Nu>"u")return;const e=Nu.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Sg=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Ig(e[1]);return t&&JSON.parse(t)},$a=()=>{try{return vg()||bg()||Cg()||Sg()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Rg=e=>{var t,n;return(n=(t=$a())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Pg=e=>{const t=Rg(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},sf=()=>{var e;return(e=$a())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(e){return e.endsWith(".cloudworkstations.dev")}async function xg(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[vi(JSON.stringify(n)),vi(JSON.stringify(a)),""].join(".")}const ts={};function Og(){const e={prod:[],emulator:[]};for(const t of Object.keys(ts))ts[t]?e.emulator.push(t):e.prod.push(t);return e}function Ng(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let Mu=!1;function Mg(e,t){if(typeof window>"u"||typeof document>"u"||!qa(window.location.host)||ts[e]===t||ts[e]||Mu)return;ts[e]=t;function n(E){return`__firebase__banner__${E}`}const r="__firebase__banner",i=Og().prod.length>0;function a(){const E=document.getElementById(r);E&&E.remove()}function l(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function c(E,S){E.setAttribute("width","24"),E.setAttribute("id",S),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function f(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Mu=!0,a()},E}function d(E,S){E.setAttribute("id",S),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function m(){const E=Ng(r),S=n("text"),x=document.getElementById(S)||document.createElement("span"),V=n("learnmore"),O=document.getElementById(V)||document.createElement("a"),M=n("preprendIcon"),W=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const Q=E.element;l(Q),d(O,V);const K=f();c(W,M),Q.append(W,x,O,K),document.body.appendChild(Q)}i?(x.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Lg(){var e;const t=(e=$a())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Fg(){return!Lg()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Bg(){try{return typeof indexedDB=="object"}catch{return!1}}function Ug(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg="FirebaseError";class vr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=jg,Object.setPrototypeOf(this,vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,of.prototype.create)}}class of{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],a=i?$g(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new vr(s,l,r)}}function $g(e,t){return e.replace(qg,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const qg=/\{\$([^}]+)}/g;function Ei(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],a=t[s];if(ku(i)&&ku(a)){if(!Ei(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ku(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(e){return e&&e._delegate?e._delegate:e}class cs{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new Vg;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Kg(t))try{this.getOrInitializeService({instanceIdentifier:On})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=On){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=On){return this.instances.has(t)}getOptions(t=On){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&t(a,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Wg(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=On){return this.component?this.component.multipleInstances?t:On:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Wg(e){return e===On?void 0:e}function Kg(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new zg(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ft||(ft={}));const Qg={debug:ft.DEBUG,verbose:ft.VERBOSE,info:ft.INFO,warn:ft.WARN,error:ft.ERROR,silent:ft.SILENT},Yg=ft.INFO,Xg={[ft.DEBUG]:"log",[ft.VERBOSE]:"log",[ft.INFO]:"info",[ft.WARN]:"warn",[ft.ERROR]:"error"},Jg=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=Xg[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class af{constructor(t){this.name=t,this._logLevel=Yg,this._logHandler=Jg,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ft))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Qg[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ft.DEBUG,...t),this._logHandler(this,ft.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ft.VERBOSE,...t),this._logHandler(this,ft.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ft.INFO,...t),this._logHandler(this,ft.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ft.WARN,...t),this._logHandler(this,ft.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ft.ERROR,...t),this._logHandler(this,ft.ERROR,...t)}}const Zg=(e,t)=>t.some(n=>e instanceof n);let Lu,Fu;function t_(){return Lu||(Lu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function e_(){return Fu||(Fu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lf=new WeakMap,Jo=new WeakMap,uf=new WeakMap,xo=new WeakMap,Ha=new WeakMap;function n_(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{n(hn(e.result)),s()},a=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&lf.set(n,e)}).catch(()=>{}),Ha.set(t,e),t}function r_(e){if(Jo.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});Jo.set(e,t)}let Zo={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Jo.get(e);if(t==="objectStoreNames")return e.objectStoreNames||uf.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function s_(e){Zo=e(Zo)}function i_(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Do(this),t,...n);return uf.set(r,t.sort?t.sort():[t]),hn(r)}:e_().includes(e)?function(...t){return e.apply(Do(this),t),hn(lf.get(this))}:function(...t){return hn(e.apply(Do(this),t))}}function o_(e){return typeof e=="function"?i_(e):(e instanceof IDBTransaction&&r_(e),Zg(e,t_())?new Proxy(e,Zo):e)}function hn(e){if(e instanceof IDBRequest)return n_(e);if(xo.has(e))return xo.get(e);const t=o_(e);return t!==e&&(xo.set(e,t),Ha.set(t,e)),t}const Do=e=>Ha.get(e);function a_(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(e,t),l=hn(a);return r&&a.addEventListener("upgradeneeded",c=>{r(hn(a.result),c.oldVersion,c.newVersion,hn(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const l_=["get","getKey","getAll","getAllKeys","count"],u_=["put","add","delete","clear"],Oo=new Map;function Bu(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Oo.get(t))return Oo.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=u_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||l_.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),s&&c.done]))[0]};return Oo.set(t,i),i}s_(e=>({...e,get:(t,n,r)=>Bu(t,n)||e.get(t,n,r),has:(t,n)=>!!Bu(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(h_(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function h_(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ta="@firebase/app",Uu="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qe=new af("@firebase/app"),f_="@firebase/app-compat",d_="@firebase/analytics-compat",p_="@firebase/analytics",m_="@firebase/app-check-compat",g_="@firebase/app-check",__="@firebase/auth",y_="@firebase/auth-compat",v_="@firebase/database",E_="@firebase/data-connect",T_="@firebase/database-compat",w_="@firebase/functions",I_="@firebase/functions-compat",A_="@firebase/installations",b_="@firebase/installations-compat",C_="@firebase/messaging",S_="@firebase/messaging-compat",R_="@firebase/performance",P_="@firebase/performance-compat",V_="@firebase/remote-config",x_="@firebase/remote-config-compat",D_="@firebase/storage",O_="@firebase/storage-compat",N_="@firebase/firestore",M_="@firebase/ai",k_="@firebase/firestore-compat",L_="firebase",F_="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea="[DEFAULT]",B_={[ta]:"fire-core",[f_]:"fire-core-compat",[p_]:"fire-analytics",[d_]:"fire-analytics-compat",[g_]:"fire-app-check",[m_]:"fire-app-check-compat",[__]:"fire-auth",[y_]:"fire-auth-compat",[v_]:"fire-rtdb",[E_]:"fire-data-connect",[T_]:"fire-rtdb-compat",[w_]:"fire-fn",[I_]:"fire-fn-compat",[A_]:"fire-iid",[b_]:"fire-iid-compat",[C_]:"fire-fcm",[S_]:"fire-fcm-compat",[R_]:"fire-perf",[P_]:"fire-perf-compat",[V_]:"fire-rc",[x_]:"fire-rc-compat",[D_]:"fire-gcs",[O_]:"fire-gcs-compat",[N_]:"fire-fst",[k_]:"fire-fst-compat",[M_]:"fire-vertex","fire-js":"fire-js",[L_]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti=new Map,U_=new Map,na=new Map;function ju(e,t){try{e.container.addComponent(t)}catch(n){Qe.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function wi(e){const t=e.name;if(na.has(t))return Qe.debug(`There were multiple attempts to register component ${t}.`),!1;na.set(t,e);for(const n of Ti.values())ju(n,e);for(const n of U_.values())ju(n,e);return!0}function j_(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function $_(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fn=new of("app","Firebase",q_);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw fn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_=F_;function cf(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:ea,automaticDataCollectionEnabled:!0},t),s=r.name;if(typeof s!="string"||!s)throw fn.create("bad-app-name",{appName:String(s)});if(n||(n=sf()),!n)throw fn.create("no-options");const i=Ti.get(s);if(i){if(Ei(n,i.options)&&Ei(r,i.config))return i;throw fn.create("duplicate-app",{appName:s})}const a=new Gg(s);for(const c of na.values())a.addComponent(c);const l=new H_(n,r,a);return Ti.set(s,l),l}function W_(e=ea){const t=Ti.get(e);if(!t&&e===ea&&sf())return cf();if(!t)throw fn.create("no-app",{appName:e});return t}function ar(e,t,n){var r;let s=(r=B_[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${t}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Qe.warn(l.join(" "));return}wi(new cs(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="firebase-heartbeat-database",G_=1,hs="firebase-heartbeat-store";let No=null;function hf(){return No||(No=a_(K_,G_,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(hs)}catch(n){console.warn(n)}}}}).catch(e=>{throw fn.create("idb-open",{originalErrorMessage:e.message})})),No}async function Q_(e){try{const n=(await hf()).transaction(hs),r=await n.objectStore(hs).get(ff(e));return await n.done,r}catch(t){if(t instanceof vr)Qe.warn(t.message);else{const n=fn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Qe.warn(n.message)}}}async function $u(e,t){try{const r=(await hf()).transaction(hs,"readwrite");await r.objectStore(hs).put(t,ff(e)),await r.done}catch(n){if(n instanceof vr)Qe.warn(n.message);else{const r=fn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qe.warn(r.message)}}}function ff(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_=1024,X_=30;class J_{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ty(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=qu();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>X_){const a=ey(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Qe.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qu(),{heartbeatsToSend:r,unsentEntries:s}=Z_(this._heartbeatsCache.heartbeats),i=vi(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Qe.warn(n),""}}}function qu(){return new Date().toISOString().substring(0,10)}function Z_(e,t=Y_){const n=[];let r=e.slice();for(const s of e){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Hu(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Hu(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ty{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Bg()?Ug().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Q_(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return $u(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return $u(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Hu(e){return vi(JSON.stringify({version:2,heartbeats:e})).length}function ey(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(e){wi(new cs("platform-logger",t=>new c_(t),"PRIVATE")),wi(new cs("heartbeat",t=>new J_(t),"PRIVATE")),ar(ta,Uu,e),ar(ta,Uu,"esm2017"),ar("fire-js","")}ny("");var ry="firebase",sy="11.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ar(ry,sy,"app");var zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dn,df;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,g){function v(){}v.prototype=g.prototype,I.D=g.prototype,I.prototype=new v,I.prototype.constructor=I,I.C=function(w,A,C){for(var y=Array(arguments.length-2),me=2;me<arguments.length;me++)y[me-2]=arguments[me];return g.prototype[A].apply(w,y)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,g,v){v||(v=0);var w=Array(16);if(typeof g=="string")for(var A=0;16>A;++A)w[A]=g.charCodeAt(v++)|g.charCodeAt(v++)<<8|g.charCodeAt(v++)<<16|g.charCodeAt(v++)<<24;else for(A=0;16>A;++A)w[A]=g[v++]|g[v++]<<8|g[v++]<<16|g[v++]<<24;g=I.g[0],v=I.g[1],A=I.g[2];var C=I.g[3],y=g+(C^v&(A^C))+w[0]+3614090360&4294967295;g=v+(y<<7&4294967295|y>>>25),y=C+(A^g&(v^A))+w[1]+3905402710&4294967295,C=g+(y<<12&4294967295|y>>>20),y=A+(v^C&(g^v))+w[2]+606105819&4294967295,A=C+(y<<17&4294967295|y>>>15),y=v+(g^A&(C^g))+w[3]+3250441966&4294967295,v=A+(y<<22&4294967295|y>>>10),y=g+(C^v&(A^C))+w[4]+4118548399&4294967295,g=v+(y<<7&4294967295|y>>>25),y=C+(A^g&(v^A))+w[5]+1200080426&4294967295,C=g+(y<<12&4294967295|y>>>20),y=A+(v^C&(g^v))+w[6]+2821735955&4294967295,A=C+(y<<17&4294967295|y>>>15),y=v+(g^A&(C^g))+w[7]+4249261313&4294967295,v=A+(y<<22&4294967295|y>>>10),y=g+(C^v&(A^C))+w[8]+1770035416&4294967295,g=v+(y<<7&4294967295|y>>>25),y=C+(A^g&(v^A))+w[9]+2336552879&4294967295,C=g+(y<<12&4294967295|y>>>20),y=A+(v^C&(g^v))+w[10]+4294925233&4294967295,A=C+(y<<17&4294967295|y>>>15),y=v+(g^A&(C^g))+w[11]+2304563134&4294967295,v=A+(y<<22&4294967295|y>>>10),y=g+(C^v&(A^C))+w[12]+1804603682&4294967295,g=v+(y<<7&4294967295|y>>>25),y=C+(A^g&(v^A))+w[13]+4254626195&4294967295,C=g+(y<<12&4294967295|y>>>20),y=A+(v^C&(g^v))+w[14]+2792965006&4294967295,A=C+(y<<17&4294967295|y>>>15),y=v+(g^A&(C^g))+w[15]+1236535329&4294967295,v=A+(y<<22&4294967295|y>>>10),y=g+(A^C&(v^A))+w[1]+4129170786&4294967295,g=v+(y<<5&4294967295|y>>>27),y=C+(v^A&(g^v))+w[6]+3225465664&4294967295,C=g+(y<<9&4294967295|y>>>23),y=A+(g^v&(C^g))+w[11]+643717713&4294967295,A=C+(y<<14&4294967295|y>>>18),y=v+(C^g&(A^C))+w[0]+3921069994&4294967295,v=A+(y<<20&4294967295|y>>>12),y=g+(A^C&(v^A))+w[5]+3593408605&4294967295,g=v+(y<<5&4294967295|y>>>27),y=C+(v^A&(g^v))+w[10]+38016083&4294967295,C=g+(y<<9&4294967295|y>>>23),y=A+(g^v&(C^g))+w[15]+3634488961&4294967295,A=C+(y<<14&4294967295|y>>>18),y=v+(C^g&(A^C))+w[4]+3889429448&4294967295,v=A+(y<<20&4294967295|y>>>12),y=g+(A^C&(v^A))+w[9]+568446438&4294967295,g=v+(y<<5&4294967295|y>>>27),y=C+(v^A&(g^v))+w[14]+3275163606&4294967295,C=g+(y<<9&4294967295|y>>>23),y=A+(g^v&(C^g))+w[3]+4107603335&4294967295,A=C+(y<<14&4294967295|y>>>18),y=v+(C^g&(A^C))+w[8]+1163531501&4294967295,v=A+(y<<20&4294967295|y>>>12),y=g+(A^C&(v^A))+w[13]+2850285829&4294967295,g=v+(y<<5&4294967295|y>>>27),y=C+(v^A&(g^v))+w[2]+4243563512&4294967295,C=g+(y<<9&4294967295|y>>>23),y=A+(g^v&(C^g))+w[7]+1735328473&4294967295,A=C+(y<<14&4294967295|y>>>18),y=v+(C^g&(A^C))+w[12]+2368359562&4294967295,v=A+(y<<20&4294967295|y>>>12),y=g+(v^A^C)+w[5]+4294588738&4294967295,g=v+(y<<4&4294967295|y>>>28),y=C+(g^v^A)+w[8]+2272392833&4294967295,C=g+(y<<11&4294967295|y>>>21),y=A+(C^g^v)+w[11]+1839030562&4294967295,A=C+(y<<16&4294967295|y>>>16),y=v+(A^C^g)+w[14]+4259657740&4294967295,v=A+(y<<23&4294967295|y>>>9),y=g+(v^A^C)+w[1]+2763975236&4294967295,g=v+(y<<4&4294967295|y>>>28),y=C+(g^v^A)+w[4]+1272893353&4294967295,C=g+(y<<11&4294967295|y>>>21),y=A+(C^g^v)+w[7]+4139469664&4294967295,A=C+(y<<16&4294967295|y>>>16),y=v+(A^C^g)+w[10]+3200236656&4294967295,v=A+(y<<23&4294967295|y>>>9),y=g+(v^A^C)+w[13]+681279174&4294967295,g=v+(y<<4&4294967295|y>>>28),y=C+(g^v^A)+w[0]+3936430074&4294967295,C=g+(y<<11&4294967295|y>>>21),y=A+(C^g^v)+w[3]+3572445317&4294967295,A=C+(y<<16&4294967295|y>>>16),y=v+(A^C^g)+w[6]+76029189&4294967295,v=A+(y<<23&4294967295|y>>>9),y=g+(v^A^C)+w[9]+3654602809&4294967295,g=v+(y<<4&4294967295|y>>>28),y=C+(g^v^A)+w[12]+3873151461&4294967295,C=g+(y<<11&4294967295|y>>>21),y=A+(C^g^v)+w[15]+530742520&4294967295,A=C+(y<<16&4294967295|y>>>16),y=v+(A^C^g)+w[2]+3299628645&4294967295,v=A+(y<<23&4294967295|y>>>9),y=g+(A^(v|~C))+w[0]+4096336452&4294967295,g=v+(y<<6&4294967295|y>>>26),y=C+(v^(g|~A))+w[7]+1126891415&4294967295,C=g+(y<<10&4294967295|y>>>22),y=A+(g^(C|~v))+w[14]+2878612391&4294967295,A=C+(y<<15&4294967295|y>>>17),y=v+(C^(A|~g))+w[5]+4237533241&4294967295,v=A+(y<<21&4294967295|y>>>11),y=g+(A^(v|~C))+w[12]+1700485571&4294967295,g=v+(y<<6&4294967295|y>>>26),y=C+(v^(g|~A))+w[3]+2399980690&4294967295,C=g+(y<<10&4294967295|y>>>22),y=A+(g^(C|~v))+w[10]+4293915773&4294967295,A=C+(y<<15&4294967295|y>>>17),y=v+(C^(A|~g))+w[1]+2240044497&4294967295,v=A+(y<<21&4294967295|y>>>11),y=g+(A^(v|~C))+w[8]+1873313359&4294967295,g=v+(y<<6&4294967295|y>>>26),y=C+(v^(g|~A))+w[15]+4264355552&4294967295,C=g+(y<<10&4294967295|y>>>22),y=A+(g^(C|~v))+w[6]+2734768916&4294967295,A=C+(y<<15&4294967295|y>>>17),y=v+(C^(A|~g))+w[13]+1309151649&4294967295,v=A+(y<<21&4294967295|y>>>11),y=g+(A^(v|~C))+w[4]+4149444226&4294967295,g=v+(y<<6&4294967295|y>>>26),y=C+(v^(g|~A))+w[11]+3174756917&4294967295,C=g+(y<<10&4294967295|y>>>22),y=A+(g^(C|~v))+w[2]+718787259&4294967295,A=C+(y<<15&4294967295|y>>>17),y=v+(C^(A|~g))+w[9]+3951481745&4294967295,I.g[0]=I.g[0]+g&4294967295,I.g[1]=I.g[1]+(A+(y<<21&4294967295|y>>>11))&4294967295,I.g[2]=I.g[2]+A&4294967295,I.g[3]=I.g[3]+C&4294967295}r.prototype.u=function(I,g){g===void 0&&(g=I.length);for(var v=g-this.blockSize,w=this.B,A=this.h,C=0;C<g;){if(A==0)for(;C<=v;)s(this,I,C),C+=this.blockSize;if(typeof I=="string"){for(;C<g;)if(w[A++]=I.charCodeAt(C++),A==this.blockSize){s(this,w),A=0;break}}else for(;C<g;)if(w[A++]=I[C++],A==this.blockSize){s(this,w),A=0;break}}this.h=A,this.o+=g},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var g=1;g<I.length-8;++g)I[g]=0;var v=8*this.o;for(g=I.length-8;g<I.length;++g)I[g]=v&255,v/=256;for(this.u(I),I=Array(16),g=v=0;4>g;++g)for(var w=0;32>w;w+=8)I[v++]=this.g[g]>>>w&255;return I};function i(I,g){var v=l;return Object.prototype.hasOwnProperty.call(v,I)?v[I]:v[I]=g(I)}function a(I,g){this.h=g;for(var v=[],w=!0,A=I.length-1;0<=A;A--){var C=I[A]|0;w&&C==g||(v[A]=C,w=!1)}this.g=v}var l={};function c(I){return-128<=I&&128>I?i(I,function(g){return new a([g|0],0>g?-1:0)}):new a([I|0],0>I?-1:0)}function f(I){if(isNaN(I)||!isFinite(I))return m;if(0>I)return O(f(-I));for(var g=[],v=1,w=0;I>=v;w++)g[w]=I/v|0,v*=4294967296;return new a(g,0)}function d(I,g){if(I.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(I.charAt(0)=="-")return O(d(I.substring(1),g));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=f(Math.pow(g,8)),w=m,A=0;A<I.length;A+=8){var C=Math.min(8,I.length-A),y=parseInt(I.substring(A,A+C),g);8>C?(C=f(Math.pow(g,C)),w=w.j(C).add(f(y))):(w=w.j(v),w=w.add(f(y)))}return w}var m=c(0),E=c(1),S=c(16777216);e=a.prototype,e.m=function(){if(V(this))return-O(this).m();for(var I=0,g=1,v=0;v<this.g.length;v++){var w=this.i(v);I+=(0<=w?w:4294967296+w)*g,g*=4294967296}return I},e.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(x(this))return"0";if(V(this))return"-"+O(this).toString(I);for(var g=f(Math.pow(I,6)),v=this,w="";;){var A=K(v,g).g;v=M(v,A.j(g));var C=((0<v.g.length?v.g[0]:v.h)>>>0).toString(I);if(v=A,x(v))return C+w;for(;6>C.length;)C="0"+C;w=C+w}},e.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function x(I){if(I.h!=0)return!1;for(var g=0;g<I.g.length;g++)if(I.g[g]!=0)return!1;return!0}function V(I){return I.h==-1}e.l=function(I){return I=M(this,I),V(I)?-1:x(I)?0:1};function O(I){for(var g=I.g.length,v=[],w=0;w<g;w++)v[w]=~I.g[w];return new a(v,~I.h).add(E)}e.abs=function(){return V(this)?O(this):this},e.add=function(I){for(var g=Math.max(this.g.length,I.g.length),v=[],w=0,A=0;A<=g;A++){var C=w+(this.i(A)&65535)+(I.i(A)&65535),y=(C>>>16)+(this.i(A)>>>16)+(I.i(A)>>>16);w=y>>>16,C&=65535,y&=65535,v[A]=y<<16|C}return new a(v,v[v.length-1]&-2147483648?-1:0)};function M(I,g){return I.add(O(g))}e.j=function(I){if(x(this)||x(I))return m;if(V(this))return V(I)?O(this).j(O(I)):O(O(this).j(I));if(V(I))return O(this.j(O(I)));if(0>this.l(S)&&0>I.l(S))return f(this.m()*I.m());for(var g=this.g.length+I.g.length,v=[],w=0;w<2*g;w++)v[w]=0;for(w=0;w<this.g.length;w++)for(var A=0;A<I.g.length;A++){var C=this.i(w)>>>16,y=this.i(w)&65535,me=I.i(A)>>>16,Je=I.i(A)&65535;v[2*w+2*A]+=y*Je,W(v,2*w+2*A),v[2*w+2*A+1]+=C*Je,W(v,2*w+2*A+1),v[2*w+2*A+1]+=y*me,W(v,2*w+2*A+1),v[2*w+2*A+2]+=C*me,W(v,2*w+2*A+2)}for(w=0;w<g;w++)v[w]=v[2*w+1]<<16|v[2*w];for(w=g;w<2*g;w++)v[w]=0;return new a(v,0)};function W(I,g){for(;(I[g]&65535)!=I[g];)I[g+1]+=I[g]>>>16,I[g]&=65535,g++}function Q(I,g){this.g=I,this.h=g}function K(I,g){if(x(g))throw Error("division by zero");if(x(I))return new Q(m,m);if(V(I))return g=K(O(I),g),new Q(O(g.g),O(g.h));if(V(g))return g=K(I,O(g)),new Q(O(g.g),g.h);if(30<I.g.length){if(V(I)||V(g))throw Error("slowDivide_ only works with positive integers.");for(var v=E,w=g;0>=w.l(I);)v=J(v),w=J(w);var A=lt(v,1),C=lt(w,1);for(w=lt(w,2),v=lt(v,2);!x(w);){var y=C.add(w);0>=y.l(I)&&(A=A.add(v),C=y),w=lt(w,1),v=lt(v,1)}return g=M(I,A.j(g)),new Q(A,g)}for(A=m;0<=I.l(g);){for(v=Math.max(1,Math.floor(I.m()/g.m())),w=Math.ceil(Math.log(v)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),C=f(v),y=C.j(g);V(y)||0<y.l(I);)v-=w,C=f(v),y=C.j(g);x(C)&&(C=E),A=A.add(C),I=M(I,y)}return new Q(A,I)}e.A=function(I){return K(this,I).h},e.and=function(I){for(var g=Math.max(this.g.length,I.g.length),v=[],w=0;w<g;w++)v[w]=this.i(w)&I.i(w);return new a(v,this.h&I.h)},e.or=function(I){for(var g=Math.max(this.g.length,I.g.length),v=[],w=0;w<g;w++)v[w]=this.i(w)|I.i(w);return new a(v,this.h|I.h)},e.xor=function(I){for(var g=Math.max(this.g.length,I.g.length),v=[],w=0;w<g;w++)v[w]=this.i(w)^I.i(w);return new a(v,this.h^I.h)};function J(I){for(var g=I.g.length+1,v=[],w=0;w<g;w++)v[w]=I.i(w)<<1|I.i(w-1)>>>31;return new a(v,I.h)}function lt(I,g){var v=g>>5;g%=32;for(var w=I.g.length-v,A=[],C=0;C<w;C++)A[C]=0<g?I.i(C+v)>>>g|I.i(C+v+1)<<32-g:I.i(C+v);return new a(A,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,df=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=d,dn=a}).apply(typeof zu<"u"?zu:typeof self<"u"?self:typeof window<"u"?window:{});var Hs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pf,Wr,mf,si,ra,gf,_f,yf;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,h){return o==Array.prototype||o==Object.prototype||(o[u]=h.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hs=="object"&&Hs];for(var u=0;u<o.length;++u){var h=o[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function s(o,u){if(u)t:{var h=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var b=o[p];if(!(b in h))break t;h=h[b]}o=o[o.length-1],p=h[o],u=u(p),u!=p&&u!=null&&t(h,o,{configurable:!0,writable:!0,value:u})}}function i(o,u){o instanceof String&&(o+="");var h=0,p=!1,b={next:function(){if(!p&&h<o.length){var R=h++;return{value:u(R,o[R]),done:!1}}return p=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}s("Array.prototype.values",function(o){return o||function(){return i(this,function(u,h){return h})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function f(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function d(o,u,h){return o.call.apply(o.bind,arguments)}function m(o,u,h){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,p),o.apply(u,b)}}return function(){return o.apply(u,arguments)}}function E(o,u,h){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,E.apply(null,arguments)}function S(o,u){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function x(o,u){function h(){}h.prototype=u.prototype,o.aa=u.prototype,o.prototype=new h,o.prototype.constructor=o,o.Qb=function(p,b,R){for(var j=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)j[Tt-2]=arguments[Tt];return u.prototype[b].apply(p,j)}}function V(o){const u=o.length;if(0<u){const h=Array(u);for(let p=0;p<u;p++)h[p]=o[p];return h}return[]}function O(o,u){for(let h=1;h<arguments.length;h++){const p=arguments[h];if(c(p)){const b=o.length||0,R=p.length||0;o.length=b+R;for(let j=0;j<R;j++)o[b+j]=p[j]}else o.push(p)}}class M{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function W(o){return/^[\s\xa0]*$/.test(o)}function Q(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function K(o){return K[" "](o),o}K[" "]=function(){};var J=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function lt(o,u,h){for(const p in o)u.call(h,o[p],p,o)}function I(o,u){for(const h in o)u.call(void 0,o[h],h,o)}function g(o){const u={};for(const h in o)u[h]=o[h];return u}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(o,u){let h,p;for(let b=1;b<arguments.length;b++){p=arguments[b];for(h in p)o[h]=p[h];for(let R=0;R<v.length;R++)h=v[R],Object.prototype.hasOwnProperty.call(p,h)&&(o[h]=p[h])}}function A(o){var u=1;o=o.split(":");const h=[];for(;0<u&&o.length;)h.push(o.shift()),u--;return o.length&&h.push(o.join(":")),h}function C(o){l.setTimeout(()=>{throw o},0)}function y(){var o=we;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class me{constructor(){this.h=this.g=null}add(u,h){const p=Je.get();p.set(u,h),this.h?this.h.next=p:this.g=p,this.h=p}}var Je=new M(()=>new Bt,o=>o.reset());class Bt{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let vt,mt=!1,we=new me,In=()=>{const o=l.Promise.resolve(void 0);vt=()=>{o.then(Fe)}};var Fe=()=>{for(var o;o=y();){try{o.h.call(o.g)}catch(h){C(h)}var u=Je;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}mt=!1};function Nt(){this.s=this.s,this.C=this.C}Nt.prototype.s=!1,Nt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Nt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Mt(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Mt.prototype.h=function(){this.defaultPrevented=!0};var no=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const h=()=>{};l.addEventListener("test",h,u),l.removeEventListener("test",h,u)}catch{}return o}();function An(o,u){if(Mt.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var h=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(J){t:{try{K(u.nodeName);var b=!0;break t}catch{}b=!1}b||(u=null)}}else h=="mouseover"?u=o.fromElement:h=="mouseout"&&(u=o.toElement);this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:bn[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&An.aa.h.call(this)}}x(An,Mt);var bn={2:"touch",3:"pen",4:"mouse"};An.prototype.h=function(){An.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),Ar=0;function As(o,u,h,p,b){this.listener=o,this.proxy=null,this.src=u,this.type=h,this.capture=!!p,this.ha=b,this.key=++Ar,this.da=this.fa=!1}function Se(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function br(o){this.src=o,this.g={},this.h=0}br.prototype.add=function(o,u,h,p,b){var R=o.toString();o=this.g[R],o||(o=this.g[R]=[],this.h++);var j=T(o,u,p,b);return-1<j?(u=o[j],h||(u.fa=!1)):(u=new As(u,this.src,R,!!p,b),u.fa=h,o.push(u)),u};function _(o,u){var h=u.type;if(h in o.g){var p=o.g[h],b=Array.prototype.indexOf.call(p,u,void 0),R;(R=0<=b)&&Array.prototype.splice.call(p,b,1),R&&(Se(u),o.g[h].length==0&&(delete o.g[h],o.h--))}}function T(o,u,h,p){for(var b=0;b<o.length;++b){var R=o[b];if(!R.da&&R.listener==u&&R.capture==!!h&&R.ha==p)return b}return-1}var P="closure_lm_"+(1e6*Math.random()|0),L={};function N(o,u,h,p,b){if(Array.isArray(u)){for(var R=0;R<u.length;R++)N(o,u[R],h,p,b);return null}return h=et(h),o&&o[Be]?o.K(u,h,f(p)?!!p.capture:!1,b):k(o,u,h,!1,p,b)}function k(o,u,h,p,b,R){if(!u)throw Error("Invalid event type");var j=f(b)?!!b.capture:!!b,Tt=H(o);if(Tt||(o[P]=Tt=new br(o)),h=Tt.add(u,h,p,j,R),h.proxy)return h;if(p=z(),h.proxy=p,p.src=o,p.listener=h,o.addEventListener)no||(b=j),b===void 0&&(b=!1),o.addEventListener(u.toString(),p,b);else if(o.attachEvent)o.attachEvent(F(u.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function z(){function o(h){return u.call(o.src,o.listener,h)}const u=X;return o}function U(o,u,h,p,b){if(Array.isArray(u))for(var R=0;R<u.length;R++)U(o,u[R],h,p,b);else p=f(p)?!!p.capture:!!p,h=et(h),o&&o[Be]?(o=o.i,u=String(u).toString(),u in o.g&&(R=o.g[u],h=T(R,h,p,b),-1<h&&(Se(R[h]),Array.prototype.splice.call(R,h,1),R.length==0&&(delete o.g[u],o.h--)))):o&&(o=H(o))&&(u=o.g[u.toString()],o=-1,u&&(o=T(u,h,p,b)),(h=-1<o?u[o]:null)&&B(h))}function B(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[Be])_(u.i,o);else{var h=o.type,p=o.proxy;u.removeEventListener?u.removeEventListener(h,p,o.capture):u.detachEvent?u.detachEvent(F(h),p):u.addListener&&u.removeListener&&u.removeListener(p),(h=H(u))?(_(h,o),h.h==0&&(h.src=null,u[P]=null)):Se(o)}}}function F(o){return o in L?L[o]:L[o]="on"+o}function X(o,u){if(o.da)o=!0;else{u=new An(u,this);var h=o.listener,p=o.ha||o.src;o.fa&&B(o),o=h.call(p,u)}return o}function H(o){return o=o[P],o instanceof br?o:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function et(o){return typeof o=="function"?o:(o[Y]||(o[Y]=function(u){return o.handleEvent(u)}),o[Y])}function Z(){Nt.call(this),this.i=new br(this),this.M=this,this.F=null}x(Z,Nt),Z.prototype[Be]=!0,Z.prototype.removeEventListener=function(o,u,h,p){U(this,o,u,h,p)};function ot(o,u){var h,p=o.F;if(p)for(h=[];p;p=p.F)h.push(p);if(o=o.M,p=u.type||u,typeof u=="string")u=new Mt(u,o);else if(u instanceof Mt)u.target=u.target||o;else{var b=u;u=new Mt(p,o),w(u,b)}if(b=!0,h)for(var R=h.length-1;0<=R;R--){var j=u.g=h[R];b=ct(j,p,!0,u)&&b}if(j=u.g=o,b=ct(j,p,!0,u)&&b,b=ct(j,p,!1,u)&&b,h)for(R=0;R<h.length;R++)j=u.g=h[R],b=ct(j,p,!1,u)&&b}Z.prototype.N=function(){if(Z.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var h=o.g[u],p=0;p<h.length;p++)Se(h[p]);delete o.g[u],o.h--}}this.F=null},Z.prototype.K=function(o,u,h,p){return this.i.add(String(o),u,!1,h,p)},Z.prototype.L=function(o,u,h,p){return this.i.add(String(o),u,!0,h,p)};function ct(o,u,h,p){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var b=!0,R=0;R<u.length;++R){var j=u[R];if(j&&!j.da&&j.capture==h){var Tt=j.listener,$t=j.ha||j.src;j.fa&&_(o.i,j),b=Tt.call($t,p)!==!1&&b}}return b&&!p.defaultPrevented}function Gt(o,u,h){if(typeof o=="function")h&&(o=E(o,h));else if(o&&typeof o.handleEvent=="function")o=E(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function Ut(o){o.g=Gt(()=>{o.g=null,o.i&&(o.i=!1,Ut(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class ve extends Nt{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Ut(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qt(o){Nt.call(this),this.h=o,this.g={}}x(Qt,Nt);var Ze=[];function Cr(o){lt(o.g,function(u,h){this.g.hasOwnProperty(h)&&B(u)},o),o.g={}}Qt.prototype.N=function(){Qt.aa.N.call(this),Cr(this)},Qt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jt=l.JSON.stringify,Ee=l.JSON.parse,bs=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function ro(){}ro.prototype.h=null;function fl(o){return o.h||(o.h=o.i())}function dl(){}var Sr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function so(){Mt.call(this,"d")}x(so,Mt);function io(){Mt.call(this,"c")}x(io,Mt);var Cn={},pl=null;function Cs(){return pl=pl||new Z}Cn.La="serverreachability";function ml(o){Mt.call(this,Cn.La,o)}x(ml,Mt);function Rr(o){const u=Cs();ot(u,new ml(u))}Cn.STAT_EVENT="statevent";function gl(o,u){Mt.call(this,Cn.STAT_EVENT,o),this.stat=u}x(gl,Mt);function se(o){const u=Cs();ot(u,new gl(u,o))}Cn.Ma="timingevent";function _l(o,u){Mt.call(this,Cn.Ma,o),this.size=u}x(_l,Mt);function Pr(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},u)}function Vr(){this.g=!0}Vr.prototype.xa=function(){this.g=!1};function Sd(o,u,h,p,b,R){o.info(function(){if(o.g)if(R)for(var j="",Tt=R.split("&"),$t=0;$t<Tt.length;$t++){var gt=Tt[$t].split("=");if(1<gt.length){var Yt=gt[0];gt=gt[1];var Xt=Yt.split("_");j=2<=Xt.length&&Xt[1]=="type"?j+(Yt+"="+gt+"&"):j+(Yt+"=redacted&")}}else j=null;else j=R;return"XMLHTTP REQ ("+p+") [attempt "+b+"]: "+u+`
`+h+`
`+j})}function Rd(o,u,h,p,b,R,j){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+b+"]: "+u+`
`+h+`
`+R+" "+j})}function qn(o,u,h,p){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+Vd(o,h)+(p?" "+p:"")})}function Pd(o,u){o.info(function(){return"TIMEOUT: "+u})}Vr.prototype.info=function(){};function Vd(o,u){if(!o.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(o=0;o<h.length;o++)if(Array.isArray(h[o])){var p=h[o];if(!(2>p.length)){var b=p[1];if(Array.isArray(b)&&!(1>b.length)){var R=b[0];if(R!="noop"&&R!="stop"&&R!="close")for(var j=1;j<b.length;j++)b[j]=""}}}}return jt(h)}catch{return u}}var Ss={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},oo;function Rs(){}x(Rs,ro),Rs.prototype.g=function(){return new XMLHttpRequest},Rs.prototype.i=function(){return{}},oo=new Rs;function tn(o,u,h,p){this.j=o,this.i=u,this.l=h,this.R=p||1,this.U=new Qt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vl}function vl(){this.i=null,this.g="",this.h=!1}var El={},ao={};function lo(o,u,h){o.L=1,o.v=Ds(Ue(u)),o.m=h,o.P=!0,Tl(o,null)}function Tl(o,u){o.F=Date.now(),Ps(o),o.A=Ue(o.v);var h=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),Ml(h.i,"t",p),o.C=0,h=o.j.J,o.h=new vl,o.g=Zl(o.j,h?u:null,!o.m),0<o.O&&(o.M=new ve(E(o.Y,o,o.g),o.O)),u=o.U,h=o.g,p=o.ca;var b="readystatechange";Array.isArray(b)||(b&&(Ze[0]=b.toString()),b=Ze);for(var R=0;R<b.length;R++){var j=N(h,b[R],p||u.handleEvent,!1,u.h||u);if(!j)break;u.g[j.key]=j}u=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),Rr(),Sd(o.i,o.u,o.A,o.l,o.R,o.m)}tn.prototype.ca=function(o){o=o.target;const u=this.M;u&&je(o)==3?u.j():this.Y(o)},tn.prototype.Y=function(o){try{if(o==this.g)t:{const Xt=je(this.g);var u=this.g.Ba();const Wn=this.g.Z();if(!(3>Xt)&&(Xt!=3||this.g&&(this.h.h||this.g.oa()||$l(this.g)))){this.J||Xt!=4||u==7||(u==8||0>=Wn?Rr(3):Rr(2)),uo(this);var h=this.g.Z();this.X=h;e:if(wl(this)){var p=$l(this.g);o="";var b=p.length,R=je(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sn(this),xr(this);var j="";break e}this.h.i=new l.TextDecoder}for(u=0;u<b;u++)this.h.h=!0,o+=this.h.i.decode(p[u],{stream:!(R&&u==b-1)});p.length=0,this.h.g+=o,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=h==200,Rd(this.i,this.u,this.A,this.l,this.R,Xt,h),this.o){if(this.T&&!this.K){e:{if(this.g){var Tt,$t=this.g;if((Tt=$t.g?$t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Tt)){var gt=Tt;break e}}gt=null}if(h=gt)qn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,co(this,h);else{this.o=!1,this.s=3,se(12),Sn(this),xr(this);break t}}if(this.P){h=!0;let Ie;for(;!this.J&&this.C<j.length;)if(Ie=xd(this,j),Ie==ao){Xt==4&&(this.s=4,se(14),h=!1),qn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ie==El){this.s=4,se(15),qn(this.i,this.l,j,"[Invalid Chunk]"),h=!1;break}else qn(this.i,this.l,Ie,null),co(this,Ie);if(wl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xt!=4||j.length!=0||this.h.h||(this.s=1,se(16),h=!1),this.o=this.o&&h,!h)qn(this.i,this.l,j,"[Invalid Chunked Response]"),Sn(this),xr(this);else if(0<j.length&&!this.W){this.W=!0;var Yt=this.j;Yt.g==this&&Yt.ba&&!Yt.M&&(Yt.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),_o(Yt),Yt.M=!0,se(11))}}else qn(this.i,this.l,j,null),co(this,j);Xt==4&&Sn(this),this.o&&!this.J&&(Xt==4?Ql(this.j,this):(this.o=!1,Ps(this)))}else Gd(this.g),h==400&&0<j.indexOf("Unknown SID")?(this.s=3,se(12)):(this.s=0,se(13)),Sn(this),xr(this)}}}catch{}finally{}};function wl(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function xd(o,u){var h=o.C,p=u.indexOf(`
`,h);return p==-1?ao:(h=Number(u.substring(h,p)),isNaN(h)?El:(p+=1,p+h>u.length?ao:(u=u.slice(p,p+h),o.C=p+h,u)))}tn.prototype.cancel=function(){this.J=!0,Sn(this)};function Ps(o){o.S=Date.now()+o.I,Il(o,o.I)}function Il(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Pr(E(o.ba,o),u)}function uo(o){o.B&&(l.clearTimeout(o.B),o.B=null)}tn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Pd(this.i,this.A),this.L!=2&&(Rr(),se(17)),Sn(this),this.s=2,xr(this)):Il(this,this.S-o)};function xr(o){o.j.G==0||o.J||Ql(o.j,o)}function Sn(o){uo(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,Cr(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function co(o,u){try{var h=o.j;if(h.G!=0&&(h.g==o||ho(h.h,o))){if(!o.K&&ho(h.h,o)&&h.G==3){try{var p=h.Da.g.parse(u)}catch{p=null}if(Array.isArray(p)&&p.length==3){var b=p;if(b[0]==0){t:if(!h.u){if(h.g)if(h.g.F+3e3<o.F)Fs(h),ks(h);else break t;go(h),se(18)}}else h.za=b[1],0<h.za-h.T&&37500>b[2]&&h.F&&h.v==0&&!h.C&&(h.C=Pr(E(h.Za,h),6e3));if(1>=Cl(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Pn(h,11)}else if((o.K||h.g==o)&&Fs(h),!W(u))for(b=h.Da.g.parse(u),u=0;u<b.length;u++){let gt=b[u];if(h.T=gt[0],gt=gt[1],h.G==2)if(gt[0]=="c"){h.K=gt[1],h.ia=gt[2];const Yt=gt[3];Yt!=null&&(h.la=Yt,h.j.info("VER="+h.la));const Xt=gt[4];Xt!=null&&(h.Aa=Xt,h.j.info("SVER="+h.Aa));const Wn=gt[5];Wn!=null&&typeof Wn=="number"&&0<Wn&&(p=1.5*Wn,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;const Ie=o.g;if(Ie){const Us=Ie.g?Ie.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Us){var R=p.h;R.g||Us.indexOf("spdy")==-1&&Us.indexOf("quic")==-1&&Us.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(fo(R,R.h),R.h=null))}if(p.D){const yo=Ie.g?Ie.g.getResponseHeader("X-HTTP-Session-Id"):null;yo&&(p.ya=yo,bt(p.I,p.D,yo))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-o.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var j=o;if(p.qa=Jl(p,p.J?p.ia:null,p.W),j.K){Sl(p.h,j);var Tt=j,$t=p.L;$t&&(Tt.I=$t),Tt.B&&(uo(Tt),Ps(Tt)),p.g=j}else Kl(p);0<h.i.length&&Ls(h)}else gt[0]!="stop"&&gt[0]!="close"||Pn(h,7);else h.G==3&&(gt[0]=="stop"||gt[0]=="close"?gt[0]=="stop"?Pn(h,7):mo(h):gt[0]!="noop"&&h.l&&h.l.ta(gt),h.v=0)}}Rr(4)}catch{}}var Dd=class{constructor(o,u){this.g=o,this.map=u}};function Al(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bl(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Cl(o){return o.h?1:o.g?o.g.size:0}function ho(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function fo(o,u){o.g?o.g.add(u):o.h=u}function Sl(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}Al.prototype.cancel=function(){if(this.i=Rl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Rl(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const h of o.g.values())u=u.concat(h.D);return u}return V(o.i)}function Od(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(c(o)){for(var u=[],h=o.length,p=0;p<h;p++)u.push(o[p]);return u}u=[],h=0;for(p in o)u[h++]=o[p];return u}function Nd(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(c(o)||typeof o=="string"){var u=[];o=o.length;for(var h=0;h<o;h++)u.push(h);return u}u=[],h=0;for(const p in o)u[h++]=p;return u}}}function Pl(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(c(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var h=Nd(o),p=Od(o),b=p.length,R=0;R<b;R++)u.call(void 0,p[R],h&&h[R],o)}var Vl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Md(o,u){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var p=o[h].indexOf("="),b=null;if(0<=p){var R=o[h].substring(0,p);b=o[h].substring(p+1)}else R=o[h];u(R,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Rn(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Rn){this.h=o.h,Vs(this,o.j),this.o=o.o,this.g=o.g,xs(this,o.s),this.l=o.l;var u=o.i,h=new Nr;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),xl(this,h),this.m=o.m}else o&&(u=String(o).match(Vl))?(this.h=!1,Vs(this,u[1]||"",!0),this.o=Dr(u[2]||""),this.g=Dr(u[3]||"",!0),xs(this,u[4]),this.l=Dr(u[5]||"",!0),xl(this,u[6]||"",!0),this.m=Dr(u[7]||"")):(this.h=!1,this.i=new Nr(null,this.h))}Rn.prototype.toString=function(){var o=[],u=this.j;u&&o.push(Or(u,Dl,!0),":");var h=this.g;return(h||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Or(u,Dl,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&o.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(Or(h,h.charAt(0)=="/"?Fd:Ld,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",Or(h,Ud)),o.join("")};function Ue(o){return new Rn(o)}function Vs(o,u,h){o.j=h?Dr(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function xs(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function xl(o,u,h){u instanceof Nr?(o.i=u,jd(o.i,o.h)):(h||(u=Or(u,Bd)),o.i=new Nr(u,o.h))}function bt(o,u,h){o.i.set(u,h)}function Ds(o){return bt(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Dr(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Or(o,u,h){return typeof o=="string"?(o=encodeURI(o).replace(u,kd),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function kd(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Dl=/[#\/\?@]/g,Ld=/[#\?:]/g,Fd=/[#\?]/g,Bd=/[#\?@]/g,Ud=/#/g;function Nr(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function en(o){o.g||(o.g=new Map,o.h=0,o.i&&Md(o.i,function(u,h){o.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}e=Nr.prototype,e.add=function(o,u){en(this),this.i=null,o=Hn(this,o);var h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(u),this.h+=1,this};function Ol(o,u){en(o),u=Hn(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function Nl(o,u){return en(o),u=Hn(o,u),o.g.has(u)}e.forEach=function(o,u){en(this),this.g.forEach(function(h,p){h.forEach(function(b){o.call(u,b,p,this)},this)},this)},e.na=function(){en(this);const o=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let p=0;p<u.length;p++){const b=o[p];for(let R=0;R<b.length;R++)h.push(u[p])}return h},e.V=function(o){en(this);let u=[];if(typeof o=="string")Nl(this,o)&&(u=u.concat(this.g.get(Hn(this,o))));else{o=Array.from(this.g.values());for(let h=0;h<o.length;h++)u=u.concat(o[h])}return u},e.set=function(o,u){return en(this),this.i=null,o=Hn(this,o),Nl(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},e.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function Ml(o,u,h){Ol(o,u),0<h.length&&(o.i=null,o.g.set(Hn(o,u),V(h)),o.h+=h.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var p=u[h];const R=encodeURIComponent(String(p)),j=this.V(p);for(p=0;p<j.length;p++){var b=R;j[p]!==""&&(b+="="+encodeURIComponent(String(j[p]))),o.push(b)}}return this.i=o.join("&")};function Hn(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function jd(o,u){u&&!o.j&&(en(o),o.i=null,o.g.forEach(function(h,p){var b=p.toLowerCase();p!=b&&(Ol(this,p),Ml(this,b,h))},o)),o.j=u}function $d(o,u){const h=new Vr;if(l.Image){const p=new Image;p.onload=S(nn,h,"TestLoadImage: loaded",!0,u,p),p.onerror=S(nn,h,"TestLoadImage: error",!1,u,p),p.onabort=S(nn,h,"TestLoadImage: abort",!1,u,p),p.ontimeout=S(nn,h,"TestLoadImage: timeout",!1,u,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else u(!1)}function qd(o,u){const h=new Vr,p=new AbortController,b=setTimeout(()=>{p.abort(),nn(h,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:p.signal}).then(R=>{clearTimeout(b),R.ok?nn(h,"TestPingServer: ok",!0,u):nn(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(b),nn(h,"TestPingServer: error",!1,u)})}function nn(o,u,h,p,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),p(h)}catch{}}function Hd(){this.g=new bs}function zd(o,u,h){const p=h||"";try{Pl(o,function(b,R){let j=b;f(b)&&(j=jt(b)),u.push(p+R+"="+encodeURIComponent(j))})}catch(b){throw u.push(p+"type="+encodeURIComponent("_badmap")),b}}function Os(o){this.l=o.Ub||null,this.j=o.eb||!1}x(Os,ro),Os.prototype.g=function(){return new Ns(this.l,this.j)},Os.prototype.i=function(o){return function(){return o}}({});function Ns(o,u){Z.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Ns,Z),e=Ns.prototype,e.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,kr(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||l).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mr(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,kr(this)),this.g&&(this.readyState=3,kr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kl(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function kl(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?Mr(this):kr(this),this.readyState==3&&kl(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,Mr(this))},e.Qa=function(o){this.g&&(this.response=o,Mr(this))},e.ga=function(){this.g&&Mr(this)};function Mr(o){o.readyState=4,o.l=null,o.j=null,o.v=null,kr(o)}e.setRequestHeader=function(o,u){this.u.append(o,u)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=u.next();return o.join(`\r
`)};function kr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ns.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Ll(o){let u="";return lt(o,function(h,p){u+=p,u+=":",u+=h,u+=`\r
`}),u}function po(o,u,h){t:{for(p in h){var p=!1;break t}p=!0}p||(h=Ll(h),typeof o=="string"?h!=null&&encodeURIComponent(String(h)):bt(o,u,h))}function Rt(o){Z.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Rt,Z);var Wd=/^https?$/i,Kd=["POST","PUT"];e=Rt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,u,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():oo.g(),this.v=this.o?fl(this.o):fl(oo),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(R){Fl(this,R);return}if(o=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var b in p)h.set(b,p[b]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const R of p.keys())h.set(R,p.get(R));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(R=>R.toLowerCase()=="content-type"),b=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Kd,u,void 0))||p||b||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[R,j]of h)this.g.setRequestHeader(R,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jl(this),this.u=!0,this.g.send(o),this.u=!1}catch(R){Fl(this,R)}};function Fl(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,Bl(o),Ms(o)}function Bl(o){o.A||(o.A=!0,ot(o,"complete"),ot(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ot(this,"complete"),ot(this,"abort"),Ms(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ms(this,!0)),Rt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ul(this):this.bb())},e.bb=function(){Ul(this)};function Ul(o){if(o.h&&typeof a<"u"&&(!o.v[1]||je(o)!=4||o.Z()!=2)){if(o.u&&je(o)==4)Gt(o.Ea,0,o);else if(ot(o,"readystatechange"),je(o)==4){o.h=!1;try{const j=o.Z();t:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break t;default:u=!1}var h;if(!(h=u)){var p;if(p=j===0){var b=String(o.D).match(Vl)[1]||null;!b&&l.self&&l.self.location&&(b=l.self.location.protocol.slice(0,-1)),p=!Wd.test(b?b.toLowerCase():"")}h=p}if(h)ot(o,"complete"),ot(o,"success");else{o.m=6;try{var R=2<je(o)?o.g.statusText:""}catch{R=""}o.l=R+" ["+o.Z()+"]",Bl(o)}}finally{Ms(o)}}}}function Ms(o,u){if(o.g){jl(o);const h=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||ot(o,"ready");try{h.onreadystatechange=p}catch{}}}function jl(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function je(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<je(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),Ee(u)}};function $l(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Gd(o){const u={};o=(o.g&&2<=je(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(W(o[p]))continue;var h=A(o[p]);const b=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const R=u[b]||[];u[b]=R,R.push(h)}I(u,function(p){return p.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Lr(o,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||u}function ql(o){this.Aa=0,this.i=[],this.j=new Vr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Lr("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Lr("baseRetryDelayMs",5e3,o),this.cb=Lr("retryDelaySeedMs",1e4,o),this.Wa=Lr("forwardChannelMaxRetries",2,o),this.wa=Lr("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Al(o&&o.concurrentRequestLimit),this.Da=new Hd,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=ql.prototype,e.la=8,e.G=1,e.connect=function(o,u,h,p){se(0),this.W=o,this.H=u||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=Jl(this,null,this.W),Ls(this)};function mo(o){if(Hl(o),o.G==3){var u=o.U++,h=Ue(o.I);if(bt(h,"SID",o.K),bt(h,"RID",u),bt(h,"TYPE","terminate"),Fr(o,h),u=new tn(o,o.j,u),u.L=2,u.v=Ds(Ue(h)),h=!1,l.navigator&&l.navigator.sendBeacon)try{h=l.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&l.Image&&(new Image().src=u.v,h=!0),h||(u.g=Zl(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Ps(u)}Xl(o)}function ks(o){o.g&&(_o(o),o.g.cancel(),o.g=null)}function Hl(o){ks(o),o.u&&(l.clearTimeout(o.u),o.u=null),Fs(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Ls(o){if(!bl(o.h)&&!o.s){o.s=!0;var u=o.Ga;vt||In(),mt||(vt(),mt=!0),we.add(u,o),o.B=0}}function Qd(o,u){return Cl(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Pr(E(o.Ga,o,u),Yl(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const b=new tn(this,this.j,o);let R=this.o;if(this.S&&(R?(R=g(R),w(R,this.S)):R=this.S),this.m!==null||this.O||(b.H=R,R=null),this.P)t:{for(var u=0,h=0;h<this.i.length;h++){e:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(u+=p,4096<u){u=h;break t}if(u===4096||h===this.i.length-1){u=h+1;break t}}u=1e3}else u=1e3;u=Wl(this,b,u),h=Ue(this.I),bt(h,"RID",o),bt(h,"CVER",22),this.D&&bt(h,"X-HTTP-Session-Id",this.D),Fr(this,h),R&&(this.O?u="headers="+encodeURIComponent(String(Ll(R)))+"&"+u:this.m&&po(h,this.m,R)),fo(this.h,b),this.Ua&&bt(h,"TYPE","init"),this.P?(bt(h,"$req",u),bt(h,"SID","null"),b.T=!0,lo(b,h,null)):lo(b,h,u),this.G=2}}else this.G==3&&(o?zl(this,o):this.i.length==0||bl(this.h)||zl(this))};function zl(o,u){var h;u?h=u.l:h=o.U++;const p=Ue(o.I);bt(p,"SID",o.K),bt(p,"RID",h),bt(p,"AID",o.T),Fr(o,p),o.m&&o.o&&po(p,o.m,o.o),h=new tn(o,o.j,h,o.B+1),o.m===null&&(h.H=o.o),u&&(o.i=u.D.concat(o.i)),u=Wl(o,h,1e3),h.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),fo(o.h,h),lo(h,p,u)}function Fr(o,u){o.H&&lt(o.H,function(h,p){bt(u,p,h)}),o.l&&Pl({},function(h,p){bt(u,p,h)})}function Wl(o,u,h){h=Math.min(o.i.length,h);var p=o.l?E(o.l.Na,o.l,o):null;t:{var b=o.i;let R=-1;for(;;){const j=["count="+h];R==-1?0<h?(R=b[0].g,j.push("ofs="+R)):R=0:j.push("ofs="+R);let Tt=!0;for(let $t=0;$t<h;$t++){let gt=b[$t].g;const Yt=b[$t].map;if(gt-=R,0>gt)R=Math.max(0,b[$t].g-100),Tt=!1;else try{zd(Yt,j,"req"+gt+"_")}catch{p&&p(Yt)}}if(Tt){p=j.join("&");break t}}}return o=o.i.splice(0,h),u.D=o,p}function Kl(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;vt||In(),mt||(vt(),mt=!0),we.add(u,o),o.v=0}}function go(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Pr(E(o.Fa,o),Yl(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Gl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Pr(E(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,se(10),ks(this),Gl(this))};function _o(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Gl(o){o.g=new tn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=Ue(o.qa);bt(u,"RID","rpc"),bt(u,"SID",o.K),bt(u,"AID",o.T),bt(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&bt(u,"TO",o.ja),bt(u,"TYPE","xmlhttp"),Fr(o,u),o.m&&o.o&&po(u,o.m,o.o),o.L&&(o.g.I=o.L);var h=o.g;o=o.ia,h.L=1,h.v=Ds(Ue(u)),h.m=null,h.P=!0,Tl(h,o)}e.Za=function(){this.C!=null&&(this.C=null,ks(this),go(this),se(19))};function Fs(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Ql(o,u){var h=null;if(o.g==u){Fs(o),_o(o),o.g=null;var p=2}else if(ho(o.h,u))h=u.D,Sl(o.h,u),p=1;else return;if(o.G!=0){if(u.o)if(p==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var b=o.B;p=Cs(),ot(p,new _l(p,h)),Ls(o)}else Kl(o);else if(b=u.s,b==3||b==0&&0<u.X||!(p==1&&Qd(o,u)||p==2&&go(o)))switch(h&&0<h.length&&(u=o.h,u.i=u.i.concat(h)),b){case 1:Pn(o,5);break;case 4:Pn(o,10);break;case 3:Pn(o,6);break;default:Pn(o,2)}}}function Yl(o,u){let h=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(h*=2),h*u}function Pn(o,u){if(o.j.info("Error code "+u),u==2){var h=E(o.fb,o),p=o.Xa;const b=!p;p=new Rn(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Vs(p,"https"),Ds(p),b?$d(p.toString(),h):qd(p.toString(),h)}else se(2);o.G=0,o.l&&o.l.sa(u),Xl(o),Hl(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),se(2)):(this.j.info("Failed to ping google.com"),se(1))};function Xl(o){if(o.G=0,o.ka=[],o.l){const u=Rl(o.h);(u.length!=0||o.i.length!=0)&&(O(o.ka,u),O(o.ka,o.i),o.h.i.length=0,V(o.i),o.i.length=0),o.l.ra()}}function Jl(o,u,h){var p=h instanceof Rn?Ue(h):new Rn(h);if(p.g!="")u&&(p.g=u+"."+p.g),xs(p,p.s);else{var b=l.location;p=b.protocol,u=u?u+"."+b.hostname:b.hostname,b=+b.port;var R=new Rn(null);p&&Vs(R,p),u&&(R.g=u),b&&xs(R,b),h&&(R.l=h),p=R}return h=o.D,u=o.ya,h&&u&&bt(p,h,u),bt(p,"VER",o.la),Fr(o,p),p}function Zl(o,u,h){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new Rt(new Os({eb:h})):new Rt(o.pa),u.Ha(o.J),u}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function tu(){}e=tu.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Bs(){}Bs.prototype.g=function(o,u){return new ge(o,u)};function ge(o,u){Z.call(this),this.g=new ql(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!W(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!W(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new zn(this)}x(ge,Z),ge.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ge.prototype.close=function(){mo(this.g)},ge.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.u&&(h={},h.__data__=jt(o),o=h);u.i.push(new Dd(u.Ya++,o)),u.G==3&&Ls(u)},ge.prototype.N=function(){this.g.l=null,delete this.j,mo(this.g),delete this.g,ge.aa.N.call(this)};function eu(o){so.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){t:{for(const h in u){o=h;break t}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}x(eu,so);function nu(){io.call(this),this.status=1}x(nu,io);function zn(o){this.g=o}x(zn,tu),zn.prototype.ua=function(){ot(this.g,"a")},zn.prototype.ta=function(o){ot(this.g,new eu(o))},zn.prototype.sa=function(o){ot(this.g,new nu)},zn.prototype.ra=function(){ot(this.g,"b")},Bs.prototype.createWebChannel=Bs.prototype.g,ge.prototype.send=ge.prototype.o,ge.prototype.open=ge.prototype.m,ge.prototype.close=ge.prototype.close,yf=function(){return new Bs},_f=function(){return Cs()},gf=Cn,ra={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ss.NO_ERROR=0,Ss.TIMEOUT=8,Ss.HTTP_ERROR=6,si=Ss,yl.COMPLETE="complete",mf=yl,dl.EventType=Sr,Sr.OPEN="a",Sr.CLOSE="b",Sr.ERROR="c",Sr.MESSAGE="d",Z.prototype.listen=Z.prototype.K,Wr=dl,Rt.prototype.listenOnce=Rt.prototype.L,Rt.prototype.getLastError=Rt.prototype.Ka,Rt.prototype.getLastErrorCode=Rt.prototype.Ba,Rt.prototype.getStatus=Rt.prototype.Z,Rt.prototype.getResponseJson=Rt.prototype.Oa,Rt.prototype.getResponseText=Rt.prototype.oa,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Ha,pf=Rt}).apply(typeof Hs<"u"?Hs:typeof self<"u"?self:typeof window<"u"?window:{});const Wu="@firebase/firestore",Ku="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Er="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un=new af("@firebase/firestore");function Yn(){return Un.logLevel}function G(e,...t){if(Un.logLevel<=ft.DEBUG){const n=t.map(za);Un.debug(`Firestore (${Er}): ${e}`,...n)}}function Ye(e,...t){if(Un.logLevel<=ft.ERROR){const n=t.map(za);Un.error(`Firestore (${Er}): ${e}`,...n)}}function fr(e,...t){if(Un.logLevel<=ft.WARN){const n=t.map(za);Un.warn(`Firestore (${Er}): ${e}`,...n)}}function za(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,vf(e,r,n)}function vf(e,t,n){let r=`FIRESTORE (${Er}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ye(r),new Error(r)}function St(e,t,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,e||vf(t,s,r)}function dt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tt extends vr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class iy{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Zt.UNAUTHENTICATED))}shutdown(){}}class oy{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ay{constructor(t){this.t=t,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){St(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Fn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Fn,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;t.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Fn)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(St(typeof r.accessToken=="string",31837,{l:r}),new Ef(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return St(t===null||typeof t=="string",2055,{h:t}),new Zt(t)}}class ly{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class uy{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new ly(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Gu{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cy{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$_(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){St(this.o===void 0,3512);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,G("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>r(i))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Gu(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(St(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Gu(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=hy(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%62))}return r}}function ut(e,t){return e<t?-1:e>t?1:0}function sa(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return ut(r,s);{const i=Tf(),a=dy(i.encode(Qu(e,n)),i.encode(Qu(t,n)));return a!==0?a:ut(r,s)}}n+=r>65535?2:1}return ut(e.length,t.length)}function Qu(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function dy(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return ut(e[n],t[n]);return ut(e.length,t.length)}function dr(e,t,n){return e.length===t.length&&e.every((r,s)=>n(r,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=-62135596800,Xu=1e6;class ce{static now(){return ce.fromMillis(Date.now())}static fromDate(t){return ce.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*Xu);return new ce(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new tt(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new tt(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Yu)throw new tt(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new tt(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Xu}_compareTo(t){return this.seconds===t.seconds?ut(this.nanoseconds,t.nanoseconds):ut(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-Yu;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{static fromTimestamp(t){return new st(t)}static min(){return new st(new ce(0,0))}static max(){return new st(new ce(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju="__name__";class Ve{constructor(t,n,r){n===void 0?n=0:n>t.length&&it(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&it(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Ve.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Ve?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=Ve.compareSegments(t.get(s),n.get(s));if(i!==0)return i}return ut(t.length,n.length)}static compareSegments(t,n){const r=Ve.isNumericId(t),s=Ve.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ve.extractNumericId(t).compare(Ve.extractNumericId(n)):sa(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return dn.fromString(t.substring(4,t.length-2))}}class Pt extends Ve{construct(t,n,r){return new Pt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new tt(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Pt(n)}static emptyPath(){return new Pt([])}}const py=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class le extends Ve{construct(t,n,r){return new le(t,n,r)}static isValidIdentifier(t){return py.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),le.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ju}static keyField(){return new le([Ju])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new tt(q.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new tt(q.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new tt(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new tt(q.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new le(n)}static emptyPath(){return new le([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(t){this.path=t}static fromPath(t){return new rt(Pt.fromString(t))}static fromName(t){return new rt(Pt.fromString(t).popFirst(5))}static empty(){return new rt(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Pt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Pt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new rt(new Pt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=-1;function my(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=st.fromTimestamp(r===1e9?new ce(n+1,0):new ce(n,r));return new gn(s,rt.empty(),t)}function gy(e){return new gn(e.readTime,e.key,fs)}class gn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new gn(st.min(),rt.empty(),fs)}static max(){return new gn(st.max(),rt.empty(),fs)}}function _y(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=rt.comparator(e.documentKey,t.documentKey),n!==0?n:ut(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vy{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qi(e){if(e.code!==q.FAILED_PRECONDITION||e.message!==yy)throw e;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&it(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new D((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof D?n:D.resolve(n)}catch(n){return D.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):D.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):D.reject(n)}static resolve(t){return new D((n,r)=>{n(t)})}static reject(t){return new D((n,r)=>{r(t)})}static waitFor(t){return new D((n,r)=>{let s=0,i=0,a=!1;t.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(t){let n=D.resolve(!1);for(const r of t)n=n.next(s=>s?D.resolve(s):r());return n}static forEach(t,n){const r=[];return t.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(t,n){return new D((r,s)=>{const i=t.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const f=c;n(t[f]).next(d=>{a[f]=d,++l,l===i&&r(a)},d=>s(d))}})}static doWhile(t,n){return new D((r,s)=>{const i=()=>{t()===!0?n().next(()=>{i()},s):r()};i()})}}function Ey(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Tr(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}Hi.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=-1;function zi(e){return e==null}function ia(e){return e===0&&1/e==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf="";function wy(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Zu(t)),t=Iy(e.get(n),t);return Zu(t)}function Iy(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const i=e.charAt(s);switch(i){case"\0":n+="";break;case wf:n+="";break;default:n+=i}}return n}function Zu(e){return e+wf+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Es(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ay(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(t,n){this.comparator=t,this.root=n||Ht.EMPTY}insert(t,n){return new xt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(t){return new xt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new zs(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new zs(this.root,t,this.comparator,!1)}getReverseIterator(){return new zs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new zs(this.root,t,this.comparator,!0)}}class zs{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ht{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??Ht.RED,this.left=s??Ht.EMPTY,this.right=i??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new Ht(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Ht.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw it(43730,{key:this.key,value:this.value});if(this.right.isRed())throw it(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw it(27949);return t+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw it(57766)}get value(){throw it(16141)}get color(){throw it(16727)}get left(){throw it(29726)}get right(){throw it(36894)}copy(t,n,r,s,i){return this}insert(t,n,r){return new Ht(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(t){this.comparator=t,this.data=new xt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new ec(this.data.getIterator())}getIteratorFrom(t){return new ec(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Lt)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Lt(this.comparator);return n.data=t,n}}class ec{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t){this.fields=t,t.sort(le.comparator)}static empty(){return new ln([])}unionWith(t){let n=new Lt(le.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new ln(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return dr(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new If("Invalid base64 string: "+i):i}}(t);return new Kt(n)}static fromUint8Array(t){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(t);return new Kt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ut(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Kt.EMPTY_BYTE_STRING=new Kt("");const by=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _n(e){if(St(!!e,39018),typeof e=="string"){let t=0;const n=by.exec(e);if(St(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Vt(e.seconds),nanos:Vt(e.nanos)}}function Vt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function yn(e){return typeof e=="string"?Kt.fromBase64String(e):Kt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af="server_timestamp",bf="__type__",Cf="__previous_value__",Sf="__local_write_time__";function Wa(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[bf])===null||n===void 0?void 0:n.stringValue)===Af}function Wi(e){const t=e.mapValue.fields[Cf];return Wa(t)?Wi(t):t}function ds(e){const t=_n(e.mapValue.fields[Sf].timestampValue);return new ce(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(t,n,r,s,i,a,l,c,f,d){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=d}}const Ii="(default)";class ps{constructor(t,n){this.projectId=t,this.database=n||Ii}static empty(){return new ps("","")}get isDefaultDatabase(){return this.database===Ii}isEqual(t){return t instanceof ps&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy="__type__",Ry="__max__",Ws={mapValue:{}},Py="__vector__",oa="value";function vn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Wa(e)?4:xy(e)?9007199254740991:Vy(e)?10:11:it(28295,{value:e})}function ke(e,t){if(e===t)return!0;const n=vn(e);if(n!==vn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ds(e).isEqual(ds(t));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=_n(s.timestampValue),l=_n(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,i){return yn(s.bytesValue).isEqual(yn(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,i){return Vt(s.geoPointValue.latitude)===Vt(i.geoPointValue.latitude)&&Vt(s.geoPointValue.longitude)===Vt(i.geoPointValue.longitude)}(e,t);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Vt(s.integerValue)===Vt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Vt(s.doubleValue),l=Vt(i.doubleValue);return a===l?ia(a)===ia(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return dr(e.arrayValue.values||[],t.arrayValue.values||[],ke);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(tc(a)!==tc(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!ke(a[c],l[c])))return!1;return!0}(e,t);default:return it(52216,{left:e})}}function ms(e,t){return(e.values||[]).find(n=>ke(n,t))!==void 0}function pr(e,t){if(e===t)return 0;const n=vn(e),r=vn(t);if(n!==r)return ut(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ut(e.booleanValue,t.booleanValue);case 2:return function(i,a){const l=Vt(i.integerValue||i.doubleValue),c=Vt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(e,t);case 3:return nc(e.timestampValue,t.timestampValue);case 4:return nc(ds(e),ds(t));case 5:return sa(e.stringValue,t.stringValue);case 6:return function(i,a){const l=yn(i),c=yn(a);return l.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let f=0;f<l.length&&f<c.length;f++){const d=ut(l[f],c[f]);if(d!==0)return d}return ut(l.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,a){const l=ut(Vt(i.latitude),Vt(a.latitude));return l!==0?l:ut(Vt(i.longitude),Vt(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return rc(e.arrayValue,t.arrayValue);case 10:return function(i,a){var l,c,f,d;const m=i.fields||{},E=a.fields||{},S=(l=m[oa])===null||l===void 0?void 0:l.arrayValue,x=(c=E[oa])===null||c===void 0?void 0:c.arrayValue,V=ut(((f=S==null?void 0:S.values)===null||f===void 0?void 0:f.length)||0,((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0);return V!==0?V:rc(S,x)}(e.mapValue,t.mapValue);case 11:return function(i,a){if(i===Ws.mapValue&&a===Ws.mapValue)return 0;if(i===Ws.mapValue)return 1;if(a===Ws.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),f=a.fields||{},d=Object.keys(f);c.sort(),d.sort();for(let m=0;m<c.length&&m<d.length;++m){const E=sa(c[m],d[m]);if(E!==0)return E;const S=pr(l[c[m]],f[d[m]]);if(S!==0)return S}return ut(c.length,d.length)}(e.mapValue,t.mapValue);default:throw it(23264,{Pe:n})}}function nc(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ut(e,t);const n=_n(e),r=_n(t),s=ut(n.seconds,r.seconds);return s!==0?s:ut(n.nanos,r.nanos)}function rc(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=pr(n[s],r[s]);if(i)return i}return ut(n.length,r.length)}function mr(e){return aa(e)}function aa(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=_n(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return yn(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return rt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=aa(i);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${aa(n.fields[a])}`;return s+"}"}(e.mapValue):it(61005,{value:e})}function ii(e){switch(vn(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Wi(e);return t?16+ii(t):16;case 5:return 2*e.stringValue.length;case 6:return yn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+ii(i),0)}(e.arrayValue);case 10:case 11:return function(r){let s=0;return Es(r.fields,(i,a)=>{s+=i.length+ii(a)}),s}(e.mapValue);default:throw it(13486,{value:e})}}function la(e){return!!e&&"integerValue"in e}function Ka(e){return!!e&&"arrayValue"in e}function sc(e){return!!e&&"nullValue"in e}function ic(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Mo(e){return!!e&&"mapValue"in e}function Vy(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Sy])===null||n===void 0?void 0:n.stringValue)===Py}function es(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Es(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=es(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=es(e.arrayValue.values[n]);return t}return Object.assign({},e)}function xy(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Ry}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(t){this.value=t}static empty(){return new De({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Mo(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=es(n)}setAll(t){let n=le.emptyPath(),r={},s=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=es(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());Mo(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ke(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];Mo(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){Es(n,(s,i)=>t[s]=i);for(const s of r)delete t[s]}clone(){return new De(es(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(t,n,r,s,i,a,l){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(t){return new ee(t,0,st.min(),st.min(),st.min(),De.empty(),0)}static newFoundDocument(t,n,r,s){return new ee(t,1,n,st.min(),r,s,0)}static newNoDocument(t,n){return new ee(t,2,n,st.min(),st.min(),De.empty(),0)}static newUnknownDocument(t,n){return new ee(t,3,n,st.min(),st.min(),De.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(st.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=De.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=De.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=st.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ee&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ee(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(t,n){this.position=t,this.inclusive=n}}function oc(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(i.field.isKeyField()?r=rt.comparator(rt.fromName(a.referenceValue),n.key):r=pr(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ac(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ke(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(t,n="asc"){this.field=t,this.dir=n}}function Dy(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{}class kt extends Rf{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new Ny(t,n,r):n==="array-contains"?new Ly(t,r):n==="in"?new Fy(t,r):n==="not-in"?new By(t,r):n==="array-contains-any"?new Uy(t,r):new kt(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new My(t,r):new ky(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(pr(n,this.value)):n!==null&&vn(this.value)===vn(n)&&this.matchesComparison(pr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return it(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Le extends Rf{constructor(t,n){super(),this.filters=t,this.op=n,this.Te=null}static create(t,n){return new Le(t,n)}matches(t){return Pf(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Pf(e){return e.op==="and"}function Vf(e){return Oy(e)&&Pf(e)}function Oy(e){for(const t of e.filters)if(t instanceof Le)return!1;return!0}function ua(e){if(e instanceof kt)return e.field.canonicalString()+e.op.toString()+mr(e.value);if(Vf(e))return e.filters.map(t=>ua(t)).join(",");{const t=e.filters.map(n=>ua(n)).join(",");return`${e.op}(${t})`}}function xf(e,t){return e instanceof kt?function(r,s){return s instanceof kt&&r.op===s.op&&r.field.isEqual(s.field)&&ke(r.value,s.value)}(e,t):e instanceof Le?function(r,s){return s instanceof Le&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&xf(a,s.filters[l]),!0):!1}(e,t):void it(19439)}function Df(e){return e instanceof kt?function(n){return`${n.field.canonicalString()} ${n.op} ${mr(n.value)}`}(e):e instanceof Le?function(n){return n.op.toString()+" {"+n.getFilters().map(Df).join(" ,")+"}"}(e):"Filter"}class Ny extends kt{constructor(t,n,r){super(t,n,r),this.key=rt.fromName(r.referenceValue)}matches(t){const n=rt.comparator(t.key,this.key);return this.matchesComparison(n)}}class My extends kt{constructor(t,n){super(t,"in",n),this.keys=Of("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class ky extends kt{constructor(t,n){super(t,"not-in",n),this.keys=Of("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Of(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>rt.fromName(r.referenceValue))}class Ly extends kt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Ka(n)&&ms(n.arrayValue,this.value)}}class Fy extends kt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&ms(this.value.arrayValue,n)}}class By extends kt{constructor(t,n){super(t,"not-in",n)}matches(t){if(ms(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ms(this.value.arrayValue,n)}}class Uy extends kt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Ka(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ms(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(t,n=null,r=[],s=[],i=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Ie=null}}function lc(e,t=null,n=[],r=[],s=null,i=null,a=null){return new jy(e,t,n,r,s,i,a)}function Ga(e){const t=dt(e);if(t.Ie===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>ua(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),zi(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>mr(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>mr(r)).join(",")),t.Ie=n}return t.Ie}function Qa(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Dy(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!xf(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ac(e.startAt,t.startAt)&&ac(e.endAt,t.endAt)}function ca(e){return rt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(t,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function $y(e,t,n,r,s,i,a,l){return new Ki(e,t,n,r,s,i,a,l)}function Nf(e){return new Ki(e)}function uc(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function qy(e){return e.collectionGroup!==null}function ns(e){const t=dt(e);if(t.Ee===null){t.Ee=[];const n=new Set;for(const i of t.explicitOrderBy)t.Ee.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Lt(le.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(t).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||t.Ee.push(new bi(i,r))}),n.has(le.keyField().canonicalString())||t.Ee.push(new bi(le.keyField(),r))}return t.Ee}function Ne(e){const t=dt(e);return t.de||(t.de=Hy(t,ns(e))),t.de}function Hy(e,t){if(e.limitType==="F")return lc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new bi(s.field,i)});const n=e.endAt?new Ai(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ai(e.startAt.position,e.startAt.inclusive):null;return lc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ha(e,t,n){return new Ki(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Gi(e,t){return Qa(Ne(e),Ne(t))&&e.limitType===t.limitType}function Mf(e){return`${Ga(Ne(e))}|lt:${e.limitType}`}function Xn(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Df(s)).join(", ")}]`),zi(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>mr(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>mr(s)).join(",")),`Target(${r})`}(Ne(e))}; limitType=${e.limitType})`}function Qi(e,t){return t.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):rt.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(e,t)&&function(r,s){for(const i of ns(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(e,t)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(e,t)&&function(r,s){return!(r.startAt&&!function(a,l,c){const f=oc(a,l,c);return a.inclusive?f<=0:f<0}(r.startAt,ns(r),s)||r.endAt&&!function(a,l,c){const f=oc(a,l,c);return a.inclusive?f>=0:f>0}(r.endAt,ns(r),s))}(e,t)}function zy(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function kf(e){return(t,n)=>{let r=!1;for(const s of ns(e)){const i=Wy(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Wy(e,t,n){const r=e.field.isKeyField()?rt.comparator(t.key,n.key):function(i,a,l){const c=a.data.field(i),f=l.data.field(i);return c!==null&&f!==null?pr(c,f):it(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return it(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Es(this.inner,(n,r)=>{for(const[s,i]of r)t(s,i)})}isEmpty(){return Ay(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky=new xt(rt.comparator);function En(){return Ky}const Lf=new xt(rt.comparator);function Kr(...e){let t=Lf;for(const n of e)t=t.insert(n.key,n);return t}function Gy(e){let t=Lf;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function kn(){return rs()}function Ff(){return rs()}function rs(){return new $n(e=>e.toString(),(e,t)=>e.isEqual(t))}const Qy=new Lt(rt.comparator);function pt(...e){let t=Qy;for(const n of e)t=t.add(n);return t}const Yy=new Lt(ut);function Xy(){return Yy}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ia(t)?"-0":t}}function Zy(e){return{integerValue:""+e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(){this._=void 0}}function tv(e,t,n){return e instanceof fa?function(s,i){const a={fields:{[bf]:{stringValue:Af},[Sf]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Wa(i)&&(i=Wi(i)),i&&(a.fields[Cf]=i),{mapValue:a}}(n,t):e instanceof Ci?Bf(e,t):e instanceof Si?Uf(e,t):function(s,i){const a=nv(s,i),l=cc(a)+cc(s.Re);return la(a)&&la(s.Re)?Zy(l):Jy(s.serializer,l)}(e,t)}function ev(e,t,n){return e instanceof Ci?Bf(e,t):e instanceof Si?Uf(e,t):n}function nv(e,t){return e instanceof da?function(r){return la(r)||function(i){return!!i&&"doubleValue"in i}(r)}(t)?t:{integerValue:0}:null}class fa extends Yi{}class Ci extends Yi{constructor(t){super(),this.elements=t}}function Bf(e,t){const n=jf(t);for(const r of e.elements)n.some(s=>ke(s,r))||n.push(r);return{arrayValue:{values:n}}}class Si extends Yi{constructor(t){super(),this.elements=t}}function Uf(e,t){let n=jf(t);for(const r of e.elements)n=n.filter(s=>!ke(s,r));return{arrayValue:{values:n}}}class da extends Yi{constructor(t,n){super(),this.serializer=t,this.Re=n}}function cc(e){return Vt(e.integerValue||e.doubleValue)}function jf(e){return Ka(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function rv(e,t){return e.field.isEqual(t.field)&&function(r,s){return r instanceof Ci&&s instanceof Ci||r instanceof Si&&s instanceof Si?dr(r.elements,s.elements,ke):r instanceof da&&s instanceof da?ke(r.Re,s.Re):r instanceof fa&&s instanceof fa}(e.transform,t.transform)}class Bn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Bn}static exists(t){return new Bn(void 0,t)}static updateTime(t){return new Bn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function oi(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Ya{}function $f(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new iv(e.key,Bn.none()):new Xa(e.key,e.data,Bn.none());{const n=e.data,r=De.empty();let s=new Lt(le.comparator);for(let i of t.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Xi(e.key,r,new ln(s.toArray()),Bn.none())}}function sv(e,t,n){e instanceof Xa?function(s,i,a){const l=s.value.clone(),c=fc(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof Xi?function(s,i,a){if(!oi(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=fc(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(qf(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(e,t,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function ss(e,t,n,r){return e instanceof Xa?function(i,a,l,c){if(!oi(i.precondition,a))return l;const f=i.value.clone(),d=dc(i.fieldTransforms,c,a);return f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(e,t,n,r):e instanceof Xi?function(i,a,l,c){if(!oi(i.precondition,a))return l;const f=dc(i.fieldTransforms,c,a),d=a.data;return d.setAll(qf(i)),d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(e,t,n,r):function(i,a,l){return oi(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function hc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&dr(r,s,(i,a)=>rv(i,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Xa extends Ya{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Xi extends Ya{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function qf(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function fc(e,t,n){const r=new Map;St(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,l=t.data.field(i.field);r.set(i.field,ev(a,l,n[s]))}return r}function dc(e,t,n){const r=new Map;for(const s of e){const i=s.transform,a=n.data.field(s.field);r.set(s.field,tv(i,a,t))}return r}class iv extends Ya{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&sv(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=ss(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=ss(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Ff();return this.mutations.forEach(s=>{const i=t.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=$f(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(st.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),pt())}isEqual(t){return this.batchId===t.batchId&&dr(this.mutations,t.mutations,(n,r)=>hc(n,r))&&dr(this.baseMutations,t.baseMutations,(n,r)=>hc(n,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,ht;function Hf(e){if(e===void 0)return Ye("GRPC error has no .code"),q.UNKNOWN;switch(e){case Dt.OK:return q.OK;case Dt.CANCELLED:return q.CANCELLED;case Dt.UNKNOWN:return q.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return q.INTERNAL;case Dt.UNAVAILABLE:return q.UNAVAILABLE;case Dt.UNAUTHENTICATED:return q.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case Dt.NOT_FOUND:return q.NOT_FOUND;case Dt.ALREADY_EXISTS:return q.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return q.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case Dt.ABORTED:return q.ABORTED;case Dt.OUT_OF_RANGE:return q.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return q.UNIMPLEMENTED;case Dt.DATA_LOSS:return q.DATA_LOSS;default:return it(39323,{code:e})}}(ht=Dt||(Dt={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv=new dn([4294967295,4294967295],0);function pc(e){const t=Tf().encode(e),n=new df;return n.update(t),new Uint8Array(n.digest())}function mc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new dn([n,r],0),new dn([s,i],0)]}class Ja{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Gr(`Invalid padding: ${n}`);if(r<0)throw new Gr(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Gr(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Gr(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*t.length-n,this.ye=dn.fromNumber(this.pe)}we(t,n,r){let s=t.add(n.multiply(dn.fromNumber(r)));return s.compare(uv)===1&&(s=new dn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const n=pc(t),[r,s]=mc(n);for(let i=0;i<this.hashCount;i++){const a=this.we(r,s,i);if(!this.be(a))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),a=new Ja(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(t){if(this.pe===0)return;const n=pc(t),[r,s]=mc(n);for(let i=0;i<this.hashCount;i++){const a=this.we(r,s,i);this.Se(a)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Gr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,Ts.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Ji(st.min(),s,new xt(ut),En(),pt())}}class Ts{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Ts(r,n,pt(),pt(),pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(t,n,r,s){this.De=t,this.removedTargetIds=n,this.key=r,this.ve=s}}class zf{constructor(t,n){this.targetId=t,this.Ce=n}}class Wf{constructor(t,n,r=Kt.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class gc{constructor(){this.Fe=0,this.Me=_c(),this.xe=Kt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=pt(),n=pt(),r=pt();return this.Me.forEach((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:it(38017,{changeType:i})}}),new Ts(this.xe,this.Oe,t,n,r)}Qe(){this.Ne=!1,this.Me=_c()}$e(t,n){this.Ne=!0,this.Me=this.Me.insert(t,n)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,St(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class cv{constructor(t){this.ze=t,this.je=new Map,this.He=En(),this.Je=Ks(),this.Ye=Ks(),this.Ze=new xt(ut)}Xe(t){for(const n of t.De)t.ve&&t.ve.isFoundDocument()?this.et(n,t.ve):this.tt(n,t.key,t.ve);for(const n of t.removedTargetIds)this.tt(n,t.key,t.ve)}nt(t){this.forEachTarget(t,n=>{const r=this.rt(n);switch(t.state){case 0:this.it(n)&&r.ke(t.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(t.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(t.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(t.resumeToken));break;default:it(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(t){const n=t.targetId,r=t.Ce.count,s=this._t(n);if(s){const i=s.target;if(ca(i))if(r===0){const a=new rt(i.path);this.tt(n,a,ee.newNoDocument(a,st.min()))}else St(r===1,20013,{expectedCount:r});else{const a=this.ut(n);if(a!==r){const l=this.ct(t),c=l?this.lt(l,t,a):1;if(c!==0){this.st(n);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,f)}}}}}ct(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=yn(r).toUint8Array()}catch(c){if(c instanceof If)return fr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Ja(a,s,i)}catch(c){return fr(c instanceof Gr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.pe===0?null:l}lt(t,n,r){return n.Ce.count===r-this.Tt(t,n.targetId)?0:2}Tt(t,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.ze.Pt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.tt(n,i,null),s++)}),s}It(t){const n=new Map;this.je.forEach((i,a)=>{const l=this._t(a);if(l){if(i.current&&ca(l.target)){const c=new rt(l.target.path);this.Et(c).has(a)||this.dt(a,c)||this.tt(a,c,ee.newNoDocument(c,t))}i.Le&&(n.set(a,i.qe()),i.Qe())}});let r=pt();this.Ye.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const f=this._t(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.He.forEach((i,a)=>a.setReadTime(t));const s=new Ji(t,n,this.Ze,this.He,r);return this.He=En(),this.Je=Ks(),this.Ye=Ks(),this.Ze=new xt(ut),s}et(t,n){if(!this.it(t))return;const r=this.dt(t,n.key)?2:0;this.rt(t).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(t)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(t))}tt(t,n,r){if(!this.it(t))return;const s=this.rt(t);this.dt(t,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(t)),this.Ye=this.Ye.insert(n,this.At(n).add(t)),r&&(this.He=this.He.insert(n,r))}removeTarget(t){this.je.delete(t)}ut(t){const n=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let n=this.je.get(t);return n||(n=new gc,this.je.set(t,n)),n}At(t){let n=this.Ye.get(t);return n||(n=new Lt(ut),this.Ye=this.Ye.insert(t,n)),n}Et(t){let n=this.Je.get(t);return n||(n=new Lt(ut),this.Je=this.Je.insert(t,n)),n}it(t){const n=this._t(t)!==null;return n||G("WatchChangeAggregator","Detected inactive target",t),n}_t(t){const n=this.je.get(t);return n&&n.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new gc),this.ze.getRemoteKeysForTarget(t).forEach(n=>{this.tt(t,n,null)})}dt(t,n){return this.ze.getRemoteKeysForTarget(t).has(n)}}function Ks(){return new xt(rt.comparator)}function _c(){return new xt(rt.comparator)}const hv={asc:"ASCENDING",desc:"DESCENDING"},fv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dv={and:"AND",or:"OR"};class pv{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function pa(e,t){return e.useProto3Json||zi(t)?t:{value:t}}function mv(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function gv(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function lr(e){return St(!!e,49232),st.fromTimestamp(function(n){const r=_n(n);return new ce(r.seconds,r.nanos)}(e))}function _v(e,t){return ma(e,t).canonicalString()}function ma(e,t){const n=function(s){return new Pt(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function Kf(e){const t=Pt.fromString(e);return St(Jf(t),10190,{key:t.toString()}),t}function ko(e,t){const n=Kf(t);if(n.get(1)!==e.databaseId.projectId)throw new tt(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new tt(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new rt(Qf(n))}function Gf(e,t){return _v(e.databaseId,t)}function yv(e){const t=Kf(e);return t.length===4?Pt.emptyPath():Qf(t)}function yc(e){return new Pt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Qf(e){return St(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function vv(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:it(39313,{state:f})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(f,d){return f.useProto3Json?(St(d===void 0||typeof d=="string",58123),Kt.fromBase64String(d||"")):(St(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Kt.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(f){const d=f.code===void 0?q.UNKNOWN:Hf(f.code);return new tt(d,f.message||"")}(a);n=new Wf(r,s,i,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=ko(e,r.document.name),i=lr(r.document.updateTime),a=r.document.createTime?lr(r.document.createTime):st.min(),l=new De({mapValue:{fields:r.document.fields}}),c=ee.newFoundDocument(s,i,a,l),f=r.targetIds||[],d=r.removedTargetIds||[];n=new ai(f,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=ko(e,r.document),i=r.readTime?lr(r.readTime):st.min(),a=ee.newNoDocument(s,i),l=r.removedTargetIds||[];n=new ai([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=ko(e,r.document),i=r.removedTargetIds||[];n=new ai([],i,s,null)}else{if(!("filter"in t))return it(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new lv(s,i),l=r.targetId;n=new zf(l,a)}}return n}function Ev(e,t){return{documents:[Gf(e,t.path)]}}function Tv(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Gf(e,s);const i=function(f){if(f.length!==0)return Xf(Le.create(f,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(f){if(f.length!==0)return f.map(d=>function(E){return{field:Jn(E.field),direction:Av(E.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=pa(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(t.endAt)),{gt:n,parent:s}}function wv(e){let t=yv(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){St(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let i=[];n.where&&(i=function(m){const E=Yf(m);return E instanceof Le&&Vf(E)?E.getFilters():[E]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(E=>function(x){return new bi(Zn(x.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(E))}(n.orderBy));let l=null;n.limit&&(l=function(m){let E;return E=typeof m=="object"?m.value:m,zi(E)?null:E}(n.limit));let c=null;n.startAt&&(c=function(m){const E=!!m.before,S=m.values||[];return new Ai(S,E)}(n.startAt));let f=null;return n.endAt&&(f=function(m){const E=!m.before,S=m.values||[];return new Ai(S,E)}(n.endAt)),$y(t,s,a,i,l,"F",c,f)}function Iv(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return it(28987,{purpose:s})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Yf(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Zn(n.unaryFilter.field);return kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Zn(n.unaryFilter.field);return kt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Zn(n.unaryFilter.field);return kt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Zn(n.unaryFilter.field);return kt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return it(61313);default:return it(60726)}}(e):e.fieldFilter!==void 0?function(n){return kt.create(Zn(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return it(58110);default:return it(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Le.create(n.compositeFilter.filters.map(r=>Yf(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return it(1026)}}(n.compositeFilter.op))}(e):it(30097,{filter:e})}function Av(e){return hv[e]}function bv(e){return fv[e]}function Cv(e){return dv[e]}function Jn(e){return{fieldPath:e.canonicalString()}}function Zn(e){return le.fromServerFormat(e.fieldPath)}function Xf(e){return e instanceof kt?function(n){if(n.op==="=="){if(ic(n.value))return{unaryFilter:{field:Jn(n.field),op:"IS_NAN"}};if(sc(n.value))return{unaryFilter:{field:Jn(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ic(n.value))return{unaryFilter:{field:Jn(n.field),op:"IS_NOT_NAN"}};if(sc(n.value))return{unaryFilter:{field:Jn(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jn(n.field),op:bv(n.op),value:n.value}}}(e):e instanceof Le?function(n){const r=n.getFilters().map(s=>Xf(s));return r.length===1?r[0]:{compositeFilter:{op:Cv(n.op),filters:r}}}(e):it(54877,{filter:e})}function Jf(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(t,n,r,s,i=st.min(),a=st.min(),l=Kt.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new un(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new un(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new un(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new un(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(t){this.wt=t}}function Rv(e){const t=wv({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?ha(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(){this.Cn=new Vv}addToCollectionParentIndex(t,n){return this.Cn.add(n),D.resolve()}getCollectionParents(t,n){return D.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return D.resolve()}deleteFieldIndex(t,n){return D.resolve()}deleteAllFieldIndexes(t){return D.resolve()}createTargetIndexes(t,n){return D.resolve()}getDocumentsMatchingTarget(t,n){return D.resolve(null)}getIndexType(t,n){return D.resolve(0)}getFieldIndexes(t,n){return D.resolve([])}getNextCollectionGroupToUpdate(t){return D.resolve(null)}getMinOffset(t,n){return D.resolve(gn.min())}getMinOffsetFromCollectionGroup(t,n){return D.resolve(gn.min())}updateCollectionGroup(t,n,r){return D.resolve()}updateIndexEntries(t,n){return D.resolve()}}class Vv{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new Lt(Pt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new Lt(Pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Zf=41943040;class pe{static withCacheSize(t){return new pe(t,pe.DEFAULT_COLLECTION_PERCENTILE,pe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pe.DEFAULT_COLLECTION_PERCENTILE=10,pe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pe.DEFAULT=new pe(Zf,pe.DEFAULT_COLLECTION_PERCENTILE,pe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pe.DISABLED=new pe(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new gr(0)}static lr(){return new gr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec="LruGarbageCollector",xv=1048576;function Tc([e,t],[n,r]){const s=ut(e,n);return s===0?ut(t,r):s}class Dv{constructor(t){this.Er=t,this.buffer=new Lt(Tc),this.dr=0}Ar(){return++this.dr}Rr(t){const n=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Tc(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Ov{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){G(Ec,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Tr(n)?G(Ec,"Ignoring IndexedDB error during garbage collection: ",n):await qi(n)}await this.mr(3e5)})}}class Nv{constructor(t,n){this.gr=t,this.params=n}calculateTargetCount(t,n){return this.gr.pr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return D.resolve(Hi.le);const r=new Dv(n);return this.gr.forEachTarget(t,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(t,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.gr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.gr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),D.resolve(vc)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vc):this.wr(t,n))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,n){let r,s,i,a,l,c,f;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(t,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(t,r,n))).next(m=>(i=m,c=Date.now(),this.removeOrphanedDocuments(t,r))).next(m=>(f=Date.now(),Yn()<=ft.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(f-c)+`ms
Total Duration: ${f-d}ms`),D.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function Mv(e,t){return new Nv(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(){this.changes=new $n(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ee.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?D.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(r!==null&&ss(r.mutation,s,ln.empty(),ce.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,pt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=pt()){const s=kn();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,r).next(i=>{let a=Kr();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const r=kn();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,pt()))}populateOverlays(t,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(t,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,r,s){let i=En();const a=rs(),l=function(){return rs()}();return n.forEach((c,f)=>{const d=r.get(f.key);s.has(f.key)&&(d===void 0||d.mutation instanceof Xi)?i=i.insert(f.key,f):d!==void 0?(a.set(f.key,d.mutation.getFieldMask()),ss(d.mutation,f,d.mutation.getFieldMask(),ce.now())):a.set(f.key,ln.empty())}),this.recalculateAndSaveOverlays(t,i).next(c=>(c.forEach((f,d)=>a.set(f,d)),n.forEach((f,d)=>{var m;return l.set(f,new Lv(d,(m=a.get(f))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(t,n){const r=rs();let s=new xt((a,l)=>a-l),i=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const f=n.get(c);if(f===null)return;let d=r.get(c)||ln.empty();d=l.applyToLocalView(f,d),r.set(c,d);const m=(s.get(l.batchId)||pt()).add(c);s=s.insert(l.batchId,m)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),f=c.key,d=c.value,m=Ff();d.forEach(E=>{if(!i.has(E)){const S=$f(n.get(E),r.get(E));S!==null&&m.set(E,S),i=i.add(E)}}),a.push(this.documentOverlayCache.saveOverlays(t,f,m))}return D.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,s){return function(a){return rt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):qy(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):D.resolve(kn());let l=fs,c=i;return a.next(f=>D.forEach(f,(d,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(d)?D.resolve():this.remoteDocumentCache.getEntry(t,d).next(E=>{c=c.insert(d,E)}))).next(()=>this.populateOverlays(t,f,i)).next(()=>this.computeViews(t,c,f,pt())).next(d=>({batchId:l,changes:Gy(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new rt(n)).next(r=>{let s=Kr();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let a=Kr();return this.indexManager.getCollectionParents(t,i).next(l=>D.forEach(l,c=>{const f=function(m,E){return new Ki(E,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,f,r,s).next(d=>{d.forEach((m,E)=>{a=a.insert(m,E)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s))).next(a=>{i.forEach((c,f)=>{const d=f.getKey();a.get(d)===null&&(a=a.insert(d,ee.newInvalidDocument(d)))});let l=Kr();return a.forEach((c,f)=>{const d=i.get(c);d!==void 0&&ss(d.mutation,f,ln.empty(),ce.now()),Qi(n,f)&&(l=l.insert(c,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,n){return D.resolve(this.kr.get(n))}saveBundleMetadata(t,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:lr(s.createTime)}}(n)),D.resolve()}getNamedQuery(t,n){return D.resolve(this.qr.get(n))}saveNamedQuery(t,n){return this.qr.set(n.name,function(s){return{name:s.name,query:Rv(s.bundledQuery),readTime:lr(s.readTime)}}(n)),D.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(){this.overlays=new xt(rt.comparator),this.Qr=new Map}getOverlay(t,n){return D.resolve(this.overlays.get(n))}getOverlays(t,n){const r=kn();return D.forEach(n,s=>this.getOverlay(t,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((s,i)=>{this.St(t,n,i)}),D.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(r)),D.resolve()}getOverlaysForCollection(t,n,r){const s=kn(),i=n.length+1,a=new rt(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,f=c.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return D.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new xt((f,d)=>f-d);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let d=i.get(f.largestBatchId);d===null&&(d=kn(),i=i.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const l=kn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,d)=>l.set(f,d)),!(l.size()>=s)););return D.resolve(l)}St(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new av(n,r));let i=this.Qr.get(n);i===void 0&&(i=pt(),this.Qr.set(n,i)),this.Qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(){this.sessionToken=Kt.EMPTY_BYTE_STRING}getSessionToken(t){return D.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,D.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(){this.$r=new Lt(Ft.Ur),this.Kr=new Lt(Ft.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,n){const r=new Ft(t,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.zr(new Ft(t,n))}jr(t,n){t.forEach(r=>this.removeReference(r,n))}Hr(t){const n=new rt(new Pt([])),r=new Ft(n,t),s=new Ft(n,t+1),i=[];return this.Kr.forEachInRange([r,s],a=>{this.zr(a),i.push(a.key)}),i}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const n=new rt(new Pt([])),r=new Ft(n,t),s=new Ft(n,t+1);let i=pt();return this.Kr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(t){const n=new Ft(t,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Ft{constructor(t,n){this.key=t,this.Zr=n}static Ur(t,n){return rt.comparator(t.key,n.key)||ut(t.Zr,n.Zr)}static Wr(t,n){return ut(t.Zr,n.Zr)||rt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Lt(Ft.Ur)}checkEmpty(t){return D.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new ov(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Xr=this.Xr.add(new Ft(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return D.resolve(a)}lookupMutationBatch(t,n){return D.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.ti(r),i=s<0?0:s;return D.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(this.mutationQueue.length===0?Ty:this.nr-1)}getAllMutationBatches(t){return D.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Ft(n,0),s=new Ft(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([r,s],a=>{const l=this.ei(a.Zr);i.push(l)}),D.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Lt(ut);return n.forEach(s=>{const i=new Ft(s,0),a=new Ft(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,a],l=>{r=r.add(l.Zr)})}),D.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;rt.isDocumentKey(i)||(i=i.child(""));const a=new Ft(new rt(i),0);let l=new Lt(ut);return this.Xr.forEachWhile(c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(l=l.add(c.Zr)),!0)},a),D.resolve(this.ni(l))}ni(t){const n=[];return t.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){St(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return D.forEach(n.mutations,s=>{const i=new Ft(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Xr=r})}sr(t){}containsKey(t,n){const r=new Ft(n,0),s=this.Xr.firstAfterOrEqual(r);return D.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,D.resolve()}ri(t,n){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const n=this.ti(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(t){this.ii=t,this.docs=function(){return new xt(rt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return D.resolve(r?r.document.mutableCopy():ee.newInvalidDocument(n))}getEntries(t,n){let r=En();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ee.newInvalidDocument(s))}),D.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=En();const a=n.path,l=new rt(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:f,value:{document:d}}=c.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||_y(gy(d),r)<=0||(s.has(d.key)||Qi(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return D.resolve(i)}getAllFromCollectionGroup(t,n,r,s){it(9500)}si(t,n){return D.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new Hv(this)}getSize(t){return D.resolve(this.size)}}class Hv extends kv{constructor(t){super(),this.Br=t}applyChanges(t){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(t,s)):this.Br.removeEntry(r)}),D.waitFor(n)}getFromCache(t,n){return this.Br.getEntry(t,n)}getAllFromCache(t,n){return this.Br.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(t){this.persistence=t,this.oi=new $n(n=>Ga(n),Qa),this.lastRemoteSnapshotVersion=st.min(),this.highestTargetId=0,this._i=0,this.ai=new Za,this.targetCount=0,this.ui=gr.cr()}forEachTarget(t,n){return this.oi.forEach((r,s)=>n(s)),D.resolve()}getLastRemoteSnapshotVersion(t){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return D.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),D.resolve()}Tr(t){this.oi.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ui=new gr(n),this.highestTargetId=n),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,n){return this.Tr(n),this.targetCount+=1,D.resolve()}updateTargetData(t,n){return this.Tr(n),D.resolve()}removeTargetData(t,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,D.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.oi.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.oi.delete(a),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),D.waitFor(i).next(()=>s)}getTargetCount(t){return D.resolve(this.targetCount)}getTargetData(t,n){const r=this.oi.get(n)||null;return D.resolve(r)}addMatchingKeys(t,n,r){return this.ai.Gr(n,r),D.resolve()}removeMatchingKeys(t,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(t,a))}),D.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.ai.Hr(n),D.resolve()}getMatchingKeysForTargetId(t,n){const r=this.ai.Yr(n);return D.resolve(r)}containsKey(t,n){return D.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(t,n){this.ci={},this.overlays={},this.li=new Hi(0),this.hi=!1,this.hi=!0,this.Pi=new jv,this.referenceDelegate=t(this),this.Ti=new zv(this),this.indexManager=new Pv,this.remoteDocumentCache=function(s){return new qv(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new Sv(n),this.Ei=new Bv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Uv,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ci[t.toKey()];return r||(r=new $v(n,this.referenceDelegate),this.ci[t.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,n,r){G("MemoryPersistence","Starting transaction:",t);const s=new Wv(this.li.next());return this.referenceDelegate.di(),r(s).next(i=>this.referenceDelegate.Ai(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ri(t,n){return D.or(Object.values(this.ci).map(r=>()=>r.containsKey(t,n)))}}class Wv extends vy{constructor(t){super(),this.currentSequenceNumber=t}}class tl{constructor(t){this.persistence=t,this.Vi=new Za,this.mi=null}static fi(t){return new tl(t)}get gi(){if(this.mi)return this.mi;throw it(60996)}addReference(t,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),D.resolve()}removeReference(t,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),D.resolve()}markPotentiallyOrphaned(t,n){return this.gi.add(n.toString()),D.resolve()}removeTarget(t,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(i=>this.gi.add(i.toString()))}).next(()=>r.removeTargetData(t,n))}di(){this.mi=new Set}Ai(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.gi,r=>{const s=rt.fromPath(r);return this.pi(t,s).next(i=>{i||n.removeEntry(s,st.min())})}).next(()=>(this.mi=null,n.apply(t)))}updateLimboDocument(t,n){return this.pi(t,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(t){return 0}pi(t,n){return D.or([()=>D.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ri(t,n)])}}class Ri{constructor(t,n){this.persistence=t,this.yi=new $n(r=>wy(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Mv(this,n)}static fi(t,n){return new Ri(t,n)}di(){}Ai(t){return D.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}pr(t){const n=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(s=>r+s))}br(t){let n=0;return this.yr(t,r=>{n++}).next(()=>n)}yr(t,n){return D.forEach(this.yi,(r,s)=>this.Dr(t,r,s).next(i=>i?D.resolve():n(s)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.si(t,a=>this.Dr(t,a,n).next(l=>{l||(r++,i.removeEntry(a,st.min()))})).next(()=>i.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.yi.set(n,t.currentSequenceNumber),D.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),D.resolve()}removeReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),D.resolve()}updateLimboDocument(t,n){return this.yi.set(n,t.currentSequenceNumber),D.resolve()}Ii(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=ii(t.data.value)),n}Dr(t,n,r){return D.or([()=>this.persistence.Ri(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.yi.get(n);return D.resolve(s!==void 0&&s>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.ds=r,this.As=s}static Rs(t,n){let r=pt(),s=pt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new el(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return Fg()?8:Ey(kg())>0?6:4}()}initialize(t,n){this.ys=t,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.ws(t,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.bs(t,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new Kv;return this.Ss(t,n,a).next(l=>{if(i.result=l,this.fs)return this.Ds(t,n,a,l.size)})}).next(()=>i.result)}Ds(t,n,r,s){return r.documentReadCount<this.gs?(Yn()<=ft.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Xn(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),D.resolve()):(Yn()<=ft.DEBUG&&G("QueryEngine","Query:",Xn(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(Yn()<=ft.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Xn(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ne(n))):D.resolve())}ws(t,n){if(uc(n))return D.resolve(null);let r=Ne(n);return this.indexManager.getIndexType(t,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ha(n,null,"F"),r=Ne(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(i=>{const a=pt(...i);return this.ys.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,r).next(c=>{const f=this.vs(n,l);return this.Cs(n,f,a,c.readTime)?this.ws(t,ha(n,null,"F")):this.Fs(t,f,n,c)}))})))}bs(t,n,r,s){return uc(n)||s.isEqual(st.min())?D.resolve(null):this.ys.getDocuments(t,r).next(i=>{const a=this.vs(n,i);return this.Cs(n,a,r,s)?D.resolve(null):(Yn()<=ft.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Xn(n)),this.Fs(t,a,n,my(s,fs)).next(l=>l))})}vs(t,n){let r=new Lt(kf(t));return n.forEach((s,i)=>{Qi(t,i)&&(r=r.add(i))}),r}Cs(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(t,n,r){return Yn()<=ft.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Xn(n)),this.ys.getDocumentsMatchingQuery(t,n,gn.min(),r)}Fs(t,n,r,s){return this.ys.getDocumentsMatchingQuery(t,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl="LocalStore",Qv=3e8;class Yv{constructor(t,n,r,s){this.persistence=t,this.Ms=n,this.serializer=s,this.xs=new xt(ut),this.Os=new $n(i=>Ga(i),Qa),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(r)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Fv(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.xs))}}function Xv(e,t,n,r){return new Yv(e,t,n,r)}async function ed(e,t){const n=dt(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ls(t),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=pt();for(const f of s){a.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}for(const f of i){l.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(f=>({ks:f,removedBatchIds:a,addedBatchIds:l}))})})}function nd(e){const t=dt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ti.getLastRemoteSnapshotVersion(n))}function Jv(e,t){const n=dt(e),r=t.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const l=[];t.targetChanges.forEach((d,m)=>{const E=s.get(m);if(!E)return;l.push(n.Ti.removeMatchingKeys(i,d.removedDocuments,m).next(()=>n.Ti.addMatchingKeys(i,d.addedDocuments,m)));let S=E.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(m)!==null?S=S.withResumeToken(Kt.EMPTY_BYTE_STRING,st.min()).withLastLimboFreeSnapshotVersion(st.min()):d.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(d.resumeToken,r)),s=s.insert(m,S),function(V,O,M){return V.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=Qv?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(E,S,d)&&l.push(n.Ti.updateTargetData(i,S))});let c=En(),f=pt();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(Zv(i,a,t.documentUpdates).next(d=>{c=d.qs,f=d.Qs})),!r.isEqual(st.min())){const d=n.Ti.getLastRemoteSnapshotVersion(i).next(m=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(d)}return D.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,f)).next(()=>c)}).then(i=>(n.xs=s,i))}function Zv(e,t,n){let r=pt(),s=pt();return n.forEach(i=>r=r.add(i)),t.getEntries(e,r).next(i=>{let a=En();return n.forEach((l,c)=>{const f=i.get(l);c.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(st.min())?(t.removeEntry(l,c.readTime),a=a.insert(l,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(c),a=a.insert(l,c)):G(nl,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",c.version)}),{qs:a,Qs:s}})}function tE(e,t){const n=dt(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,t).next(i=>i?(s=i,D.resolve(s)):n.Ti.allocateTargetId(r).next(a=>(s=new un(t,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(t,r.targetId)),r})}async function ga(e,t,n){const r=dt(e),s=r.xs.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Tr(a))throw a;G(nl,`Failed to update sequence numbers for target ${t}: ${a}`)}r.xs=r.xs.remove(t),r.Os.delete(s.target)}function wc(e,t,n){const r=dt(e);let s=st.min(),i=pt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,f,d){const m=dt(c),E=m.Os.get(d);return E!==void 0?D.resolve(m.xs.get(E)):m.Ti.getTargetData(f,d)}(r,a,Ne(t)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.Ms.getDocumentsMatchingQuery(a,t,n?s:st.min(),n?i:pt())).next(l=>(eE(r,zy(t),l),{documents:l,$s:i})))}function eE(e,t,n){let r=e.Ns.get(t)||st.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),e.Ns.set(t,r)}class Ic{constructor(){this.activeTargetIds=Xy()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class nE{constructor(){this.xo=new Ic,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,n,r){this.Oo[t]=n}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new Ic,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac="ConnectivityMonitor";class bc{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){G(Ac,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){G(Ac,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gs=null;function _a(){return Gs===null?Gs=function(){return 268435456+Math.round(2147483648*Math.random())}():Gs++,"0x"+Gs.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo="RestConnection",sE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class iE{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+t.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===Ii?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(t,n,r,s,i){const a=_a(),l=this.jo(t,n.toUriEncodedString());G(Lo,`Sending RPC '${t}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,s,i);const{host:f}=new URL(l),d=qa(f);return this.Jo(t,l,c,r,d).then(m=>(G(Lo,`Received RPC '${t}' ${a}: `,m),m),m=>{throw fr(Lo,`RPC '${t}' ${a} failed with error: `,m,"url: ",l,"request:",r),m})}Yo(t,n,r,s,i,a){return this.zo(t,n,r,s,i)}Ho(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Er}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>t[i]=s),r&&r.headers.forEach((s,i)=>t[i]=s)}jo(t,n){const r=sE[t];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="WebChannelConnection";class aE extends iE{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,s,i){const a=_a();return new Promise((l,c)=>{const f=new pf;f.setWithCredentials(!0),f.listenOnce(mf.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case si.NO_ERROR:const m=f.getResponseJson();G(Jt,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(m)),l(m);break;case si.TIMEOUT:G(Jt,`RPC '${t}' ${a} timed out`),c(new tt(q.DEADLINE_EXCEEDED,"Request time out"));break;case si.HTTP_ERROR:const E=f.getStatus();if(G(Jt,`RPC '${t}' ${a} failed with status:`,E,"response text:",f.getResponseText()),E>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);const x=S==null?void 0:S.error;if(x&&x.status&&x.message){const V=function(M){const W=M.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(W)>=0?W:q.UNKNOWN}(x.status);c(new tt(V,x.message))}else c(new tt(q.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new tt(q.UNAVAILABLE,"Connection failed."));break;default:it(9055,{h_:t,streamId:a,P_:f.getLastErrorCode(),T_:f.getLastError()})}}finally{G(Jt,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(s);G(Jt,`RPC '${t}' ${a} sending request:`,s),f.send(n,"POST",d,r,15)})}I_(t,n,r){const s=_a(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=yf(),l=_f(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=i.join("");G(Jt,`Creating RPC '${t}' stream ${s}: ${d}`,c);const m=a.createWebChannel(d,c);this.E_(m);let E=!1,S=!1;const x=new oE({Zo:O=>{S?G(Jt,`Not sending because RPC '${t}' stream ${s} is closed:`,O):(E||(G(Jt,`Opening RPC '${t}' stream ${s} transport.`),m.open(),E=!0),G(Jt,`RPC '${t}' stream ${s} sending:`,O),m.send(O))},Xo:()=>m.close()}),V=(O,M,W)=>{O.listen(M,Q=>{try{W(Q)}catch(K){setTimeout(()=>{throw K},0)}})};return V(m,Wr.EventType.OPEN,()=>{S||(G(Jt,`RPC '${t}' stream ${s} transport opened.`),x.__())}),V(m,Wr.EventType.CLOSE,()=>{S||(S=!0,G(Jt,`RPC '${t}' stream ${s} transport closed`),x.u_(),this.d_(m))}),V(m,Wr.EventType.ERROR,O=>{S||(S=!0,fr(Jt,`RPC '${t}' stream ${s} transport errored. Name:`,O.name,"Message:",O.message),x.u_(new tt(q.UNAVAILABLE,"The operation could not be completed")))}),V(m,Wr.EventType.MESSAGE,O=>{var M;if(!S){const W=O.data[0];St(!!W,16349);const Q=W,K=(Q==null?void 0:Q.error)||((M=Q[0])===null||M===void 0?void 0:M.error);if(K){G(Jt,`RPC '${t}' stream ${s} received error:`,K);const J=K.status;let lt=function(v){const w=Dt[v];if(w!==void 0)return Hf(w)}(J),I=K.message;lt===void 0&&(lt=q.INTERNAL,I="Unknown error status: "+J+" with message "+K.message),S=!0,x.u_(new tt(lt,I)),m.close()}else G(Jt,`RPC '${t}' stream ${s} received:`,W),x.c_(W)}}),V(l,gf.STAT_EVENT,O=>{O.stat===ra.PROXY?G(Jt,`RPC '${t}' stream ${s} detected buffering proxy`):O.stat===ra.NOPROXY&&G(Jt,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.a_()},0),x}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(n=>n===t)}}function Fo(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(e){return new pv(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(t,n,r=1e3,s=1.5,i=6e4){this.xi=t,this.timerId=n,this.A_=r,this.R_=s,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc="PersistentStream";class lE{constructor(t,n,r,s,i,a,l,c){this.xi=t,this.S_=r,this.D_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new sd(t,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(Ye(n.toString()),Ye("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(n)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{t(()=>{const s=new tt(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(t,n){const r=this.G_(this.v_);this.stream=this.H_(t,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return G(Cc,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return n=>{this.xi.enqueueAndForget(()=>this.v_===t?n():(G(Cc,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uE extends lE{constructor(t,n,r,s,i,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}H_(t,n){return this.connection.I_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const n=vv(this.serializer,t),r=function(i){if(!("targetChange"in i))return st.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?st.min():a.readTime?lr(a.readTime):st.min()}(t);return this.listener.Y_(n,r)}Z_(t){const n={};n.database=yc(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=ca(c)?{documents:Ev(i,c)}:{query:Tv(i,c).gt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=gv(i,a.resumeToken);const f=pa(i,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(st.min())>0){l.readTime=mv(i,a.snapshotVersion.toTimestamp());const f=pa(i,a.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,t);const r=Iv(this.serializer,t);r&&(n.labels=r),this.Q_(n)}X_(t){const n={};n.database=yc(this.serializer),n.removeTarget=t,this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{}class hE extends cE{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new tt(q.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.zo(t,ma(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new tt(q.UNKNOWN,i.toString())})}Yo(t,n,r,s,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Yo(t,ma(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new tt(q.UNKNOWN,a.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class fE{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Ye(n),this.ua=!1):G("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r="RemoteStore";class dE{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(a=>{r.enqueueAndForget(async()=>{Is(this)&&(G(_r,"Restarting streams for network reachability change."),await async function(c){const f=dt(c);f.da.add(4),await ws(f),f.Va.set("Unknown"),f.da.delete(4),await Zi(f)}(this))})}),this.Va=new fE(r,s)}}async function Zi(e){if(Is(e))for(const t of e.Aa)await t(!0)}async function ws(e){for(const t of e.Aa)await t(!1)}function id(e,t){const n=dt(e);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),ol(n)?il(n):wr(n).N_()&&sl(n,t))}function rl(e,t){const n=dt(e),r=wr(n);n.Ea.delete(t),r.N_()&&od(n,t),n.Ea.size===0&&(r.N_()?r.k_():Is(n)&&n.Va.set("Unknown"))}function sl(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(st.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}wr(e).Z_(t)}function od(e,t){e.ma.Ke(t),wr(e).X_(t)}function il(e){e.ma=new cv({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),wr(e).start(),e.Va.ca()}function ol(e){return Is(e)&&!wr(e).O_()&&e.Ea.size>0}function Is(e){return dt(e).da.size===0}function ad(e){e.ma=void 0}async function pE(e){e.Va.set("Online")}async function mE(e){e.Ea.forEach((t,n)=>{sl(e,t)})}async function gE(e,t){ad(e),ol(e)?(e.Va.Pa(t),il(e)):e.Va.set("Unknown")}async function _E(e,t,n){if(e.Va.set("Online"),t instanceof Wf&&t.state===2&&t.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ea.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ea.delete(l),s.ma.removeTarget(l))}(e,t)}catch(r){G(_r,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Sc(e,r)}else if(t instanceof ai?e.ma.Xe(t):t instanceof zf?e.ma.ot(t):e.ma.nt(t),!n.isEqual(st.min()))try{const r=await nd(e.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.ma.It(a);return l.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.Ea.get(f);d&&i.Ea.set(f,d.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,f)=>{const d=i.Ea.get(c);if(!d)return;i.Ea.set(c,d.withResumeToken(Kt.EMPTY_BYTE_STRING,d.snapshotVersion)),od(i,c);const m=new un(d.target,c,f,d.sequenceNumber);sl(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(r){G(_r,"Failed to raise snapshot:",r),await Sc(e,r)}}async function Sc(e,t,n){if(!Tr(t))throw t;e.da.add(1),await ws(e),e.Va.set("Offline"),n||(n=()=>nd(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{G(_r,"Retrying IndexedDB access"),await n(),e.da.delete(1),await Zi(e)})}async function Rc(e,t){const n=dt(e);n.asyncQueue.verifyOperationInProgress(),G(_r,"RemoteStore received new credentials");const r=Is(n);n.da.add(3),await ws(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await Zi(n)}async function yE(e,t){const n=dt(e);t?(n.da.delete(2),await Zi(n)):t||(n.da.add(2),await ws(n),n.Va.set("Unknown"))}function wr(e){return e.fa||(e.fa=function(n,r,s){const i=dt(n);return i.oa(),new uE(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{e_:pE.bind(null,e),n_:mE.bind(null,e),i_:gE.bind(null,e),Y_:_E.bind(null,e)}),e.Aa.push(async t=>{t?(e.fa.L_(),ol(e)?il(e):e.Va.set("Unknown")):(await e.fa.stop(),ad(e))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Fn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const a=Date.now()+r,l=new al(t,n,a,s,i);return l.start(r),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new tt(q.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ld(e,t){if(Ye("AsyncQueue",`${t}: ${e}`),Tr(e))return new tt(q.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{static emptySet(t){return new ur(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||rt.comparator(n.key,r.key):(n,r)=>rt.comparator(n.key,r.key),this.keyedMap=Kr(),this.sortedSet=new xt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof ur)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new ur;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(){this.pa=new xt(rt.comparator)}track(t){const n=t.doc.key,r=this.pa.get(n);r?t.type!==0&&r.type===3?this.pa=this.pa.insert(n,t):t.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.pa=this.pa.remove(n):t.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):it(63341,{Vt:t,ya:r}):this.pa=this.pa.insert(n,t)}wa(){const t=[];return this.pa.inorderTraversal((n,r)=>{t.push(r)}),t}}class yr{constructor(t,n,r,s,i,a,l,c,f){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(t,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new yr(t,n,ur.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Gi(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class EE{constructor(){this.queries=Vc(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=dt(n),i=s.queries;s.queries=Vc(),i.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new tt(q.ABORTED,"Firestore shutting down"))}}function Vc(){return new $n(e=>Mf(e),Gi)}async function TE(e,t){const n=dt(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.Da()&&t.va()&&(r=2):(i=new vE,r=t.va()?0:1);try{switch(r){case 0:i.ba=await n.onListen(s,!0);break;case 1:i.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=ld(a,`Initialization of query '${Xn(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,i),i.Sa.push(t),t.Fa(n.onlineState),i.ba&&t.Ma(i.ba)&&ll(n)}async function wE(e,t){const n=dt(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(t);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=t.va()?0:1:!i.Da()&&t.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function IE(e,t){const n=dt(e);let r=!1;for(const s of t){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Ma(s)&&(r=!0);a.ba=s}}r&&ll(n)}function AE(e,t,n){const r=dt(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function ll(e){e.Ca.forEach(t=>{t.next()})}var ya,xc;(xc=ya||(ya={})).xa="default",xc.Cache="cache";class bE{constructor(t,n,r){this.query=t,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new yr(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Na?this.La(t)&&(this.Oa.next(t),n=!0):this.ka(t,this.onlineState)&&(this.qa(t),n=!0),this.Ba=t,n}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),n=!0),n}ka(t,n){if(!t.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}La(t){if(t.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(t){t=yr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==ya.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(t){this.key=t}}class cd{constructor(t){this.key=t}}class CE{constructor(t,n){this.query=t,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=pt(),this.mutatedKeys=pt(),this.Za=kf(t),this.Xa=new ur(this.Za)}get eu(){return this.Ha}tu(t,n){const r=n?n.nu:new Pc,s=n?n.Xa:this.Xa;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((d,m)=>{const E=s.get(d),S=Qi(this.query,m)?m:null,x=!!E&&this.mutatedKeys.has(E.key),V=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let O=!1;E&&S?E.data.isEqual(S.data)?x!==V&&(r.track({type:3,doc:S}),O=!0):this.ru(E,S)||(r.track({type:2,doc:S}),O=!0,(c&&this.Za(S,c)>0||f&&this.Za(S,f)<0)&&(l=!0)):!E&&S?(r.track({type:0,doc:S}),O=!0):E&&!S&&(r.track({type:1,doc:E}),O=!0,(c||f)&&(l=!0)),O&&(S?(a=a.add(S),i=V?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Xa:a,nu:r,Cs:l,mutatedKeys:i}}ru(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const a=t.nu.wa();a.sort((d,m)=>function(S,x){const V=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it(20277,{Vt:O})}};return V(S)-V(x)}(d.type,m.type)||this.Za(d.doc,m.doc)),this.iu(r),s=s!=null&&s;const l=n&&!s?this.su():[],c=this.Ya.size===0&&this.current&&!s?1:0,f=c!==this.Ja;return this.Ja=c,a.length!==0||f?{snapshot:new yr(this.query,t.Xa,i,a,t.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:l}:{ou:l}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Pc,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=pt(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return t.forEach(r=>{this.Ya.has(r)||n.push(new cd(r))}),this.Ya.forEach(r=>{t.has(r)||n.push(new ud(r))}),n}au(t){this.Ha=t.$s,this.Ya=pt();const n=this.tu(t.documents);return this.applyChanges(n,!0)}uu(){return yr.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const ul="SyncEngine";class SE{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class RE{constructor(t){this.key=t,this.cu=!1}}class PE{constructor(t,n,r,s,i,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.lu={},this.hu=new $n(l=>Mf(l),Gi),this.Pu=new Map,this.Tu=new Set,this.Iu=new xt(rt.comparator),this.Eu=new Map,this.du=new Za,this.Au={},this.Ru=new Map,this.Vu=gr.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function VE(e,t,n=!0){const r=md(e);let s;const i=r.hu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.uu()):s=await hd(r,t,n,!0),s}async function xE(e,t){const n=md(e);await hd(n,t,!0,!1)}async function hd(e,t,n,r){const s=await tE(e.localStore,Ne(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await DE(e,t,i,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&id(e.remoteStore,s),l}async function DE(e,t,n,r,s){e.fu=(m,E,S)=>async function(V,O,M,W){let Q=O.view.tu(M);Q.Cs&&(Q=await wc(V.localStore,O.query,!1).then(({documents:I})=>O.view.tu(I,Q)));const K=W&&W.targetChanges.get(O.targetId),J=W&&W.targetMismatches.get(O.targetId)!=null,lt=O.view.applyChanges(Q,V.isPrimaryClient,K,J);return Oc(V,O.targetId,lt.ou),lt.snapshot}(e,m,E,S);const i=await wc(e.localStore,t,!0),a=new CE(t,i.$s),l=a.tu(i.documents),c=Ts.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),f=a.applyChanges(l,e.isPrimaryClient,c);Oc(e,n,f.ou);const d=new SE(t,n,a);return e.hu.set(t,d),e.Pu.has(n)?e.Pu.get(n).push(t):e.Pu.set(n,[t]),f.snapshot}async function OE(e,t,n){const r=dt(e),s=r.hu.get(t),i=r.Pu.get(s.targetId);if(i.length>1)return r.Pu.set(s.targetId,i.filter(a=>!Gi(a,t))),void r.hu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ga(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&rl(r.remoteStore,s.targetId),va(r,s.targetId)}).catch(qi)):(va(r,s.targetId),await ga(r.localStore,s.targetId,!0))}async function NE(e,t){const n=dt(e),r=n.hu.get(t),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),rl(n.remoteStore,r.targetId))}async function fd(e,t){const n=dt(e);try{const r=await Jv(n.localStore,t);t.targetChanges.forEach((s,i)=>{const a=n.Eu.get(i);a&&(St(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.cu=!0:s.modifiedDocuments.size>0?St(a.cu,14607):s.removedDocuments.size>0&&(St(a.cu,42227),a.cu=!1))}),await pd(n,r,t)}catch(r){await qi(r)}}function Dc(e,t,n){const r=dt(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((i,a)=>{const l=a.view.Fa(t);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=dt(a);c.onlineState=l;let f=!1;c.queries.forEach((d,m)=>{for(const E of m.Sa)E.Fa(l)&&(f=!0)}),f&&ll(c)}(r.eventManager,t),s.length&&r.lu.Y_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ME(e,t,n){const r=dt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Eu.get(t),i=s&&s.key;if(i){let a=new xt(rt.comparator);a=a.insert(i,ee.newNoDocument(i,st.min()));const l=pt().add(i),c=new Ji(st.min(),new Map,new xt(ut),a,l);await fd(r,c),r.Iu=r.Iu.remove(i),r.Eu.delete(t),cl(r)}else await ga(r.localStore,t,!1).then(()=>va(r,t,n)).catch(qi)}function va(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Pu.get(t))e.hu.delete(r),n&&e.lu.gu(r,n);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach(r=>{e.du.containsKey(r)||dd(e,r)})}function dd(e,t){e.Tu.delete(t.path.canonicalString());const n=e.Iu.get(t);n!==null&&(rl(e.remoteStore,n),e.Iu=e.Iu.remove(t),e.Eu.delete(n),cl(e))}function Oc(e,t,n){for(const r of n)r instanceof ud?(e.du.addReference(r.key,t),kE(e,r)):r instanceof cd?(G(ul,"Document no longer in limbo: "+r.key),e.du.removeReference(r.key,t),e.du.containsKey(r.key)||dd(e,r.key)):it(19791,{pu:r})}function kE(e,t){const n=t.key,r=n.path.canonicalString();e.Iu.get(n)||e.Tu.has(r)||(G(ul,"New document in limbo: "+n),e.Tu.add(r),cl(e))}function cl(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){const t=e.Tu.values().next().value;e.Tu.delete(t);const n=new rt(Pt.fromString(t)),r=e.Vu.next();e.Eu.set(r,new RE(n)),e.Iu=e.Iu.insert(n,r),id(e.remoteStore,new un(Ne(Nf(n.path)),r,"TargetPurposeLimboResolution",Hi.le))}}async function pd(e,t,n){const r=dt(e),s=[],i=[],a=[];r.hu.isEmpty()||(r.hu.forEach((l,c)=>{a.push(r.fu(c,t,n).then(f=>{var d;if((f||n)&&r.isPrimaryClient){const m=f?!f.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(f){s.push(f);const m=el.Rs(c.targetId,f);i.push(m)}}))}),await Promise.all(a),r.lu.Y_(s),await async function(c,f){const d=dt(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>D.forEach(f,E=>D.forEach(E.ds,S=>d.persistence.referenceDelegate.addReference(m,E.targetId,S)).next(()=>D.forEach(E.As,S=>d.persistence.referenceDelegate.removeReference(m,E.targetId,S)))))}catch(m){if(!Tr(m))throw m;G(nl,"Failed to update sequence numbers: "+m)}for(const m of f){const E=m.targetId;if(!m.fromCache){const S=d.xs.get(E),x=S.snapshotVersion,V=S.withLastLimboFreeSnapshotVersion(x);d.xs=d.xs.insert(E,V)}}}(r.localStore,i))}async function LE(e,t){const n=dt(e);if(!n.currentUser.isEqual(t)){G(ul,"User change. New user:",t.toKey());const r=await ed(n.localStore,t);n.currentUser=t,function(i,a){i.Ru.forEach(l=>{l.forEach(c=>{c.reject(new tt(q.CANCELLED,a))})}),i.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await pd(n,r.ks)}}function FE(e,t){const n=dt(e),r=n.Eu.get(t);if(r&&r.cu)return pt().add(r.key);{let s=pt();const i=n.Pu.get(t);if(!i)return s;for(const a of i){const l=n.hu.get(a);s=s.unionWith(l.view.eu)}return s}}function md(e){const t=dt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=fd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=FE.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ME.bind(null,t),t.lu.Y_=IE.bind(null,t.eventManager),t.lu.gu=AE.bind(null,t.eventManager),t}class Pi{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=rd(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,n){return null}Cu(t,n){return null}Du(t){return Xv(this.persistence,new Gv,t.initialUser,this.serializer)}Su(t){return new td(tl.fi,this.serializer)}bu(t){return new nE}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pi.provider={build:()=>new Pi};class BE extends Pi{constructor(t){super(),this.cacheSizeBytes=t}vu(t,n){St(this.persistence.referenceDelegate instanceof Ri,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Ov(r,t.asyncQueue,n)}Su(t){const n=this.cacheSizeBytes!==void 0?pe.withCacheSize(this.cacheSizeBytes):pe.DEFAULT;return new td(r=>Ri.fi(r,n),this.serializer)}}class Ea{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Dc(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=LE.bind(null,this.syncEngine),await yE(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new EE}()}createDatastore(t){const n=rd(t.databaseInfo.databaseId),r=function(i){return new aE(i)}(t.databaseInfo);return function(i,a,l,c){return new hE(i,a,l,c)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,s,i,a,l){return new dE(r,s,i,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>Dc(this.syncEngine,n,0),function(){return bc.C()?new bc:new rE}())}createSyncEngine(t,n){return function(s,i,a,l,c,f,d){const m=new PE(s,i,a,l,c,f);return d&&(m.mu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(s){const i=dt(s);G(_r,"RemoteStore shutting down."),i.da.add(5),await ws(i),i.Ra.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ea.provider={build:()=>new Ea};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):Ye("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn="FirestoreClient";class jE{constructor(t,n,r,s,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Zt.UNAUTHENTICATED,this.clientId=fy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{G(Tn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(G(Tn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Fn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=ld(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Bo(e,t){e.asyncQueue.verifyOperationInProgress(),G(Tn,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async s=>{r.isEqual(s)||(await ed(t.localStore,s),r=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Nc(e,t){e.asyncQueue.verifyOperationInProgress();const n=await $E(e);G(Tn,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Rc(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,s)=>Rc(t.remoteStore,s)),e._onlineComponents=t}async function $E(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){G(Tn,"Using user provided OfflineComponentProvider");try{await Bo(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===q.FAILED_PRECONDITION||s.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;fr("Error using user provided cache. Falling back to memory cache: "+n),await Bo(e,new Pi)}}else G(Tn,"Using default OfflineComponentProvider"),await Bo(e,new BE(void 0));return e._offlineComponents}async function qE(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(G(Tn,"Using user provided OnlineComponentProvider"),await Nc(e,e._uninitializedComponentsProvider._online)):(G(Tn,"Using default OnlineComponentProvider"),await Nc(e,new Ea))),e._onlineComponents}async function HE(e){const t=await qE(e),n=t.eventManager;return n.onListen=VE.bind(null,t.syncEngine),n.onUnlisten=OE.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=xE.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=NE.bind(null,t.syncEngine),n}function zE(e,t,n={}){const r=new Fn;return e.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,f){const d=new UE({next:E=>{d.xu(),a.enqueueAndForget(()=>wE(i,m)),E.fromCache&&c.source==="server"?f.reject(new tt(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(E)},error:E=>f.reject(E)}),m=new bE(l,d,{includeMetadataChanges:!0,Qa:!0});return TE(i,m)}(await HE(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(e,t,n){if(!n)throw new tt(q.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function KE(e,t,n,r){if(t===!0&&r===!0)throw new tt(q.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function kc(e){if(rt.isDocumentKey(e))throw new tt(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function GE(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":it(12329,{type:typeof e})}function Ta(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new tt(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=GE(e);throw new tt(q.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d="firestore.googleapis.com",Lc=!0;class Fc{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new tt(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_d,this.ssl=Lc}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:Lc;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Zf;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<xv)throw new tt(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}KE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gd((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new tt(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new tt(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new tt(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class hl{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fc({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new tt(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new tt(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fc(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new iy;switch(r.type){case"firstParty":return new uy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new tt(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Mc.get(n);r&&(G("ComponentProvider","Removing Datastore"),Mc.delete(n),r.terminate())}(this),Promise.resolve()}}function QE(e,t,n,r={}){var s;e=Ta(e,hl);const i=qa(t),a=e._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),c=`${t}:${n}`;i&&(xg(`https://${c}`),Mg("Firestore",!0)),a.host!==_d&&a.host!==c&&fr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},a),{host:c,ssl:i,emulatorOptions:r});if(!Ei(f,l)&&(e._setSettings(f),r.mockUserToken)){let d,m;if(typeof r.mockUserToken=="string")d=r.mockUserToken,m=Zt.MOCK_USER;else{d=Dg(r.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new tt(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Zt(E)}e._authCredentials=new oy(new Ef(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new to(this.firestore,t,this._query)}}class Ir{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ir(this.firestore,t,this._key)}}class cr extends to{constructor(t,n,r){super(t,n,Nf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ir(this.firestore,null,new rt(t))}withConverter(t){return new cr(this.firestore,t,this._path)}}function Qs(e,t,...n){if(e=Hg(e),WE("collection","path",t),e instanceof hl){const r=Pt.fromString(t,...n);return kc(r),new cr(e,null,r)}{if(!(e instanceof Ir||e instanceof cr))throw new tt(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Pt.fromString(t,...n));return kc(r),new cr(e.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc="AsyncQueue";class Uc{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new sd(this,"async_queue_retry"),this.rc=()=>{const r=Fo();r&&G(Bc,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=t;const n=Fo();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const n=Fo();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Fn;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!Tr(t))throw t;G(Bc,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const n=this.sc.then(()=>(this.ec=!0,t().catch(r=>{throw this.Xu=r,this.ec=!1,Ye("INTERNAL UNHANDLED ERROR: ",jc(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(t,n,r){this.oc(),this.nc.indexOf(t)>-1&&(n=0);const s=al.createAndSchedule(this,t,n,r,i=>this.uc(i));return this.Zu.push(s),s}oc(){this.Xu&&it(47125,{cc:jc(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const n of this.Zu)if(n.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const n=this.Zu.indexOf(t);this.Zu.splice(n,1)}}function jc(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class yd extends hl{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=new Uc,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Uc(t),this._firestoreClient=void 0,await t}}}function YE(e,t){const n=typeof e=="object"?e:W_(),r=typeof e=="string"?e:Ii,s=j_(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Pg("firestore");i&&QE(s,...i)}return s}function XE(e){if(e._terminated)throw new tt(q.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||JE(e),e._firestoreClient}function JE(e){var t,n,r;const s=e._freezeSettings(),i=function(l,c,f,d){return new Cy(l,c,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,gd(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new jE(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Vi(Kt.fromBase64String(t))}catch(n){throw new tt(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Vi(Kt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new tt(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new le(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new tt(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new tt(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ut(this._lat,t._lat)||ut(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,t._values)}}const eT=new RegExp("[~\\*/\\[\\]]");function nT(e,t,n){if(t.search(eT)>=0)throw $c(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e);try{return new vd(...t.split("."))._internalPath}catch{throw $c(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e)}}function $c(e,t,n,r,s){let i=`Function ${t}() called with invalid data`;i+=". ";let a="";return new tt(q.INVALID_ARGUMENT,i+e+a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ir(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new rT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Td("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class rT extends Ed{data(){return super.data()}}function Td(e,t){return typeof t=="string"?nT(e,t):t instanceof vd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new tt(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iT{convertValue(t,n="none"){switch(vn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Vt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(yn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw it(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Es(t,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(t){var n,r,s;const i=(s=(r=(n=t.fields)===null||n===void 0?void 0:n[oa].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Vt(a.doubleValue));return new tT(i)}convertGeoPoint(t){return new ZE(Vt(t.latitude),Vt(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Wi(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ds(t));default:return null}}convertTimestamp(t){const n=_n(t);return new ce(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Pt.fromString(t);St(Jf(r),9688,{name:t});const s=new ps(r.get(1),r.get(3)),i=new rt(r.popFirst(5));return s.isEqual(n)||Ye(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class oT extends Ed{constructor(t,n,r,s,i,a){super(t,n,r,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new li(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Td("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class li extends oT{data(t={}){return super.data(t)}}class aT{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ys(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new li(this._firestore,this._userDataWriter,r.key,r,new Ys(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new tt(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new li(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ys(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new li(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ys(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,d=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:lT(l.type),doc:c,oldIndex:f,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function lT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it(61501,{type:e})}}class uT extends iT{constructor(t){super(),this.firestore=t}convertBytes(t){return new Vi(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ir(this.firestore,null,n)}}function Xs(e){e=Ta(e,to);const t=Ta(e.firestore,yd),n=XE(t),r=new uT(t);return sT(e._query),zE(n,e._query).then(s=>new aT(t,r,e,s))}(function(t,n=!0){(function(s){Er=s})(z_),wi(new cs("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new yd(new ay(r.getProvider("auth-internal")),new cy(a,r.getProvider("app-check-internal")),function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new tt(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ps(f.options.projectId,d)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),ar(Wu,Ku,t),ar(Wu,Ku,"esm2017")})();const cT={apiKey:"AIzaSyDxxyyeYpqhyUHQF7fKkLJcICYoXDWvdbg",authDomain:"ecosort-6ab5c.firebaseapp.com",projectId:"ecosort-6ab5c",storageBucket:"ecosort-6ab5c.firebasestorage.app",messagingSenderId:"591486107501",appId:"1:591486107501:web:4ece31d87803835c4ea464",measurementId:"G-ST3ZXT65W0"},hT=cf(cT),Js=YE(hT),wd=6048e5,fT=864e5,qc=Symbol.for("constructDateFrom");function wn(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&qc in e?e[qc](t):e instanceof Date?new e.constructor(t):new Date(t)}function Ce(e,t){return wn(t||e,e)}let dT={};function eo(){return dT}function gs(e,t){var l,c,f,d;const n=eo(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(f=n.locale)==null?void 0:f.options)==null?void 0:d.weekStartsOn)??0,s=Ce(e,t==null?void 0:t.in),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function xi(e,t){return gs(e,{...t,weekStartsOn:1})}function Id(e,t){const n=Ce(e,t==null?void 0:t.in),r=n.getFullYear(),s=wn(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=xi(s),a=wn(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const l=xi(a);return n.getTime()>=i.getTime()?r+1:n.getTime()>=l.getTime()?r:r-1}function Hc(e){const t=Ce(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function pT(e,...t){const n=wn.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function zc(e,t){const n=Ce(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function mT(e,t,n){const[r,s]=pT(n==null?void 0:n.in,e,t),i=zc(r),a=zc(s),l=+i-Hc(i),c=+a-Hc(a);return Math.round((l-c)/fT)}function gT(e,t){const n=Id(e,t),r=wn(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),xi(r)}function _T(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function yT(e){return!(!_T(e)&&typeof e!="number"||isNaN(+Ce(e)))}function vT(e,t){const n=Ce(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const ET={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},TT=(e,t,n)=>{let r;const s=ET[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Uo(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const wT={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},IT={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},AT={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},bT={date:Uo({formats:wT,defaultWidth:"full"}),time:Uo({formats:IT,defaultWidth:"full"}),dateTime:Uo({formats:AT,defaultWidth:"full"})},CT={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ST=(e,t,n,r)=>CT[e];function $r(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):a;s=e.formattingValues[l]||e.formattingValues[a]}else{const a=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[l]||e.values[a]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const RT={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},PT={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},VT={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},xT={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},DT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},OT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},NT=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},MT={ordinalNumber:NT,era:$r({values:RT,defaultWidth:"wide"}),quarter:$r({values:PT,defaultWidth:"wide",argumentCallback:e=>e-1}),month:$r({values:VT,defaultWidth:"wide"}),day:$r({values:xT,defaultWidth:"wide"}),dayPeriod:$r({values:DT,defaultWidth:"wide",formattingValues:OT,defaultFormattingWidth:"wide"})};function qr(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const a=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?LT(l,m=>m.test(a)):kT(l,m=>m.test(a));let f;f=e.valueCallback?e.valueCallback(c):c,f=n.valueCallback?n.valueCallback(f):f;const d=t.slice(a.length);return{value:f,rest:d}}}function kT(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function LT(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function FT(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],i=t.match(e.parsePattern);if(!i)return null;let a=e.valueCallback?e.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;const l=t.slice(s.length);return{value:a,rest:l}}}const BT=/^(\d+)(th|st|nd|rd)?/i,UT=/\d+/i,jT={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},$T={any:[/^b/i,/^(a|c)/i]},qT={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},HT={any:[/1/i,/2/i,/3/i,/4/i]},zT={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},WT={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},KT={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},GT={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},QT={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},YT={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},XT={ordinalNumber:FT({matchPattern:BT,parsePattern:UT,valueCallback:e=>parseInt(e,10)}),era:qr({matchPatterns:jT,defaultMatchWidth:"wide",parsePatterns:$T,defaultParseWidth:"any"}),quarter:qr({matchPatterns:qT,defaultMatchWidth:"wide",parsePatterns:HT,defaultParseWidth:"any",valueCallback:e=>e+1}),month:qr({matchPatterns:zT,defaultMatchWidth:"wide",parsePatterns:WT,defaultParseWidth:"any"}),day:qr({matchPatterns:KT,defaultMatchWidth:"wide",parsePatterns:GT,defaultParseWidth:"any"}),dayPeriod:qr({matchPatterns:QT,defaultMatchWidth:"any",parsePatterns:YT,defaultParseWidth:"any"})},JT={code:"en-US",formatDistance:TT,formatLong:bT,formatRelative:ST,localize:MT,match:XT,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ZT(e,t){const n=Ce(e,t==null?void 0:t.in);return mT(n,vT(n))+1}function tw(e,t){const n=Ce(e,t==null?void 0:t.in),r=+xi(n)-+gT(n);return Math.round(r/wd)+1}function Ad(e,t){var d,m,E,S;const n=Ce(e,t==null?void 0:t.in),r=n.getFullYear(),s=eo(),i=(t==null?void 0:t.firstWeekContainsDate)??((m=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:m.firstWeekContainsDate)??s.firstWeekContainsDate??((S=(E=s.locale)==null?void 0:E.options)==null?void 0:S.firstWeekContainsDate)??1,a=wn((t==null?void 0:t.in)||e,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const l=gs(a,t),c=wn((t==null?void 0:t.in)||e,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const f=gs(c,t);return+n>=+l?r+1:+n>=+f?r:r-1}function ew(e,t){var l,c,f,d;const n=eo(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(f=n.locale)==null?void 0:f.options)==null?void 0:d.firstWeekContainsDate)??1,s=Ad(e,t),i=wn((t==null?void 0:t.in)||e,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),gs(i,t)}function nw(e,t){const n=Ce(e,t==null?void 0:t.in),r=+gs(n,t)-+ew(n,t);return Math.round(r/wd)+1}function Et(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const sn={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Et(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Et(n+1,2)},d(e,t){return Et(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Et(e.getHours()%12||12,t.length)},H(e,t){return Et(e.getHours(),t.length)},m(e,t){return Et(e.getMinutes(),t.length)},s(e,t){return Et(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Et(s,t.length)}},Gn={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Wc={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return sn.y(e,t)},Y:function(e,t,n,r){const s=Ad(e,r),i=s>0?s:1-s;if(t==="YY"){const a=i%100;return Et(a,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):Et(i,t.length)},R:function(e,t){const n=Id(e);return Et(n,t.length)},u:function(e,t){const n=e.getFullYear();return Et(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Et(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Et(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return sn.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Et(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=nw(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):Et(s,t.length)},I:function(e,t,n){const r=tw(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Et(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):sn.d(e,t)},D:function(e,t,n){const r=ZT(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Et(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Et(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Et(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return Et(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=Gn.noon:r===0?s=Gn.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=Gn.evening:r>=12?s=Gn.afternoon:r>=4?s=Gn.morning:s=Gn.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return sn.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):sn.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Et(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Et(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):sn.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):sn.s(e,t)},S:function(e,t){return sn.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return Gc(r);case"XXXX":case"XX":return Nn(r);case"XXXXX":case"XXX":default:return Nn(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return Gc(r);case"xxxx":case"xx":return Nn(r);case"xxxxx":case"xxx":default:return Nn(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Kc(r,":");case"OOOO":default:return"GMT"+Nn(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Kc(r,":");case"zzzz":default:return"GMT"+Nn(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return Et(r,t.length)},T:function(e,t,n){return Et(+e,t.length)}};function Kc(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+t+Et(i,2)}function Gc(e,t){return e%60===0?(e>0?"-":"+")+Et(Math.abs(e)/60,2):Nn(e,t)}function Nn(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Et(Math.trunc(r/60),2),i=Et(r%60,2);return n+s+t+i}const Qc=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},bd=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},rw=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Qc(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",Qc(r,t)).replace("{{time}}",bd(s,t))},sw={p:bd,P:rw},iw=/^D+$/,ow=/^Y+$/,aw=["D","DD","YY","YYYY"];function lw(e){return iw.test(e)}function uw(e){return ow.test(e)}function cw(e,t,n){const r=hw(e,t,n);if(console.warn(r),aw.includes(e))throw new RangeError(r)}function hw(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const fw=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,dw=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,pw=/^'([^]*?)'?$/,mw=/''/g,gw=/[a-zA-Z]/;function _w(e,t,n){var d,m,E,S;const r=eo(),s=r.locale??JT,i=r.firstWeekContainsDate??((m=(d=r.locale)==null?void 0:d.options)==null?void 0:m.firstWeekContainsDate)??1,a=r.weekStartsOn??((S=(E=r.locale)==null?void 0:E.options)==null?void 0:S.weekStartsOn)??0,l=Ce(e,n==null?void 0:n.in);if(!yT(l))throw new RangeError("Invalid time value");let c=t.match(dw).map(x=>{const V=x[0];if(V==="p"||V==="P"){const O=sw[V];return O(x,s.formatLong)}return x}).join("").match(fw).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const V=x[0];if(V==="'")return{isToken:!1,value:yw(x)};if(Wc[V])return{isToken:!0,value:x};if(V.match(gw))throw new RangeError("Format string contains an unescaped latin alphabet character `"+V+"`");return{isToken:!1,value:x}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const f={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return c.map(x=>{if(!x.isToken)return x.value;const V=x.value;(uw(V)||lw(V))&&cw(V,t,String(e));const O=Wc[V[0]];return O(l,V,s.localize,f)}).join("")}function yw(e){const t=e.match(pw);return t?t[1].replace(mw,"'"):e}const Cd=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},vw={class:"table-section"},Ew={class:"table-wrapper"},Tw={__name:"TableSection",props:["title"],setup(e){return(t,n)=>(qt(),fe("section",vw,[$("h3",null,wt(e.title),1),$("div",Ew,[nm(t.$slots,"default",{},void 0)])]))}},Zs=Cd(Tw,[["__scopeId","data-v-8cf6f284"]]),ww={class:"dashboard-container"},Iw={class:"filters"},Aw=["value"],bw=["onClick"],Cw={key:0,class:"modal"},Sw={class:"modal-content"},Rw=["src"],Pw={__name:"studentTable",setup(e){const t=rn([]),n=rn({name:"",classLevel:"",date:""}),r=rn([]),s=rn([]),i=rn([]),a=rn([]),l=V=>{const O=s.value.find(M=>M.id===V);return O?O.fullName:"-"};Ph(async()=>{const[V,O,M,W]=await Promise.all([Xs(Qs(Js,"users")),Xs(Qs(Js,"trash_records")),Xs(Qs(Js,"redemptions")),Xs(Qs(Js,"profile_changes"))]);s.value=V.docs.map(J=>({id:J.id,...J.data()})),i.value=M.docs.map(J=>({id:J.id,...J.data()})),a.value=W.docs.map(J=>({id:J.id,...J.data()}));const Q=Object.fromEntries(s.value.map(J=>[J.id,J])),K=Object.fromEntries(i.value.map(J=>[J.studentId,J]));t.value=O.docs.map(J=>{const lt=J.data(),I=Q[lt.userId]||{},g=K[lt.userId]||{},v=lt.date instanceof ce?lt.date.toDate():new Date(lt.date);return{userId:lt.userId,fullName:I.fullName||"-",classLevel:I.classLevel||"-",trashType:lt.trashType||"-",amount:lt.amount||0,pointsEarned:(lt.amount||0)*(lt.pointsPerItem||0),rewardName:g.rewardName||"-",pointsUsed:g.pointsUsed||"-",imageBase64:lt.imageBase64?`data:image/jpeg;base64,${lt.imageBase64}`:"",date:v}}),r.value=[...new Set(t.value.map(J=>J.classLevel).filter(J=>J&&J!=="-"))]});const f=V=>{if(!V)return"-";try{return _w(V instanceof Date?V:new Date(V),"yyyy-MM-dd")}catch{return"-"}},d=tf(()=>t.value.filter(V=>V.fullName.toLowerCase().includes(n.value.name.toLowerCase())&&(!n.value.classLevel||V.classLevel===n.value.classLevel)&&(!n.value.date||f(V.date)===n.value.date))),m=rn(!1),E=rn(""),S=V=>{V?(E.value=V,m.value=!0):alert("ไม่มีรูปหลักฐาน")},x=()=>{m.value=!1,E.value=""};return(V,O)=>(qt(),fe("div",ww,[O[8]||(O[8]=$("header",{class:"header"},[$("img",{src:yg,alt:"Logo",class:"logo"}),$("h2",{class:"title"},[$("span",{class:"material-symbols-outlined icon"},"recycling"),Xh(" ข้อมูลการเก็บขยะและแลกของรางวัล ")])],-1)),$("section",Iw,[Ao($("input",{"onUpdate:modelValue":O[0]||(O[0]=M=>n.value.name=M),type:"text",placeholder:"ค้นหาชื่อ..."},null,512),[[xu,n.value.name]]),Ao($("select",{"onUpdate:modelValue":O[1]||(O[1]=M=>n.value.classLevel=M)},[O[3]||(O[3]=$("option",{value:""},"ทุกชั้น",-1)),(qt(!0),fe(Wt,null,Ur(r.value,M=>(qt(),fe("option",{key:M,value:M},wt(M),9,Aw))),128))],512),[[fg,n.value.classLevel]]),Ao($("input",{type:"date","onUpdate:modelValue":O[2]||(O[2]=M=>n.value.date=M)},null,512),[[xu,n.value.date]])]),ue(Zs,{title:"ข้อมูลการทิ้งขยะ"},{default:Hr(()=>[$("table",null,[O[4]||(O[4]=$("thead",null,[$("tr",null,[$("th",null,"ชื่อ"),$("th",null,"ชั้น"),$("th",null,"ประเภทขยะ"),$("th",null,"หลักฐานการทิ้ง"),$("th",null,"จำนวน"),$("th",null,"แต้มที่ได้"),$("th",null,"ของรางวัล"),$("th",null,"แต้มที่ใช้"),$("th",null,"วันที่")])],-1)),$("tbody",null,[(qt(!0),fe(Wt,null,Ur(d.value,M=>(qt(),fe("tr",{key:M.userId+M.date},[$("td",null,wt(M.fullName),1),$("td",null,wt(M.classLevel),1),$("td",null,wt(M.trashType),1),$("td",null,[$("button",{onClick:W=>S(M.imageBase64)},"ดูรูป",8,bw)]),$("td",null,wt(M.amount),1),$("td",null,wt(M.pointsEarned),1),$("td",null,wt(M.rewardName),1),$("td",null,wt(M.pointsUsed),1),$("td",null,wt(f(M.date)),1)]))),128))])])]),_:1}),ue(Zs,{title:"รายชื่อนักเรียน"},{default:Hr(()=>[$("table",null,[O[5]||(O[5]=$("thead",null,[$("tr",null,[$("th",null,"รหัสนักเรียน"),$("th",null,"ชื่อ-สกุล"),$("th",null,"ชั้น"),$("th",null,"อีเมล"),$("th",null,"เบอร์โทร"),$("th",null,"แต้มสะสม"),$("th",null,"วันสมัคร")])],-1)),$("tbody",null,[(qt(!0),fe(Wt,null,Ur(s.value,M=>{var W,Q;return qt(),fe("tr",{key:M.id},[$("td",null,wt(M.studentId||"-"),1),$("td",null,wt(M.fullName||"-"),1),$("td",null,wt(M.classLevel||"-"),1),$("td",null,wt(M.email||"-"),1),$("td",null,wt(M.phone||"-"),1),$("td",null,wt(M.points||0),1),$("td",null,wt(f(((Q=(W=M.createdAt)==null?void 0:W.toDate)==null?void 0:Q.call(W))||M.createdAt)),1)])}),128))])])]),_:1}),ue(Zs,{title:"ของรางวัลที่แลก"},{default:Hr(()=>[$("table",null,[O[6]||(O[6]=$("thead",null,[$("tr",null,[$("th",null,"นักเรียน"),$("th",null,"ของรางวัล"),$("th",null,"แต้มที่ใช้"),$("th",null,"วันที่แลก")])],-1)),$("tbody",null,[(qt(!0),fe(Wt,null,Ur(i.value,M=>{var W,Q;return qt(),fe("tr",{key:M.id},[$("td",null,wt(l(M.studentId)),1),$("td",null,wt(M.rewardName),1),$("td",null,wt(M.pointsUsed),1),$("td",null,wt(f(((Q=(W=M.timestamp)==null?void 0:W.toDate)==null?void 0:Q.call(W))||M.timestamp)),1)])}),128))])])]),_:1}),ue(Zs,{title:"ประวัติการเปลี่ยนแปลงโปรไฟล์"},{default:Hr(()=>[$("table",null,[O[7]||(O[7]=$("thead",null,[$("tr",null,[$("th",null,"รหัสนักเรียน"),$("th",null,"ชื่อเก่า"),$("th",null,"ชื่อใหม่"),$("th",null,"วันที่เปลี่ยนแปลง")])],-1)),$("tbody",null,[(qt(!0),fe(Wt,null,Ur(a.value,M=>{var W,Q;return qt(),fe("tr",{key:M.id},[$("td",null,wt(l(V.redemption.studentId))+" ("+wt(V.redemption.studentId)+")",1),$("td",null,wt(M.oldFullName),1),$("td",null,wt(M.newFullName),1),$("td",null,wt(f(((Q=(W=M.timestamp)==null?void 0:W.toDate)==null?void 0:Q.call(W))||M.timestamp)),1)])}),128))])])]),_:1}),m.value?(qt(),fe("div",Cw,[$("div",Sw,[$("span",{class:"close",onClick:x},"×"),$("img",{src:E.value,alt:"หลักฐานการทิ้ง"},null,8,Rw)])])):Mm("",!0)]))}},Vw=Cd(Pw,[["__scopeId","data-v-ffeae005"]]),xw={__name:"App",setup(e){return(t,n)=>(qt(),fe("div",null,[ue(Vw)]))}};mg(xw).mount("#app");
